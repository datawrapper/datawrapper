/*! datawrapper 2015-08-21 */
(function(){function a(a,b){return new RegExp("(\\"+a+"|\\r?\\n|\\r|^)(?:"+b+"([^"+b+"]*(?:"+b+'"[^'+b+"]*)*)"+b+"|([^"+b+"\\"+a+"\\r\\n]*))","gi")}var b={};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.dw=b):window.dw=b,b.dataset=function(a,b){function c(a){for(var b=a.name(),c=b,e=1;d.hasOwnProperty(c);)c=b+"."+e++;c!=b&&a.name(c)}var d={},e=a.slice(0);_.each(a,function(a){c(a),d[a.name()]=a}),b=_.extend(b,{});var f={columns:function(){return a},column:function(b){if(_.isString(b)){if(void 0!==d[b])return d[b];throw'No column found with that name: "'+b+'"'}if(!(0>b)){if(void 0!==a[b])return a[b];throw"No column found with that index: "+b}},numColumns:function(){return a.length},numRows:function(){return a[0].length},eachColumn:function(b){_.each(a,b)},hasColumn:function(b){return void 0!==(_.isString(b)?d[b]:a[b])},indexOf:function(b){return f.hasColumn(b)?_.indexOf(a,d[b]):-1},list:function(){return _.range(a[0].length).map(function(b){var c={};return _.each(a,function(a){c[a.name()]=a.val(b)}),c})},toCSV:function(){var b="",c=",",d='"';return _.each(a,function(a,e){var f=a.title();f.indexOf(d)>-1&&f.replace(d,"\\"+d),f.indexOf(c)>-1&&(f=d+f+d),b+=(e>0?c:"")+f}),_.each(_.range(f.numRows()),function(e){b+="\n",_.each(a,function(a,f){var g=""+("date"==a.type()?a.raw(e):a.val(e));g.indexOf(d)>-1&&g.replace(d,"\\"+d),g.indexOf(c)>-1&&(g=d+g+d),b+=(f>0?c:"")+g})}),b},filterColumns:function(b){return a=_.filter(a,function(a){return!b[a.name()]}),_.each(b,function(a,b){a&&d[b]&&delete d[b]}),f},eachRow:function(a){var b;for(b=0;b<f.numRows();b++)a(b);return f},add:function(b){return c(b),a.push(b),d[b.name()]=b,f},reset:function(){return a=e.slice(0),d={},_.each(a,function(a){d[a.name()]=a}),f}};return f},b.column=function(a,c,d){function e(a){if(_.every(c,_.isNumber))return b.column.types.number();if(_.every(c,_.isDate))return b.column.types.date();var d,e=[b.column.types.date(a),b.column.types.number(a),b.column.types.text()],f=c.length,g=.1;return _.each(c,function(a){_.each(e,function(b){b.parse(a)})}),_.every(e,function(a){return a.errors()/f<g&&(d=a),!d}),d}var f=_.map(_.shuffle(_.range(c.length)).slice(0,200),function(a){return c[a]});d=d?b.column.types[d](f):e(f);var g,h,i,j=c.slice(0),k={name:function(){return arguments.length?(a=arguments[0],k):b.utils.purifyHtml(a)},title:function(){return arguments.length?(i=arguments[0],k):b.utils.purifyHtml(i||a)},length:c.length,val:function(a,e){if(!arguments.length)return void 0;var f=e?j:c;return 0>a&&(a+=f.length),d.parse(b.utils.purifyHtml(f[a]))},values:function(a){var e=a?j:c;return e=_.map(e,b.utils.purifyHtml),_.map(e,d.parse)},each:function(a){for(var b=0;b<c.length;b++)a(k.val(b),b)},raw:function(a,d){return arguments.length?2==arguments.length?(c[a]=d,k):b.utils.purifyHtml(c[a]):c},type:function(a){if(a===!0)return d;if(_.isString(a)){if(b.column.types[a])return d=b.column.types[a](f),k;throw"unknown column type: "+a}return d.name()},range:function(){return d.toNum?(g||(g=[Number.MAX_VALUE,-Number.MAX_VALUE],k.each(function(a){a=d.toNum(a),_.isNumber(a)&&!_.isNaN(a)&&(a<g[0]&&(g[0]=a),a>g[1]&&(g[1]=a))}),g[0]=d.fromNum(g[0]),g[1]=d.fromNum(g[1])),g):!1},total:function(){return d.toNum?(h||(h=0,k.each(function(a){h+=d.toNum(a)}),h=d.fromNum(h)),h):!1},filterRows:function(a){return c=[],arguments.length?_.each(a,function(a){c.push(j[a])}):c=j.slice(0),k.length=c.length,g=h=!1,k},toString:function(){return a+" ("+d.name()+")"},indexOf:function(a){return _.find(_.range(c.length),function(b){return k.val(b)==a})}};return k},b.column.types={},b.column.types.text=function(){return{parse:_.identity,errors:function(){return 0},name:function(){return"text"},formatter:function(){return _.identity},isValid:function(){return!0},format:function(){}}},b.column.types.number=function(a){function b(a,b){return 0===a?0:Math.round(b-Math.ceil(Math.log(Math.abs(a))/Math.LN10))}var c,d=0,e={"-.":/^ *[-–—]?[0-9]*(\.[0-9]+)?(e[\+\-][0-9]+)?%? *$/,"-,":/^ *[-–—]?[0-9]*(,[0-9]+)?%? *$/,",.":/^ *[-–—]?[0-9]{1,3}(,[0-9]{3})*(\.[0-9]+)?%? *$/,".,":/^ *[-–—]?[0-9]{1,3}(\.[0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/},f={"-.":"1234.56","-,":"1234,56",",.":"1,234.56",".,":"1.234,56"," .":"1 234.56"," ,":"1 234,56"," .":"1 234.56"," ,":"1 234,56"},g={na:1,"n/a":1,"-":1,":":1},h={},i=["-.",0];a=a||[],_.each(a,function(a){_.each(e,function(b,c){void 0===h[c]&&(h[c]=0),b.test(a)&&(h[c]+=1,h[c]>i[1]&&(i[0]=c,i[1]=h[c]))})}),c=i[0];var j={parse:function(a){if(_.isNumber(a)||_.isUndefined(a)||_.isNull(a))return a;var b=a.replace("%","").replace("–","-").replace("—","-");return"-"!=c[0]&&(b=b.replace(c[0],"")),"."!=c[1]&&(b=b.replace(c[1],".")),isNaN(b)||""===b?(g[b.toLowerCase()]||""===b||d++,a):Number(b)},toNum:function(a){return a},fromNum:function(a){return a},errors:function(){return d},name:function(){return"number"},formatter:function(a){var c=a["number-format"]||"-",d=Number(a["number-divisor"]||0),e=(a["number-append"]||"").replace(/ /g," "),f=(a["number-prepend"]||"").replace(/ /g," ");return function(a,g,h){if(isNaN(a))return a;var i=c;if(0!==d&&"-"==i&&(i="n1"),0!==d&&(a=Number(a)/Math.pow(10,d)),"s"==i.substr(0,1)){var j=+i.substr(1);i="n"+Math.max(0,b(a,j))}return h&&(i="n0"),"-"==i&&(i=a==Math.round(a)?"n0":a==.1*Math.round(10*a)?"n1":"n2"),a=Globalize.format(a,"-"!=i?i:null),g?f+a+e:a}},isValid:function(a){return""===a||g[String(a).toLowerCase()]||_.isNumber(j.parse(a))},ambiguousFormats:function(){var a=[];return _.each(h,function(b,c){b==i[1]&&a.push([c,f[c]])}),a},format:function(a){return arguments.length?(c=a,j):c}};return j},b.column.types.date=function(a){function b(a,b){var c=j[b];return _.isRegExp(c.test)?c.test.test(a):c.test(a,b)}function c(a,b){var c=j[b];return _.isRegExp(c.parse)?a.match(c.parse):c.parse(a,b)}function d(a,b,c){var d=new Date(Date.UTC(a,0,3));return d.setUTCDate(3-d.getUTCDay()+7*(b-1)+parseInt(c,10)),d}function e(a){var b=a.getUTCDay(),c=new Date(a.valueOf());c.setDate(c.getDate()-(b+6)%7+3);var d=c.getUTCFullYear(),e=Math.floor((c.getTime()-new Date(d,0,1,-6))/864e5);return[d,1+Math.floor(e/7),b>0?b:7]}var f,g=0,h={},i=["",0],j={YYYY:{test:/^ *(?:1[7-9]|20)\d{2} *$/,parse:/^ *(\d{4}) *$/,precision:"year"},"YYYY-H":{test:/^ *[12]\d{3}[ \-\/]?[hH][12] *$/,parse:/^ *(\d{4})[ \-\/]?[hH]([12]) *$/,precision:"half"},"H-YYYY":{test:/^ *[hH][12][ \-\/][12]\d{3} *$/,parse:/^ *[hH]([12])[ \-\/](\d{4}) *$/,precision:"half"},"YYYY-Q":{test:/^ *[12]\d{3}[ \-\/]?[qQ][1234] *$/,parse:/^ *(\d{4})[ \-\/]?[qQ]([1234]) *$/,precision:"quarter"},"Q-YYYY":{test:/^ *[qQ]([1234])[ \-\/][12]\d{3} *$/,parse:/^ *[qQ]([1234])[ \-\/](\d{4}) *$/,precision:"quarter"},"YYYY-M":{test:/^ *([12]\d{3}) ?[ \-\/\.mM](0?[1-9]|1[0-2]) *$/,parse:/^ *(\d{4}) ?[ \-\/\.mM](0?[1-9]|1[0-2]) *$/,precision:"month"},"M-YYYY":{test:/^ *(0?[1-9]|1[0-2]) ?[ \-\/\.][12]\d{3} *$/,parse:/^ *(0?[1-9]|1[0-2]) ?[ \-\/\.](\d{4}) *$/,precision:"month"},"YYYY-WW":{test:/^ *[12]\d{3}[ -]?[wW](0?[1-9]|[1-4]\d|5[0-3]) *$/,parse:/^ *(\d{4})[ -]?[wW](0?[1-9]|[1-4]\d|5[0-3]) *$/,precision:"week"},"MM/DD/YYYY":{test:/^ *(0?[1-9]|1[0-2])([\-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2([12]\d{3})$/,parse:/^ *(0?[1-9]|1[0-2])([\-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2(\d{4})$/,precision:"day"},"DD/MM/YYYY":{test:/^ *(0?[1-9]|[1-2]\d|3[01])([\-\.\/ ?])(0?[1-9]|1[0-2])\2([12]\d{3})$/,parse:/^ *(0?[1-9]|[1-2]\d|3[01])([\-\.\/ ?])(0?[1-9]|1[0-2])\2(\d{4})$/,precision:"day"},"YYYY-MM-DD":{test:/^ *([12]\d{3})([\-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01])$/,parse:/^ *(\d{4})([\-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01])$/,precision:"day"},"YYYY-WW-d":{test:/^ *[12]\d{3}[ \-]?[wW](0?[1-9]|[1-4]\d|5[0-3])(?:[ \-]?[1-7]) *$/,parse:/^ *(\d{4})[ \-]?[wW](0?[1-9]|[1-4]\d|5[0-3])(?:[ \-]?([1-7])) *$/,precision:"day"},"MM/DD/YYYY HH:MM":{test:/^ *(0?[1-9]|1[0-2])([-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2([12]\d{3}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,parse:/^ *(0?[1-9]|1[0-2])([-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2(\d{4}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,precision:"day-minutes"},"DD.MM.YYYY HH:MM":{test:/^ *(0?[1-9]|[1-2]\d|3[01])([-\.\/ ?])(0?[1-9]|1[0-2])\2([12]\d{3}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,parse:/^ *(0?[1-9]|[1-2]\d|3[01])([-\.\/ ?])(0?[1-9]|1[0-2])\2(\d{4}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,precision:"day-minutes"},"YYYY-MM-DD HH:MM":{test:/^ *([12]\d{3})([-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01]) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,parse:/^ *(\d{4})([-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01]) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d) *$/,precision:"day-minutes"},"MM/DD/YYYY HH:MM:SS":{test:/^ *(0?[1-9]|1[0-2])([-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2([12]\d{3}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,parse:/^ *(0?[1-9]|1[0-2])([-\/] ?)(0?[1-9]|[1-2]\d|3[01])\2(\d{4}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,precision:"day-seconds"},"DD.MM.YYYY HH:MM:SS":{test:/^ *(0?[1-9]|[1-2]\d|3[01])([-\.\/ ?])(0?[1-9]|1[0-2])\2([12]\d{3}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,parse:/^ *(0?[1-9]|[1-2]\d|3[01])([-\.\/ ?])(0?[1-9]|1[0-2])\2(\d{4}) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,precision:"day-seconds"},"YYYY-MM-DD HH:MM:SS":{test:/^ *([12]\d{3})([-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01]) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,parse:/^ *(\d{4})([-\/\. ?])(0?[1-9]|1[0-2])\2(0?[1-9]|[1-2]\d|3[01]) *[ \-\|] *(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *$/,precision:"day-seconds"}};a=a||[],_.each(j,function(c,d){_.each(a,function(a){void 0===h[d]&&(h[d]=0),b(a,d)&&(h[d]+=1,h[d]>i[1]&&(i[0]=d,i[1]=h[d]))})}),f=i[0];var k={parse:function(a){if(_.isDate(a)||_.isUndefined(a))return a;if(!f||!_.isString(a))return g++,a;var e=c(a,f);if(!e)return g++,a;switch(b(a,f)||g++,f){case"YYYY":return new Date(e[1],0,1);case"YYYY-H":return new Date(e[1],6*(e[2]-1),1);case"H-YYYY":return new Date(e[2],6*(e[1]-1),1);case"YYYY-Q":return new Date(e[1],3*(e[2]-1),1);case"Q-YYYY":return new Date(e[2],3*(e[1]-1),1);case"YYYY-M":return new Date(e[1],e[2]-1,1);case"M-YYYY":return new Date(e[2],e[1]-1,1);case"YYYY-WW":return d(e[1],e[2],1);case"YYYY-WW-d":return d(e[1],e[2],e[3]);case"YYYY-MM-DD":return new Date(e[1],e[3]-1,e[4]);case"DD/MM/YYYY":return new Date(e[4],e[3]-1,e[1]);case"MM/DD/YYYY":return new Date(e[4],e[1]-1,e[3]);case"YYYY-MM-DD HH:MM":return new Date(e[1],e[3]-1,e[4],e[5]||0,e[6]||0,0);case"DD.MM.YYYY HH:MM":return new Date(e[4],e[3]-1,e[1],e[5]||0,e[6]||0,0);case"MM/DD/YYYY HH:MM":return new Date(e[4],e[1]-1,e[3],e[5]||0,e[6]||0,0);case"YYYY-MM-DD HH:MM:SS":return new Date(e[1],e[3]-1,e[4],e[5]||0,e[6]||0,e[7]||0);case"DD.MM.YYYY HH:MM:SS":return new Date(e[4],e[3]-1,e[1],e[5]||0,e[6]||0,e[7]||0);case"MM/DD/YYYY HH:MM:SS":return new Date(e[4],e[1]-1,e[3],e[5]||0,e[6]||0,e[7]||0)}return g++,a},toNum:function(a){return a.getTime()},fromNum:function(a){return new Date(a)},errors:function(){return g},name:function(){return"date"},format:function(a){return arguments.length?(f=a,k):f},precision:function(){return j[f].precision},formatter:function(a){if(!f)return _.identity;var b=Globalize.culture().calendar.patterns.M.replace("MMMM","MMM");switch(j[f].precision){case"year":return function(a){return _.isDate(a)?a.getFullYear():a};case"half":return function(a){return _.isDate(a)?a.getFullYear()+" H"+(a.getMonth()/6+1):a};case"quarter":return function(a){return _.isDate(a)?a.getFullYear()+" Q"+(a.getMonth()/3+1):a};case"month":return function(a){return _.isDate(a)?Globalize.format(a,"MMM yy"):a};case"week":return function(a){return _.isDate(a)?e(a).slice(0,2).join(" W"):a};case"day":return function(a,b){return _.isDate(a)?Globalize.format(a,b?"D":"d"):a};case"day-minutes":return function(a){return _.isDate(a)?Globalize.format(a,b).replace(" ","&nbsp;")+" - "+Globalize.format(a,"t").replace(" ","&nbsp;"):a};case"day-seconds":return function(a){return _.isDate(a)?Globalize.format(a,"T").replace(" ","&nbsp;"):a}}},isValid:function(a){return _.isDate(k.parse(a))},ambiguousFormats:function(){var a=[];return _.each(h,function(b,c){b==i[1]&&a.push([c,c])}),a}};return k},b.datasource={},b.datasource.delimited=function(a){function b(){if(a.url)return $.ajax({url:a.url,method:"GET",dataType:"text"}).then(function(b){return new c(a).parse(b)});if(a.csv){var b=$.Deferred(),d=b.then(function(b){return new c(a).parse(b)});return b.resolve(a.csv),d}throw"you need to provide either an URL or CSV data."}var d={dataset:b};return d};var c=function(b){b=_.extend({delimiter:"auto",quoteChar:'"',skipRows:0,emptyValue:null,transpose:!1,firstRowIsHeader:!0},b),this.__delimiterPatterns=a(b.delimiter,b.quoteChar),this.opts=b};_.extend(c.prototype,{parse:function(c){function d(a,b,c){c=c||",";for(var d,e=[[]],f=null;f=a.exec(b);){var g=f[1];g.length&&g!=c&&e.push([]),d=f[2]?f[2].replace(new RegExp('""',"g"),'"'):f[3],e[e.length-1].push(d)}e[0][0].substr(0,1)==j&&(e[0][0]=e[0][0].substr(1));var h=e.length-1,i=e[h].length-1,k=e[h][i].length-1;return e[h][i].substr(k)==j&&(e[h][i]=e[h][i].substr(0,k)),e}function e(a){var b=a,c=b.length?b.length:0,d=b[0]instanceof Array?b[0].length:0;if(0===d||0===c)return[];var e,f,g=[];for(e=0;d>e;e++)for(g[e]=[],f=0;c>f;f++)g[e][f]=b[f][e];return g}function f(a){var c=[],d={},e=a.length,f=a[0].length,g=h.skipRows,i=[];h.firstRowIsHeader&&(i=a[g],g++);for(var j=0;f>j;j++){var k=_.isString(i[j])?i[j].replace(/^\s+|\s+$/g,""):"",l=""!==k?"":1;for(k=""!==k?k:"X.";void 0!==d[k+l];)l=""===l?1:l+1;c.push({name:k+l,data:[]}),d[k+l]=!0}return _.each(_.range(g,e),function(b){_.each(c,function(c,d){c.data.push(""!==a[b][d]?a[b][d]:h.emptyValue)})}),c=_.map(c,function(a){return b.column(a.name,a.data)}),b.dataset(c)}var g=this,h=this.opts;g.__rawData=c,"auto"==h.delimiter&&(h.delimiter=g.guessDelimiter(c,h.skipRows),g.__delimiterPatterns=a(h.delimiter,h.quoteChar));var i,j="|"!=h.delimiter?"|":"#";return c=j+c.replace(/\s+$/g,"")+j,i=d(this.__delimiterPatterns,c,h.delimiter),h.transpose&&(i=e(i)),f(i)},guessDelimiter:function(b){var c=0,d=-1,e=this,f=["	",";","|",","];return _.each(f,function(f,g){var h=a(f,e.quoteChar),i=b.match(h).length;i>c&&(c=i,d=g)}),f[d]}}),b.utils={minMax:function(a){var b=[Number.MAX_VALUE,-Number.MAX_VALUE];return _.each(a,function(a){b[0]=Math.min(b[0],a.range()[0]),b[1]=Math.max(b[1],a.range()[1])}),b},dateFormat:function(a){function b(a){return function(b){d=!e||b.getMonth()!=e.getMonth(),e=b;for(var c=a.length-1,f=a[c];!f[1](b);)f=a[--c];return f[0](b)}}function c(a){var b=function(b){var c=Globalize.format(b,a);return"htt"!=a?c:c.toLowerCase()};return b}var d=!0,e=!1,f=function(a){return{date:"de"==a?"dd.":"dd",hour:"en"!=a?"H:00":"htt",minute:"de"==a?"H:mm":"h:mm",mm:"de"==a?"d.M.":"MM/dd",mmm:"de"==a?"d.MMM":"MMM dd",mmmm:"de"==a?"d. MMMM":"MMMM dd"}}(Globalize.culture().language);return b([[c("yyyy"),function(){return!0}],[c("MMM"),function(a){return 0!==a.getMonth()}],[c(f.date),function(a){return 1!=a.getDate()}],[c(7>a?f.mm:a>70?f.mmm:f.mmm),function(a){return 1!=a.getDate()&&d}],[c(f.hour),function(a){return a.getHours()}],[c(f.minute),function(a){return a.getMinutes()}],[c(":ss"),function(a){return a.getSeconds()}],[c(".fff"),function(a){return a.getMilliseconds()}]])},longDateFormat:function(a){return function(b){if("date"!=a.type())return b;switch(a.type(!0).precision()){case"year":return b.getFullYear();case"quarter":return b.getFullYear()+" Q"+(b.getMonth()/3+1);case"month":return Globalize.format(b,"MMM yy");case"day":return Globalize.format(b,"MMM d");case"minute":return Globalize.format(b,"t");case"second":return Globalize.format(b,"T")}}},columnNameColumn:function(a){var c=_.map(a,function(a){return a.title()});return b.column("",c)},name:function(a){return _.isFunction(a.name)?a.name():_.isString(a.name)?a.name:a},getMaxChartHeight:function(a){function b(a,b){return"auto"==$(a).css("margin-"+b)?0:+$(a).css("margin-"+b).replace("px","")}var c=0,d=0;$("body > *").each(function(a,e){var f=e.tagName.toLowerCase();"script"==f||"style"==f||"chart"==e.id||$(e).hasClass("tooltip")||$(e).hasClass("qtip")||$(e).hasClass("container")||$(e).hasClass("noscript")||(c+=$(e).outerHeight(!1)),c+=Math.max(b(e,"top"),d),d=b(e,"bottom")}),c+=d;var e=($("#chart").css("margin-top").replace("px",""),$("#chart").css("margin-bottom").replace("px",""),$(window).height()-c-8);return $.support.leadingWhitespace||(e-=15),e-=$("body").css("padding-top").replace("px",""),e-=$("body").css("padding-bottom").replace("px","")},purifyHtml:function(a,c){function d(a,b){return!_.isString(a)||a.indexOf("<")<0?a:(void 0===b&&(b=g),h[b]||(h[b]=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("")),a.replace(f,"").replace(e,function(a,c){return h[b].indexOf("<"+c.toLowerCase()+">")>-1?a:""}))}var e=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,f=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,g="<b><br><br/><i><strong><sup><sub><strike><u><em><tt>",h={};return void 0===c&&(c=g),h[c]=(((c||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),b.utils.purifyHtml=d,d(a,c)},significantDimension:function(a){function c(a){return b.utils.round(a,g)}var d,e,f=[],g=0,h=_.uniq(a);if(1==h.length)return-1*Math.floor(Math.log(h[0])/Math.LN10);_.uniq(_.map(h,c)).length==h.length?(d=function(){return _.uniq(f).length==h.length},e=-1):(d=function(){return _.uniq(f).length<h.length},e=1);var i=100;do f=_.map(h,c),g+=e;while(d()&&i-->0);return 10>i&&console.warn("maximum iteration reached",a,f,g),0>e?g+=2:g--,g},round:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},smartRound:function(a,c){var d=b.utils.significantDimension(a);return d+=c||0,_.map(a,function(a){return b.utils.round(a,d)})},nearest:function(a,b){var c,d=Number.MAX_VALUE;return _.each(a,function(a){var e=Math.abs(a-b);d>e&&(d=e,c=a)}),c},metricSuffix:function(a){switch(a.substr(0,2).toLowerCase()){case"de":return{3:" Tsd.",6:" Mio.",9:" Mrd.",12:" Bio."};case"fr":return{3:" mil",6:" Mio",9:" Mrd"};case"es":return{3:" Mil",6:" millón"};default:return{3:"k",6:"M",9:" bil"}}},magnitudeRange:function(a){var b=Math.round(Math.log(a[0])/Math.LN10),c=Math.round(Math.log(a[1])/Math.LN10);return c-b},logTicks:function(a,b){var c=Math.round(Math.log(a)/Math.LN10),d=Math.round(Math.log(b)/Math.LN10);return _.map(_.range(c,d),function(a){return Math.pow(10,a)})}},b.utils.filter=function(a,c,d,e){function f(b){_.each(h,function(c){_.isFunction(c)&&c(a.val(b),b)})}function g(d){var h;return"auto"==d&&(d="date"==a.type()?"timescale":a.length<6?"buttons":"select"),a.length<2?function(){return!1}:("select"==d&&(h=function(b){var c=$("<select />");return a.each(function(a,b){var d=e(a);d&&c.append('<option value="'+b+'">'+(_.isString(d)?$.trim(d):d)+"</option>")}),c.change(function(a){var b=c.val();f(b)}),c.addClass("filter-ui filter-select"),c}),"buttons"==d&&(h=function(b){var d=$("<div />");d.addClass("filter-ui filter-links"),a.each(function(a,b){var f=e(a);if(f){var g=$('<a href="#'+b+'"'+(b==c?' class="active" ':"")+">"+(_.isString(f)?$.trim(f):f)+"</a>").data("row",b);d.append(g)}}),$("a",d).click(function(a){var b=$(a.target);a.preventDefault(),b.hasClass("active")||($("a",d).removeClass("active"),b.addClass("active"),f(b.data("row")))}),d.appendTo("body");var h=$("a:first",d).offset().top,i=$("a:last",d).offset().top;return h!=i?(d.remove(),g("select")(b)):d}),"timescale"==d&&(h=function(d){function e(b){var c=h.invert(b),d=Number.MAX_VALUE,e=0;return a.each(function(a,b){var f=Math.abs(a.getTime()-c.getTime());d>f&&(d=f,e=b)}),e}var g=Math.min(d.__w-30,Math.max(300,.7*d.__w)),h=d3.time.scale().domain([a.val(0),a.val(-1)]).range([0,g]),i=$("<div></div>").css({position:"relative",height:45,"margin-left":3}).addClass("filter-ui"),j=g/80,k=h.ticks(j),l=Math.round((a.val(-1).getTime()-a.val(0).getTime())/864e5),m=b.utils.dateFormat(l),n=a.type(!0).formatter(),o=h.ticks(g/8),p=function(b){return Math.max(-18,h(a.val(b))-40)};_.each(k,function(a){var b=$("<span>"+m(a)+"</span>"),c=h(a)-40,e=d.labelWidth(m(a));0>40-.5*e+c&&(c=-40+.5*e),b.css({position:"absolute",top:0,width:80,left:c,"text-align":"center",opacity:.55}),i.append(b)}),_.each(o,function(b){if(!(b.getTime()<a.val(0).getTime()||b.getTime()>a.val(-1).getTime())){var c=$('<span class="dot"></span>');c.css({position:"absolute",bottom:19,width:1,height:"1ex","border-left":"1px solid #000","vertical-align":"bottom",left:Math.round(h(b))+.5}),_.find(k,function(a){return b.getTime()==a.getTime()})||c.css({height:"0.6ex",opacity:.5}),i.append(c)}});var q=$("<div>▲</div>").css({position:"absolute",width:20,bottom:2,left:h(a.val(c))-9,"text-align":"center"});i.append(q);var r=$("<div><span></span></div>").css({position:"absolute",width:80,top:0,left:p(c),"text-align":"center"}).data("last-txt",n(a.val(c))).data("last-left",p(c));$("span",r).css({background:d.theme().colors.background,"font-weight":"bold",padding:"0 1ex"}).html(n(a.val(c))),i.append(r),$("<div />").css({position:"absolute",width:g+1,bottom:15,height:2,"border-bottom":"1px solid #000"}).appendTo(i);var s=$("<div />").css({position:"absolute",left:0,width:g,height:40});i.append(s);var t;return s.click(function(a){var b=a.clientX-s.offset().left,c=e(b);f(c),i.data("update-func")(c),clearTimeout(t)}),s.mousemove(function(b){var c=b.clientX-s.offset().left,d=e(c);$("span",r).html(n(a.val(d))),r.css({left:p(d)}),q.css({left:h(a.val(d))-10}),clearTimeout(t),t=setTimeout(function(){f(d),r.data("last-left",p(d)),r.data("last-txt",r.text())},500)}),s.mouseleave(function(){r.css({left:r.data("last-left")}),q.css({left:r.data("last-left")+30}),$("span",r).html(r.data("last-txt")),clearTimeout(t)}),i.data("update-func",function(b){q.stop().animate({left:h(a.val(b))-10},500,"expoInOut");var c=p(b),d=n(a.val(b));$("span",r).html(d),r.css({left:c}),r.data("last-left",c),r.data("last-txt",d)}),i}),h)}var h=[];d=d||"auto",e=e||_.identity,"auto"==d&&("date"==a.type()?d="timescale":"text"==a.type()&&(d=a.length<6?"buttons":"select"));var i={ui:g(d),change:function(a){h.push(a)}};return i},b.chart=function(a){function c(a){var b=j.get("metadata.data.changes",[]),c=j.get("metadata.data.transpose",!1);_.each(b,function(b){var d="row",e="column";c&&(d="column",e="row"),a.hasColumn(b[e])&&(0===b[d]?a.column(b[e]).title(b.value):a.column(b[e]).raw(b[d]-1,b.value))});var d=j.get("metadata.data.column-format",{});return _.each(d,function(b,c){b.type&&a.hasColumn(c)&&a.column(c).type(b.type),b["input-format"]&&a.hasColumn(c)&&a.column(c).type(!0).format(b["input-format"])}),a}var d,e,f,g,h,i=$.Callbacks(),j={get:function(b,c){var d=b.split("."),e=a;return _.some(d,function(a){return _.isUndefined(e)||_.isNull(e)?!0:(e=e[a],!1)}),_.isUndefined(e)||_.isNull(e)?c:e},set:function(b,c){var d=b.split("."),e=d.pop(),f=a;return _.each(d,function(a){(_.isUndefined(f[a])||_.isNull(f[a]))&&(f[a]={}),f=f[a]}),_.isEqual(f[e],c)||(f[e]=c,i.fire(j,b,c)),this},load:function(a){var c,d={firstRowIsHeader:j.get("metadata.data.horizontal-header",!0),transpose:j.get("metadata.data.transpose",!1)};return a?d.csv=a:d.url="data.csv",c=b.datasource.delimited(d),c.dataset().pipe(function(a){return j.dataset(a),a})},dataset:function(a){return arguments.length?(d=c(a),j):d},theme:function(a){return arguments.length?(e=a,j):e||{}},vis:function(a){return arguments.length?(f=a,f.chart(j),j):f},hasHighlight:function(){var a=j.get("metadata.visualize.highlighted-series");return _.isArray(a)&&a.length>0},isHighlighted:function(a){if(void 0===_.isUndefined(a))return!1;var c=this.get("metadata.visualize.highlighted-series"),d=b.utils.name(a);return!_.isArray(c)||0===c.length||_.indexOf(c,d)>=0},locale:function(a,b){return arguments.length?(h=a,Globalize.cultures.hasOwnProperty(h)?(Globalize.culture(h),"function"==typeof b&&b()):$.getScript("/static/vendor/globalize/cultures/globalize.culture."+h.replace("_","-")+".js",function(){j.locale(h),"function"==typeof b&&b()}),j):h},metricPrefix:function(a){return arguments.length?(g=a,j):g},formatValue:function(a,b,c){var d=j.get("metadata.describe.number-format"),e=Number(j.get("metadata.describe.number-divisor")),f=j.get("metadata.describe.number-append","").replace(" ","&nbsp;"),g=j.get("metadata.describe.number-prepend","").replace(" ","&nbsp;");return 0!==e&&(a=Number(a)/Math.pow(10,e)),"-"!=d?((c||a==Math.round(a))&&(d=d.substr(0,1)+"0"),a=Globalize.format(a,d)):0!==e&&(a=a.toFixed(1)),b?g+a+f:a},render:function(a){if(!f||!e||!d)throw"cannot render the chart!";f.chart(j),f.__init();var b=$(a);b.parent().addClass("vis-"+f.id).addClass("theme-"+e.id),f.render(b)},attributes:function(b){return arguments.length?(a=b,j):a},onChange:i.add,columnFormatter:function(a){var c=j.get("metadata.data.column-format",{});if(c=c[a.name()]||{},"number"==a.type()&&"auto"==c){var d=b.utils.metricSuffix(j.locale()),e=a.values(),f=b.utils.significantDimension(e),g=-2>f?3*Math.round(-1*f/3):f>2?-1*f:0,h=b.utils.significantDimension(_.map(e,function(a){return a/Math.pow(10,g)}));c={"number-divisor":g,"number-append":g?d[g]||" × 10<sup>"+g+"</sup>":"","number-format":"n"+Math.max(0,h)}}return a.type(!0).formatter(c)}};return j},b.visualization=function(){var a={},c=function(b){return new a[b]};return c.register=function(c){var d=3==arguments.length?a[arguments[1]].prototype:b.visualization.base,e=arguments[arguments.length-1],f=a[c]=function(){};_.extend(f.prototype,d,{id:c},e)},c}(),b.visualization.base=function(){}.prototype,_.extend(b.visualization.base,{__init:function(){return this.__renderedDfd=$.Deferred(),window.parent&&window.parent.postMessage&&window.parent.postMessage("datawrapper:vis:init","*"),this},render:function(a){$(a).html("implement me!")},theme:function(a){if(!arguments.length)return this.__theme;this.__theme=a;var b=["horizontalGrid","verticalGrid","yAxis","xAxis"];return _.each(b,function(b){if(a.hasOwnProperty(b))for(var c in a[b]){var d=c.replace(/([A-Z])/g,"-$1").toLowerCase();a[b].hasOwnProperty(d)||(a[b][d]=a[b][c])}}),this},size:function(a,b){var c=this;return arguments.length?(c.__w=a,c.__h=b,c):[c.__w,c.__h]},get:function(a,b){return this.chart().get("metadata.visualize."+a,b)},notify:function(a){return b.backend&&_.isFunction(b.backend.notify)?b.backend.notify(a):void(window.parent&&window.parent.postMessage?window.parent.postMessage("notify:"+a,"*"):window.console&&console.log(a))},signature:function(){},translate:function(a){var b=this.meta.locale,c=this.lang;return b[a]?b[a][c]||b[a]:a},checkBrowserCompatibility:function(){return!0},chart:function(a){var b=this;if(!arguments.length)return b.__chart;b.dataset=a.dataset(),b.theme(a.theme()),b.__chart=a;var c=a.get("metadata.data.column-format",{}),d={};return _.each(c,function(a,b){d[b]=!!a.ignore}),b.dataset.filterColumns(d),b},axes:function(a,c){function d(a){_.isArray(a)||(a=[a]);for(var b=0;b<a.length;b++)if(!g.hasColumn(a[b]))return!1;return!0}var e=this;if(!c&&e.__axisCache)return e.__axisCache[a?"axesAsColumns":"axes"];var f,g=e.dataset,h={},i={},j={},k=[];return f=e.chart().get("metadata.axes",{}),_.each(e.meta.axes,function(a,b){if(f[b]){var c=f[b];d(c)&&(i[b]=c,_.isArray(c)||(c=[c]),_.each(c,function(a){h[a]=!0}))}}),_.each(e.meta.axes,function(a,c){function d(b){return!h[b.name()]&&_.indexOf(a.accepts,b.type())>=0}function f(){var d=b.backend?b.backend.messages.insufficientData:"The visualization needs at least one column of the type %type to populate axis %key";k.push(d.replace("%type",a.accepts).replace("%key",c))}if(!i[c])if(a.optional)i[c]=!1;else if(a.multiple)i[c]=[],g.eachColumn(function(a){d(a)&&(h[a.name()]=!0,i[c].push(a.name()))}),i[c].length||f();else{var j,l=_.filter(g.columns(),d);if(a.preferred){var m=new RegExp(a.preferred,"i");j=_.find(l,function(a){return m.test(a.name())||a.title()!=a.name()&&m.test(a.title())})}if(j||(j=l[0]),j)h[j.name()]=!0,i[c]=j.name();else if(_.indexOf(a.accepts,"text")>=0){var n=b.column(c,_.map(_.range(g.numRows()),function(a){return(a>25?String.fromCharCode(64+a/26):"")+String.fromCharCode(65+a%26)}),"text");g.add(n),e.chart().dataset(g),h[n.name()]=!0,i[c]=n.name()}else f()}}),k.length&&e.notify(k.join("<br />")),_.each(i,function(a,b){_.isArray(a)?(j[b]=[],_.each(a,function(a,c){j[b][c]=a!==!1?e.dataset.column(a):null})):j[b]=a!==!1?e.dataset.column(a):null}),e.__axisCache={axes:i,axesAsColumns:j},e.axes(a)},keys:function(){var a=this,b=a.axes();if(b.labels){var c=a.dataset.column(b.labels),d=a.chart().columnFormatter(c),e=[];return c.each(function(a){e.push(String(d(a)))}),e}return[]},keyLabel:function(a){return a},reset:function(){this.clear(),$("#chart").html("").off("click").off("mousemove").off("mouseenter").off("mouseover"),$(".chart .filter-ui").remove(),$(".chart .legend").remove()},clear:function(){},renderingComplete:function(){window.parent&&window.parent.postMessage&&setTimeout(function(){window.parent.postMessage("datawrapper:vis:rendered","*")},200),this.__renderedDfd.resolve()},rendered:function(){return this.__renderedDfd.promise()},supportsSmartRendering:function(){return!1},_svgCanvas:function(){return!1}}),b.theme=function(){function a(){var b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length;for("object"==typeof h||_.isFunction(h)||(h={});j>i;i++)if(null!=(b=arguments[i]))for(d in b)e=h[d],f=b[d],h!==f&&(f&&c(f)?(g=e&&c(e)?e:{},h[d]=a(g,f)):void 0!==f&&(h[d]=f));return h}function c(a){return _.isObject(a)&&!_.isArray(a)&&!_.isFunction(a)}var d={},e=function(a){return d[a]};return e.register=function(c){var e=3==arguments.length?d[arguments[1]]:b.theme.base,f=arguments[arguments.length-1];d[c]=a({},e,{id:c},f)},e}(),b.theme.base={colors:{palette:["#6E7DA1","#64A4C4","#53CCDD","#4EF4E8"],secondary:["#000000","#777777","#cccccc","#ffd500","#6FAA12"],positive:"#85B4D4",negative:"#E31A1C",background:"#ffffff",text:"#000000",gradients:[["#fefaca","#008b15"],["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],["#8c510a","#d8b365","#f6e8c3","#f5f7ea","#c7eae5","#5ab4ac","#01665e"],["#c51b7d","#e9a3c9","#fde0ef","#faf6ea","#e6f5d0","#a1d76a","#4d9221"],["#b2182b","#ef8a62","#fddbc7","#f8f6e9","#d1e5f0","#67a9cf","#2166ac"]],categories:[["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"],["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]]},annotation:{background:"#000",opacity:.08},padding:{left:0,right:20,bottom:30,top:10},lineChart:{strokeWidth:3,maxLabelWidth:80,fillOpacity:.2,xLabelOffset:20},columnChart:{cutGridLines:!1,barAttrs:{"stroke-width":1},darkenStroke:18},barChart:{barAttrs:{"stroke-width":1}},xAxis:{stroke:"#333"},yAxis:{strokeWidth:1},horizontalGrid:{stroke:"#d9d9d9"},verticalGrid:!1,frame:!1,frameStrokeOnTop:!1,yTicks:!1,hover:!0,tooltip:!0,hpadding:0,vpadding:10,minWidth:100,locale:"de_DE",duration:1e3,easing:"expoInOut"}}).call(this);