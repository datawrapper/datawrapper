!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("../../../../../../../../../../static/js/svelte/publish.js")):"function"==typeof define&&define.amd?define(["../../../../../../../../../../static/js/svelte/publish.js"],e):(t=t||self)["publish/sidebar"]=e(t.publish_js)}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,n){return(u=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,i(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)})(t)}function f(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){}function d(t,e){for(var n in e)t[n]=e[n];return t}function h(t,e){for(var n in e)t[n]=1;return t}function m(t,e){t.appendChild(e)}function _(t,e,n){t.insertBefore(e,n)}function b(t){t.parentNode.removeChild(t)}function v(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}function g(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function x(){return document.createComment("")}function j(t,e,n,r){t.addEventListener(e,n,r)}function T(t,e,n,r){t.removeEventListener(e,n,r)}function O(t,e,n){t.style.setProperty(e,n)}function E(t,e,n){t.classList[n?"add":"remove"](e)}function P(){return Object.create(null)}function L(t){t._lock=!0,S(t._beforecreate),S(t._oncreate),S(t._aftercreate),t._lock=!1}function N(t,e){t._handlers=P(),t._slots=P(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function S(t){for(;t&&t.length;)t.shift()()}function H(){this.store._remove(this)}var M={destroy:function(t){this.destroy=p,this.fire("destroy"),this.set=p,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var o=n[r];if(!o.__calling)try{o.__calling=!0,o.call(this,e)}finally{o.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(d({},t)),this.root._lock||L(this.root)},_recompute:p,_set:function(t){var e=this._state,n={},r=!1;for(var o in t=d(this._staged,t),this._staged={},t)this._differs(t[o],e[o])&&(n[o]=r=!0);r&&(this._state=d(d({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))},_stage:function(t){d(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,n){return t!=t?n==n:t!==n||t&&"object"===e(t)||"function"==typeof t}},k={};function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===t?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(k[t]=window.__dw.vis.meta.locale||{}):k[t]="core"===t?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[t])}function q(t){var e=arguments,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(t=t.trim(),k[n]||A(n),!k[n][t])return"MISSING:"+t;var r=k[n][t];return"string"==typeof r&&arguments.length>2&&(r=r.replace(/\$(\d)/g,(function(t,n){return n=2+Number(n),void 0===e[n]?t:e[n]}))),r}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o({payload:null,raw:!1,method:"GET",baseUrl:"//".concat(dw.backend.__api_domain),mode:"cors",credentials:"include"},e,{headers:o({"Content-Type":"application/json"},e.headers)}),r=n.payload,i=n.baseUrl,s=n.raw,c=f(n,["payload","baseUrl","raw"]),u="".concat(i.replace(/\/$/,""),"/").concat(t.replace(/^\//,""));return r&&(c.body=JSON.stringify(r)),window.fetch(u,c).then((function(t){if(s)return t;if(!t.ok)throw new R(t);if(204!==t.status){var e=t.headers.get("content-type").split(";")[0];return"application/json"===e?t.json():"image/png"===e||"application/pdf"===e?t.blob():t.text()}}))}C.get=D("GET"),C.patch=D("PATCH"),C.put=D("PUT");var U=C.post=D("POST");C.head=D("HEAD");function D(t){return function(e,n){if(n&&n.method)throw new Error("Setting option.method is not allowed in httpReq.".concat(t.toLowerCase(),"()"));return C(e,o({},n,{method:t}))}}C.delete=D("DELETE");var R=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=l(this,i(e).call(this))).name="HttpReqError",n.status=t.status,n.statusText=t.statusText,n.message="[".concat(t.status,"] ").concat(t.statusText),n.response=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),e}(a(Error));function G(t,e){var n;return{c:function(){(n=y("label")).className="control-label svelte-4hqcdn"},m:function(t,r){_(t,n,r),n.innerHTML=e.label},p:function(t,e){t.label&&(n.innerHTML=e.label)},d:function(t){t&&b(n)}}}function I(t,e){var n;return{c:function(){(n=y("div")).className="help success svelte-4hqcdn"},m:function(t,r){_(t,n,r),n.innerHTML=e.success},p:function(t,e){t.success&&(n.innerHTML=e.success)},d:function(t){t&&b(n)}}}function $(t,e){var n;return{c:function(){(n=y("div")).className="help error svelte-4hqcdn"},m:function(t,r){_(t,n,r),n.innerHTML=e.error},p:function(t,e){t.error&&(n.innerHTML=e.error)},d:function(t){t&&b(n)}}}function F(t,e){var n;return{c:function(){(n=y("div")).className="help svelte-4hqcdn"},m:function(t,r){_(t,n,r),n.innerHTML=e.help},p:function(t,e){t.help&&(n.innerHTML=e.help)},d:function(t){t&&b(n)}}}function B(t){var e,n,r,o,i,s,c,u,a,f,l,p,h;N(this,t),this._state=d({label:"",help:"",error:!1,success:!1,width:"auto"},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=(e=this,n=this._state,a=e._slotted.default,f=n.label&&G(0,n),l=n.success&&I(0,n),p=n.error&&$(0,n),h=!n.success&&!n.error&&n.help&&F(0,n),{c:function(){r=y("div"),f&&f.c(),o=w("\n    "),i=y("div"),s=w("\n    "),l&&l.c(),c=w(" "),p&&p.c(),u=w(" "),h&&h.c(),i.className="form-controls svelte-4hqcdn",r.className="form-block svelte-4hqcdn",O(r,"width",n.width),E(r,"success",n.success),E(r,"error",n.error)},m:function(t,e){_(t,r,e),f&&f.m(r,null),m(r,o),m(r,i),a&&m(i,a),m(r,s),l&&l.m(r,null),m(r,c),p&&p.m(r,null),m(r,u),h&&h.m(r,null)},p:function(t,e){e.label?f?f.p(t,e):((f=G(0,e)).c(),f.m(r,o)):f&&(f.d(1),f=null),e.success?l?l.p(t,e):((l=I(0,e)).c(),l.m(r,c)):l&&(l.d(1),l=null),e.error?p?p.p(t,e):((p=$(0,e)).c(),p.m(r,u)):p&&(p.d(1),p=null),e.success||e.error||!e.help?h&&(h.d(1),h=null):h?h.p(t,e):((h=F(0,e)).c(),h.m(r,null)),t.width&&O(r,"width",e.width),t.success&&E(r,"success",e.success),t.error&&E(r,"error",e.error)},d:function(t){t&&b(r),f&&f.d(),a&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(i,a),l&&l.d(),p&&p.d(),h&&h.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function J(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function z(){}d(B.prototype,M);var K={createAccount:function(t){try{var e=this;return e.set({signedUp:!0}),n="Chart Editor",r="send-embed-code",window._paq&&window._paq.push(["trackEvent",n,r,o,i]),function(t){if(t&&t.then)return t.then(z)}(function(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}((function(){return J(U("/v3/auth/signup",{payload:{email:t,invitation:!0,chartId:e.store.get().id}}),(function(t){e.get().fromSvelte?(e.set({signedUp:!1,error:""}),e.store.set({user:t})):window.location.reload()}))}),(function(t){return function(t){var e=t();if(e&&e.then)return e.then(z)}((function(){if("HttpReqError"===t.name)return J(t.response.json(),(function(n){e.set({error:n.message||t})}));e.set({error:"Unknown error: ".concat(t)})}))})))}catch(t){return Promise.reject(t)}var n,r,o,i}};function Q(t,e,n){var r=Object.create(t);return r.text=e[n],r}function V(t,e,n){var r=Object.create(t);return r.text=e[n],r}function W(t,e){var n,r,o,i=q("publish / guest / h1"),s=q("publish / guest / p");return{c:function(){n=y("h2"),r=w("\n\n            "),o=y("p")},m:function(t,e){_(t,n,e),n.innerHTML=i,_(t,r,e),_(t,o,e),o.innerHTML=s},p:p,d:function(t){t&&(b(n),b(r),b(o))}}}function X(t,e){for(var n,r=e.guest_text_above,o=[],i=0;i<r.length;i+=1)o[i]=Y(t,V(e,r,i));return{c:function(){for(var t=0;t<o.length;t+=1)o[t].c();n=x()},m:function(t,e){for(var r=0;r<o.length;r+=1)o[r].m(t,e);_(t,n,e)},p:function(e,i){if(e.guest_text_above){r=i.guest_text_above;for(var s=0;s<r.length;s+=1){var c=V(i,r,s);o[s]?o[s].p(e,c):(o[s]=Y(t,c),o[s].c(),o[s].m(n.parentNode,n))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},d:function(t){g(o,t),t&&b(n)}}}function Y(t,e){var n,r,o=e.text;return{c:function(){n=y("noscript"),r=y("noscript")},m:function(t,e){_(t,n,e),n.insertAdjacentHTML("afterend",o),_(t,r,e)},p:function(t,e){t.guest_text_above&&o!==(o=e.text)&&(v(n,r),n.insertAdjacentHTML("afterend",o))},d:function(t){t&&(v(n,r),b(n),b(r))}}}function Z(t,e){for(var n,r=e.guest_text_below,o=[],i=0;i<r.length;i+=1)o[i]=tt(t,Q(e,r,i));return{c:function(){for(var t=0;t<o.length;t+=1)o[t].c();n=x()},m:function(t,e){for(var r=0;r<o.length;r+=1)o[r].m(t,e);_(t,n,e)},p:function(e,i){if(e.guest_text_below){r=i.guest_text_below;for(var s=0;s<r.length;s+=1){var c=Q(i,r,s);o[s]?o[s].p(e,c):(o[s]=tt(t,c),o[s].c(),o[s].m(n.parentNode,n))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}},d:function(t){g(o,t),t&&b(n)}}}function tt(t,e){var n,r,o=e.text;return{c:function(){n=y("noscript"),r=y("noscript")},m:function(t,e){_(t,n,e),n.insertAdjacentHTML("afterend",o),_(t,r,e)},p:function(t,e){t.guest_text_below&&o!==(o=e.text)&&(v(n,r),n.insertAdjacentHTML("afterend",o))},d:function(t){t&&(v(n,r),b(n),b(r))}}}function et(t,e){var n,r;return{c:function(){n=y("div"),r=w(e.error),n.className="alert alert-warning"},m:function(t,e){_(t,n,e),m(n,r)},p:function(t,e){t.error&&function(t,e){t.data=""+e}(r,e.error)},d:function(t){t&&b(n)}}}function nt(t){N(this,t),this._state=d({error:"",email:"",guest_text_above:[],guest_text_below:[],signedUp:!1},t.data),this._intro=!0,this._fragment=function(t,e){var n,r,o,i,s,c,u,a,f,l,p,d,h,v,g,x,E,P,L,N,S=!1,H=q("publish / guest / cta"),M=q("publish / guest / back");function k(t){return t.guest_text_above?X:W}var A=k(e),C=A(t,e);function U(){S=!0,t.set({email:c.value}),S=!1}function D(n){t.createAccount(e.email)}var R={label:q("publish / guest / e-mail"),help:q("publish / guest / example-email")},G=new B({root:t.root,store:t.store,slots:{default:document.createDocumentFragment()},data:R}),I=e.guest_text_below&&Z(t,e),$=e.error&&et(t,e);return{c:function(){var t,m,_;n=y("div"),r=y("div"),o=y("div"),C.c(),i=w("\n\n        "),s=y("div"),c=y("input"),u=w("\n\n                "),a=y("button"),f=y("i"),p=w("   "),d=y("noscript"),G._fragment.c(),h=w("\n\n        "),I&&I.c(),v=w("\n\n        "),g=y("div"),x=y("button"),E=y("i"),P=w("   "),L=y("noscript"),N=w("\n\n            "),$&&$.c(),O(o,"margin-bottom","20px"),j(c,"input",U),t=c,m="type",null==(_="email")?t.removeAttribute(m):t.setAttribute(m,_),c.className="input-xlarge",f.className=l="fa "+(e.signedUp?"fa-circle-o-notch fa-spin":"fa-envelope"),j(a,"click",D),a.className="btn btn-save btn-primary",O(a,"white-space","nowrap"),O(a,"margin-left","10px"),O(s,"display","flex"),E.className="fa fa-chevron-left",x.className="btn btn-save btn-default btn-back",O(g,"margin-top","30px"),r.className="span5",n.className="row publish-signup"},m:function(t,l){_(t,n,l),m(n,r),m(r,o),C.m(o,null),m(r,i),m(G._slotted.default,s),m(s,c),c.value=e.email,m(s,u),m(s,a),m(a,f),m(a,p),m(a,d),d.insertAdjacentHTML("afterend",H),G._mount(r,null),m(r,h),I&&I.m(r,null),m(r,v),m(r,g),m(g,x),m(x,E),m(x,P),m(x,L),L.insertAdjacentHTML("afterend",M),m(g,N),$&&$.m(g,null)},p:function(n,i){A===(A=k(e=i))&&C?C.p(n,e):(C.d(1),(C=A(t,e)).c(),C.m(o,null)),!S&&n.email&&(c.value=e.email),n.signedUp&&l!==(l="fa "+(e.signedUp?"fa-circle-o-notch fa-spin":"fa-envelope"))&&(f.className=l),e.guest_text_below?I?I.p(n,e):((I=Z(t,e)).c(),I.m(r,v)):I&&(I.d(1),I=null),e.error?$?$.p(n,e):(($=et(t,e)).c(),$.m(g,null)):$&&($.d(1),$=null)},d:function(t){t&&b(n),C.d(),T(c,"input",U),T(a,"click",D),G.destroy(),I&&I.d(),$&&$.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this))}function rt(){}d(nt.prototype,M),d(nt.prototype,K);var ot={resendActivation:function(){try{var t=this;return t.set({status:"sending"}),function(t){if(t&&t.then)return t.then(rt)}(function(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}((function(){return e=U("/v3/auth/resend-activation"),n=function(){t.set({status:"success"})},r?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e);var e,n,r}),(function(){t.set({status:"error"})})))}catch(t){return Promise.reject(t)}}};function it(t,e){var n,r,o,i,s,c=q("publish / pending-activation / resend");function u(e){t.resendActivation()}return{c:function(){n=y("button"),r=y("i"),i=w("  \n            "),s=y("noscript"),r.className=o="fa "+("sending"==e.status?"fa-spin fa-circle-o-notch":"fa-envelope"),j(n,"click",u),n.className="btn btn-primary"},m:function(t,e){_(t,n,e),m(n,r),m(n,i),m(n,s),s.insertAdjacentHTML("afterend",c)},p:function(t,e){t.status&&o!==(o="fa "+("sending"==e.status?"fa-spin fa-circle-o-notch":"fa-envelope"))&&(r.className=o)},d:function(t){t&&b(n),T(n,"click",u)}}}function st(t,e){var n,r=q("publish / pending-activation / resend-error");return{c:function(){n=y("p")},m:function(t,e){_(t,n,e),n.innerHTML=r},p:p,d:function(t){t&&b(n)}}}function ct(t,e){var n,r=q("publish / pending-activation / resend-success");return{c:function(){n=y("p")},m:function(t,e){_(t,n,e),n.innerHTML=r},p:p,d:function(t){t&&b(n)}}}function ut(t){N(this,t),this._state=d({status:""},t.data),this._intro=!0,this._fragment=function(t,e){var n,r,o,i,s,c,u=q("publish / pending-activation / h1"),a=q("publish / pending-activation / p");function f(t){return"success"==t.status?ct:"error"==t.status?st:it}var l=f(e),p=l(t,e);return{c:function(){n=y("div"),r=y("h2"),o=w("\n\n    "),i=y("p"),s=w("\n\n    "),c=y("div"),p.c(),O(c,"margin-top","20px")},m:function(t,e){_(t,n,e),m(n,r),r.innerHTML=u,m(n,o),m(n,i),i.innerHTML=a,m(n,s),m(n,c),p.m(c,null)},p:function(e,n){l===(l=f(n))&&p?p.p(e,n):(p.d(1),(p=l(t,n)).c(),p.m(c,null))},d:function(t){t&&b(n),p.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function at(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,r){var o=document.createElement("script");o.src=t,o.onload=function(){e&&e(),n()},o.onerror=r,document.body.appendChild(o)}))}function ft(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,r){var o=document.createElement("link");o.rel="stylesheet",o.href=t,o.onload=function(){e&&e(),n()},o.onerror=r,document.head.appendChild(o)}))}function lt(t){var e=this,n=t.current;if(t.changed.afterEmbed&&n.afterEmbed){var r=n.afterEmbed[0];Promise.all([ft(r.css),at(r.js)]).then((function(){require([r.module],(function(t){e.set({beforeExport:t.App})}))}))}}function pt(e,n){var r={beforeExport:n.beforeExport,embed_templates:n.embedTemplates,embed_type:n.embedType,plugin_shareurls:n.pluginShareurls,shareurl_type:n.shareurlType},o=new t.Publish({root:e.root,store:e.store,data:r});return{c:function(){o._fragment.c()},m:function(t,e){o._mount(t,e)},p:function(t,e){var n={};t.beforeExport&&(n.beforeExport=e.beforeExport),t.embedTemplates&&(n.embed_templates=e.embedTemplates),t.embedType&&(n.embed_type=e.embedType),t.pluginShareurls&&(n.plugin_shareurls=e.pluginShareurls),t.shareurlType&&(n.shareurl_type=e.shareurlType),o._set(n)},d:function(t){o.destroy(t)}}}function dt(t,e){var n=new ut({root:t.root,store:t.store});return{c:function(){n._fragment.c()},m:function(t,e){n._mount(t,e)},p:p,d:function(t){n.destroy(t)}}}function ht(t,e){var n={fromSvelte:"true",guest_text_above:e.guest_text_above,guest_text_below:e.guest_text_below},r=new nt({root:t.root,store:t.store,data:n});return{c:function(){r._fragment.c()},m:function(t,e){r._mount(t,e)},p:function(t,e){var n={};t.guest_text_above&&(n.guest_text_above=e.guest_text_above),t.guest_text_below&&(n.guest_text_below=e.guest_text_below),r._set(n)},d:function(t){r.destroy(t)}}}function mt(t){var e=this;N(this,t),this._state=d(d(this.store._init(["user"]),{embedTemplates:[],embedType:"responsive",pluginShareurls:[],shareurlType:"default",beforeExport:null,guest_text_above:"",guest_text_below:""}),t.data),this.store._add(this,["user"]),this._intro=!0,this._handlers.state=[lt],this._handlers.destroy=[H],lt.call(this,{changed:h({},this._state),current:this._state}),this._fragment=function(t,e){var n;function r(t){return t.$user.isGuest?ht:t.$user.isActivated?pt:dt}var o=r(e),i=o(t,e);return{c:function(){n=y("div"),i.c()},m:function(t,e){_(t,n,e),i.m(n,null)},p:function(e,s){o===(o=r(s))&&i?i.p(e,s):(i.d(1),(i=o(t,s)).c(),i.m(n,null))},d:function(t){t&&b(n),i.d()}}}(this,this._state),this.root._oncreate.push((function(){e.fire("update",{changed:h({},e._state),current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this))}function _t(t,e,n){var r=e.bind(this);return n&&!1===n.init||r(this.get()[t]),this.on(n&&n.defer?"update":"state",(function(e){var n=e.changed,o=e.current,i=e.previous;n[t]&&r(o[t],i&&i[t])}))}function bt(){var t=this;this.store.observe=_t,this.store.observe("publishLogic",(function(e){e&&e.mod?(ft(e.css),at(e.src,(function(){require([e.mod],(function(n){t.set({PublishLogic:n.App}),t.refs.publish.set(e.data)}))}))):(t.set({PublishLogic:mt}),t.refs.publish.set(e.data))}))}function vt(t){var e=this;N(this,t),this.refs={},this._state=d({PublishLogic:mt},t.data),this._intro=!0,this._fragment=function(t,e){var n,r,o=e.PublishLogic;function i(e){return{root:t.root,store:t.store}}if(o)var s=new o(i());return{c:function(){n=y("div"),r=y("div"),s&&s._fragment.c(),r.className="publish-step is-published",n.className="dw-create-publish"},m:function(e,o){_(e,n,o),m(n,r),s&&(s._mount(r,null),t.refs.publish=s)},p:function(e,n){o!==(o=n.PublishLogic)&&(s&&s.destroy(),o?((s=new o(i()))._fragment.c(),s._mount(r,null),t.refs.publish=s):(s=null,t.refs.publish===s&&(t.refs.publish=null)))},d:function(t){t&&b(n),s&&s.destroy()}}}(this,this._state),this.root._oncreate.push((function(){bt.call(e),e.fire("update",{changed:h({},e._state),current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this))}return d(ut.prototype,M),d(ut.prototype,ot),d(mt.prototype,M),d(vt.prototype,M),{PublishSidebar:vt}}));
