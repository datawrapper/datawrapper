!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("svelte/highlight",e):(t=t||self).highlight=e()}(this,(function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){e.appendChild(t)}function r(t,e,n){e.insertBefore(t,n)}function i(t){t.parentNode.removeChild(t)}function o(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function a(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function u(t,e,n){t.addEventListener(e,n,!1)}function c(t,e,n){t.removeEventListener(e,n,!1)}function l(t,e,n){t.style.setProperty(e,n)}function h(t,e){for(var n=0;n<t.options.length;n+=1){var r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function f(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function d(){return Object.create(null)}function _(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function p(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function v(t,e){return t!=t?e==e:t!==e}function g(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var i=n[r];i.__calling||(i.__calling=!0,i.call(this,e),i.__calling=!1)}}function b(t){return t?this._state[t]:this._state}function y(t,e,n){var r=e.bind(this);return n&&!1===n.init||r(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",(function(e){e.changed[t]&&r(e.current[t],e.previous&&e.previous[t])}))}function m(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function j(t){for(;t&&t.length;)t.shift()()}function w(){this.store._remove(this)}var O={destroy:_,get:b,fire:g,observe:y,on:m,set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,j(this.root._beforecreate),j(this.root._oncreate),j(this.root._aftercreate),this.root._lock=!1)},teardown:_,_recompute:t,_set:function(t){var n=this._state,r={},i=!1;for(var o in t)this._differs(t[o],n[o])&&(r[o]=i=!0);i&&(this._state=e(e({},n),t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(this.fire("state",{changed:r,current:this._state,previous:n}),this._fragment.p(r,this._state),this.fire("update",{changed:r,current:this._state,previous:n})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:p},x={};function k(t){void 0===t&&(t="core"),"chart"===t?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(x[t]=window.__dw.vis.meta.locale||{}):x[t]="core"===t?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[t])}function A(t,e){var n=arguments;if(void 0===e&&(e="core"),t=t.trim(),x[e]||k(e),!x[e][t])return"MISSING:"+t;var r=x[e][t];return"string"==typeof r&&arguments.length>2&&(r=r.replace(/\$(\d)/g,(function(t,e){return e=2+Number(e),void 0===n[e]?t:n[e]}))),r}function S(t){if(!t||"object"!=typeof t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}var E="object"==typeof global&&global&&global.Object===Object&&global,z="object"==typeof self&&self&&self.Object===Object&&self,P=E||z||Function("return this")(),N=P.Symbol,$=Object.prototype,C=$.hasOwnProperty,T=$.toString,M=N?N.toStringTag:void 0;var L=Object.prototype.toString;var F=N?N.toStringTag:void 0;function B(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":F&&F in Object(t)?function(t){var e=C.call(t,M),n=t[M];try{t[M]=void 0;var r=!0}catch(t){}var i=T.call(t);return r&&(e?t[M]=n:delete t[M]),i}(t):function(t){return L.call(t)}(t)}function I(t){return null!=t&&"object"==typeof t}function D(t){return"symbol"==typeof t||I(t)&&"[object Symbol]"==B(t)}var U=Array.isArray,V=N?N.prototype:void 0,H=V?V.toString:void 0;function J(t){if("string"==typeof t)return t;if(U(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(t,J)+"";if(D(t))return H?H.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function R(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function W(t){return t}function q(t){if(!R(t))return!1;var e=B(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var G,K=P["__core-js_shared__"],Q=(G=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"";var X=Function.prototype.toString;function Y(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var Z=/^\[object .+?Constructor\]$/,tt=Function.prototype,et=Object.prototype,nt=tt.toString,rt=et.hasOwnProperty,it=RegExp("^"+nt.call(rt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ot(t){return!(!R(t)||(e=t,Q&&Q in e))&&(q(t)?it:Z).test(Y(t));var e}function at(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ot(n)?n:void 0}var st=at(P,"WeakMap"),ut=function(){try{var t=at(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ct=/^(?:0|[1-9]\d*)$/;function lt(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ct.test(t))&&t>-1&&t%1==0&&t<e}function ht(t,e){return t===e||t!=t&&e!=e}function ft(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function dt(t){return null!=t&&ft(t.length)&&!q(t)}var _t=Object.prototype;function pt(t){return I(t)&&"[object Arguments]"==B(t)}var vt=Object.prototype,gt=vt.hasOwnProperty,bt=vt.propertyIsEnumerable,yt=pt(function(){return arguments}())?pt:function(t){return I(t)&&gt.call(t,"callee")&&!bt.call(t,"callee")};var mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,jt=mt&&"object"==typeof module&&module&&!module.nodeType&&module,wt=jt&&jt.exports===mt?P.Buffer:void 0,Ot=(wt?wt.isBuffer:void 0)||function(){return!1},xt={};xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;var kt,At="object"==typeof exports&&exports&&!exports.nodeType&&exports,St=At&&"object"==typeof module&&module&&!module.nodeType&&module,Et=St&&St.exports===At&&E.process,zt=function(){try{var t=St&&St.require&&St.require("util").types;return t||Et&&Et.binding&&Et.binding("util")}catch(t){}}(),Pt=zt&&zt.isTypedArray,Nt=Pt?(kt=Pt,function(t){return kt(t)}):function(t){return I(t)&&ft(t.length)&&!!xt[B(t)]},$t=Object.prototype.hasOwnProperty;function Ct(t,e){var n=U(t),r=!n&&yt(t),i=!n&&!r&&Ot(t),o=!n&&!r&&!i&&Nt(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!$t.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||lt(c,u))||s.push(c);return s}var Tt=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Mt=Object.prototype.hasOwnProperty;function Lt(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||_t))return Tt(t);var e,n,r=[];for(var i in Object(t))Mt.call(t,i)&&"constructor"!=i&&r.push(i);return r}function Ft(t){return dt(t)?Ct(t):Lt(t)}var Bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,It=/^\w*$/;function Dt(t,e){if(U(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!D(t))||(It.test(t)||!Bt.test(t)||null!=e&&t in Object(e))}var Ut=at(Object,"create");var Vt=Object.prototype.hasOwnProperty;var Ht=Object.prototype.hasOwnProperty;function Jt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Rt(t,e){for(var n=t.length;n--;)if(ht(t[n][0],e))return n;return-1}Jt.prototype.clear=function(){this.__data__=Ut?Ut(null):{},this.size=0},Jt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Jt.prototype.get=function(t){var e=this.__data__;if(Ut){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Vt.call(e,t)?e[t]:void 0},Jt.prototype.has=function(t){var e=this.__data__;return Ut?void 0!==e[t]:Ht.call(e,t)},Jt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ut&&void 0===e?"__lodash_hash_undefined__":e,this};var Wt=Array.prototype.splice;function qt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qt.prototype.clear=function(){this.__data__=[],this.size=0},qt.prototype.delete=function(t){var e=this.__data__,n=Rt(e,t);return!(n<0)&&(n==e.length-1?e.pop():Wt.call(e,n,1),--this.size,!0)},qt.prototype.get=function(t){var e=this.__data__,n=Rt(e,t);return n<0?void 0:e[n][1]},qt.prototype.has=function(t){return Rt(this.__data__,t)>-1},qt.prototype.set=function(t,e){var n=this.__data__,r=Rt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var Gt=at(P,"Map");function Kt(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Qt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qt.prototype.clear=function(){this.size=0,this.__data__={hash:new Jt,map:new(Gt||qt),string:new Jt}},Qt.prototype.delete=function(t){var e=Kt(this,t).delete(t);return this.size-=e?1:0,e},Qt.prototype.get=function(t){return Kt(this,t).get(t)},Qt.prototype.has=function(t){return Kt(this,t).has(t)},Qt.prototype.set=function(t,e){var n=Kt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Xt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Xt.Cache||Qt),n}Xt.Cache=Qt;var Yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zt=/\\(\\)?/g,te=function(t){var e=Xt(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Yt,(function(t,n,r,i){e.push(r?i.replace(Zt,"$1"):n||t)})),e}));function ee(t,e){return U(t)?t:Dt(t,e)?[t]:te(function(t){return null==t?"":J(t)}(t))}function ne(t){if("string"==typeof t||D(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function re(t,e){for(var n=0,r=(e=ee(e,t)).length;null!=t&&n<r;)t=t[ne(e[n++])];return n&&n==r?t:void 0}function ie(t){var e=this.__data__=new qt(t);this.size=e.size}ie.prototype.clear=function(){this.__data__=new qt,this.size=0},ie.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ie.prototype.get=function(t){return this.__data__.get(t)},ie.prototype.has=function(t){return this.__data__.has(t)},ie.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qt){var r=n.__data__;if(!Gt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Qt(r)}return n.set(t,e),this.size=n.size,this};var oe=Object.prototype.propertyIsEnumerable,ae=Object.getOwnPropertySymbols,se=ae?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(ae(t),(function(e){return oe.call(t,e)})))}:function(){return[]};function ue(t){return function(t,e,n){var r=e(t);return U(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Ft,se)}var ce=at(P,"DataView"),le=at(P,"Promise"),he=at(P,"Set"),fe=Y(ce),de=Y(Gt),_e=Y(le),pe=Y(he),ve=Y(st),ge=B;(ce&&"[object DataView]"!=ge(new ce(new ArrayBuffer(1)))||Gt&&"[object Map]"!=ge(new Gt)||le&&"[object Promise]"!=ge(le.resolve())||he&&"[object Set]"!=ge(new he)||st&&"[object WeakMap]"!=ge(new st))&&(ge=function(t){var e=B(t),n="[object Object]"==e?t.constructor:void 0,r=n?Y(n):"";if(r)switch(r){case fe:return"[object DataView]";case de:return"[object Map]";case _e:return"[object Promise]";case pe:return"[object Set]";case ve:return"[object WeakMap]"}return e});var be=ge,ye=P.Uint8Array;function me(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Qt;++e<n;)this.add(t[e])}function je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}me.prototype.add=me.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},me.prototype.has=function(t){return this.__data__.has(t)};function we(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=2&n?new me:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var d=t[l],_=e[l];if(r)var p=a?r(_,d,l,e,t,o):r(d,_,l,t,e,o);if(void 0!==p){if(p)continue;h=!1;break}if(f){if(!je(e,(function(t,e){if(a=e,!f.has(a)&&(d===t||i(d,t,n,r,o)))return f.push(e);var a}))){h=!1;break}}else if(d!==_&&!i(d,_,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Oe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function xe(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var ke=N?N.prototype:void 0,Ae=ke?ke.valueOf:void 0;var Se=Object.prototype.hasOwnProperty;var Ee=Object.prototype.hasOwnProperty;function ze(t,e,n,r,i,o){var a=U(t),s=U(e),u=a?"[object Array]":be(t),c=s?"[object Array]":be(e),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),h="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f=u==c;if(f&&Ot(t)){if(!Ot(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new ie),a||Nt(t)?we(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new ye(t),new ye(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ht(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Oe;case"[object Set]":var u=1&r;if(s||(s=xe),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=we(s(t),s(e),r,i,o,a);return a.delete(t),l;case"[object Symbol]":if(Ae)return Ae.call(t)==Ae.call(e)}return!1}(t,e,u,n,r,i,o);if(!(1&n)){var d=l&&Ee.call(t,"__wrapped__"),_=h&&Ee.call(e,"__wrapped__");if(d||_){var p=d?t.value():t,v=_?e.value():e;return o||(o=new ie),i(p,v,n,r,o)}}return!!f&&(o||(o=new ie),function(t,e,n,r,i,o){var a=1&n,s=ue(t),u=s.length;if(u!=ue(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:Se.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){var _=t[l=s[c]],p=e[l];if(r)var v=a?r(p,_,l,e,t,o):r(_,p,l,t,e,o);if(!(void 0===v?_===p||i(_,p,n,r,o):v)){f=!1;break}d||(d="constructor"==l)}if(f&&!d){var g=t.constructor,b=e.constructor;g==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}function Pe(t,e,n,r,i){return t===e||(null==t||null==e||!I(t)&&!I(e)?t!=t&&e!=e:ze(t,e,n,r,Pe,i))}function Ne(t){return t==t&&!R(t)}function $e(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Ce(t){var e=function(t){for(var e=Ft(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ne(i)]}return e}(t);return 1==e.length&&e[0][2]?$e(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var h=new ie;if(r)var f=r(c,l,u,t,e,h);if(!(void 0===f?Pe(l,c,3,r,h):f))return!1}}return!0}(n,t,e)}}function Te(t,e){return null!=t&&e in Object(t)}function Me(t,e){return null!=t&&function(t,e,n){for(var r=-1,i=(e=ee(e,t)).length,o=!1;++r<i;){var a=ne(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ft(i)&&lt(a,i)&&(U(t)||yt(t))}(t,e,Te)}function Le(t,e){return Dt(t)&&Ne(e)?$e(ne(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:re(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?Me(n,t):Pe(e,r,3)}}function Fe(t){return Dt(t)?(e=ne(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return re(e,t)}}(t);var e}function Be(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}var Ie,De=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[Ie?a:++r];if(!1===e(i[s],s,i))break}return t};var Ue=function(t,e){return function(n,r){if(null==n)return n;if(!dt(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}((function(t,e){return t&&De(t,e,Ft)}));function Ve(t,e,n,r){return Ue(t,(function(t,i,o){e(r,t,n(t),o)})),r}var He,Je,Re=(He=function(t,e,n){!function(t,e,n){"__proto__"==e&&ut?ut(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}(t,n,e)},function(t,e){var n,r=U(t)?Be:Ve,i=Je?Je():{};return r(t,He,"function"==typeof(n=e)?n:null==n?W:"object"==typeof n?U(n)?Le(n[0],n[1]):Ce(n):Fe(n),i)});var We={add:function(t){var e=this,n=this.get().highlighted;n.indexOf(t)<0&&n.push(t),this.set({highlighted:n}),setTimeout((function(){return e.set({selected:"---"})}),30)},remove:function(t){var e=this.get().highlighted;e.splice(e.indexOf(t),1),this.set({highlighted:e})}};function qe(){var t=this;this.store.observe("vis",(function(e){e&&(t.set({highlighted:S(e.get("highlighted-series"))}),e.chart().onChange((function(n,r){"metadata.visualize.highlighted-series"===r&&t.set({highlighted:S(e.get("highlighted-series"))})})))})),this.observe("highlighted",(function(e){var n=t.store.get().vis;n&&(JSON.stringify(n.get("highlighted-series"))!==JSON.stringify(e)&&n&&n.chart().set("metadata.visualize.highlighted-series",S(e)))})),this.observe("selected",(function(e){e&&"---"!==e&&t.add(e)}))}function Ge(e,o){var u,c,l,h=o.element,f=(o.each_value,o.element_index,h.label);return{c:function(){u=a("option"),c=s(f),this.h()},h:function(){u.__value=l=h.key,u.value=u.__value},m:function(t,e){r(u,t,e),n(c,u)},p:function(t,e){h=e.element,e.each_value,e.element_index,t.elements&&f!==(f=h.label)&&(c.data=f),t.elements&&l!==(l=h.key)&&(u.__value=l),u.value=u.__value},u:function(){i(u)},d:t}}function Ke(t,e){var o,l,h,f,d,_,p,v=e.el,g=(e.each_value_1,e.el_index,v.key);return{c:function(){o=a("span"),l=a("i"),h=s(" "),f=s(g),p=s("\n        Â "),this.h()},h:function(){u(l,"click",Qe),l.className="fa fa-remove",l._svelte={component:t,each_value_1:e.each_value_1,el_index:e.el_index},o.dataset.series=d=v.key,o.className=_="badge "+(v.valid?"badge-info":"")},m:function(t,e){r(o,t,e),n(l,o),n(h,o),n(f,o),r(p,t,e)},p:function(t,e){v=e.el,e.each_value_1,e.el_index,l._svelte.each_value_1=e.each_value_1,l._svelte.el_index=e.el_index,t.highlightedElements&&g!==(g=v.key)&&(f.data=g),t.highlightedElements&&d!==(d=v.key)&&(o.dataset.series=d),t.highlightedElements&&_!==(_="badge "+(v.valid?"badge-info":""))&&(o.className=_)},u:function(){i(o),i(p)},d:function(){c(l,"click",Qe)}}}function Qe(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.el_index];e.remove(n.key)}function Xe(t){!function(t,e){t._handlers=d(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}(this,t),this._state=e(e(this.store._init(["vis"]),{selected:"---",highlighted:[]}),t.data),this.store._add(this,["vis"]),this._recompute({$vis:1,highlighted:1,elements:1},this._state),this._handlers.destroy=[w];var _=this;t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,d){for(var _,p,v,g,b,y,m,j,w,O,x,k,S=A("Highlight the most import elements (optional)"),E=A("select element"),z=!1,P=d.elements,N=[],$=0;$<P.length;$+=1)N[$]=Ge(t,e(e({},d),{each_value:P,element:P[$],element_index:$}));function C(){z=!0,t.set({selected:f(b)}),z=!1}var T=d.highlightedElements,M=[];for($=0;$<T.length;$+=1)M[$]=Ke(t,e(e({},d),{each_value_1:T,el:T[$],el_index:$}));return{c:function(){_=a("div"),p=a("label"),v=s("\n    "),g=a("div"),b=a("select"),y=a("option"),m=s("- "),j=a("noscript"),w=a("noscript"),O=s(" -");for(var t=0;t<N.length;t+=1)N[t].c();x=s("\n    "),k=a("p");for(t=0;t<M.length;t+=1)M[t].c();this.h()},h:function(){p.className="separator",y.__value="---",y.value=y.__value,u(b,"change",C),"selected"in d||t.root._beforecreate.push(C),b.id="highlight-series",b.className="select-css span2",k.className="highlighted-series",l(k,"margin-top","5px"),_.className="story-highlight control-group",l(_,"clear","both")},m:function(t,e){r(_,t,e),n(p,_),p.innerHTML=S,n(v,_),n(g,_),n(b,g),n(y,b),n(m,y),n(j,y),j.insertAdjacentHTML("afterend",E),n(w,y),n(O,y);for(var i=0;i<N.length;i+=1)N[i].m(b,null);h(b,d.selected),n(x,_),n(k,_);for(i=0;i<M.length;i+=1)M[i].m(k,null)},p:function(n,r){var i=r.elements;if(n.elements){for(var o=0;o<i.length;o+=1){var a=e(e({},r),{each_value:i,element:i[o],element_index:o});N[o]?N[o].p(n,a):(N[o]=Ge(t,a),N[o].c(),N[o].m(b,null))}for(;o<N.length;o+=1)N[o].u(),N[o].d();N.length=i.length}z||h(b,r.selected);var s=r.highlightedElements;if(n.highlightedElements){for(o=0;o<s.length;o+=1){var u=e(e({},r),{each_value_1:s,el:s[o],el_index:o});M[o]?M[o].p(n,u):(M[o]=Ke(t,u),M[o].c(),M[o].m(k,null))}for(;o<M.length;o+=1)M[o].u(),M[o].d();M.length=s.length}},u:function(){p.innerHTML="",function(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}(j,w),i(_);for(var t=0;t<N.length;t+=1)N[t].u();for(t=0;t<M.length;t+=1)M[t].u()},d:function(){o(N),c(b,"change",C),o(M)}}}(this,this._state),this.root._oncreate.push((function(){qe.call(_),_.fire("update",{changed:{highlighted:1,elements:1,$vis:1,selected:1,highlightedElements:1},current:_._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),j(this._beforecreate),j(this._oncreate))}function Ye(t,n){this._observers={pre:d(),post:d()},this._handlers={},this._dependents=[],this._computed=d(),this._sortedComputedProperties=[],this._state=e({},t),this._differs=n&&n.immutable?v:p}e(Xe.prototype,O),e(Xe.prototype,We),Xe.prototype._recompute=function(t,e){var n;t.$vis&&this._differs(e.elements,e.elements=(n=e.$vis)?n.keys().sort().map((function(t){var e=n.keyLabel(t);return{key:t,label:t+(t!==e?" ("+e+")":"")}})):[])&&(t.elements=!0),(t.highlighted||t.elements)&&this._differs(e.highlightedElements,e.highlightedElements=function(t){var e=t.highlighted,n=t.elements,r=Re(n,"key");return e.map((function(t){return{key:t,valid:r[t]}}))}(e))&&(t.highlightedElements=!0)},e(Ye.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n];e["$"+r]=this._state[r]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],r=d();function i(o){if(t[o])throw new Error("Cyclical dependency detected");if(!r[o]){r[o]=!0;var a=e[o];a&&(t[o]=!0,a.deps.forEach(i),n.push(a))}}for(var o in this._computed)t=d(),i(o)},compute:function(t,e,n){var r,i=this,o={deps:e,update:function(o,a,s){var u=e.map((function(t){return t in a&&(s=!0),o[t]}));if(s){var c=n.apply(null,u);i._differs(c,r)&&(r=c,a[t]=!0,o[t]=r)}}};o.update(this._state,{},!0),this._computed[t]=o,this._sortComputedProperties()},fire:g,get:b,observe:y,on:m,onchange:function(t){return console.warn("store.onchange is deprecated in favour of store.on('state', event => {...})"),this.on("state",(function(e){t(e.current,e.changed)}))},set:function(t){var n=this._state,r=this._changed={},i=!1;for(var o in t){if(this._computed[o])throw new Error("'"+o+"' is a read-only property");this._differs(t[o],n[o])&&(r[o]=i=!0)}if(i){this._state=e(e({},n),t);for(var a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,r);this.fire("state",{changed:r,current:this._state,previous:n});var s=this._dependents.slice();for(a=0;a<s.length;a+=1){var u=s[a],c={};i=!1;for(var l=0;l<u.props.length;l+=1){var h=u.props[l];h in r&&(c["$"+h]=this._state[h],i=!0)}i&&u.component.set(c)}this.fire("update",{changed:r,current:this._state,previous:n})}}});return{App:Xe,data:{chart:{id:""}},store:new Ye({}),init:function(t){window.dw.backend.on("dataset-loaded",(function(){t.store.set({dataset:chart.dataset()})})).on("theme-changed-and-loaded",(function(){t.store.set({theme:window.dw.theme(chart.get("theme"))})})).on("backend-vis-loaded",(function(e){t.store.set({vis:e})}))}}}));
