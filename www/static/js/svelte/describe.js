!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("cm/lib/codemirror"),require("cm/mode/javascript/javascript"),require("cm/addon/mode/simple"),require("cm/addon/hint/show-hint"),require("cm/addon/edit/matchbrackets"),require("cm/addon/display/placeholder"),require("Handsontable")):"function"==typeof define&&define.amd?define("svelte/describe",["cm/lib/codemirror","cm/mode/javascript/javascript","cm/addon/mode/simple","cm/addon/hint/show-hint","cm/addon/edit/matchbrackets","cm/addon/display/placeholder","Handsontable"],e):t.describe=e(t.CodeMirror,null,null,null,null,null,t.HOT)}(this,function(t,e,n,r,a,o,i){"use strict";function u(){}function s(t,e){for(var n in e)t[n]=e[n];return t}function c(t,e){e.appendChild(t)}function l(t,e,n){e.insertBefore(t,n)}function f(t){t.parentNode.removeChild(t)}function h(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)}function d(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function m(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function g(){return document.createComment("")}function b(t,e,n){t.addEventListener(e,n,!1)}function _(t,e,n){t.removeEventListener(e,n,!1)}function y(t,e,n){t.setAttribute(e,n)}function w(t,e,n){t.style.setProperty(e,n)}function x(t,e){for(var n=0;n<t.options.length;n+=1){var r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function M(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function C(){return Object.create(null)}function N(t){this.destroy=u,this.fire("destroy"),this.set=this.get=u,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function k(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function S(t,e){return t!=t?e==e:t!==e}function T(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var a=n[r];a.__calling||(a.__calling=!0,a.call(this,e),a.__calling=!1)}}function F(t){return t?this._state[t]:this._state}function R(t,e){t._handlers=C(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function D(t,e,n){var r=e.bind(this);return n&&!1===n.init||r(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",function(e){e.changed[t]&&r(e.current[t],e.previous&&e.previous[t])})}function H(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function I(t){for(;t&&t.length;)t.shift()()}function L(){this.store._remove(this)}t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i;var A={destroy:N,get:F,fire:T,observe:D,on:H,set:function(t){this._set(s({},t)),this.root._lock||(this.root._lock=!0,I(this.root._beforecreate),I(this.root._oncreate),I(this.root._aftercreate),this.root._lock=!1)},teardown:N,_recompute:u,_set:function(t){var e=this._state,n={},r=!1;for(var a in t)this._differs(t[a],e[a])&&(n[a]=r=!0);r&&(this._state=s(s({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:k};function U(t){var e=typeof t;return"function"===e||"object"===e&&!!t}var O,E=Array.prototype,j=Object.prototype,$=E.slice,V=j.toString,q=j.hasOwnProperty,Y=Array.isArray,B=Object.keys;function P(t,e){return null!=t&&q.call(t,e)}function z(t){if(!U(t))return[];if(B)return B(t);var e=[];for(var n in t)P(t,n)&&e.push(n);return ht&&function(t,e){var n=dt.length,r=t.constructor,a=G(r)&&r.prototype||j,o="constructor";P(t,o)&&!Z(e,o)&&e.push(o);for(;n--;)(o=dt[n])in t&&t[o]!==a[o]&&!Z(e,o)&&e.push(o)}(t,e),e}var W=function(t,e,n){return function(r,a,o){var i=0,u=lt(r);if("number"==typeof o)t>0?i=o>=0?o:Math.max(o+u,i):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return o=n(r,a),r[o]===a?o:-1;if(a!=a)return(o=e($.call(r,i,u),Q))>=0?o+i:-1;for(o=t>0?i:u-1;o>=0&&o<u;o+=t)if(r[o]===a)return o;return-1}}(1,(O=1,function(t,e,n){e=it(e,n);for(var r=lt(t),a=O>0?0:r-1;a>=0&&a<r;a+=O)if(e(t[a],a,t))return a;return-1}),function(t,e,n,r){for(var a=(n=it(n,r,1))(e),o=0,i=lt(t);o<i;){var u=Math.floor((o+i)/2);n(t[u])<a?o=u+1:i=u}return o});function Z(t,e,n,r){return ft(t)||(t=function(t){for(var e=z(t),n=e.length,r=Array(n),a=0;a<n;a++)r[a]=t[e[a]];return r}(t)),("number"!=typeof n||r)&&(n=0),W(t,e,n)>=0}var J=Y||function(t){return"[object Array]"===V.call(t)};var G=("function"!=typeof/./&&"object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(t){return"function"==typeof t||!1}:null)||function(t){return"[object Function]"===V.call(t)};!function(){V.call(arguments)}();function Q(t){return function(t){return"[object Number]"===V.call(t)}(t)&&isNaN(t)}var X=ot;function K(t){return t}var tt,et,nt=(tt=z,function(t){var e=arguments,n=arguments.length;if(et&&(t=Object(t)),n<2||null==t)return t;for(var r=1;r<n;r++)for(var a=e[r],o=tt(a),i=o.length,u=0;u<i;u++){var s=o[u];!U(t)||et&&void 0!==t[s]||(t[s]=a[s])}return t});function rt(t){return t=nt({},t),function(e){return function(t,e){var n=z(e),r=n.length;if(null==t)return!r;for(var a=Object(t),o=0;o<r;o++){var i=n[o];if(e[i]!==a[i]||!(i in a))return!1}return!0}(e,t)}}function at(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,a){return t.call(e,n,r,a)};case 4:return function(n,r,a,o){return t.call(e,n,r,a,o)}}return function(){return t.apply(e,arguments)}}function ot(t,e){return it(t,e,1/0)}function it(t,e,n){return X!==ot?X(t,e):null==t?K:G(t)?at(t,e,n):U(t)?rt(t):st(t)}function ut(t,e){return e=null==e?t.length-1:+e,function(){for(var n=arguments,r=Math.max(arguments.length-e,0),a=Array(r),o=0;o<r;o++)a[o]=n[o+e];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,arguments[0],a);case 2:return t.call(this,arguments[0],arguments[1],a)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=n[o];return i[e]=a,t.apply(this,i)}}function st(t){return function(e){return null==e?void 0:e[t]}}var ct=Math.pow(2,53)-1,lt=st("length"),ft=function(t){var e=lt(t);return"number"==typeof e&&e>=0&&e<=ct};var ht=!{toString:null}.propertyIsEnumerable("toString"),dt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];!function(t){for(var e={},n=z(t),r=0,a=n.length;r<a;r++)e[t[n[r]]]=n[r]}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"});var mt=ut(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)});function vt(t){if(!t||"object"!=typeof t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}var pt=window.dw;function gt(t,e){var n=arguments;if(void 0===e&&(e="core"),t=t.trim(),!pt.backend.__messages[e])return"MISSING:"+t;var r=pt.backend.__messages[e][t]||pt.backend.__messages.core[t]||t;if(arguments.length>2)for(var a=2;a<arguments.length;a++){var o=a-1;r=r.replace("$"+o,n[a])}return r}var bt={insert:function(t){var e=this.get().cm;e.replaceSelection(t.key),e.focus()},removeColumn:function(){var t=this.get().column,e=this.store.get("dw_chart"),n=e.dataset(),r=vt(e.get("metadata.describe.computed-columns",{}));delete r[t.name()];var a=n.columnOrder()[n.indexOf(t.name())],o=[];e.get("metadata.data.changes",[]).forEach(function(t){t.column!==a&&(t.column>a&&t.column--,o.push(t))}),e.set("metadata.describe.computed-columns",r),e.set("metadata.data.changes",o),e.saveSoon(),this.fire("updateTable"),this.fire("unselect")}};function _t(){var e=this,n=this.get().column,r=this.store.get("dw_chart"),a=r.get("metadata.describe.computed-columns",{});this.set({formula:a[n.name()]||"",name:n.title()}),this.observe("column",function(t){t&&e.set({formula:a[t.name()]||"",name:t.title()})});var o=this;var i=t.fromTextArea(this.refs.code,{value:this.get("formula")||"",mode:"simple",indentUnit:2,tabSize:2,lineWrapping:!0,matchBrackets:!0,placeholder:"// enter formula here",continueComments:"Enter",extraKeys:{Tab:"autocomplete"},hintOptions:{hint:function(e){var n=e.getCursor(),r=e.getTokenAt(n),a=[],i=o.get("keywords");return"variable"===r.type&&(a=i.filter(function(t){return 0===t.toLowerCase().indexOf(r.string.toLowerCase())})),{list:a,from:t.Pos(n.line,r.start),to:t.Pos(n.line,r.end)}}}});window.CodeMirror=t,this.set({cm:i});var u,s,c,l,f,h,d,m=(u=function(){return e.fire("updateTable")},s=1500,h=function(t,e){l=null,e&&(f=u.apply(t,e))},(d=ut(function(t){if(l&&clearTimeout(l),c){var e=!l;l=setTimeout(h,s),e&&(f=u.apply(this,t))}else l=mt(h,s,this,t);return f})).cancel=function(){clearTimeout(l),l=null},d);this.observe("formula",function(t){t!==i.getValue()&&i.setValue(t);var n=e.get().column,a=vt(r.get("metadata.describe.computed-columns",{}));a[n.name()]!==t&&(a[n.name()]=t,r.set("metadata.describe.computed-columns",a),r.saveSoon&&r.saveSoon(),m())}),this.observe("name",function(t){var n=e.get().column,a=vt(r.get("metadata.data.changes",[])),o=r.dataset(),i=o.columnOrder()[o.indexOf(n.name())],u=-1;a.forEach(function(t,e){t.column===i&&0===t.row&&(u=e)}),u>-1?(a[u].value=t,a[u].time=(new Date).getTime()):a.push({column:i,row:0,value:t,time:(new Date).getTime()}),r.set("metadata.data.changes",a),r.saveSoon&&r.saveSoon(),m()}),i.on("change",function(t){e.set({formula:t.getValue()})}),this.observe("metaColumns",function(n){var r=new RegExp("(?:"+e.get("keywords").join("|")+")");t.defineSimpleMode("simplemode",{start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"string"},{regex:/(function)(\s+)([a-z$][\w$]*)/,token:["keyword",null,"keyword"]},{regex:/(?:function|var|return|if|for|while|else|do|this)\b/,token:"keyword"},{regex:/true|false|null|undefined/,token:"atom"},{regex:/0x[a-f\d]+|[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:/\/\/.*/,token:"comment"},{regex:/\/(?:[^\\]|\\.)*?\//,token:"variable-3"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+/*=<>!]+/,token:"operator"},{regex:/[{[(]/,indent:!0},{regex:/[}\])]/,dedent:!0},{regex:r,token:"variable-2"},{regex:/[a-z$][\w$]*/,token:"variable"},{regex:/<</,token:"meta",mode:{spec:"xml",end:/>>/}}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],lineComment:"//"}}),i.setOption("mode","simplemode")})}function yt(t,e){var n,r,a=e.col,o=(e.each_value,e.col_index,a.key);return{c:function(){n=m("li"),r=p(o),this.h()},h:function(){b(n,"click",wt),n.className="svelte-ruqb83",n._svelte={component:t,each_value:e.each_value,col_index:e.col_index}},m:function(t,e){l(n,t,e),c(r,n)},p:function(t,e){a=e.col,e.each_value,e.col_index,t.metaColumns&&o!==(o=a.key)&&(r.data=o),n._svelte.each_value=e.each_value,n._svelte.col_index=e.col_index},u:function(){f(n)},d:function(){_(n,"click",wt)}}}function wt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.col_index];e.insert(n)}function xt(t){R(this,t),this.refs={},this._state=s({name:"",formula:""},t.data),this._recompute({column:1,columns:1,metaColumns:1},this._state);var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){var n,r,a,o,i,u,h,v,g,x,M,C,N,k,S,T,F,R,D,H,I,L,A,U,O,E,j,$=gt("computed columns / modal / intro"),V=gt("computed columns / modal / name"),q=!1,Y=gt("computed columns / modal / formula"),B=gt("computed columns / modal / available columns"),P=gt("computed columns / modal / remove");function z(){q=!0,t.set({name:M.value}),q=!1}for(var W=e.metaColumns,Z=[],J=0;J<W.length;J+=1)Z[J]=yt(t,s(s({},e),{each_value:W,col:W[J],col_index:J}));function G(e){t.removeColumn()}return{c:function(){n=m("div"),r=m("h3"),a=p(e.title),o=p("\n    "),i=m("p"),u=p($),h=p("\n\n    "),v=m("label"),g=p(V),x=p("\n    "),M=m("input"),C=p("\n\n    "),N=m("label"),k=p(Y),S=p("\n    "),T=m("textarea"),F=p("\n\n    "),R=m("p"),D=p(B),H=p(":"),I=p("\n\n    "),L=m("ul");for(var t=0;t<Z.length;t+=1)Z[t].c();A=p("\n\n"),U=m("button"),O=m("i"),E=p(" "),j=p(P),this.h()},h:function(){r.className="first",v.className="svelte-ruqb83",b(M,"input",z),y(M,"type","text"),N.className="svelte-ruqb83",T.className="code",w(R,"margin-top","1em"),L.className="col-select svelte-ruqb83",w(n,"margin-bottom","15px"),O.className="fa fa-trash",b(U,"click",G),U.className="btn btn-danger"},m:function(s,f){l(n,s,f),c(r,n),c(a,r),c(o,n),c(i,n),c(u,i),c(h,n),c(v,n),c(g,v),c(x,n),c(M,n),M.value=e.name,c(C,n),c(N,n),c(k,N),c(S,n),c(T,n),t.refs.code=T,c(F,n),c(R,n),c(D,R),c(H,R),c(I,n),c(L,n);for(var d=0;d<Z.length;d+=1)Z[d].m(L,null);l(A,s,f),l(U,s,f),c(O,U),c(E,U),c(j,U)},p:function(e,n){e.title&&(a.data=n.title),q||(M.value=n.name);var r=n.metaColumns;if(e.metaColumns){for(var o=0;o<r.length;o+=1){var i=s(s({},n),{each_value:r,col:r[o],col_index:o});Z[o]?Z[o].p(e,i):(Z[o]=yt(t,i),Z[o].c(),Z[o].m(L,null))}for(;o<Z.length;o+=1)Z[o].u(),Z[o].d();Z.length=r.length}},u:function(){f(n);for(var t=0;t<Z.length;t+=1)Z[t].u();f(A),f(U)},d:function(){_(M,"input",z),t.refs.code===T&&(t.refs.code=null),d(Z),_(U,"click",G)}}}(this,this._state),this.root._oncreate.push(function(){_t.call(e),e.fire("update",{changed:{column:1,columns:1,metaColumns:1,title:1,name:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),I(this._oncreate))}function Mt(t){R(this,t),this._state=s({disabled:!1,faded:!1},t.data),this._fragment=function(t,e){var n,r,a,o,i,u,s;function h(){t.set({value:a.checked})}return{c:function(){n=m("div"),r=m("label"),a=m("input"),o=m("span"),i=p("\n         "),u=p(e.label),this.h()},h:function(){b(a,"change",h),y(a,"type","checkbox"),a.disabled=e.disabled,a.className="svelte-vnsjtu",o.className="css-ui svelte-vnsjtu",r.className=s="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-vnsjtu",n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(t,s){l(n,t,s),c(r,n),c(a,r),a.checked=e.value,c(o,r),c(i,r),c(u,r)},p:function(t,e){a.checked=e.value,t.disabled&&(a.disabled=e.disabled),t.label&&(u.data=e.label),(t.disabled||t.faded)&&s!==(s="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-vnsjtu")&&(r.className=s)},u:function(){f(n)},d:function(){_(a,"change",h)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function Ct(t,e){var n,r,a,o=e.opt,i=(e.each_value,e.opt_index,o.label);return{c:function(){n=m("option"),r=p(i),this.h()},h:function(){n.__value=a=o.value,n.value=n.__value},m:function(t,e){l(n,t,e),c(r,n)},p:function(t,e){o=e.opt,e.each_value,e.opt_index,t.options&&i!==(i=o.label)&&(r.data=i),t.options&&a!==(a=o.value)&&(n.__value=a),n.value=n.__value},u:function(){f(n)},d:u}}function Nt(t,e){for(var n,r=e.options,a=[],o=0;o<r.length;o+=1)a[o]=Ct(0,s(s({},e),{each_value:r,opt:r[o],opt_index:o}));return{c:function(){for(var t=0;t<a.length;t+=1)a[t].c();n=g()},m:function(t,e){for(var r=0;r<a.length;r+=1)a[r].m(t,e);l(n,t,e)},p:function(t,e){var r=e.options;if(t.options){for(var o=0;o<r.length;o+=1){var i=s(s({},e),{each_value:r,opt:r[o],opt_index:o});a[o]?a[o].p(t,i):(a[o]=Ct(0,i),a[o].c(),a[o].m(n.parentNode,n))}for(;o<a.length;o+=1)a[o].u(),a[o].d();a.length=r.length}},u:function(){for(var t=0;t<a.length;t+=1)a[t].u();f(n)},d:function(){d(a)}}}function kt(t,e){for(var n,r,a=e.optgroup,o=(e.each_value_1,e.optgroup_index,a.options),i=[],u=0;u<o.length;u+=1)i[u]=St(t,s(s({},e),{each_value_2:o,opt:o[u],opt_index_1:u}));return{c:function(){n=m("optgroup");for(var t=0;t<i.length;t+=1)i[t].c();this.h()},h:function(){y(n,"label",r=a.label)},m:function(t,e){l(n,t,e);for(var r=0;r<i.length;r+=1)i[r].m(n,null)},p:function(e,o){a=o.optgroup,o.each_value_1,o.optgroup_index;var u=a.options;if(e.optgroups){for(var c=0;c<u.length;c+=1){var l=s(s({},o),{each_value_2:u,opt:u[c],opt_index_1:c});i[c]?i[c].p(e,l):(i[c]=St(t,l),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].u(),i[c].d();i.length=u.length}e.optgroups&&r!==(r=a.label)&&y(n,"label",r)},u:function(){f(n);for(var t=0;t<i.length;t+=1)i[t].u()},d:function(){d(i)}}}function St(t,e){e.optgroup,e.each_value_1,e.optgroup_index;var n,r,a,o=e.opt,i=(e.each_value_2,e.opt_index_1,o.label);return{c:function(){n=m("option"),r=p(i),this.h()},h:function(){n.__value=a=o.value,n.value=n.__value},m:function(t,e){l(n,t,e),c(r,n)},p:function(t,e){e.optgroup,e.each_value_1,e.optgroup_index,o=e.opt,e.each_value_2,e.opt_index_1,t.optgroups&&i!==(i=o.label)&&(r.data=i),t.optgroups&&a!==(a=o.value)&&(n.__value=a),n.value=n.__value},u:function(){f(n)},d:u}}function Tt(t,e){for(var n,r=e.optgroups,a=[],o=0;o<r.length;o+=1)a[o]=kt(t,s(s({},e),{each_value_1:r,optgroup:r[o],optgroup_index:o}));return{c:function(){for(var t=0;t<a.length;t+=1)a[t].c();n=g()},m:function(t,e){for(var r=0;r<a.length;r+=1)a[r].m(t,e);l(n,t,e)},p:function(e,r){var o=r.optgroups;if(e.optgroups){for(var i=0;i<o.length;i+=1){var u=s(s({},r),{each_value_1:o,optgroup:o[i],optgroup_index:i});a[i]?a[i].p(e,u):(a[i]=kt(t,u),a[i].c(),a[i].m(n.parentNode,n))}for(;i<a.length;i+=1)a[i].u(),a[i].d();a.length=o.length}},u:function(){for(var t=0;t<a.length;t+=1)a[t].u();f(n)},d:function(){d(a)}}}function Ft(t){R(this,t),this._state=s({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){var n,r,a,o,i,u,s,h,d=!1,v=e.options.length&&Nt(0,e),y=e.optgroups.length&&Tt(t,e);function C(){d=!0,t.set({value:M(u)}),d=!1}return{c:function(){n=m("div"),r=m("label"),o=p("\n\n    "),i=m("div"),u=m("select"),v&&v.c(),s=g(),y&&y.c(),this.h()},h:function(){w(r,"width",e.labelWidth),r.className=a="control-label "+(e.disabled?"disabled":"")+" svelte-jp3jqj",b(u,"change",C),"value"in e||t.root._beforecreate.push(C),u.disabled=e.disabled,w(u,"width",e.width),i.className=h="controls form-inline "+(e.disabled?"disabled":""),n.className="control-group vis-option-type-select"},m:function(t,a){l(n,t,a),c(r,n),r.innerHTML=e.label,c(o,n),c(i,n),c(u,i),v&&v.m(u,null),c(s,u),y&&y.m(u,null),x(u,e.value)},p:function(e,n){e.label&&(r.innerHTML=n.label),e.labelWidth&&w(r,"width",n.labelWidth),e.disabled&&a!==(a="control-label "+(n.disabled?"disabled":"")+" svelte-jp3jqj")&&(r.className=a),n.options.length?v?v.p(e,n):((v=Nt(0,n)).c(),v.m(u,s)):v&&(v.u(),v.d(),v=null),n.optgroups.length?y?y.p(e,n):((y=Tt(t,n)).c(),y.m(u,null)):y&&(y.u(),y.d(),y=null),d||x(u,n.value),e.disabled&&(u.disabled=n.disabled),e.width&&w(u,"width",n.width),e.disabled&&h!==(h="controls form-inline "+(n.disabled?"disabled":""))&&(i.className=h)},u:function(){r.innerHTML="",f(n),v&&v.u(),y&&y.u()},d:function(){v&&v.d(),y&&y.d(),_(u,"change",C)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),I(this._beforecreate))}s(xt.prototype,A),s(xt.prototype,bt),xt.prototype._recompute=function(t,e){var n;t.column&&this._differs(e.title,e.title=(n=e.column,gt("describe / edit-column").replace("%s",'"'+(n?n.title()||n.name():"--")+'"')))&&(t.title=!0),t.columns&&this._differs(e.metaColumns,e.metaColumns=function(t){var e=t.columns;return e?e.map(function(t){return{key:(e=t.name(),e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"").replace(/-/g,"_").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(abstract|arguments|await|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|enum|eval|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|let|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var|void|volatile|while|window|with|yield)$/,"$1_")),title:t.title(),type:t.type()};var e}):[]}(e))&&(t.metaColumns=!0),t.metaColumns&&this._differs(e.keywords,e.keywords=function(t){var e=["sum","round","min","max","median","mean"];return t.metaColumns.forEach(function(t){e.push(t.key),"number"===t.type&&(e.push(t.key+"__sum"),e.push(t.key+"__min"),e.push(t.key+"__max"),e.push(t.key+"__mean"),e.push(t.key+"__median"))}),e}(e))&&(t.keywords=!0)},s(Mt.prototype,A),s(Ft.prototype,A);var Rt=Date.now||function(){return(new Date).getTime()};function Dt(t,e,n){var r,a,o,i,u=0;n||(n={});var s=function(){u=!1===n.leading?0:Rt(),r=null,i=t.apply(a,o),r||(a=o=null)},c=function(){var c=Rt();u||!1!==n.leading||(u=c);var l=e-(c-u);return a=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),u=c,i=t.apply(a,o),r||(a=o=null)):r||!1===n.trailing||(r=setTimeout(s,l)),i};return c.cancel=function(){clearTimeout(r),u=0,r=a=o=null},c}function Ht(t){if(J(t)){var e={};return Object.keys(t).forEach(function(n){return e[n]=t[n]}),e}return t}function It(t){return(+t).toFixed(function(t){return Math.max(0,String(t-Math.floor(t)).replace(/00000*[0-9]+$/,"").replace(/99999*[0-9]+$/,"").length-2)}(t))}var Lt={autoDivisor:function(){var t=this.store.get("dw_chart"),e=this.get().column,n=dw.utils.metricSuffix(t.locale()),r=e.values(),a=dw.utils.significantDimension(r),o=a<-2?3*Math.round(-1*a/3):a>4?-1*a:0,i=r.map(function(t){return t/Math.pow(10,o)}),u=dw.utils.significantDimension(i);u<=0&&(u=i.reduce(function(t,e){return Math.max(t,Math.min(3,dw.utils.tailLength(e)))},0)),u===o&&(o=0,u=0),o>15&&(o=0,u=0),this.set({columnFormat:{"number-divisor":o,"number-format":"n"+Math.max(0,u),"number-prepend":"","number-append":o?n[o]||" × 10<sup>"+o+"</sup>":""}})},getColumnFormat:function(t){var e=vt(Ht(this.store.get("dw_chart").get("metadata.data.column-format",{}))[t.name()]);return e&&"auto"!==e&&void 0===e.length||(e={type:"auto",ignore:!1,"number-divisor":0,"number-prepend":"","number-append":"","number-format":"auto"}),e}};function At(t,e){var n,r,a,o,i,u,s,h,d,v,g={},x={},M=gt("Prepend/Append"),C=!1,N=!1,k={label:gt("Round numbers to"),options:e.roundOptions,optgroups:e.numberFormats,width:"180px"};"number-format"in e.columnFormat&&(k.value=e.columnFormat["number-format"],g.value=!0);var S=new Ft({root:t.root,data:k,_bind:function(e,n){var r=t.get(),a={};!g.value&&e.value&&(r.columnFormat["number-format"]=n.value,a.columnFormat=r.columnFormat),t._set(a),g={}}});t.root._beforecreate.push(function(){S._bind({value:1},S.get())});var T={label:gt("Divide numbers by"),options:e.divisors_opts,optgroups:e.divisors,width:"180px"};"number-divisor"in e.columnFormat&&(T.value=e.columnFormat["number-divisor"],x.value=!0);var F=new Ft({root:t.root,data:T,_bind:function(e,n){var r=t.get(),a={};!x.value&&e.value&&(r.columnFormat["number-divisor"]=n.value,a.columnFormat=r.columnFormat),t._set(a),x={}}});function R(){var e=t.get();C=!0,e.columnFormat["number-prepend"]=h.value,t.set({columnFormat:e.columnFormat}),C=!1}function D(){var e=t.get();N=!0,e.columnFormat["number-append"]=v.value,t.set({columnFormat:e.columnFormat}),N=!1}return t.root._beforecreate.push(function(){F._bind({value:1},F.get())}),{c:function(){S._fragment.c(),n=p("\n\n        \n        "),F._fragment.c(),r=p("\n\n        "),a=m("div"),o=m("label"),i=p(M),u=p("\n            "),s=m("div"),h=m("input"),d=p("\n                #\n                "),v=m("input"),this.h()},h:function(){o.className="control-label",b(h,"input",R),h.autocomplete="screw-you-google-chrome",w(h,"width","6ex"),w(h,"text-align","right"),h.dataset.lpignore="true",h.name="prepend",y(h,"type","text"),b(v,"input",D),v.autocomplete="screw-you-google-chrome",w(v,"width","6ex"),v.dataset.lpignore="true",v.name="append",y(v,"type","text"),s.className="controls form-inline",a.className="control-group vis-option-type-select"},m:function(t,f){S._mount(t,f),l(n,t,f),F._mount(t,f),l(r,t,f),l(a,t,f),c(o,a),c(i,o),c(u,a),c(s,a),c(h,s),h.value=e.columnFormat["number-prepend"],c(d,s),c(v,s),v.value=e.columnFormat["number-append"]},p:function(t,e){var n={};n.label=gt("Round numbers to"),t.roundOptions&&(n.options=e.roundOptions),t.numberFormats&&(n.optgroups=e.numberFormats),!g.value&&t.columnFormat&&(n.value=e.columnFormat["number-format"],g.value=!0),S._set(n),g={};var r={};r.label=gt("Divide numbers by"),t.divisors_opts&&(r.options=e.divisors_opts),t.divisors&&(r.optgroups=e.divisors),!x.value&&t.columnFormat&&(r.value=e.columnFormat["number-divisor"],x.value=!0),F._set(r),x={},C||(h.value=e.columnFormat["number-prepend"]),N||(v.value=e.columnFormat["number-append"])},u:function(){S._unmount(),f(n),F._unmount(),f(r),f(a)},d:function(){S.destroy(!1),F.destroy(!1),_(h,"input",R),_(v,"input",D)}}}function Ut(t){R(this,t),this._state=s({columnFormat:{type:"auto",ignore:!1,"number-divisor":0,"number-format":"auto","number-prepend":"","number-append":""},colTypes:[],divisors_opts:[{value:0,label:gt("describe / column-format / no-change")},{value:"auto",label:gt("describe / column-format / automatic")}],divisors:[{label:gt("describe / column-format / divide-by"),options:[{value:3,label:"1000"},{value:6,label:"1 million"},{value:9,label:"1 billion"}]},{label:gt("describe / column-format / multiply-by"),options:[{value:-2,label:"100"},{value:-3,label:"1000"},{value:-6,label:"1 million"},{value:-9,label:"1 billion"},{value:-12,label:"1 trillion"}]}],numberFormats:[{label:gt("Decimal places"),options:[{value:"n3",label:"3 (1,234.568)"},{value:"n2",label:"2 (1,234.57)"},{value:"n1",label:"1 (1,234.6)"},{value:"n0",label:"0 (1,235)"}]},{label:gt("Significant digits"),options:[{value:"s6",label:"6 (1,234.57)"},{value:"s5",label:"5 (123.45)"},{value:"s4",label:"4 (12.34)"},{value:"s3",label:"3 (1.23)"},{value:"s2",label:"2 (0.12)"},{value:"s1",label:"1 (0.01)"}]}],roundOptions:[{value:"-",label:gt("describe / column-format / individual")},{value:"auto",label:gt("describe / column-format / auto-detect")}]},t.data),this._recompute({column:1},this._state);var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,r,a,o,i,u,s,h,d,v={},g={},b={label:gt("Column type"),options:e.colTypes,width:"180px"};"type"in e.columnFormat&&(b.value=e.columnFormat.type,v.value=!0);var _=new Ft({root:t.root,data:b,_bind:function(e,n){var r=t.get(),a={};!v.value&&e.value&&(r.columnFormat.type=n.value,a.columnFormat=r.columnFormat),t._set(a),v={}}});t.root._beforecreate.push(function(){_._bind({value:1},_.get())});var y={label:gt("Hide column from visualization")};"ignore"in e.columnFormat&&(y.value=e.columnFormat.ignore,g.value=!0);var w=new Mt({root:t.root,data:y,_bind:function(e,n){var r=t.get(),a={};!g.value&&e.value&&(r.columnFormat.ignore=n.value,a.columnFormat=r.columnFormat),t._set(a),g={}}});t.root._beforecreate.push(function(){w._bind({value:1},w.get())});var x=e.column&&"number"==e.column.type()&&At(t,e);return{c:function(){n=m("div"),r=m("h3"),a=p(e.title),o=p("\n\n    "),i=m("div"),_._fragment.c(),u=p("\n\n        "),w._fragment.c(),s=p("\n\n        "),h=m("hr"),d=p("\n\n        "),x&&x.c(),this.h()},h:function(){r.className="first",i.className="form-horizontal"},m:function(t,e){l(n,t,e),c(r,n),c(a,r),c(o,n),c(i,n),_._mount(i,null),c(u,i),w._mount(i,null),c(s,i),c(h,i),c(d,i),x&&x.m(i,null)},p:function(e,n){e.title&&(a.data=n.title);var r={};r.label=gt("Column type"),e.colTypes&&(r.options=n.colTypes),!v.value&&e.columnFormat&&(r.value=n.columnFormat.type,v.value=!0),_._set(r),v={};var o={};o.label=gt("Hide column from visualization"),!g.value&&e.columnFormat&&(o.value=n.columnFormat.ignore,g.value=!0),w._set(o),g={},n.column&&"number"==n.column.type()?x?x.p(e,n):((x=At(t,n)).c(),x.m(i,null)):x&&(x.u(),x.d(),x=null)},u:function(){f(n),x&&x.u()},d:function(){_.destroy(!1),w.destroy(!1),x&&x.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this,e=Dt(function(){t.fire("updateTable")},100,{leading:!1}),n=Dt(function(){t.fire("updateTable")},100,{leading:!1}),r=this.get().column;this.set({colTypes:[{value:"auto",label:"auto ("+r.type()+")"},{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"}]}),this.set({columnFormat:this.getColumnFormat(r)}),this.observe("column",function(e){t.set({columnFormat:t.getColumnFormat(e)}),t.get().colTypes[0].label="auto ("+r.type()+")"}),this.observe("columnFormat",function(r){var a=t.store.get("dw_chart"),o=t.get().column,i=Ht(vt(a.get("metadata.data.column-format",{}))),u=i[o.name()];if(!u||JSON.stringify(u)!==JSON.stringify(r)){if("auto"===r["number-divisor"])return void setTimeout(function(){return t.autoDivisor()},100);i[o.name()]=vt(r),a.set("metadata.data.column-format",i),a.saveSoon&&a.saveSoon(),u&&u.type===r.type?n():e()}})}).call(e),e.fire("update",{changed:{column:1,title:1,colTypes:1,columnFormat:1,roundOptions:1,numberFormats:1,divisors_opts:1,divisors:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,I(this._beforecreate),I(this._oncreate),I(this._aftercreate),this._lock=!1)}s(Ut.prototype,A),s(Ut.prototype,Lt),Ut.prototype._recompute=function(t,e){var n;t.column&&this._differs(e.title,e.title=(n=e.column,gt("describe / edit-column").replace("%s",'"'+(n?n.title()||n.name():"--")+'"')))&&(t.title=!0)};var Ot,Et,jt=(Ot=function(t,e,n){P(t,n)?t[n]++:t[n]=1},function(t,e,n){var r=Et?[[],[]]:{};return e=it(e,n),function(t,e,n){var r,a;if(e=at(e,n),ft(t))for(r=0,a=t.length;r<a;r++)e(t[r],r,t);else{var o=z(t);for(r=0,a=o.length;r<a;r++)e(t[o[r]],o[r],t)}}(t,function(n,a){var o=e(n,a,t);Ot(r,n,o)}),r});function $t(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var Vt,qt,Yt=(1===(Vt=$t).length&&(qt=Vt,Vt=function(t,e){return $t(qt(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var a=n+r>>>1;Vt(t[a],e)<0?n=a+1:r=a}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var a=n+r>>>1;Vt(t[a],e)>0?r=a:n=a+1}return n}}).right;var Bt=Math.sqrt(50),Pt=Math.sqrt(10),zt=Math.sqrt(2);function Wt(t,e,n){var r=(e-t)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,a);return a>=0?(o>=Bt?10:o>=Pt?5:o>=zt?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=Bt?10:o>=Pt?5:o>=zt?2:1)}function Zt(){}function Jt(t,e){var n=new Zt;if(t instanceof Zt)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,a=-1,o=t.length;if(null==e)for(;++a<o;)n.set(a,t[a]);else for(;++a<o;)n.set(e(r=t[a],a,t),r)}else if(t)for(var i in t)n.set(i,t[i]);return n}function Gt(){}Zt.prototype=Jt.prototype={constructor:Zt,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Qt=Jt.prototype;Gt.prototype=function(t,e){var n=new Gt;if(t instanceof Gt)t.each(function(t){n.add(t)});else if(t){var r=-1,a=t.length;if(null==e)for(;++r<a;)n.add(t[r]);else for(;++r<a;)n.add(e(t[r],r,t))}return n}.prototype={constructor:Gt,has:Qt.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Qt.remove,clear:Qt.clear,values:Qt.keys,size:Qt.size,empty:Qt.empty,each:Qt.each};var Xt=Array.prototype,Kt=Xt.map,te=Xt.slice,ee={name:"implicit"};function ne(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function re(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ae(){}var oe="\\s*([+-]?\\d+)\\s*",ie="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ue="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",se=/^#([0-9a-f]{3})$/,ce=/^#([0-9a-f]{6})$/,le=new RegExp("^rgb\\("+[oe,oe,oe]+"\\)$"),fe=new RegExp("^rgb\\("+[ue,ue,ue]+"\\)$"),he=new RegExp("^rgba\\("+[oe,oe,oe,ie]+"\\)$"),de=new RegExp("^rgba\\("+[ue,ue,ue,ie]+"\\)$"),me=new RegExp("^hsl\\("+[ie,ue,ue]+"\\)$"),ve=new RegExp("^hsla\\("+[ie,ue,ue,ie]+"\\)$"),pe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ge(t){var e;return t=(t+"").trim().toLowerCase(),(e=se.exec(t))?new xe((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=ce.exec(t))?be(parseInt(e[1],16)):(e=le.exec(t))?new xe(e[1],e[2],e[3],1):(e=fe.exec(t))?new xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=he.exec(t))?_e(e[1],e[2],e[3],e[4]):(e=de.exec(t))?_e(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=me.exec(t))?Me(e[1],e[2]/100,e[3]/100,1):(e=ve.exec(t))?Me(e[1],e[2]/100,e[3]/100,e[4]):pe.hasOwnProperty(t)?be(pe[t]):"transparent"===t?new xe(NaN,NaN,NaN,0):null}function be(t){return new xe(t>>16&255,t>>8&255,255&t,1)}function _e(t,e,n,r){return r<=0&&(t=e=n=NaN),new xe(t,e,n,r)}function ye(t){return t instanceof ae||(t=ge(t)),t?new xe((t=t.rgb()).r,t.g,t.b,t.opacity):new xe}function we(t,e,n,r){return 1===arguments.length?ye(t):new xe(t,e,n,null==r?1:r)}function xe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Me(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ce(t,e,n,r)}function Ce(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ne(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ne(ae,ge,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),ne(xe,we,re(ae,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),ne(Ce,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Ce)return new Ce(t.h,t.s,t.l,t.opacity);if(t instanceof ae||(t=ge(t)),!t)return new Ce;if(t instanceof Ce)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),o=Math.max(e,n,r),i=NaN,u=o-a,s=(o+a)/2;return u?(i=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=s<.5?o+a:2-o-a,i*=60):u=s>0&&s<1?0:i,new Ce(i,u,s,t.opacity)}(t):new Ce(t,e,n,null==r?1:r)},re(ae,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ce(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ce(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new xe(Ne(t>=240?t-240:t+120,a,r),Ne(t,a,r),Ne(t<120?t+240:t-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var ke=Math.PI/180,Se=180/Math.PI,Te=.96422,Fe=1,Re=.82521,De=4/29,He=6/29,Ie=3*He*He,Le=He*He*He;function Ae(t){if(t instanceof Ue)return new Ue(t.l,t.a,t.b,t.opacity);if(t instanceof Ve){if(isNaN(t.h))return new Ue(t.l,0,0,t.opacity);var e=t.h*ke;return new Ue(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof xe||(t=ye(t));var n,r,a=$e(t.r),o=$e(t.g),i=$e(t.b),u=Oe((.2225045*a+.7168786*o+.0606169*i)/Fe);return a===o&&o===i?n=r=u:(n=Oe((.4360747*a+.3850649*o+.1430804*i)/Te),r=Oe((.0139322*a+.0971045*o+.7141733*i)/Re)),new Ue(116*u-16,500*(n-u),200*(u-r),t.opacity)}function Ue(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Oe(t){return t>Le?Math.pow(t,1/3):t/Ie+De}function Ee(t){return t>He?t*t*t:Ie*(t-De)}function je(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function $e(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ve(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}ne(Ue,function(t,e,n,r){return 1===arguments.length?Ae(t):new Ue(t,e,n,null==r?1:r)},re(ae,{brighter:function(t){return new Ue(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ue(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new xe(je(3.1338561*(e=Te*Ee(e))-1.6168667*(t=Fe*Ee(t))-.4906146*(n=Re*Ee(n))),je(-.9787684*e+1.9161415*t+.033454*n),je(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ne(Ve,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Ve)return new Ve(t.h,t.c,t.l,t.opacity);if(t instanceof Ue||(t=Ae(t)),0===t.a&&0===t.b)return new Ve(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Se;return new Ve(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Ve(t,e,n,null==r?1:r)},re(ae,{brighter:function(t){return new Ve(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ve(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ae(this).rgb()}}));var qe=-.14861,Ye=1.78277,Be=-.29227,Pe=-.90649,ze=1.97294,We=ze*Pe,Ze=ze*Ye,Je=Ye*Be-Pe*qe;function Ge(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Qe(t){return function(){return t}}function Xe(t){return 1==(t=+t)?Ke:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Qe(isNaN(e)?n:e)}}function Ke(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Qe(isNaN(t)?e:t)}ne(Ge,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Ge)return new Ge(t.h,t.s,t.l,t.opacity);t instanceof xe||(t=ye(t));var e=t.r/255,n=t.g/255,r=t.b/255,a=(Je*r+We*e-Ze*n)/(Je+We-Ze),o=r-a,i=(ze*(n-a)-Be*o)/Pe,u=Math.sqrt(i*i+o*o)/(ze*a*(1-a)),s=u?Math.atan2(i,o)*Se-120:NaN;return new Ge(s<0?s+360:s,u,a,t.opacity)}(t):new Ge(t,e,n,null==r?1:r)},re(ae,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ge(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ke,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),a=Math.sin(t);return new xe(255*(e+n*(qe*r+Ye*a)),255*(e+n*(Be*r+Pe*a)),255*(e+n*(ze*r)),this.opacity)}}));var tn=function t(e){var n=Xe(e);function r(t,e){var r=n((t=we(t)).r,(e=we(e)).r),a=n(t.g,e.g),o=n(t.b,e.b),i=Ke(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=a(e),t.b=o(e),t.opacity=i(e),t+""}}return r.gamma=t,r}(1);function en(t,e){return e-=t=+t,function(n){return t+e*n}}var nn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rn=new RegExp(nn.source,"g");function an(t,e){var n,r=typeof e;return null==e||"boolean"===r?Qe(e):("number"===r?en:"string"===r?(n=ge(e))?(e=n,tn):function(t,e){var n,r,a,o=nn.lastIndex=rn.lastIndex=0,i=-1,u=[],s=[];for(t+="",e+="";(n=nn.exec(t))&&(r=rn.exec(e));)(a=r.index)>o&&(a=e.slice(o,a),u[i]?u[i]+=a:u[++i]=a),(n=n[0])===(r=r[0])?u[i]?u[i]+=r:u[++i]=r:(u[++i]=null,s.push({i:i,x:en(n,r)})),o=rn.lastIndex;return o<e.length&&(a=e.slice(o),u[i]?u[i]+=a:u[++i]=a),u.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}:e instanceof ge?tn:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,a=t?Math.min(r,t.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=an(t[n],e[n]);for(;n<r;++n)i[n]=e[n];return function(t){for(n=0;n<a;++n)i[n]=o[n](t);return i}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},a={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=an(t[n],e[n]):a[n]=e[n];return function(t){for(n in r)a[n]=r[n](t);return a}}:en)(t,e)}function on(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}Math.PI,Math.SQRT2;function un(t){return+t}var sn,cn=[0,1];function ln(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=e,function(){return n});var n}function fn(t,e,n,r){var a=t[0],o=t[1],i=e[0],u=e[1];return o<a?(a=n(o,a),i=r(u,i)):(a=n(a,o),i=r(i,u)),function(t){return i(a(t))}}function hn(t,e,n,r){var a=Math.min(t.length,e.length)-1,o=new Array(a),i=new Array(a),u=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<a;)o[u]=n(t[u],t[u+1]),i[u]=r(e[u],e[u+1]);return function(e){var n=Yt(t,e,1,a)-1;return i[n](o[n](e))}}function dn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function mn(t){return(t=dn(Math.abs(t)))?t[1]:NaN}function vn(t,e){var n=dn(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}var pn={"":function(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,a=1,o=-1;a<r;++a)switch(t[a]){case".":o=n=a;break;case"0":0===o&&(o=a),n=a;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return vn(100*t,e)},r:vn,s:function(t,e){var n=dn(t,e);if(!n)return t+"";var r=n[0],a=n[1],o=a-(sn=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+dn(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},gn=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function bn(t){return new _n(t)}function _n(t){if(!(e=gn.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",a=e[3]||"-",o=e[4]||"",i=!!e[5],u=e[6]&&+e[6],s=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(s=!0,l="g"):pn[l]||(l=""),(i||"0"===n&&"="===r)&&(i=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=a,this.symbol=o,this.zero=i,this.width=u,this.comma=s,this.precision=c,this.type=l}function yn(t){return t}bn.prototype=_n.prototype,_n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var wn,xn,Mn,Cn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Nn(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var a=t.length,o=[],i=0,u=e[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(t.substring(a-=u,a+u)),!((s+=u+1)>r));)u=e[i=(i+1)%e.length];return o.reverse().join(n)}):yn,a=t.currency,o=t.decimal,i=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):yn,u=t.percent||"%";function s(t){var e=(t=bn(t)).fill,n=t.align,s=t.sign,c=t.symbol,l=t.zero,f=t.width,h=t.comma,d=t.precision,m=t.type,v="$"===c?a[0]:"#"===c&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",p="$"===c?a[1]:/[%p]/.test(m)?u:"",g=pn[m],b=!m||/[defgprs%]/.test(m);function _(t){var a,u,c,_=v,y=p;if("c"===m)y=g(t)+y,t="";else{var w=(t=+t)<0;if(t=g(Math.abs(t),d),w&&0==+t&&(w=!1),_=(w?"("===s?s:"-":"-"===s||"("===s?"":s)+_,y=("s"===m?Cn[8+sn/3]:"")+y+(w&&"("===s?")":""),b)for(a=-1,u=t.length;++a<u;)if(48>(c=t.charCodeAt(a))||c>57){y=(46===c?o+t.slice(a+1):t.slice(a))+y,t=t.slice(0,a);break}}h&&!l&&(t=r(t,1/0));var x=_.length+t.length+y.length,M=x<f?new Array(f-x+1).join(e):"";switch(h&&l&&(t=r(M+t,M.length?f-y.length:1/0),M=""),n){case"<":t=_+t+y+M;break;case"=":t=_+M+t+y;break;case"^":t=M.slice(0,x=M.length>>1)+_+t+y+M.slice(x);break;default:t=M+_+t+y}return i(t)}return d=null==d?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),_.toString=function(){return t+""},_}return{format:s,formatPrefix:function(t,e){var n=s(((t=bn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(mn(e)/3))),a=Math.pow(10,-r),o=Cn[8+r/3];return function(t){return n(a*t)+o}}}}function kn(t,e,n){var r,a=t[0],o=t[t.length-1],i=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=Bt?a*=10:o>=Pt?a*=5:o>=zt&&(a*=2),e<t?-a:a}(a,o,null==e?10:e);switch((n=bn(null==n?",f":n)).type){case"s":var u=Math.max(Math.abs(a),Math.abs(o));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(mn(e)/3)))-mn(Math.abs(t)))}(i,u))||(n.precision=r),Mn(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mn(e)-mn(t))+1}(i,Math.max(Math.abs(a),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-mn(Math.abs(t)))}(i))||(n.precision=r-2*("%"===n.type))}return xn(n)}function Sn(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,a,o,i,u=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(a=t,t=e,e=a),0===(i=Wt(t,e,n))||!isFinite(i))return[];if(i>0)for(t=Math.ceil(t/i),e=Math.floor(e/i),o=new Array(a=Math.ceil(e-t+1));++u<a;)o[u]=(t+u)*i;else for(t=Math.floor(t*i),e=Math.ceil(e*i),o=new Array(a=Math.ceil(t-e+1));++u<a;)o[u]=(t-u)/i;return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return kn(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,a=e(),o=0,i=a.length-1,u=a[o],s=a[i];return s<u&&(r=u,u=s,s=r,r=o,o=i,i=r),(r=Wt(u,s,n))>0?r=Wt(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=Wt(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),r>0?(a[o]=Math.floor(u/r)*r,a[i]=Math.ceil(s/r)*r,e(a)):r<0&&(a[o]=Math.ceil(u*r)/r,a[i]=Math.floor(s*r)/r,e(a)),t},t}function Tn(){var t=function(t,e){var n,r,a,o=cn,i=cn,u=an,s=!1;function c(){return n=Math.min(o.length,i.length)>2?hn:fn,r=a=null,l}function l(e){return(r||(r=n(o,i,s?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,u)))(+e)}return l.invert=function(t){return(a||(a=n(i,o,ln,s?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},l.domain=function(t){return arguments.length?(o=Kt.call(t,un),c()):o.slice()},l.range=function(t){return arguments.length?(i=te.call(t),c()):i.slice()},l.rangeRound=function(t){return i=te.call(t),u=on,c()},l.clamp=function(t){return arguments.length?(s=!!t,c()):s},l.interpolate=function(t){return arguments.length?(u=t,c()):u},c()}(ln,en);return t.copy=function(){return e=t,Tn().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp());var e},Sn(t)}wn=Nn({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),xn=wn.format,Mn=wn.formatPrefix;var Fn=new Date,Rn=new Date;function Dn(t,e,n,r){function a(e){return t(e=new Date(+e)),e}return a.floor=a,a.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(n,r,o){var i,u=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return u;do{u.push(i=new Date(+n)),e(n,o),t(n)}while(i<n&&n<r);return u},a.filter=function(n){return Dn(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(a.count=function(e,r){return Fn.setTime(+e),Rn.setTime(+r),t(Fn),t(Rn),Math.floor(n(Fn,Rn))},a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?a.filter(r?function(e){return r(e)%t==0}:function(e){return a.count(0,e)%t==0}):a:null}),a}var Hn=Dn(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Hn.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Dn(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Hn:null};var In=6e4,Ln=6048e5,An=(Dn(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Dn(function(t){t.setTime(Math.floor(t/In)*In)},function(t,e){t.setTime(+t+e*In)},function(t,e){return(e-t)/In},function(t){return t.getMinutes()}),Dn(function(t){var e=t.getTimezoneOffset()*In%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Dn(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*In)/864e5},function(t){return t.getDate()-1}));function Un(t){return Dn(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*In)/Ln})}var On=Un(0),En=Un(1),jn=(Un(2),Un(3),Un(4)),$n=(Un(5),Un(6),Dn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Dn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));$n.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Dn(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};Dn(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*In)},function(t,e){return(e-t)/In},function(t){return t.getUTCMinutes()}),Dn(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()});var Vn=Dn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function qn(t){return Dn(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Ln})}var Yn=qn(0),Bn=qn(1),Pn=(qn(2),qn(3),qn(4)),zn=(qn(5),qn(6),Dn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Dn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function Wn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Zn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jn(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}zn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Dn(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Gn,Qn,Xn,Kn={"-":"",_:" ",0:"0"},tr=/^\s*\d+/,er=/^%/,nr=/[\\^$*+?|[\]().{}]/g;function rr(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(e)+a:a)}function ar(t){return t.replace(nr,"\\$&")}function or(t){return new RegExp("^(?:"+t.map(ar).join("|")+")","i")}function ir(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ur(t,e,n){var r=tr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function sr(t,e,n){var r=tr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function cr(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lr(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function fr(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function hr(t,e,n){var r=tr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function dr(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vr(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function pr(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function gr(t,e,n){var r=tr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function br(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function _r(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function yr(t,e,n){var r=tr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function wr(t,e,n){var r=tr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function xr(t,e,n){var r=tr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Mr(t,e,n){var r=er.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Cr(t,e,n){var r=tr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Nr(t,e,n){var r=tr.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function kr(t,e){return rr(t.getDate(),e,2)}function Sr(t,e){return rr(t.getHours(),e,2)}function Tr(t,e){return rr(t.getHours()%12||12,e,2)}function Fr(t,e){return rr(1+An.count($n(t),t),e,3)}function Rr(t,e){return rr(t.getMilliseconds(),e,3)}function Dr(t,e){return Rr(t,e)+"000"}function Hr(t,e){return rr(t.getMonth()+1,e,2)}function Ir(t,e){return rr(t.getMinutes(),e,2)}function Lr(t,e){return rr(t.getSeconds(),e,2)}function Ar(t){var e=t.getDay();return 0===e?7:e}function Ur(t,e){return rr(On.count($n(t),t),e,2)}function Or(t,e){var n=t.getDay();return t=n>=4||0===n?jn(t):jn.ceil(t),rr(jn.count($n(t),t)+(4===$n(t).getDay()),e,2)}function Er(t){return t.getDay()}function jr(t,e){return rr(En.count($n(t),t),e,2)}function $r(t,e){return rr(t.getFullYear()%100,e,2)}function Vr(t,e){return rr(t.getFullYear()%1e4,e,4)}function qr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+rr(e/60|0,"0",2)+rr(e%60,"0",2)}function Yr(t,e){return rr(t.getUTCDate(),e,2)}function Br(t,e){return rr(t.getUTCHours(),e,2)}function Pr(t,e){return rr(t.getUTCHours()%12||12,e,2)}function zr(t,e){return rr(1+Vn.count(zn(t),t),e,3)}function Wr(t,e){return rr(t.getUTCMilliseconds(),e,3)}function Zr(t,e){return Wr(t,e)+"000"}function Jr(t,e){return rr(t.getUTCMonth()+1,e,2)}function Gr(t,e){return rr(t.getUTCMinutes(),e,2)}function Qr(t,e){return rr(t.getUTCSeconds(),e,2)}function Xr(t){var e=t.getUTCDay();return 0===e?7:e}function Kr(t,e){return rr(Yn.count(zn(t),t),e,2)}function ta(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Pn(t):Pn.ceil(t),rr(Pn.count(zn(t),t)+(4===zn(t).getUTCDay()),e,2)}function ea(t){return t.getUTCDay()}function na(t,e){return rr(Bn.count(zn(t),t),e,2)}function ra(t,e){return rr(t.getUTCFullYear()%100,e,2)}function aa(t,e){return rr(t.getUTCFullYear()%1e4,e,4)}function oa(){return"+0000"}function ia(){return"%"}function ua(t){return+t}function sa(t){return Math.floor(+t/1e3)}!function(t){Gn=function(t){var e=t.dateTime,n=t.date,r=t.time,a=t.periods,o=t.days,i=t.shortDays,u=t.months,s=t.shortMonths,c=or(a),l=ir(a),f=or(o),h=ir(o),d=or(i),m=ir(i),v=or(u),p=ir(u),g=or(s),b=ir(s),_={a:function(t){return i[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:kr,e:kr,f:Dr,H:Sr,I:Tr,j:Fr,L:Rr,m:Hr,M:Ir,p:function(t){return a[+(t.getHours()>=12)]},Q:ua,s:sa,S:Lr,u:Ar,U:Ur,V:Or,w:Er,W:jr,x:null,X:null,y:$r,Y:Vr,Z:qr,"%":ia},y={a:function(t){return i[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Yr,e:Yr,f:Zr,H:Br,I:Pr,j:zr,L:Wr,m:Jr,M:Gr,p:function(t){return a[+(t.getUTCHours()>=12)]},Q:ua,s:sa,S:Qr,u:Xr,U:Kr,V:ta,w:ea,W:na,x:null,X:null,y:ra,Y:aa,Z:oa,"%":ia},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=m[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=b[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=p[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return C(t,e,n,r)},d:pr,e:pr,f:xr,H:br,I:br,j:gr,L:wr,m:vr,M:_r,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:Cr,s:Nr,S:yr,u:sr,U:cr,V:lr,w:ur,W:fr,x:function(t,e,r){return C(t,n,e,r)},X:function(t,e,n){return C(t,r,e,n)},y:dr,Y:hr,Z:mr,"%":Mr};function x(t,e){return function(n){var r,a,o,i=[],u=-1,s=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===t.charCodeAt(u)&&(i.push(t.slice(s,u)),null!=(a=Kn[r=t.charAt(++u)])?r=t.charAt(++u):a="e"===r?" ":"0",(o=e[r])&&(r=o(n,a)),i.push(r),s=u+1);return i.push(t.slice(s,u)),i.join("")}}function M(t,e){return function(n){var r,a,o=Jn(1900);if(C(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(a=(r=Zn(Jn(o.y))).getUTCDay())>4||0===a?Bn.ceil(r):Bn(r),r=Vn.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(a=(r=e(Jn(o.y))).getDay())>4||0===a?En.ceil(r):En(r),r=An.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Zn(Jn(o.y)).getUTCDay():e(Jn(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Zn(o)):e(o)}}function C(t,e,n,r){for(var a,o,i=0,u=e.length,s=n.length;i<u;){if(r>=s)return-1;if(37===(a=e.charCodeAt(i++))){if(a=e.charAt(i++),!(o=w[a in Kn?e.charAt(i++):a])||(r=o(t,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return _.x=x(n,_),_.X=x(r,_),_.c=x(e,_),y.x=x(n,y),y.X=x(r,y),y.c=x(e,y),{format:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",Wn);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",y);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t,Zn);return e.toString=function(){return t},e}}}(t),Gn.format,Gn.parse,Qn=Gn.utcFormat,Xn=Gn.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||Qn("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||Xn("%Y-%m-%dT%H:%M:%S.%LZ");function ca(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var la=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return ca(e(t),n)}),{left:function(e,n,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var o=r+a>>>1;t(e[o],n)<0?r=o+1:a=o}return r},right:function(e,n,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var o=r+a>>>1;t(e[o],n)>0?a=o:r=o+1}return r}}}(ca).right;function fa(t){return null===t?NaN:+t}function ha(t,e){var n,r,a,o=t.length,i=-1;if(null==e){for(;++i<o;)if(null!=(n=t[i])&&n>=n)for(r=a=n;++i<o;)null!=(n=t[i])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++i<o;)if(null!=(n=e(t[i],i,t))&&n>=n)for(r=a=n;++i<o;)null!=(n=e(t[i],i,t))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]}var da=Array.prototype.slice;function ma(t){return function(){return t}}function va(t){return t}var pa=Math.sqrt(50),ga=Math.sqrt(10),ba=Math.sqrt(2);function _a(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function ya(){var t=va,e=ha,n=_a;function r(r){var a,o,i=r.length,u=new Array(i);for(a=0;a<i;++a)u[a]=t(r[a],a,r);var s,c,l,f,h,d,m=e(u),v=m[0],p=m[1],g=n(u,v,p);Array.isArray(g)||(s=v,c=p,l=g,f=Math.abs(c-s)/Math.max(0,l),h=Math.pow(10,Math.floor(Math.log(f)/Math.LN10)),(d=f/h)>=pa?h*=10:d>=ga?h*=5:d>=ba&&(h*=2),g=c<s?-h:h,g=function(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(a);++r<a;)o[r]=t+r*n;return o}(Math.ceil(v/g)*g,p,g));for(var b=g.length;g[0]<=v;)g.shift(),--b;for(;g[b-1]>p;)g.pop(),--b;var _,y=new Array(b+1);for(a=0;a<=b;++a)(_=y[a]=[]).x0=a>0?g[a-1]:v,_.x1=a<b?g[a]:p;for(a=0;a<i;++a)v<=(o=u[a])&&o<=p&&y[la(g,o,0,b)].push(r[a]);return y}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:ma(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:ma([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?ma(da.call(t)):ma(t),r):n},r}function wa(t,e){var n,r,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<a;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<a;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r}function xa(t,e){var n,r=t.length,a=-1,o=[];if(null==e)for(;++a<r;)isNaN(n=fa(t[a]))||o.push(n);else for(;++a<r;)isNaN(n=fa(e(t[a],a,t)))||o.push(n);return function(t,e,n){if(null==n&&(n=fa),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,a=(r-1)*e,o=Math.floor(a),i=+n(t[o],o,t);return i+(+n(t[o+1],o+1,t)-i)*(a-o)}}(o.sort(ca),.5)}var Ma=Tn(),Ca=function t(){var e,n,r=function t(e){var n=Jt(),r=[],a=ee;function o(t){var o=t+"",i=n.get(o);if(!i){if(a!==ee)return a;n.set(o,i=r.push(t))}return e[(i-1)%e.length]}return e=null==e?[]:te.call(e),o.domain=function(t){if(!arguments.length)return r.slice();r=[],n=Jt();for(var e,a,i=-1,u=t.length;++i<u;)n.has(a=(e=t[i])+"")||n.set(a,r.push(e));return o},o.range=function(t){return arguments.length?(e=te.call(t),o):e.slice()},o.unknown=function(t){return arguments.length?(a=t,o):a},o.copy=function(){return t().domain(r).range(e).unknown(a)},o}().unknown(void 0),a=r.domain,o=r.range,i=[0,1],u=!1,s=0,c=0,l=.5;function f(){var t=a().length,r=i[1]<i[0],f=i[r-0],h=i[1-r];e=(h-f)/Math.max(1,t-s+2*c),u&&(e=Math.floor(e)),f+=(h-f-e*(t-s))*l,n=e*(1-s),u&&(f=Math.round(f),n=Math.round(n));var d=function(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(a);++r<a;)o[r]=t+r*n;return o}(t).map(function(t){return f+e*t});return o(r?d.reverse():d)}return delete r.unknown,r.domain=function(t){return arguments.length?(a(t),f()):a()},r.range=function(t){return arguments.length?(i=[+t[0],+t[1]],f()):i.slice()},r.rangeRound=function(t){return i=[+t[0],+t[1]],u=!0,f()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(t){return arguments.length?(u=!!t,f()):u},r.padding=function(t){return arguments.length?(s=c=Math.max(0,Math.min(1,t)),f()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),f()):s},r.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},r.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),f()):l},r.copy=function(){return t().domain(a()).range(i).round(u).paddingInner(s).paddingOuter(c).align(l)},f()}(),Na=Tn(),ka=function(t){return t?t<.01?"<1%":(100*t).toFixed(0)+"%":"0%"};function Sa(t){var e=t.validValues,n=t.format,r=function(t,e){var n,r,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<a;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<a;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}(e),a=wa(e),o=function(t,e){var n,r=t.length,a=r,o=-1,i=0;if(null==e)for(;++o<r;)isNaN(n=fa(t[o]))?--a:i+=n;else for(;++o<r;)isNaN(n=fa(e(t[o],o,t)))?--a:i+=n;if(a)return i/a}(e),i=xa(e);return[{x:r,label:n(r),name:"Min"},{x:a,label:n(a),name:"Max"},{x:o,label:n(o),name:gt("describe / histogram / mean")},{x:i,label:n(i),name:gt("describe / histogram / median")}]}function Ta(t){var e=t.niceDomain,n=t.validValues,r=e,a=ya().domain(r).thresholds(_a)(n),o=jt(a.map(function(t){return t.x1-t.x0}));if(a.length>2&&z(o).length>1){var i=a[1].x1-a[1].x0,u=r[0]+Math.ceil((r[1]-r[0])/i)*i;return ya().domain([r[0],u]).thresholds(function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),a=Array(r),o=0;o<r;o++,t+=n)a[o]=t;return a}(r[0],u+.4*i,i))(n)}return a}function Fa(t,e,n,r){return(0===e?gt("describe / histogram / tooltip / first"):e===n.length-1?gt("describe / histogram / tooltip / last"):gt("describe / histogram / tooltip")).replace("$1",t.length).replace("$2",ka(t.length/r)).replace("$3",It(t.x0)).replace("$4",It(t.x1))}function Ra(t,e){var n,r,a,o,i,s=e.tick,h=(e.each_value,e.tick_index,s.label);return{c:function(){n=v("g"),r=v("line"),a=v("text"),o=p(h),this.h()},h:function(){y(r,"y2","3"),y(r,"class","svelte-p5ucpx"),y(a,"y","5"),y(a,"class","svelte-p5ucpx"),y(n,"class","tick svelte-p5ucpx"),y(n,"transform",i="translate("+e.xScale(s.x)+",0)")},m:function(t,e){l(n,t,e),c(r,n),c(a,n),c(o,a)},p:function(t,e){s=e.tick,e.each_value,e.tick_index,t.ticks&&h!==(h=s.label)&&(o.data=h),(t.xScale||t.ticks)&&i!==(i="translate("+e.xScale(s.x)+",0)")&&y(n,"transform",i)},u:function(){f(n)},d:u}}function Da(t,e){var n,r;return{c:function(){n=v("polygon"),this.h()},h:function(){y(n,"transform",r="translate("+e.xScale(e.highlight.x)+",0)"),y(n,"points","0,0,4,6,-4,6")},m:function(t,e){l(n,t,e)},p:function(t,e){(t.xScale||t.highlight)&&r!==(r="translate("+e.xScale(e.highlight.x)+",0)")&&y(n,"transform",r)},u:function(){f(n)},d:u}}function Ha(t,e){var n,r,a,o,i,s,h,d=e.bin,m=(e.each_value_1,e.i),g=Fa(d,m,e.bins,e.validValues.length);return{c:function(){n=v("g"),r=v("title"),a=p(g),o=v("rect"),this.h()},h:function(){y(o,"width",i=d.x1!=d.x0?e.xScaleBand.bandwidth():20),y(o,"height",s=e.innerHeight-e.yScale(d.length)),y(o,"class","svelte-p5ucpx"),y(n,"class","bar"),y(n,"transform",h="translate("+e.xScaleBand(d.x0)+","+e.yScale(d.length)+")")},m:function(t,e){l(n,t,e),c(r,n),c(a,r),c(o,n)},p:function(t,e){d=e.bin,e.each_value_1,m=e.i,(t.bins||t.validValues)&&g!==(g=Fa(d,m,e.bins,e.validValues.length))&&(a.data=g),(t.bins||t.xScaleBand)&&i!==(i=d.x1!=d.x0?e.xScaleBand.bandwidth():20)&&y(o,"width",i),(t.innerHeight||t.yScale||t.bins)&&s!==(s=e.innerHeight-e.yScale(d.length))&&y(o,"height",s),(t.xScaleBand||t.bins||t.yScale)&&h!==(h="translate("+e.xScaleBand(d.x0)+","+e.yScale(d.length)+")")&&y(n,"transform",h)},u:function(){f(n)},d:u}}function Ia(t,e){var n,r,a,o,i,u=e.s,s=(e.each_value_2,e.s_index,u.name),h=u.label;return{c:function(){n=m("li"),r=p(s),a=p(": "),o=m("tt"),i=p(h),this.h()},h:function(){b(o,"mouseleave",Aa),b(o,"mouseenter",Ua),o.className="svelte-p5ucpx",o._svelte={component:t,each_value_2:e.each_value_2,s_index:e.s_index},n.className="svelte-p5ucpx"},m:function(t,e){l(n,t,e),c(r,n),c(a,n),c(o,n),c(i,o)},p:function(t,e){u=e.s,e.each_value_2,e.s_index,t.stats&&s!==(s=u.name)&&(r.data=s),t.stats&&h!==(h=u.label)&&(i.data=h),o._svelte.each_value_2=e.each_value_2,o._svelte.s_index=e.s_index},u:function(){f(n)},d:function(){_(o,"mouseleave",Aa),_(o,"mouseenter",Ua)}}}function La(t,e){var n,r,a,o,i,s,h,d,v=gt("describe / histogram / invalid"),g=ka(e.NAs/e.values.length);return{c:function(){n=m("li"),r=p(v),a=p(":\n        "),o=m("tt"),i=p(e.NAs),s=p(" ("),h=p(g),d=p(")"),this.h()},h:function(){w(o,"color","#c71e1d"),o.className="svelte-p5ucpx",n.className="svelte-p5ucpx"},m:function(t,e){l(n,t,e),c(r,n),c(a,n),c(o,n),c(i,o),c(s,n),c(h,n),c(d,n)},p:function(t,e){t.NAs&&(i.data=e.NAs),(t.NAs||t.values)&&g!==(g=ka(e.NAs/e.values.length))&&(h.data=g)},u:function(){f(n)},d:u}}function Aa(t){this._svelte.component.show(!1)}function Ua(t){var e=this._svelte.component,n=this._svelte.each_value_2[this._svelte.s_index];e.show(n)}function Oa(t){R(this,t),this.refs={},this._state=s({format:function(t){return t},t:0,padding:{top:10,right:65,bottom:20,left:5},height:200,width:500,values:[],highlight:!1},t.data),this._recompute({values:1,validValues:1,format:1,niceDomain:1,width:1,padding:1,bins:1,innerWidth:1,xScaleBand:1,xScale:1,height:1,innerHeight:1},this._state);var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){for(var n,r,a,o,i,u,h,b,_,w,x,M,C,N,k,S=gt("describe / histogram"),T=gt("describe / histogram / learn-more"),F=e.ticks,R=[],D=0;D<F.length;D+=1)R[D]=Ra(0,s(s({},e),{each_value:F,tick:F[D],tick_index:D}));var H=e.highlight&&Da(0,e),I=e.bins,L=[];for(D=0;D<I.length;D+=1)L[D]=Ha(0,s(s({},e),{each_value_1:I,bin:I[D],i:D}));var A=e.stats,U=[];for(D=0;D<A.length;D+=1)U[D]=Ia(t,s(s({},e),{each_value_2:A,s:A[D],s_index:D}));var O=e.NAs>0&&La(0,e);return{c:function(){n=m("h3"),r=p(S),a=p("\n"),o=v("svg"),i=v("g"),u=v("g");for(var t=0;t<R.length;t+=1)R[t].c();for(h=g(),H&&H.c(),_=v("g"),t=0;t<L.length;t+=1)L[t].c();for(x=p("\n"),M=m("ul"),t=0;t<U.length;t+=1)U[t].c();C=g(),O&&O.c(),N=p("\n"),k=m("p"),this.h()},h:function(){n.className="svelte-p5ucpx",y(u,"class","axis x-axis svelte-p5ucpx"),y(u,"transform",b="translate(0, "+e.innerHeight+")"),y(_,"class","bars svelte-p5ucpx"),y(i,"transform",w="translate("+[e.padding.left,e.padding.top]+")"),y(o,"class","svelte-p5ucpx"),M.className="svelte-p5ucpx",k.className="learn-more"},m:function(e,s){l(n,e,s),c(r,n),l(a,e,s),l(o,e,s),c(i,o),c(u,i);for(var f=0;f<R.length;f+=1)R[f].m(u,null);for(c(h,u),H&&H.m(u,null),c(_,i),f=0;f<L.length;f+=1)L[f].m(_,null);for(t.refs.svg=o,l(x,e,s),l(M,e,s),f=0;f<U.length;f+=1)U[f].m(M,null);c(C,M),O&&O.m(M,null),l(N,e,s),l(k,e,s),k.innerHTML=T},p:function(e,n){var r=n.ticks;if(e.xScale||e.ticks){for(var a=0;a<r.length;a+=1){var o=s(s({},n),{each_value:r,tick:r[a],tick_index:a});R[a]?R[a].p(e,o):(R[a]=Ra(0,o),R[a].c(),R[a].m(u,h))}for(;a<R.length;a+=1)R[a].u(),R[a].d();R.length=r.length}n.highlight?H?H.p(e,n):((H=Da(0,n)).c(),H.m(u,null)):H&&(H.u(),H.d(),H=null),e.innerHeight&&b!==(b="translate(0, "+n.innerHeight+")")&&y(u,"transform",b);var c=n.bins;if(e.xScaleBand||e.bins||e.yScale||e.validValues||e.innerHeight){for(a=0;a<c.length;a+=1){var l=s(s({},n),{each_value_1:c,bin:c[a],i:a});L[a]?L[a].p(e,l):(L[a]=Ha(0,l),L[a].c(),L[a].m(_,null))}for(;a<L.length;a+=1)L[a].u(),L[a].d();L.length=c.length}e.padding&&w!==(w="translate("+[n.padding.left,n.padding.top]+")")&&y(i,"transform",w);var f=n.stats;if(e.stats){for(a=0;a<f.length;a+=1){var d=s(s({},n),{each_value_2:f,s:f[a],s_index:a});U[a]?U[a].p(e,d):(U[a]=Ia(t,d),U[a].c(),U[a].m(M,C))}for(;a<U.length;a+=1)U[a].u(),U[a].d();U.length=f.length}n.NAs>0?O?O.p(e,n):((O=La(0,n)).c(),O.m(M,null)):O&&(O.u(),O.d(),O=null)},u:function(){k.innerHTML="",f(n),f(a),f(o);for(var t=0;t<R.length;t+=1)R[t].u();for(H&&H.u(),t=0;t<L.length;t+=1)L[t].u();for(f(x),f(M),t=0;t<U.length;t+=1)U[t].u();O&&O.u(),f(N),f(k)},d:function(){d(R),H&&H.d(),d(L),t.refs.svg===o&&(t.refs.svg=null),d(U),O&&O.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){this.resize()}).call(e),e.fire("update",{changed:{values:1,validValues:1,format:1,xScale:1,niceDomain:1,bins:1,innerWidth:1,xScaleBand:1,innerHeight:1,width:1,padding:1,height:1,ticks:1,highlight:1,yScale:1,stats:1,NAs:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),I(this._oncreate))}s(Oa.prototype,A),s(Oa.prototype,{show:function(t){this.set({highlight:t})},resize:function(){var t=this.refs.svg.getBoundingClientRect();this.set({width:t.right-t.left,height:t.bottom-t.top})}}),Oa.prototype._recompute=function(t,e){t.values&&(this._differs(e.NAs,e.NAs=e.values.filter(function(t){return"string"==typeof t||Number.isNaN(t)}).length)&&(t.NAs=!0),this._differs(e.validValues,e.validValues=function(t){return t.values.filter(function(t){return"number"==typeof t&&!Number.isNaN(t)})}(e))&&(t.validValues=!0)),(t.validValues||t.format)&&this._differs(e.stats,e.stats=Sa(e))&&(t.stats=!0),t.validValues&&this._differs(e.niceDomain,e.niceDomain=function(t){var e=t.validValues;return Tn().domain(ha(e)).nice().domain()}(e))&&(t.niceDomain=!0),(t.niceDomain||t.validValues)&&this._differs(e.bins,e.bins=Ta(e))&&(t.bins=!0),(t.width||t.padding)&&this._differs(e.innerWidth,e.innerWidth=function(t){var e=t.width,n=t.padding;return e-n.left-n.right}(e))&&(t.innerWidth=!0),(t.bins||t.innerWidth)&&this._differs(e.xScaleBand,e.xScaleBand=function(t){var e=t.bins,n=t.innerWidth;return Ca.domain(e.map(function(t){return t.x0})).paddingInner(.1).rangeRound([0,n]).align(0)}(e))&&(t.xScaleBand=!0),(t.niceDomain||t.bins||t.xScaleBand)&&this._differs(e.xScale,e.xScale=function(t){var e=t.niceDomain,n=t.bins,r=t.xScaleBand;return Ma.domain(e).rangeRound([0,r.step()*n.length])}(e))&&(t.xScale=!0),(t.xScale||t.format)&&this._differs(e.ticks,e.ticks=function(t){var e=t.xScale,n=t.format;return e.ticks(4).map(function(t){return{x:t,label:n(t)}})}(e))&&(t.ticks=!0),(t.height||t.padding)&&this._differs(e.innerHeight,e.innerHeight=function(t){var e=t.height,n=t.padding;return e-n.bottom-n.top}(e))&&(t.innerHeight=!0),(t.innerHeight||t.bins)&&this._differs(e.yScale,e.yScale=function(t){var e=t.innerHeight,n=t.bins;return Na.domain([0,wa(n,function(t){return t.length})]).range([e,0])}(e))&&(t.yScale=!0),(t.bins||t.xScale)&&this._differs(e.barWidth,e.barWidth=function(t){var e=t.bins,n=t.xScale;return n(e[0].x1)-n(e[0].x0)-1}(e))&&(t.barWidth=!0)};var Ea=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,ja=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,$a="<a><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function Va(t,e){if(null===t)return null;if(void 0!==t){if((t=String(t)).indexOf("<")<0||t.indexOf(">")<0)return t;if(t=function(t,e){e=(((void 0!==e?e||"":$a)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=t,r=t;for(;;)if(r=(n=r).replace(ja,"").replace(Ea,function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""}),n===r)return r}(t,e),"undefined"==typeof document)return t;var n=document.createElement("div");n.innerHTML=t;for(var r=n.querySelectorAll("*"),a=0;a<r.length;a++)for(var o=0;o<r[a].attributes.length;o++){var i=r[a].attributes[o];i.specified&&"on"===i.name.substr(0,2)&&r[a].removeAttribute(i.name)}return n.innerHTML}}function qa(t,e,n,r){var a={date:"fa fa-clock-o"};return function(o,i,u,s,c,l,f){if(!(n.numColumns()<=s)&&n.hasColumn(s)){var h=n.column(s),d=t.get(),m=d.searchResults,v=d.currentResult,p=d.activeColumn,g=t.getColumnFormat(h.name());if((u=o.toPhysicalRow(u))>0)l=e.columnFormatter(h)(h.val(u-1),!0);parseInt(l)<0&&i.classList.add("negative"),i.classList.add(h.type()+"Type"),i.dataset.column=s,"text"===h.type()&&l&&l.length>70&&(l=l.substr(0,60)+"…"),0===u?(i.classList.add("firstRow"),a[h.type()]&&(l='<i class="'+a[h.type()]+'"></i> '+l)):i.classList.add(u%2?"oddRow":"evenRow"),g.ignore&&i.classList.add("ignored"),p&&p.name()===h.name()&&i.classList.add("active");var b=o.getPlugin("columnSorting").untranslateRow(u);m.forEach(function(t){t.row===b&&t.col===s&&i.classList.add("htSearchResult")}),v&&v.row===b&&v.col===s&&i.classList.add("htCurrentSearchResult"),u>0&&!h.type(!0).isValid(h.val(u-1))&&i.classList.add("parsingError"),f.readOnly&&i.classList.add("readOnly"),e.dataCellChanged(s,u)&&i.classList.add("changed"),function(t,e,n,a,o,i,u){var s=Va(r.helper.stringify(i));e.innerHTML=s}(0,i,0,0,0,l)}}}var Ya=null;var Ba={render:function(){this.get().hot.render()},update:function(){var t=this,e=this.get(),n=e.data,r=e.transpose,a=e.firstRowIsHeader,o=e.skipRows,u=e.hot;if(n){var s=this.store.get("dw_chart"),c=s.dataset(dw.datasource.delimited({csv:n,transpose:r,firstRowIsHeader:a,skipRows:o}).parse()).dataset();this.set({columnOrder:c.columnOrder()});var l=[[]];c.eachColumn(function(t){return l[0].push(t.title())}),c.eachRow(function(t){var e=[];c.eachColumn(function(n){return e.push(n.raw(t))}),l.push(e)}),u.loadData(l);var f=qa(this,s,c,i);u.updateSettings({cells:function(e,n){return{readOnly:t.get().readonly||c.hasColumn(n)&&c.column(n).isComputed&&0===e,renderer:f}},manualColumnMove:[]}),this.set({ds:c}),this.set({has_changes:vt(s.get("metadata.data.changes",[])).length>0}),i.hooks.once("afterRender",function(){return t.initCustomEvents()}),u.render()}},dataChanged:function(t){var e=this,n=this.get().hot,r=!1;t.forEach(function(t){var a=t[0],o=t[1],i=t[2],u=t[3];if(i!==u){var s=e.store.get("dw_chart"),c=e.get().transpose,l=vt(s.get("metadata.data.changes",[]));if(a=n.toPhysicalRow(a),o=s.dataset().columnOrder()[o],c){var f=a;a=o,o=f}l.push({column:o,row:a,value:u,previous:i,time:(new Date).getTime()}),s.set("metadata.data.changes",l),r=!0}}),r&&setTimeout(function(){e.update(),chart.save()},100)},columnMoved:function(t,e){var n=this,r=this.get().hot;if(t.length){var a=this.get().columnOrder,o=a.slice(0),u=a[e],s=o.splice(t[0],t.length),c=void 0===u?o.length:u?o.indexOf(u):0;o.splice.apply(o,[c,0].concat(s)),this.store.get("dw_chart").set("metadata.data.column-order",o.slice(0)),this.set({columnOrder:o}),i.hooks.once("afterRender",function(){setTimeout(function(){n.fire("resetSort"),r.selectCell(0,c,r.countRows()-1,c+s.length-1)},10)}),this.update()}},updateHeight:function(){var t=document.querySelector(".ht_master.handsontable .wtHolder .wtHider").getBoundingClientRect().height;this.refs.hot.style.height=Math.min(500,t+10)+"px"},checkRange:function(t,e,n,r){var a=this.get().hot,o=this.get().ds;if(e!==r||0!==t||n!==a.countRows()-1)if(e===r||0!==t||n!==a.countRows()-1)this.set({activeColumn:null,multiSelection:!1});else{for(var i=[],u=Math.min(e,r);u<=Math.max(e,r);u++)i.push(+document.querySelector("#data-preview .htCore tbody tr:first-child td:nth-child("+(u+2)+")").dataset.column);this.set({multiSelection:i.map(function(t){return o.column(t)}),activeColumn:null})}},initCustomEvents:function(){var t=this;setTimeout(function(){t.refs.hot.querySelectorAll(".htCore thead th:first-child").forEach(function(t){t.removeEventListener("click",Wa),t.addEventListener("click",Wa)}),t.refs.hot.querySelectorAll(".htCore thead th+th").forEach(function(t){t.removeEventListener("click",za),t.addEventListener("click",za)})},500)},getColumnFormat:function(t){return this.store.get("dw_chart").get("metadata.data.column-format",{})[t]||{type:"auto",ignore:!1}}};function Pa(t){var e=t.changed,n=t.current,r=t.previous,a=n.hot;if(a){if(e.data&&this.update(),e.firstRowIsHeader&&r&&void 0!==r.firstRowIsHeader&&this.update(),e.hot&&this.update(),e.search&&r&&this.set({searchIndex:0}),e.searchResults&&a.render(),e.currentResult&&n.currentResult){a.render();var o=n.currentResult;a.scrollViewportTo(o.row,o.col),setTimeout(function(){a.scrollViewportTo(o.row,o.col)},100)}e.activeColumn&&setTimeout(function(){return a.render()},10),e.fixedColumnsLeft&&a.updateSettings({fixedColumnsLeft:n.fixedColumnsLeft}),e.sorting&&a.sort(chart.dataset().indexOf(n.sorting.sortBy),n.sorting.sortDir)}}function za(t){for(var e=this.parentNode.children.length,n=-1,r=0;r<e;r++)if(this.parentNode.children.item(r)===this){n=r;break}var a=+Ya.refs.hot.querySelector(".htCore tbody tr:first-child td:nth-child("+(n+1)+")").dataset.column,o=Ya.store.get("dw_chart"),i=Ya.get(),u=i.activeColumn,s=i.hot;if(o.dataset().hasColumn(a)){var c=o.dataset().column(+a);u&&u.name()===c.name()?(t.target.parentNode.classList.remove("selected"),Ya.set({activeColumn:!1}),s.deselectCell()):(t.target.parentNode.classList.add("selected"),Ya.set({activeColumn:c}))}}function Wa(t){t.preventDefault();var e=Ya.get().transpose;Ya.set({transpose:!e}),Ya.update()}function Za(t){R(this,t),this.refs={},this._state=s({hot:null,data:"",readonly:!1,skipRows:0,firstRowIsHeader:!0,fixedColumnsLeft:0,searchIndex:0,sortBy:"-",transpose:!1,activeColumn:null,search:"",searchResults:[]},t.data),this._recompute({search:1,hot:1,searchResults:1,searchIndex:1},this._state),this._handlers.state=[Pa];var e,n,r=this;t.root||(this._oncreate=[]),this._fragment=(e=this,this._state,{c:function(){n=m("div"),this.h()},h:function(){n.id="data-preview"},m:function(t,r){l(n,t,r),e.refs.hot=n},p:u,u:function(){f(n)},d:function(){e.refs.hot===n&&(e.refs.hot=null)}}),this.root._oncreate.push(function(){var t={searchResults:1,searchIndex:1,search:1,hot:1};Pa.call(r,{changed:t,current:r._state}),function(){var t=this;Ya=this,i.hooks.once("afterRender",function(){return t.initCustomEvents()}),window.addEventListener("keyup",function(e){var n=t.get(),r=n.activeColumn,a=n.ds;if(r&&"input"!==e.target.tagName.toLowerCase()&&"textarea"!==e.target.tagName.toLowerCase()&&("ArrowRight"===e.key||"ArrowLeft"===e.key)){e.preventDefault(),e.stopPropagation();var o=a.indexOf(r.name());"ArrowRight"===e.key?t.set({activeColumn:a.column((o+1)%a.numColumns())}):t.set({activeColumn:a.column((o-1+a.numColumns())%a.numColumns())})}});var e=this.store.get("dw_chart"),n=new i(this.refs.hot,{data:[],rowHeaders:function(t){return n.getPlugin("ColumnSorting").translateRow(t)+1},colHeaders:!0,fixedRowsTop:1,fixedColumnsLeft:this.get("fixedColumnsLeft"),filters:!0,dropdownMenu:!0,startRows:13,startCols:8,fillHandle:!1,stretchH:"all",height:500,manualColumnMove:!0,selectionMode:"range",autoColumnSize:{useHeaders:!0,syncLimit:5},columnSorting:!0,sortIndicator:!0,sortFunction:function(t,r){if(r.col>-1){var a=e.dataset().column(r.col),o=a.type(),i=n.getPlugin("columnSorting");return function(e,n){var u;if(0===e[0])return-1;switch(e[1]=a.val(e[0]-1),n[1]=a.val(n[0]-1),"number"===o&&(isNaN(e[1])&&(e[1]=t?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY),isNaN(n[1])&&(n[1]=t?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY)),"date"===o&&("string"==typeof e[1]&&(e[1]=new Date(110,0,1)),"string"==typeof n[1]&&(n[1]=new Date(110,0,1))),o){case"date":u=i.dateSort;break;case"number":u=i.numericSort;break;default:u=i.defaultSort}return u(t,r)(e,n)}}return function(t,e){return t[0]-e[0]}},afterGetColHeader:function(e,n){var r=t.get(),a=r.activeColumn,o=r.ds;o&&o.hasColumn(e)&&((0===e||e)&&a&&o.column(e).name()===a.name()&&n.classList.add("selected"),(0===e||e)&&(t.getColumnFormat(o.column(e).name()).ignore?n.classList.add("ignored"):n.classList.remove("ignored")))},search:"search"});window.HT=n,this.set({hot:n}),i.hooks.add("afterSetDataAtCell",function(e){return t.dataChanged(e)}),i.hooks.add("afterColumnMove",function(e,n){return t.columnMoved(e,n)}),i.hooks.add("afterRender",function(){return t.updateHeight()}),i.hooks.add("afterSelection",function(e,n,r,a){return t.checkRange(e,n,r,a)})}.call(r),r.fire("update",{changed:t,current:r._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),I(this._oncreate))}s(Za.prototype,A),s(Za.prototype,Ba),Za.prototype._recompute=function(t,e){var n,r,a;(t.search||t.hot)&&this._differs(e.searchResults,e.searchResults=(r=(n=e).search,(a=n.hot)&&r?a.search.query(r):[]))&&(t.searchResults=!0),(t.searchResults||t.searchIndex)&&this._differs(e.currentResult,e.currentResult=function(t){var e=t.searchResults,n=t.searchIndex;if(!e||!e.length)return null;var r=e.length;if(n<0||n>=r){for(;n<0;)n+=r;n>r&&(n%=r)}return e[n]}(e))&&(t.currentResult=!0)};var Ja={nextResult:function(t){var e=this.get(),n=e.searchIndex,r=e.searchResults;(n+=t)<0&&(n+=r.length),n%=r.length,this.set({searchIndex:n})},keyPress:function(t){"F3"!==t.key&&"Enter"!==t.key||this.nextResult(t.shiftKey?-1:1)},toggleTranspose:function(){var t=this;this.set({activeColumn:!1}),this.set({transpose:!this.get().transpose}),setTimeout(function(){return t.refs.hot.update()},500)},revertChanges:function(){var t=this.store.get().dw_chart;t.set("metadata.data.changes",[]),t.saveSoon(),this.refs.hot.update()},cmFocus:function(){var t=this;setTimeout(function(){t.refs.hot.get().hot.render()},100)},addComputedColumn:function(){for(var t=this.store.get().dw_chart,e=t.dataset(),n=Ht(t.get("metadata.describe.computed-columns",{})),r=1;e.hasColumn("Column "+r);)r++;var a="Column "+r;n[a]="",t.set("metadata.describe.computed-columns",n),t.saveSoon();var o=t.dataset(!0);this.refs.hot.update(),this.set({activeColumn:o.column(a)})},sort:function(t,e,n){t.preventDefault(),t.stopPropagation(),this.set({sortBy:e,sortDir:n}),this.refs.sortDropdownGroup.classList.remove("open")},force:function(t,e){void 0===e&&(e=!0),t.preventDefault(),this.set({forceColumnFormat:e})},hideMultiple:function(t,e){var n=this,r=this.store.get().dw_chart,a=vt(r.get("metadata.data.column-format",{}));t.forEach(function(t){a[t.name()]?a[t.name()].ignore=e:a[t.name()]={type:"auto",ignore:e}}),r.set("metadata.data.column-format",a),r.saveSoon(),setTimeout(function(){n.refs.hot.get().hot.render()},10),this.set({multiSelection:!1})}};function Ga(t){var e=this,n=t.changed,r=t.current;n.activeColumn&&!r.activeColumn&&this.set({forceColumnFormat:!1});var a={transpose:"metadata.data.transpose",firstRowIsHeader:"metadata.data.horizontal-header",locale:"language"};Object.keys(a).forEach(function(t){if(n[t]){var o=r[t],i=a[t];if(e.store.get().dw_chart.set(""+i,o),"locale"===t){if(!o)return;e.store.get().dw_chart.locale(o,function(){e.refs.hot.render()})}}})}function Qa(t,e){var n,r,a,o,i=gt("describe / edit-formula");function u(e){t.force(e,!1)}return{c:function(){n=m("button"),r=m("i"),a=p(" "),o=p(i),this.h()},h:function(){r.className="fa  fa-chevron-left",b(n,"click",u),n.className="btn"},m:function(t,e){l(n,t,e),c(r,n),c(a,n),c(o,n)},u:function(){f(n)},d:function(){_(n,"click",u)}}}function Xa(t,e){var n,r,a,o={},i=gt("describe / edit-format"),u={};"customColumn"in e&&(u.column=e.customColumn,o.column=!0),"columns"in e&&(u.columns=e.columns,o.columns=!0);var s=new xt({root:t.root,data:u,_bind:function(e,n){t.get();var r={};!o.column&&e.column&&(r.customColumn=n.column),!o.columns&&e.columns&&(r.columns=n.columns),t._set(r),o={}}});function h(e){t.force(e,!0)}return t.root._beforecreate.push(function(){s._bind({column:1,columns:1},s.get())}),s.on("updateTable",function(e){t.refs.hot.update()}),s.on("renderTable",function(e){t.refs.hot.render()}),s.on("unselect",function(e){t.set({activeColumn:!1})}),{c:function(){s._fragment.c(),n=p("\n\n                "),r=m("button"),a=p(i),this.h()},h:function(){b(r,"click",h),r.className="btn"},m:function(t,e){s._mount(t,e),l(n,t,e),l(r,t,e),c(a,r)},p:function(t,e){var n={};!o.column&&t.customColumn&&(n.column=e.customColumn,o.column=!0),!o.columns&&t.columns&&(n.columns=e.columns,o.columns=!0),s._set(n),o={}},u:function(){s._unmount(),f(n),f(r)},d:function(){s.destroy(!1),_(r,"click",h)}}}function Ka(t,e){var n,r,a={},o={};"columnFormat"in e&&(o.column=e.columnFormat,a.column=!0),"columns"in e&&(o.columns=e.columns,a.columns=!0);var i=new Ut({root:t.root,data:o,_bind:function(e,n){t.get();var r={};!a.column&&e.column&&(r.columnFormat=n.column),!a.columns&&e.columns&&(r.columns=n.columns),t._set(r),a={}}});t.root._beforecreate.push(function(){i._bind({column:1,columns:1},i.get())}),i.on("updateTable",function(e){t.refs.hot.update()}),i.on("renderTable",function(e){t.refs.hot.render()});var u=e.columnFormat.isComputed&&Qa(t);return{c:function(){i._fragment.c(),n=p("\n\n                "),u&&u.c(),r=g()},m:function(t,e){i._mount(t,e),l(n,t,e),u&&u.m(t,e),l(r,t,e)},p:function(e,n){var o={};!a.column&&e.columnFormat&&(o.column=n.columnFormat,a.column=!0),!a.columns&&e.columns&&(o.columns=n.columns,a.columns=!0),i._set(o),a={},n.columnFormat.isComputed?u||((u=Qa(t)).c(),u.m(r.parentNode,r)):u&&(u.u(),u.d(),u=null)},u:function(){i._unmount(),f(n),u&&u.u(),f(r)},d:function(){i.destroy(!1),u&&u.d()}}}function to(t,e){var n={},r={};"activeValues"in e&&(r.values=e.activeValues,n.values=!0),"activeFormat"in e&&(r.format=e.activeFormat,n.format=!0);var a=new Oa({root:t.root,data:r,_bind:function(e,r){t.get();var a={};!n.values&&e.values&&(a.activeValues=r.values),!n.format&&e.format&&(a.activeFormat=r.format),t._set(a),n={}}});return t.root._beforecreate.push(function(){a._bind({values:1,format:1},a.get())}),{c:function(){a._fragment.c()},m:function(t,e){a._mount(t,e)},p:function(t,e){var r={};!n.values&&t.activeValues&&(r.values=e.activeValues,n.values=!0),!n.format&&t.activeFormat&&(r.format=e.activeFormat,n.format=!0),a._set(r),n={}},u:function(){a._unmount()},d:function(){a.destroy(!1)}}}function eo(t,e){var n,r,a,o,i,s,h=e.locale,d=(e.each_value,e.locale_index,h.label),v=h.value;return{c:function(){n=m("option"),r=p(d),a=p(" ("),o=p(v),i=p(")"),this.h()},h:function(){n.__value=s=h.value,n.value=n.__value},m:function(t,e){l(n,t,e),c(r,n),c(a,n),c(o,n),c(i,n)},p:function(t,e){h=e.locale,e.each_value,e.locale_index,t.locales&&d!==(d=h.label)&&(r.data=d),t.locales&&v!==(v=h.value)&&(o.data=v),t.locales&&s!==(s=h.value)&&(n.__value=s),n.value=n.__value},u:function(){f(n)},d:u}}function no(t,e){for(var n,r,a,o,i,u,h=gt("describe / locale-select / hed"),v=gt("describe / locale-select / body"),g=!1,y=e.locales,w=[],C=0;C<y.length;C+=1)w[C]=eo(0,s(s({},e),{each_value:y,locale:y[C],locale_index:C}));function N(){g=!0,t.set({locale:M(u)}),g=!1}return{c:function(){n=m("h4"),r=p(h),a=p("\n\n                "),o=m("p"),i=p("\n\n                "),u=m("select");for(var t=0;t<w.length;t+=1)w[t].c();this.h()},h:function(){b(u,"change",N),"locale"in e||t.root._beforecreate.push(N)},m:function(t,s){l(n,t,s),c(r,n),l(a,t,s),l(o,t,s),o.innerHTML=v,l(i,t,s),l(u,t,s);for(var f=0;f<w.length;f+=1)w[f].m(u,null);x(u,e.locale)},p:function(t,e){var n=e.locales;if(t.locales){for(var r=0;r<n.length;r+=1){var a=s(s({},e),{each_value:n,locale:n[r],locale_index:r});w[r]?w[r].p(t,a):(w[r]=eo(0,a),w[r].c(),w[r].m(u,null))}for(;r<w.length;r+=1)w[r].u(),w[r].d();w.length=n.length}g||x(u,e.locale)},u:function(){o.innerHTML="",f(n),f(a),f(o),f(i),f(u);for(var t=0;t<w.length;t+=1)w[t].u()},d:function(){d(w),_(u,"change",N)}}}function ro(t,e){var n,r;function a(t){return t.customColumn?Xa:t.columnFormat?Ka:null}var o=a(e),i=o&&o(t,e),u="number"==e.activeColumn.type()&&to(t,e);return{c:function(){i&&i.c(),n=p(" "),u&&u.c(),r=g()},m:function(t,e){i&&i.m(t,e),l(n,t,e),u&&u.m(t,e),l(r,t,e)},p:function(e,s){o===(o=a(s))&&i?i.p(e,s):(i&&(i.u(),i.d()),(i=o&&o(t,s))&&i.c(),i&&i.m(n.parentNode,n)),"number"==s.activeColumn.type()?u?u.p(e,s):((u=to(t,s)).c(),u.m(r.parentNode,r)):u&&(u.u(),u.d(),u=null)},u:function(){i&&i.u(),f(n),u&&u.u(),f(r)},d:function(){i&&i.d(),u&&u.d()}}}function ao(t,e){var n,r,a,o,i,s,h,d,v,g,y,x,M,C,N=gt("describe / show-hide-multi"),k=gt("describe / show-selected"),S=gt("describe / hide-selected");function T(e){var n=t.get();t.hideMultiple(n.multiSelection,!1)}function F(e){var n=t.get();t.hideMultiple(n.multiSelection,!0)}return{c:function(){n=m("h3"),r=p(N),a=p("\n\n                "),o=m("ul"),i=m("li"),s=m("button"),h=m("i"),d=p(" "),v=p(k),g=m("li"),y=m("button"),x=m("i"),M=p(" "),C=p(S),this.h()},h:function(){n.className="first",h.className="fa fa-eye",b(s,"click",T),s.className="btn",w(i,"margin-bottom","5px"),x.className="fa fa-eye-slash",b(y,"click",F),y.className="btn",o.className="unstyled"},m:function(t,e){l(n,t,e),c(r,n),l(a,t,e),l(o,t,e),c(i,o),c(s,i),c(h,s),c(d,s),c(v,s),c(g,o),c(y,g),c(x,y),c(M,y),c(C,y)},p:u,u:function(){f(n),f(a),f(o)},d:function(){_(s,"click",T),_(y,"click",F)}}}function oo(t,e){var n,r,a,o,i,u,s,h=gt("Make sure the data looks right"),d=gt("describe / data-looks-right"),v={},b={label:gt("First row as label")};"firstRowIsHeader"in e&&(b.value=e.firstRowIsHeader,v.value=!0);var _=new Mt({root:t.root,data:b,_bind:function(e,n){t.get();var r={};!v.value&&e.value&&(r.firstRowIsHeader=n.value),t._set(r),v={}}});t.root._beforecreate.push(function(){_._bind({value:1},_.get())});var y=e.showLocale&&no(t,e);return{c:function(){n=m("h3"),r=p(h),a=p("\n\n                "),o=m("p"),i=p("\n\n                "),_._fragment.c(),u=p(" "),y&&y.c(),s=g(),this.h()},h:function(){n.className="first"},m:function(t,e){l(n,t,e),c(r,n),l(a,t,e),l(o,t,e),o.innerHTML=d,l(i,t,e),_._mount(t,e),l(u,t,e),y&&y.m(t,e),l(s,t,e)},p:function(e,n){var r={};r.label=gt("First row as label"),!v.value&&e.firstRowIsHeader&&(r.value=n.firstRowIsHeader,v.value=!0),_._set(r),v={},n.showLocale?y?y.p(e,n):((y=no(t,n)).c(),y.m(s.parentNode,s)):y&&(y.u(),y.d(),y=null)},u:function(){o.innerHTML="",f(n),f(a),f(o),f(i),_._unmount(),f(u),y&&y.u(),f(s)},d:function(){_.destroy(!1),y&&y.d()}}}function io(t,e){var n,r,a,o,i,u,s,h,d,v,g,y=e.col,w=(e.each_value_1,e.col_index,y.title());return{c:function(){n=m("li"),r=m("a"),a=m("i"),i=p("\n                                    "),u=m("i"),h=p("   "),d=p(w),this.h()},h:function(){b(a,"click",fo),a.className=o="fa fa-sort-"+("text"==y.type()?"alpha":"amount")+"-asc fa-fw svelte-1ymbvw3",a._svelte={component:t,each_value_1:e.each_value_1,col_index:e.col_index},b(u,"click",ho),u.className=s="fa fa-sort-"+("text"==y.type()?"alpha":"amount")+"-desc fa-fw svelte-1ymbvw3",u._svelte={component:t,each_value_1:e.each_value_1,col_index:e.col_index},b(r,"click",mo),r.href=v="#/"+y.name(),r.className="svelte-1ymbvw3",r._svelte={component:t,each_value_1:e.each_value_1,col_index:e.col_index},n.className=g=y.name()==e.sortBy?"active":""},m:function(t,e){l(n,t,e),c(r,n),c(a,r),c(i,r),c(u,r),c(h,r),c(d,r)},p:function(t,e){y=e.col,e.each_value_1,e.col_index,t.columns&&o!==(o="fa fa-sort-"+("text"==y.type()?"alpha":"amount")+"-asc fa-fw svelte-1ymbvw3")&&(a.className=o),a._svelte.each_value_1=e.each_value_1,a._svelte.col_index=e.col_index,t.columns&&s!==(s="fa fa-sort-"+("text"==y.type()?"alpha":"amount")+"-desc fa-fw svelte-1ymbvw3")&&(u.className=s),u._svelte.each_value_1=e.each_value_1,u._svelte.col_index=e.col_index,t.columns&&w!==(w=y.title())&&(d.data=w),t.columns&&v!==(v="#/"+y.name())&&(r.href=v),r._svelte.each_value_1=e.each_value_1,r._svelte.col_index=e.col_index,(t.columns||t.sortBy)&&g!==(g=y.name()==e.sortBy?"active":"")&&(n.className=g)},u:function(){f(n)},d:function(){_(a,"click",fo),_(u,"click",ho),_(r,"click",mo)}}}function uo(t,e){var n,r,a,o;function i(e){t.nextResult(-1)}function u(e){t.nextResult(1)}return{c:function(){n=m("div"),(r=m("button")).innerHTML='<i class="fa fa-chevron-up"></i>',a=p("\n                            "),(o=m("button")).innerHTML='<i class="fa fa-chevron-down"></i>',this.h()},h:function(){b(r,"click",i),r.className="btn svelte-1ymbvw3",b(o,"click",u),o.className="btn svelte-1ymbvw3",n.className="btn-group"},m:function(t,e){l(n,t,e),c(r,n),c(a,n),c(o,n)},u:function(){f(n)},d:function(){_(r,"click",i),_(o,"click",u)}}}function so(t,e){var n,r,a,o,i,s,c,h=e.searchIndexSafe+1,d=gt("describe / search / of"),m=e.searchResults.length,v=gt("describe /\n                        search / results");return{c:function(){n=p(h),r=p(" "),a=p(d),o=p(" "),i=p(m),s=p(" "),c=p(v)},m:function(t,e){l(n,t,e),l(r,t,e),l(a,t,e),l(o,t,e),l(i,t,e),l(s,t,e),l(c,t,e)},p:function(t,e){t.searchIndexSafe&&h!==(h=e.searchIndexSafe+1)&&(n.data=h),t.searchResults&&m!==(m=e.searchResults.length)&&(i.data=m)},u:function(){f(n),f(r),f(a),f(o),f(i),f(s),f(c)},d:u}}function co(t,e){var n,r=gt("describe / search / no-matches");return{c:function(){n=p(r)},m:function(t,e){l(n,t,e)},p:u,u:function(){f(n)},d:u}}function lo(t,e){var n;function r(t){return t.searchResults.length>0?so:t.search?co:null}var a=r(e),o=a&&a(t,e);return{c:function(){n=m("div"),o&&o.c(),this.h()},h:function(){n.className="results svelte-1ymbvw3"},m:function(t,e){l(n,t,e),o&&o.m(n,null)},p:function(e,i){a===(a=r(i))&&o?o.p(e,i):(o&&(o.u(),o.d()),(o=a&&a(t,i))&&o.c(),o&&o.m(n,null))},u:function(){f(n),o&&o.u()},d:function(){o&&o.d()}}}function fo(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];e.sort(t,n.name(),!0)}function ho(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];e.sort(t,n.name(),!1)}function mo(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];e.sort(t,n.name(),!0)}function vo(t){R(this,t),this.refs={},this._state=s(s(this.store._init(["dw_chart"]),{locale:"en-US",search:"",chartData:"",readonly:!1,transpose:!1,firstRowIsHeader:!0,fixedColumnsLeft:0,searchIndex:0,activeColumn:!1,customColumn:!1,columnFormat:!1,multiSelection:!1,forceColumnFormat:!1,searchResults:[],sortBy:"-",sortDir:!0}),t.data),this.store._add(this,["dw_chart"]),this._recompute({searchIndex:1,searchResults:1,activeColumn:1,forceColumnFormat:1,$dw_chart:1,sortBy:1,sortDir:1},this._state),this._handlers.update=[Ga],this._handlers.destroy=[L];var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,r,a,o,i,u,v,g,x,M,C,N,k,S,T,F,R,D,H,I,L,A,U,O,E,j,$,V,q,Y,B,P,z,W,Z,J,G,Q,X,K,tt,et,nt,rt,at,ot,it,ut,st,ct,lt,ft,ht,dt,mt,vt,pt,bt,_t,yt,wt,xt,Mt,Ct,Nt,kt,St=gt("Back"),Tt=gt("Proceed"),Ft=gt("describe / info-table-header"),Rt=gt("describe / sort-by"),Dt=gt("describe / no-sorting"),Ht=!1,It={},Lt=gt("describe / transpose-long"),At=gt("computed columns / add-btn"),Ut=gt("Revert changes");function Ot(t){return t.activeColumn?ro:t.multiSelection?ao:oo}var Et=Ot(e),jt=Et(t,e);function $t(e){t.sort(e,"-")}for(var Vt=e.columns,qt=[],Yt=0;Yt<Vt.length;Yt+=1)qt[Yt]=io(t,s(s({},e),{each_value_1:Vt,col:Vt[Yt],col_index:Yt}));function Bt(){Ht=!0,t.set({search:et.value}),Ht=!1}function Pt(e){t.keyPress(e)}var zt=e.searchResults.length>0&&uo(t),Wt=e.search&&lo(t,e),Zt={};"chartData"in e&&(Zt.data=e.chartData,It.data=!0),"transpose"in e&&(Zt.transpose=e.transpose,It.transpose=!0),"firstRowIsHeader"in e&&(Zt.firstRowIsHeader=e.firstRowIsHeader,It.firstRowIsHeader=!0),"fixedColumnsLeft"in e&&(Zt.fixedColumnsLeft=e.fixedColumnsLeft,It.fixedColumnsLeft=!0),"activeColumn"in e&&(Zt.activeColumn=e.activeColumn,It.activeColumn=!0),"readonly"in e&&(Zt.readonly=e.readonly,It.readonly=!0),"sorting"in e&&(Zt.sorting=e.sorting,It.sorting=!0),"search"in e&&(Zt.search=e.search,It.search=!0),"searchResults"in e&&(Zt.searchResults=e.searchResults,It.searchResults=!0),"searchIndex"in e&&(Zt.searchIndex=e.searchIndex,It.searchIndex=!0),"multiSelection"in e&&(Zt.multiSelection=e.multiSelection,It.multiSelection=!0);var Jt=new Za({root:t.root,data:Zt,_bind:function(e,n){t.get();var r={};!It.data&&e.data&&(r.chartData=n.data),!It.transpose&&e.transpose&&(r.transpose=n.transpose),!It.firstRowIsHeader&&e.firstRowIsHeader&&(r.firstRowIsHeader=n.firstRowIsHeader),!It.fixedColumnsLeft&&e.fixedColumnsLeft&&(r.fixedColumnsLeft=n.fixedColumnsLeft),!It.activeColumn&&e.activeColumn&&(r.activeColumn=n.activeColumn),!It.readonly&&e.readonly&&(r.readonly=n.readonly),!It.sorting&&e.sorting&&(r.sorting=n.sorting),!It.search&&e.search&&(r.search=n.search),!It.searchResults&&e.searchResults&&(r.searchResults=n.searchResults),!It.searchIndex&&e.searchIndex&&(r.searchIndex=n.searchIndex),!It.multiSelection&&e.multiSelection&&(r.multiSelection=n.multiSelection),t._set(r),It={}}});function Gt(e){t.toggleTranspose()}function Qt(e){t.addComputedColumn()}function Xt(e){t.revertChanges()}return t.root._beforecreate.push(function(){Jt._bind({data:1,transpose:1,firstRowIsHeader:1,fixedColumnsLeft:1,activeColumn:1,readonly:1,sorting:1,search:1,searchResults:1,searchIndex:1,multiSelection:1},Jt.get())}),Jt.on("resetSort",function(e){t.set({sortBy:"-"})}),t.refs.hot=Jt,{c:function(){n=m("div"),r=m("div"),a=m("div"),o=m("div"),jt.c(),i=p("\n\n                "),u=m("hr"),v=p("\n\n                "),g=m("div"),x=m("a"),M=m("i"),C=p(" "),N=p(St),k=p("\n                    "),S=m("a"),T=p(Tt),F=p(" "),R=m("i"),D=p("\n        "),H=m("div"),I=m("div"),L=m("noscript"),A=p(" "),U=m("img"),O=p("\n            "),E=m("div"),j=m("div"),$=m("div"),V=m("button"),q=m("noscript"),Y=p("… "),B=m("span"),P=p("\n                        "),z=m("ul"),W=m("li"),Z=m("a");for(var t=0;t<qt.length;t+=1)qt[t].c();G=p("\n\n                "),Q=m("div"),X=m("i"),K=p("\n                    "),tt=m("div"),et=m("input"),rt=p("\n                        "),zt&&zt.c(),ot=p("\n\n                    "),Wt&&Wt.c(),it=p("\n\n            "),Jt._fragment.c(),ut=p("\n\n            "),st=m("div"),ct=m("button"),lt=m("img"),ft=p(" "),ht=p(Lt),dt=p("\n\n                "),mt=m("button"),vt=m("i"),pt=p(" "),bt=p(At),_t=p("…"),yt=p("\n\n                "),wt=m("button"),xt=m("i"),Mt=p(" "),Ct=p(Ut),Nt=p("…"),this.h()},h:function(){M.className="icon-chevron-left",x.className="btn submit",x.href="upload",R.className="icon-chevron-right icon-white",S.href="visualize",S.className="submit btn btn-primary",S.id="describe-proceed",g.className="btn-group",o.className="sidebar",a.className="span4",U.src="/static/img/arrow.svg",I.className="help svelte-1ymbvw3",B.className="caret",V.className="btn dropdown-toggle",V.dataset.toggle="dropdown",b(Z,"click",$t),Z.href="#s",Z.className="svelte-1ymbvw3",W.className=J="-"==e.sortBy?"active":"",z.className="dropdown-menu sort-menu",$.className="btn-group",j.className="sort-box svelte-1ymbvw3",X.className="im im-magnifier svelte-1ymbvw3",b(et,"input",Bt),b(et,"keypress",Pt),et.autocomplete="screw-you-google-chrome",y(et,"type","search"),et.placeholder=gt("Search data table"),et.className=nt=(e.searchResults.length>0?"with-results":"")+" search-query svelte-1ymbvw3",tt.className=at=e.searchResults.length>0?"input-append":"",Q.className="search-box form-search svelte-1ymbvw3",E.className="pull-right",w(E,"margin-bottom","10px"),lt.src="/static/css/chart-editor/transpose.png",lt.className="svelte-1ymbvw3",b(ct,"click",Gt),ct.className="btn transpose svelte-1ymbvw3",vt.className="fa fa-calculator",b(mt,"click",Qt),mt.className="btn computed-columns",xt.className="fa fa-undo",b(wt,"click",Xt),wt.className=kt="btn "+(e.has_changes?"":"disabled")+" svelte-1ymbvw3",wt.id="reset-data-changes",st.className="buttons below-table pull-right svelte-1ymbvw3",H.className="span8 svelte-1ymbvw3",r.className="row",n.className="chart-editor"},m:function(s,f){l(n,s,f),c(r,n),c(a,r),c(o,a),jt.m(o,null),c(i,o),c(u,o),c(v,o),c(g,o),c(x,g),c(M,x),c(C,x),c(N,x),c(k,g),c(S,g),c(T,S),c(F,S),c(R,S),c(D,r),c(H,r),c(I,H),c(L,I),L.insertAdjacentHTML("beforebegin",Ft),c(A,I),c(U,I),c(O,H),c(E,H),c(j,E),c($,j),c(V,$),c(q,V),q.insertAdjacentHTML("beforebegin",Rt),c(Y,V),c(B,V),c(P,$),c(z,$),c(W,z),c(Z,W),Z.innerHTML=Dt;for(var h=0;h<qt.length;h+=1)qt[h].m(z,null);t.refs.sortDropdownGroup=$,c(G,E),c(Q,E),c(X,Q),c(K,Q),c(tt,Q),c(et,tt),t.refs.search=et,et.value=e.search,c(rt,tt),zt&&zt.m(tt,null),c(ot,Q),Wt&&Wt.m(Q,null),c(it,H),Jt._mount(H,null),c(ut,H),c(st,H),c(ct,st),c(lt,ct),c(ft,ct),c(ht,ct),c(dt,st),c(mt,st),c(vt,mt),c(pt,mt),c(bt,mt),c(_t,mt),c(yt,st),c(wt,st),c(xt,wt),c(Mt,wt),c(Ct,wt),c(Nt,wt)},p:function(e,n){Et===(Et=Ot(n))&&jt?jt.p(e,n):(jt.u(),jt.d(),(jt=Et(t,n)).c(),jt.m(o,i)),e.sortBy&&J!==(J="-"==n.sortBy?"active":"")&&(W.className=J);var r=n.columns;if(e.columns||e.sortBy){for(var a=0;a<r.length;a+=1){var u=s(s({},n),{each_value_1:r,col:r[a],col_index:a});qt[a]?qt[a].p(e,u):(qt[a]=io(t,u),qt[a].c(),qt[a].m(z,null))}for(;a<qt.length;a+=1)qt[a].u(),qt[a].d();qt.length=r.length}Ht||(et.value=n.search),e.searchResults&&nt!==(nt=(n.searchResults.length>0?"with-results":"")+" search-query svelte-1ymbvw3")&&(et.className=nt),n.searchResults.length>0?zt||((zt=uo(t)).c(),zt.m(tt,null)):zt&&(zt.u(),zt.d(),zt=null),e.searchResults&&at!==(at=n.searchResults.length>0?"input-append":"")&&(tt.className=at),n.search?Wt?Wt.p(e,n):((Wt=lo(t,n)).c(),Wt.m(Q,null)):Wt&&(Wt.u(),Wt.d(),Wt=null);var c={};!It.data&&e.chartData&&(c.data=n.chartData,It.data=!0),!It.transpose&&e.transpose&&(c.transpose=n.transpose,It.transpose=!0),!It.firstRowIsHeader&&e.firstRowIsHeader&&(c.firstRowIsHeader=n.firstRowIsHeader,It.firstRowIsHeader=!0),!It.fixedColumnsLeft&&e.fixedColumnsLeft&&(c.fixedColumnsLeft=n.fixedColumnsLeft,It.fixedColumnsLeft=!0),!It.activeColumn&&e.activeColumn&&(c.activeColumn=n.activeColumn,It.activeColumn=!0),!It.readonly&&e.readonly&&(c.readonly=n.readonly,It.readonly=!0),!It.sorting&&e.sorting&&(c.sorting=n.sorting,It.sorting=!0),!It.search&&e.search&&(c.search=n.search,It.search=!0),!It.searchResults&&e.searchResults&&(c.searchResults=n.searchResults,It.searchResults=!0),!It.searchIndex&&e.searchIndex&&(c.searchIndex=n.searchIndex,It.searchIndex=!0),!It.multiSelection&&e.multiSelection&&(c.multiSelection=n.multiSelection,It.multiSelection=!0),Jt._set(c),It={},e.has_changes&&kt!==(kt="btn "+(n.has_changes?"":"disabled")+" svelte-1ymbvw3")&&(wt.className=kt)},u:function(){h(L),h(q),Z.innerHTML="",f(n),jt.u();for(var t=0;t<qt.length;t+=1)qt[t].u();zt&&zt.u(),Wt&&Wt.u()},d:function(){jt.d(),_(Z,"click",$t),d(qt),t.refs.sortDropdownGroup===$&&(t.refs.sortDropdownGroup=null),_(et,"input",Bt),_(et,"keypress",Pt),t.refs.search===et&&(t.refs.search=null),zt&&zt.d(),Wt&&Wt.d(),Jt.destroy(!1),t.refs.hot===Jt&&(t.refs.hot=null),_(ct,"click",Gt),_(mt,"click",Qt),_(wt,"click",Xt)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this;window.addEventListener("keypress",function(e){e.ctrlKey&&"f"===e.key&&(e.preventDefault(),t.refs.search!==window.document.activeElement?t.refs.search.focus():t.nextResult(1))})}).call(e),e.fire("update",{changed:{searchIndex:1,searchResults:1,activeColumn:1,forceColumnFormat:1,$dw_chart:1,sortBy:1,sortDir:1,customColumn:1,columns:1,columnFormat:1,activeValues:1,activeFormat:1,multiSelection:1,firstRowIsHeader:1,showLocale:1,locale:1,locales:1,search:1,searchIndexSafe:1,chartData:1,transpose:1,fixedColumnsLeft:1,readonly:1,sorting:1,has_changes:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,I(this._beforecreate),I(this._oncreate),I(this._aftercreate),this._lock=!1)}function po(t,e){this._observers={pre:C(),post:C()},this._handlers={},this._dependents=[],this._computed=C(),this._sortedComputedProperties=[],this._state=s({},t),this._differs=e&&e.immutable?S:k}s(vo.prototype,A),s(vo.prototype,Ja),vo.prototype._recompute=function(t,e){var n,r,a;(t.searchIndex||t.searchResults)&&this._differs(e.searchIndexSafe,e.searchIndexSafe=(r=(n=e).searchIndex,a=n.searchResults,r<0&&(r+=a.length),r%=a.length))&&(t.searchIndexSafe=!0),(t.activeColumn||t.forceColumnFormat)&&(this._differs(e.customColumn,e.customColumn=function(t){var e=t.activeColumn,n=t.forceColumnFormat;return!(!e||n||!e.isComputed)&&e}(e))&&(t.customColumn=!0),this._differs(e.columnFormat,e.columnFormat=function(t){var e=t.activeColumn,n=t.forceColumnFormat;return!(!e||e.isComputed&&!n)&&e}(e))&&(t.columnFormat=!0)),t.activeColumn&&this._differs(e.activeValues,e.activeValues=function(t){var e=t.activeColumn;return e?e.values():[]}(e))&&(t.activeValues=!0),(t.activeColumn||t.$dw_chart)&&this._differs(e.activeFormat,e.activeFormat=function(t){var e=t.activeColumn,n=t.$dw_chart;return e?n.columnFormatter(e):function(t){return t}}(e))&&(t.activeFormat=!0),t.activeColumn&&this._differs(e.columns,e.columns=function(t){var e=t.activeColumn,n=chart.dataset();if(!e)return n?n.columns():[];try{return n.columns().filter(function(t){return!t.isComputed})}catch(t){return[]}}(e))&&(t.columns=!0),(t.sortBy||t.sortDir)&&this._differs(e.sorting,e.sorting=function(t){return{sortBy:t.sortBy,sortDir:t.sortDir}}(e))&&(t.sorting=!0)},s(po.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n];e["$"+r]=this._state[r]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],r=C();function a(o){if(t[o])throw new Error("Cyclical dependency detected");if(!r[o]){r[o]=!0;var i=e[o];i&&(t[o]=!0,i.deps.forEach(a),n.push(i))}}for(var o in this._computed)t=C(),a(o)},compute:function(t,e,n){var r,a=this,o={deps:e,update:function(o,i,u){var s=e.map(function(t){return t in i&&(u=!0),o[t]});if(u){var c=n.apply(null,s);a._differs(c,r)&&(r=c,i[t]=!0,o[t]=r)}}};o.update(this._state,{},!0),this._computed[t]=o,this._sortComputedProperties()},fire:T,get:F,observe:D,on:H,onchange:function(t){return console.warn("store.onchange is deprecated in favour of store.on('state', event => {...})"),this.on("state",function(e){t(e.current,e.changed)})},set:function(t){var e=this._state,n=this._changed={},r=!1;for(var a in t){if(this._computed[a])throw new Error("'"+a+"' is a read-only property");this._differs(t[a],e[a])&&(n[a]=r=!0)}if(r){this._state=s(s({},e),t);for(var o=0;o<this._sortedComputedProperties.length;o+=1)this._sortedComputedProperties[o].update(this._state,n);this.fire("state",{changed:n,current:this._state,previous:e});var i=this._dependents.slice();for(o=0;o<i.length;o+=1){var u=i[o],c={};r=!1;for(var l=0;l<u.props.length;l+=1){var f=u.props[l];f in n&&(c["$"+f]=this._state[f],r=!0)}r&&u.component.set(c)}this.fire("update",{changed:n,current:this._state,previous:e})}}});return{App:vo,data:{chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0},store:new po({})}});
