!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("cm/lib/codemirror"),require("cm/mode/javascript/javascript"),require("cm/addon/mode/simple"),require("cm/addon/hint/show-hint"),require("cm/addon/edit/matchbrackets"),require("cm/addon/display/placeholder"),require("Handsontable")):"function"==typeof define&&define.amd?define("svelte/describe",["cm/lib/codemirror","cm/mode/javascript/javascript","cm/addon/mode/simple","cm/addon/hint/show-hint","cm/addon/edit/matchbrackets","cm/addon/display/placeholder","Handsontable"],e):(t=t||self).describe=e(t.CodeMirror,null,null,null,null,null,t.HOT)}(this,(function(t,e,n,r,o,a,i){"use strict";function u(){}function s(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e){e.appendChild(t)}function c(t,e,n){e.insertBefore(t,n)}function h(t){t.parentNode.removeChild(t)}function f(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)}function d(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function m(){return document.createDocumentFragment()}function p(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function b(){return document.createComment("")}function _(t,e,n){t.addEventListener(e,n,!1)}function y(t,e,n){t.removeEventListener(e,n,!1)}function w(t,e,n){t.setAttribute(e,n)}function x(t,e,n){t.style.setProperty(e,n)}function C(t,e){for(var n=0;n<t.options.length;n+=1){var r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function M(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function N(t){return t}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var k={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes "+e+" "+t,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(e=this.stylesheet.cssRules.length;e--;)this.stylesheet.deleteRule(e);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter((function(t){return-1===t.indexOf(e)})).join(", ")}};function T(){return Object.create(null)}function S(t){this.destroy=u,this.fire("destroy"),this.set=this.get=u,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function F(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function R(t,e){return t!=t?e==e:t!==e}function H(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var o=n[r];o.__calling||(o.__calling=!0,o.call(this,e),o.__calling=!1)}}function D(t){return t?this._state[t]:this._state}function L(t,e){t._handlers=T(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function I(t,e,n){var r=e.bind(this);return n&&!1===n.init||r(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",(function(e){e.changed[t]&&r(e.current[t],e.previous&&e.previous[t])}))}function A(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function U(t){for(;t&&t.length;)t.shift()()}function O(){this.store._remove(this)}var E={destroy:S,get:D,fire:H,observe:I,on:A,set:function(t){this._set(s({},t)),this.root._lock||(this.root._lock=!0,U(this.root._beforecreate),U(this.root._oncreate),U(this.root._aftercreate),this.root._lock=!1)},teardown:S,_recompute:u,_set:function(t){var e=this._state,n={},r=!1;for(var o in t)this._differs(t[o],e[o])&&(n[o]=r=!0);r&&(this._state=s(s({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:F};function j(t){var e=typeof t;return"function"===e||"object"===e&&!!t}var $,V=Array.prototype,B=Object.prototype,W=V.slice,Y=B.toString,q=B.hasOwnProperty,P=Object.keys;function z(t,e){return null!=t&&q.call(t,e)}function Z(t){if(!j(t))return[];if(P)return P(t);var e=[];for(var n in t)z(t,n)&&e.push(n);return dt&&function(t,e){var n=mt.length,r=t.constructor,o=X(r)&&r.prototype||B,a="constructor";z(t,a)&&!G(e,a)&&e.push(a);for(;n--;)(a=mt[n])in t&&t[a]!==o[a]&&!G(e,a)&&e.push(a)}(t,e),e}var J=function(t,e,n){return function(r,o,a){var i=0,u=ht(r);if("number"==typeof a)t>0?i=a>=0?a:Math.max(a+u,i):u=a>=0?Math.min(a+1,u):a+u+1;else if(n&&a&&u)return r[a=n(r,o)]===o?a:-1;if(o!=o)return(a=e(W.call(r,i,u),Q))>=0?a+i:-1;for(a=t>0?i:u-1;a>=0&&a<u;a+=t)if(r[a]===o)return a;return-1}}(1,($=1,function(t,e,n){e=ut(e,n);for(var r=ht(t),o=$>0?0:r-1;o>=0&&o<r;o+=$)if(e(t[o],o,t))return o;return-1}),(function(t,e,n,r){for(var o=(n=ut(n,r,1))(e),a=0,i=ht(t);a<i;){var u=Math.floor((a+i)/2);n(t[u])<o?a=u+1:i=u}return a}));function G(t,e,n,r){return ft(t)||(t=function(t){for(var e=Z(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r}(t)),("number"!=typeof n||r)&&(n=0),J(t,e,n)>=0}var X=("function"!=typeof/./&&"object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(t){return"function"==typeof t||!1}:null)||function(t){return"[object Function]"===Y.call(t)};!function(){Y.call(arguments)}();function Q(t){return function(t){return"[object Number]"===Y.call(t)}(t)&&isNaN(t)}var K=it;function tt(t){return t}var et,nt,rt=(et=Z,function(t){var e=arguments,n=arguments.length;if(nt&&(t=Object(t)),n<2||null==t)return t;for(var r=1;r<n;r++)for(var o=e[r],a=et(o),i=a.length,u=0;u<i;u++){var s=a[u];!j(t)||nt&&void 0!==t[s]||(t[s]=o[s])}return t});function ot(t){return t=rt({},t),function(e){return function(t,e){var n=Z(e),r=n.length;if(null==t)return!r;for(var o=Object(t),a=0;a<r;a++){var i=n[a];if(e[i]!==o[i]||!(i in o))return!1}return!0}(e,t)}}function at(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,a){return t.call(e,n,r,o,a)}}return function(){return t.apply(e,arguments)}}function it(t,e){return ut(t,e,1/0)}function ut(t,e,n){return K!==it?K(t,e):null==t?tt:X(t)?at(t,e,n):j(t)?ot(t):lt(t)}function st(t,e){return e=null==e?t.length-1:+e,function(){for(var n=arguments,r=Math.max(arguments.length-e,0),o=Array(r),a=0;a<r;a++)o[a]=n[a+e];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,arguments[0],o);case 2:return t.call(this,arguments[0],arguments[1],o)}var i=Array(e+1);for(a=0;a<e;a++)i[a]=n[a];return i[e]=o,t.apply(this,i)}}function lt(t){return function(e){return null==e?void 0:e[t]}}var ct=Math.pow(2,53)-1,ht=lt("length"),ft=function(t){var e=ht(t);return"number"==typeof e&&e>=0&&e<=ct};var dt=!{toString:null}.propertyIsEnumerable("toString"),mt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];!function(t){for(var e={},n=Z(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r]}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"});var pt=st((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)}));function vt(t){if(!t||"object"!=typeof t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}var gt={};function bt(t){void 0===t&&(t="core"),"chart"===t?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(gt[t]=window.__dw.vis.meta.locale||{}):gt[t]="core"===t?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[t])}function _t(t,e){var n=arguments;if(void 0===e&&(e="core"),t=t.trim(),gt[e]||bt(e),!gt[e][t])return"MISSING:"+t;var r=gt[e][t];return"string"==typeof r&&arguments.length>2&&(r=r.replace(/\$(\d)/g,(function(t,e){return e=2+Number(e),void 0===n[e]?t:n[e]}))),r}var yt={insert:function(t){var e=this.get().cm;e.replaceSelection(t.key),e.focus()},removeColumn:function(){var t=this.get().column,e=this.store.get("dw_chart"),n=e.dataset(),r=vt(e.get("metadata.describe.computed-columns",{}));delete r[t.name()];var o=n.columnOrder()[n.indexOf(t.name())],a=e.get("metadata.data.changes",[]),i=[];a.forEach((function(t){t.column!==o&&(t.column>o&&t.column--,i.push(t))})),e.set("metadata.describe.computed-columns",r),e.set("metadata.data.changes",i),e.saveSoon(),this.fire("updateTable"),this.fire("unselect")}};function wt(){var e=this,n=this.get().column,r=this.store.get("dw_chart"),o=r.get("metadata.describe.computed-columns",{});this.set({formula:o[n.name()]||"",name:n.title()}),this.observe("column",(function(t){t&&e.set({formula:o[t.name()]||"",name:t.title()})}));var a=this;var i=t.fromTextArea(this.refs.code,{value:this.get("formula")||"",mode:"simple",indentUnit:2,tabSize:2,lineWrapping:!0,matchBrackets:!0,placeholder:"// enter formula here",continueComments:"Enter",extraKeys:{Tab:"autocomplete"},hintOptions:{hint:function(e){var n=e.getCursor(),r=e.getTokenAt(n),o=[],i=a.get("keywords");return"variable"===r.type&&(o=i.filter((function(t){return 0===t.toLowerCase().indexOf(r.string.toLowerCase())}))),{list:o,from:t.Pos(n.line,r.start),to:t.Pos(n.line,r.end)}}}});window.CodeMirror=t,this.set({cm:i});var u,s,l,c,h,f,d,m=(u=function(){return e.fire("updateTable")},s=1500,f=function(t,e){c=null,e&&(h=u.apply(t,e))},(d=st((function(t){if(c&&clearTimeout(c),l){var e=!c;c=setTimeout(f,s),e&&(h=u.apply(this,t))}else c=pt(f,s,this,t);return h}))).cancel=function(){clearTimeout(c),c=null},d);this.observe("formula",(function(t){t!==i.getValue()&&i.setValue(t);var n=e.get().column,o=vt(r.get("metadata.describe.computed-columns",{}));o[n.name()]!==t&&(o[n.name()]=t,r.set("metadata.describe.computed-columns",o),r.saveSoon&&r.saveSoon(),m())})),this.observe("name",(function(t){var n=e.get().column,o=vt(r.get("metadata.data.changes",[])),a=r.dataset(),i=a.columnOrder()[a.indexOf(n.name())],u=-1;o.forEach((function(t,e){t.column===i&&0===t.row&&(u=e)})),u>-1?(o[u].value=t,o[u].time=(new Date).getTime()):o.push({column:i,row:0,value:t,time:(new Date).getTime()}),r.set("metadata.data.changes",o),r.saveSoon&&r.saveSoon(),m()})),i.on("change",(function(t){e.set({formula:t.getValue()})})),this.observe("metaColumns",(function(n){var r=new RegExp("(?:"+e.get("keywords").join("|")+")");t.defineSimpleMode("simplemode",{start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"string"},{regex:/(function)(\s+)([a-z$][\w$]*)/,token:["keyword",null,"keyword"]},{regex:/(?:function|var|return|if|for|while|else|do|this)\b/,token:"keyword"},{regex:/true|false|null|undefined/,token:"atom"},{regex:/0x[a-f\d]+|[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:/\/\/.*/,token:"comment"},{regex:/\/(?:[^\\]|\\.)*?\//,token:"variable-3"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+/*=<>!]+/,token:"operator"},{regex:/[{[(]/,indent:!0},{regex:/[}\])]/,dedent:!0},{regex:r,token:"variable-2"},{regex:/[a-z$][\w$]*/,token:"variable"},{regex:/<</,token:"meta",mode:{spec:"xml",end:/>>/}}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],lineComment:"//"}}),i.setOption("mode","simplemode")}))}function xt(t,e){var n,r,o=e.col,a=(e.each_value,e.col_index,o.key);return{c:function(){n=p("li"),r=g(a),this.h()},h:function(){_(n,"click",Ct),n.className="svelte-ruqb83",n._svelte={component:t,each_value:e.each_value,col_index:e.col_index}},m:function(t,e){c(n,t,e),l(r,n)},p:function(t,e){o=e.col,e.each_value,e.col_index,t.metaColumns&&a!==(a=o.key)&&(r.data=a),n._svelte.each_value=e.each_value,n._svelte.col_index=e.col_index},u:function(){h(n)},d:function(){y(n,"click",Ct)}}}function Ct(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.col_index];e.insert(n)}function Mt(t){L(this,t),this.refs={},this._state=s({name:"",formula:""},t.data),this._recompute({column:1,columns:1,metaColumns:1},this._state);var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){var n,r,o,a,i,u,f,m,v,b,C,M,N,k,T,S,F,R,H,D,L,I,A,U,O,E,j,$=_t("computed columns / modal / intro"),V=_t("computed columns / modal / name"),B=!1,W=_t("computed columns / modal / formula"),Y=_t("computed columns / modal / available columns"),q=_t("computed columns / modal / remove");function P(){B=!0,t.set({name:C.value}),B=!1}for(var z=e.metaColumns,Z=[],J=0;J<z.length;J+=1)Z[J]=xt(t,s(s({},e),{each_value:z,col:z[J],col_index:J}));function G(e){t.removeColumn()}return{c:function(){n=p("div"),r=p("h3"),o=g(e.title),a=g("\n    "),i=p("p"),u=g($),f=g("\n\n    "),m=p("label"),v=g(V),b=g("\n    "),C=p("input"),M=g("\n\n    "),N=p("label"),k=g(W),T=g("\n    "),S=p("textarea"),F=g("\n\n    "),R=p("p"),H=g(Y),D=g(":"),L=g("\n\n    "),I=p("ul");for(var t=0;t<Z.length;t+=1)Z[t].c();A=g("\n\n"),U=p("button"),O=p("i"),E=g(" "),j=g(q),this.h()},h:function(){r.className="first",m.className="svelte-ruqb83",_(C,"input",P),w(C,"type","text"),N.className="svelte-ruqb83",S.className="code",x(R,"margin-top","1em"),I.className="col-select svelte-ruqb83",x(n,"margin-bottom","15px"),O.className="fa fa-trash",_(U,"click",G),U.className="btn btn-danger"},m:function(s,h){c(n,s,h),l(r,n),l(o,r),l(a,n),l(i,n),l(u,i),l(f,n),l(m,n),l(v,m),l(b,n),l(C,n),C.value=e.name,l(M,n),l(N,n),l(k,N),l(T,n),l(S,n),t.refs.code=S,l(F,n),l(R,n),l(H,R),l(D,R),l(L,n),l(I,n);for(var d=0;d<Z.length;d+=1)Z[d].m(I,null);c(A,s,h),c(U,s,h),l(O,U),l(E,U),l(j,U)},p:function(e,n){e.title&&(o.data=n.title),B||(C.value=n.name);var r=n.metaColumns;if(e.metaColumns){for(var a=0;a<r.length;a+=1){var i=s(s({},n),{each_value:r,col:r[a],col_index:a});Z[a]?Z[a].p(e,i):(Z[a]=xt(t,i),Z[a].c(),Z[a].m(I,null))}for(;a<Z.length;a+=1)Z[a].u(),Z[a].d();Z.length=r.length}},u:function(){h(n);for(var t=0;t<Z.length;t+=1)Z[t].u();h(A),h(U)},d:function(){y(C,"input",P),t.refs.code===S&&(t.refs.code=null),d(Z),y(U,"click",G)}}}(this,this._state),this.root._oncreate.push((function(){wt.call(e),e.fire("update",{changed:{column:1,columns:1,metaColumns:1,title:1,name:1},current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),U(this._oncreate))}function Nt(t){var e=t-1;return e*e*e+1}function kt(t,e){var n=e.delay;void 0===n&&(n=0);var r=e.duration;void 0===r&&(r=400);var o=e.easing;void 0===o&&(o=Nt);var a=getComputedStyle(t),i=+a.opacity,u=parseFloat(a.height),s=parseFloat(a.paddingTop),l=parseFloat(a.paddingBottom),c=parseFloat(a.marginTop),h=parseFloat(a.marginBottom),f=parseFloat(a.borderTopWidth),d=parseFloat(a.borderBottomWidth);return{delay:n,duration:r,easing:o,css:function(t){return"overflow: hidden;opacity: "+Math.min(20*t,1)*i+";height: "+t*u+"px;padding-top: "+t*s+"px;padding-bottom: "+t*l+"px;margin-top: "+t*c+"px;margin-bottom: "+t*h+"px;border-top-width: "+t*f+"px;border-bottom-width: "+t*d+"px;"}}}s(Mt.prototype,E),s(Mt.prototype,yt),Mt.prototype._recompute=function(t,e){var n;t.column&&this._differs(e.title,e.title=(n=e.column,_t("describe / edit-column").replace("%s",'"'+(n?n.title()||n.name():"--")+'"')))&&(t.title=!0),t.columns&&this._differs(e.metaColumns,e.metaColumns=function(t){var e=t.columns;return e?e.map((function(t){return{key:(e=t.name(),e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"").replace(/-/g,"_").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(abstract|arguments|await|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|enum|eval|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|let|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var|void|volatile|while|window|with|yield)$/,"$1_")),title:t.title(),type:t.type()};var e})):[]}(e))&&(t.metaColumns=!0),t.metaColumns&&this._differs(e.keywords,e.keywords=function(t){var e=t.metaColumns,n=["sum","round","min","max","median","mean"];return e.forEach((function(t){n.push(t.key),"number"===t.type&&(n.push(t.key+"__sum"),n.push(t.key+"__min"),n.push(t.key+"__max"),n.push(t.key+"__mean"),n.push(t.key+"__median"))})),n}(e))&&(t.keywords=!0)};var Tt={show:function(){var t=this,e=setTimeout((function(){t.set({visible:!0})}),400);this.set({t:e})},hide:function(){var t=this.get().t;clearTimeout(t),this.set({visible:!1})}};function St(t,e){var n,r,o,a,i=t._slotted.default;return{c:function(){n=p("div"),r=p("i"),o=g("\n        "),this.h()},h:function(){r.className="hat-icon im im-graduation-hat svelte-19xfki7",n.className="content svelte-19xfki7"},m:function(t,e){c(n,t,e),l(r,n),l(o,n),i&&(l(a||(a=b()),n),l(i,n))},u:function(){h(n),i&&function(t,e){for(;t.nextSibling;)e.appendChild(t.nextSibling)}(a,i)},d:u}}function Ft(t){L(this,t),this._state=s({visible:!1},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=function(t,e){var n,r,o,a=e.visible&&St(t);function i(e){t.show()}function u(e){t.hide()}return{c:function(){n=p("div"),(r=p("span")).textContent="?",o=g("\n    "),a&&a.c(),this.h()},h:function(){r.className="help-icon svelte-19xfki7",_(n,"mouseenter",i),_(n,"mouseleave",u),n.className="help svelte-19xfki7"},m:function(t,e){c(n,t,e),l(r,n),l(o,n),a&&a.m(n,null)},p:function(e,r){r.visible?a||((a=St(t)).c(),a.m(n,null)):a&&(a.u(),a.d(),a=null)},u:function(){h(n),a&&a.u()},d:function(){a&&a.d(),y(n,"mouseenter",i),y(n,"mouseleave",u)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function Rt(t,e){var n,r,o,a=new Ft({root:t.root,slots:{default:m()}});return{c:function(){n=g("\n    "),r=p("div"),o=g("\n"),a._fragment.c()},m:function(t,i){l(n,a._slotted.default),l(r,a._slotted.default),r.innerHTML=e.help,l(o,a._slotted.default),a._mount(t,i)},p:function(t,e){t.help&&(r.innerHTML=e.help)},u:function(){r.innerHTML="",a._unmount()},d:function(){a.destroy(!1)}}}function Ht(t,e){var n,r,o,a,i;return{c:function(){n=p("div"),r=p("div"),this.h()},h:function(){r.className="disabled-msg svelte-j55ba2"},m:function(t,o){c(n,t,o),l(r,n),r.innerHTML=e.disabled_msg},p:function(t,e){(i||t.disabled_msg)&&(r.innerHTML=e.disabled_msg)},i:function(e,r){a||(a=!0,i=!1,t.root._aftercreate.push((function(){o||(o=function(t,e,n,r,o,a){var i,u=n(e,r),s=u.duration||300,l=u.easing||N;if(u.css&&!k.stylesheet){var c=p("style");document.head.appendChild(c),k.stylesheet=c.sheet}return o&&(u.css&&u.delay&&(i=e.style.cssText,e.style.cssText+=u.css(0)),u.tick&&u.tick(0)),{t:o?0:1,running:!1,program:null,pending:null,run:function(t,e){var n={start:window.performance.now()+(u.delay||0),intro:t,callback:e};u.delay?this.pending=n:this.start(n),this.running||(this.running=!0,k.add(this))},start:function(n){t.fire(n.intro?"intro.start":"outro.start",{node:e}),n.a=this.t,n.b=n.intro?1:0,n.delta=n.b-n.a,n.duration=s*Math.abs(n.b-n.a),n.end=n.start+n.duration,u.css&&(u.delay&&(e.style.cssText=i),n.rule=function(t,e,n,r,o,a){for(var i="{\n",u=0;u<=1;u+=16.666/r){i+=100*u+"%{"+a(t+n*o(u))+"}\n"}return i+"100% {"+a(e)+"}\n}"}(n.a,n.b,n.delta,n.duration,l,u.css),k.addRule(n.rule,n.name="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(n.rule)),e.style.animation=(e.style.animation||"").split(", ").filter((function(t){return t&&(n.delta<0||!/__svelte/.test(t))})).concat(n.name+" "+n.duration+"ms linear 1 forwards").join(", ")),this.program=n,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*l(n/e.duration),u.tick&&u.tick(this.t)}},done:function(){var t=this.program;this.t=t.b,u.tick&&u.tick(this.t),u.css&&k.deleteRule(e,t.name),t.callback(),t=null,this.running=!!this.pending},abort:function(){u.tick&&u.tick(1),u.css&&k.deleteRule(e,this.program.name),this.program=this.pending=null,this.running=!1}}}(t,n,kt,{},!0)),o.run(!0,(function(){t.fire("intro.end",{node:n})}))})),this.m(e,r))},o:function(e){if(!i){i=!0,a=!1;var r=1;o.run(!1,(function(){t.fire("outro.end",{node:n}),0==--r&&e(),o=null}))}},u:function(){r.innerHTML="",h(n)},d:u}}function Dt(t){L(this,t),this._state=s({value:!1,disabled:!1,faded:!1,indeterminate:!1,disabled_msg:"",help:!1},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,r,o,a,i,u,s,f,d,m=e.help&&Rt(t,e);function v(){t.set({value:a.checked,indeterminate:a.indeterminate})}var b=e.disabled&&e.disabled_msg&&Ht(t,e);return{c:function(){m&&m.c(),n=g("\n"),r=p("div"),o=p("label"),a=p("input"),i=p("span"),u=g("\n        "),s=g(e.label),d=g("\n    "),b&&b.c(),this.h()},h:function(){_(a,"change",v),"value"in e&&"indeterminate"in e||t.root._beforecreate.push(v),w(a,"type","checkbox"),a.disabled=e.disabled,a.className="svelte-j55ba2",i.className="css-ui svelte-j55ba2",o.className=f="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-j55ba2",r.className="control-group vis-option-group vis-option-type-checkbox svelte-j55ba2"},m:function(t,h){m&&m.m(t,h),c(n,t,h),c(r,t,h),l(o,r),l(a,o),a.checked=e.value,a.indeterminate=e.indeterminate,l(i,o),l(u,o),l(s,o),l(d,r),b&&b.i(r,null)},p:function(e,i){i.help?m?m.p(e,i):((m=Rt(t,i)).c(),m.m(n.parentNode,n)):m&&(m.u(),m.d(),m=null),a.checked=i.value,a.indeterminate=i.indeterminate,e.disabled&&(a.disabled=i.disabled),e.label&&(s.data=i.label),(e.disabled||e.faded)&&f!==(f="checkbox "+(i.disabled?"disabled":"")+" "+(i.faded?"faded":"")+" svelte-j55ba2")&&(o.className=f),i.disabled&&i.disabled_msg?(b?b.p(e,i):(b=Ht(t,i))&&b.c(),b.i(r,null)):b&&b.o((function(){b.u(),b.d(),b=null}))},u:function(){m&&m.u(),h(n),h(r),b&&b.u()},d:function(){m&&m.d(),y(a,"change",v),b&&b.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,U(this._beforecreate),U(this._oncreate),U(this._aftercreate),this._lock=!1)}s(Ft.prototype,E),s(Ft.prototype,Tt),s(Dt.prototype,E);var Lt="100px";function It(t,e){var n;return{c:function(){n=p("label"),this.h()},h:function(){x(n,"width",e.width||Lt),w(n,"class:disabled",!0),n.className="control-label svelte-p72242"},m:function(t,r){c(n,t,r),n.innerHTML=e.label},p:function(t,e){t.label&&(n.innerHTML=e.label),t.width&&x(n,"width",e.width||Lt)},u:function(){n.innerHTML="",h(n)},d:u}}function At(t,e){var n,r;return{c:function(){n=p("p"),this.h()},h:function(){x(n,"padding-left",e.inline?0:e.width||Lt),w(n,"class:mini-help-block","!inline"),n.className=r="mini-help "+e.type+" svelte-p72242"},m:function(t,r){c(n,t,r),n.innerHTML=e.help},p:function(t,e){t.help&&(n.innerHTML=e.help),(t.inline||t.width)&&x(n,"padding-left",e.inline?0:e.width||Lt),t.type&&r!==(r="mini-help "+e.type+" svelte-p72242")&&(n.className=r)},u:function(){n.innerHTML="",h(n)},d:u}}function Ut(t){var e,n,r,o,a,i,u,f,d,m;L(this,t),this._state=s({disabled:!1,help:!1,type:"default",valign:"baseline",inline:!1},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=(e=this,n=this._state,f=e._slotted.default,d=n.label&&It(0,n),m=n.help&&At(0,n),{c:function(){r=p("div"),d&&d.c(),o=g("\n    "),a=p("div"),i=g("\n    "),m&&m.c(),this.h()},h:function(){a.className="controls svelte-p72242",w(a,"class:form-inline","inline"),x(a,"width","calc(100% - "+(n.width||Lt)+" - 32px)"),r.className=u="control-group vis-option-group vis-option-group-"+n.type+" label-"+n.valign+" svelte-p72242"},m:function(t,e){c(r,t,e),d&&d.m(r,null),l(o,r),l(a,r),f&&l(f,a),l(i,r),m&&m.m(r,null)},p:function(t,e){e.label?d?d.p(t,e):((d=It(0,e)).c(),d.m(r,o)):d&&(d.u(),d.d(),d=null),t.width&&x(a,"width","calc(100% - "+(e.width||Lt)+" - 32px)"),e.help?m?m.p(t,e):((m=At(0,e)).c(),m.m(r,null)):m&&(m.u(),m.d(),m=null),(t.type||t.valign)&&u!==(u="control-group vis-option-group vis-option-group-"+e.type+" label-"+e.valign+" svelte-p72242")&&(r.className=u)},u:function(){h(r),d&&d.u(),f&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(a,f),m&&m.u()},d:function(){d&&d.d(),m&&m.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function Ot(t,e){var n,r,o,a=e.opt,i=(e.each_value,e.opt_index,a.label);return{c:function(){n=p("option"),r=g(i),this.h()},h:function(){n.__value=o=a.value,n.value=n.__value},m:function(t,e){c(n,t,e),l(r,n)},p:function(t,e){a=e.opt,e.each_value,e.opt_index,t.options&&i!==(i=a.label)&&(r.data=i),t.options&&o!==(o=a.value)&&(n.__value=o),n.value=n.__value},u:function(){h(n)},d:u}}function Et(t,e){for(var n,r=e.options,o=[],a=0;a<r.length;a+=1)o[a]=Ot(0,s(s({},e),{each_value:r,opt:r[a],opt_index:a}));return{c:function(){for(var t=0;t<o.length;t+=1)o[t].c();n=b()},m:function(t,e){for(var r=0;r<o.length;r+=1)o[r].m(t,e);c(n,t,e)},p:function(t,e){var r=e.options;if(t.options){for(var a=0;a<r.length;a+=1){var i=s(s({},e),{each_value:r,opt:r[a],opt_index:a});o[a]?o[a].p(t,i):(o[a]=Ot(0,i),o[a].c(),o[a].m(n.parentNode,n))}for(;a<o.length;a+=1)o[a].u(),o[a].d();o.length=r.length}},u:function(){for(var t=0;t<o.length;t+=1)o[t].u();h(n)},d:function(){d(o)}}}function jt(t,e){for(var n,r,o=e.optgroup,a=(e.each_value_1,e.optgroup_index,o.options),i=[],u=0;u<a.length;u+=1)i[u]=$t(t,s(s({},e),{each_value_2:a,opt:a[u],opt_index_1:u}));return{c:function(){n=p("optgroup");for(var t=0;t<i.length;t+=1)i[t].c();this.h()},h:function(){w(n,"label",r=o.label)},m:function(t,e){c(n,t,e);for(var r=0;r<i.length;r+=1)i[r].m(n,null)},p:function(e,a){o=a.optgroup,a.each_value_1,a.optgroup_index;var u=o.options;if(e.optgroups){for(var l=0;l<u.length;l+=1){var c=s(s({},a),{each_value_2:u,opt:u[l],opt_index_1:l});i[l]?i[l].p(e,c):(i[l]=$t(t,c),i[l].c(),i[l].m(n,null))}for(;l<i.length;l+=1)i[l].u(),i[l].d();i.length=u.length}e.optgroups&&r!==(r=o.label)&&w(n,"label",r)},u:function(){h(n);for(var t=0;t<i.length;t+=1)i[t].u()},d:function(){d(i)}}}function $t(t,e){e.optgroup,e.each_value_1,e.optgroup_index;var n,r,o,a=e.opt,i=(e.each_value_2,e.opt_index_1,a.label);return{c:function(){n=p("option"),r=g(i),this.h()},h:function(){n.__value=o=a.value,n.value=n.__value},m:function(t,e){c(n,t,e),l(r,n)},p:function(t,e){e.optgroup,e.each_value_1,e.optgroup_index,a=e.opt,e.each_value_2,e.opt_index_1,t.optgroups&&i!==(i=a.label)&&(r.data=i),t.optgroups&&o!==(o=a.value)&&(n.__value=o),n.value=n.__value},u:function(){h(n)},d:u}}function Vt(t,e){for(var n,r=e.optgroups,o=[],a=0;a<r.length;a+=1)o[a]=jt(t,s(s({},e),{each_value_1:r,optgroup:r[a],optgroup_index:a}));return{c:function(){for(var t=0;t<o.length;t+=1)o[t].c();n=b()},m:function(t,e){for(var r=0;r<o.length;r+=1)o[r].m(t,e);c(n,t,e)},p:function(e,r){var a=r.optgroups;if(e.optgroups){for(var i=0;i<a.length;i+=1){var u=s(s({},r),{each_value_1:a,optgroup:a[i],optgroup_index:i});o[i]?o[i].p(e,u):(o[i]=jt(t,u),o[i].c(),o[i].m(n.parentNode,n))}for(;i<o.length;i+=1)o[i].u(),o[i].d();o.length=a.length}},u:function(){for(var t=0;t<o.length;t+=1)o[t].u();h(n)},d:function(){d(o)}}}function Bt(t){L(this,t),this._state=s({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){var n,r,o=!1,a=e.options.length&&Et(t,e),i=e.optgroups.length&&Vt(t,e);function u(){o=!0,t.set({value:M(n)}),o=!1}return{c:function(){n=p("select"),a&&a.c(),r=b(),i&&i.c(),this.h()},h:function(){_(n,"change",u),"value"in e||t.root._beforecreate.push(u),n.className="select-css svelte-v0oq4b",n.disabled=e.disabled,x(n,"width",e.width)},m:function(t,o){c(n,t,o),a&&a.m(n,null),l(r,n),i&&i.m(n,null),C(n,e.value)},p:function(e,u){u.options.length?a?a.p(e,u):((a=Et(t,u)).c(),a.m(n,r)):a&&(a.u(),a.d(),a=null),u.optgroups.length?i?i.p(e,u):((i=Vt(t,u)).c(),i.m(n,null)):i&&(i.u(),i.d(),i=null),o||C(n,u.value),e.disabled&&(n.disabled=u.disabled),e.width&&x(n,"width",u.width)},u:function(){h(n),a&&a.u(),i&&i.u()},d:function(){a&&a.d(),i&&i.d(),y(n,"change",u)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),U(this._beforecreate))}function Wt(t){L(this,t),this._state=s({disabled:!1,width:null,labelWidth:null,options:[],optgroups:[],valign:"middle",inline:!0,help:""},t.data),this._recompute({inline:1,width:1,labelWidth:1},this._state),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,r,o={},a={},i={width:e.controlWidth};"value"in e&&(i.value=e.value,o.value=!0),"disabled"in e&&(i.disabled=e.disabled,o.disabled=!0),"options"in e&&(i.options=e.options,o.options=!0),"optgroups"in e&&(i.optgroups=e.optgroups,o.optgroups=!0);var u=new Bt({root:t.root,data:i,_bind:function(e,n){t.get();var r={};!o.value&&e.value&&(r.value=n.value),!o.disabled&&e.disabled&&(r.disabled=n.disabled),!o.options&&e.options&&(r.options=n.options),!o.optgroups&&e.optgroups&&(r.optgroups=n.optgroups),t._set(r),o={}}});t.root._beforecreate.push((function(){u._bind({value:1,disabled:1,options:1,optgroups:1},u.get())}));var s={width:e.labelWidth,type:"select"};"valign"in e&&(s.valign=e.valign,a.valign=!0),"label"in e&&(s.label=e.label,a.label=!0),"disabled"in e&&(s.disabled=e.disabled,a.disabled=!0),"help"in e&&(s.help=e.help,a.help=!0),"inline"in e&&(s.inline=e.inline,a.inline=!0);var c=new Ut({root:t.root,slots:{default:m()},data:s,_bind:function(e,n){t.get();var r={};!a.valign&&e.valign&&(r.valign=n.valign),!a.label&&e.label&&(r.label=n.label),!a.disabled&&e.disabled&&(r.disabled=n.disabled),!a.help&&e.help&&(r.help=n.help),!a.inline&&e.inline&&(r.inline=n.inline),t._set(r),a={}}});return t.root._beforecreate.push((function(){c._bind({valign:1,label:1,disabled:1,help:1,inline:1},c.get())})),{c:function(){n=g("\n    "),u._fragment.c(),r=g("\n"),c._fragment.c()},m:function(t,e){l(n,c._slotted.default),u._mount(c._slotted.default,null),l(r,c._slotted.default),c._mount(t,e)},p:function(t,e){var n={};t.controlWidth&&(n.width=e.controlWidth),!o.value&&t.value&&(n.value=e.value,o.value=!0),!o.disabled&&t.disabled&&(n.disabled=e.disabled,o.disabled=!0),!o.options&&t.options&&(n.options=e.options,o.options=!0),!o.optgroups&&t.optgroups&&(n.optgroups=e.optgroups,o.optgroups=!0),u._set(n),o={};var r={};t.labelWidth&&(r.width=e.labelWidth),!a.valign&&t.valign&&(r.valign=e.valign,a.valign=!0),!a.label&&t.label&&(r.label=e.label,a.label=!0),!a.disabled&&t.disabled&&(r.disabled=e.disabled,a.disabled=!0),!a.help&&t.help&&(r.help=e.help,a.help=!0),!a.inline&&t.inline&&(r.inline=e.inline,a.inline=!0),c._set(r),a={}},u:function(){c._unmount()},d:function(){u.destroy(!1),c.destroy(!1)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,U(this._beforecreate),U(this._oncreate),U(this._aftercreate),this._lock=!1)}s(Ut.prototype,E),s(Bt.prototype,E),s(Wt.prototype,E),Wt.prototype._recompute=function(t,e){var n,r,o;(t.inline||t.width)&&this._differs(e.controlWidth,e.controlWidth=(r=(n=e).inline,o=n.width,r?o||"auto":o))&&(t.controlWidth=!0),(t.inline||t.labelWidth)&&this._differs(e.labelWidth,e.labelWidth=function(t){var e=t.inline,n=t.labelWidth;return e?n||"auto":n}(e))&&(t.labelWidth=!0)};var Yt=Date.now||function(){return(new Date).getTime()};function qt(t,e,n){var r,o,a,i,u=0;n||(n={});var s=function(){u=!1===n.leading?0:Yt(),r=null,i=t.apply(o,a),r||(o=a=null)},l=function(){var l=Yt();u||!1!==n.leading||(u=l);var c=e-(l-u);return o=this,a=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),u=l,i=t.apply(o,a),r||(o=a=null)):r||!1===n.trailing||(r=setTimeout(s,c)),i};return l.cancel=function(){clearTimeout(r),u=0,r=o=a=null},l}function Pt(t){if(Array.isArray(t)){var e={};return Object.keys(t).forEach((function(n){return e[n]=t[n]})),e}return t}var zt={autoDivisor:function(){var t=this.store.get("dw_chart"),e=this.get().column,n=dw.utils.metricSuffix(t.locale()),r=e.values(),o=dw.utils.significantDimension(r),a=o<-2?3*Math.round(-1*o/3):o>4?-1*o:0,i=r.map((function(t){return t/Math.pow(10,a)})),u=dw.utils.significantDimension(i);u<=0&&(u=i.reduce((function(t,e){return Math.max(t,Math.min(3,dw.utils.tailLength(e)))}),0)),u===a&&(a=0,u=0),a>15&&(a=0,u=0),this.set({columnFormat:{"number-divisor":a,"number-format":"n"+Math.max(0,u),"number-prepend":"","number-append":a?n[a]||" Ã— 10<sup>"+a+"</sup>":""}})},getColumnFormat:function(t){var e=vt(Pt(this.store.get("dw_chart").get("metadata.data.column-format",{}))[t.name()]);return e&&"auto"!==e&&void 0===e.length||(e={type:"auto",ignore:!1,"number-divisor":0,"number-prepend":"","number-append":"","number-format":"auto"}),e}};function Zt(){var t=this,e=qt((function(){t.fire("updateTable")}),100,{leading:!1}),n=qt((function(){t.fire("updateTable")}),100,{leading:!1}),r=this.get().column;this.set({colTypes:[{value:"auto",label:"auto ("+r.type()+")"},{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"}]}),this.set({columnFormat:this.getColumnFormat(r)}),this.observe("column",(function(e){t.set({columnFormat:t.getColumnFormat(e)}),t.get().colTypes[0].label="auto ("+r.type()+")"})),this.observe("columnFormat",(function(r){var o=t.store.get("dw_chart"),a=t.get().column,i=Pt(vt(o.get("metadata.data.column-format",{}))),u=i[a.name()];if(!u||JSON.stringify(u)!==JSON.stringify(r)){if("auto"===r["number-divisor"])return void setTimeout((function(){return t.autoDivisor()}),100);i[a.name()]=vt(r),o.set("metadata.data.column-format",i),o.saveSoon&&o.saveSoon(),u&&u.type===r.type?n():e()}}))}function Jt(t,e){var n,r,o,a,i,u,s,f,d,m,v={},b={},C=_t("Prepend/Append"),M=!1,N=!1,k={label:_t("Round numbers to"),options:e.roundOptions,optgroups:e.numberFormats,width:"180px"};"number-format"in e.columnFormat&&(k.value=e.columnFormat["number-format"],v.value=!0);var T=new Wt({root:t.root,data:k,_bind:function(e,n){var r=t.get(),o={};!v.value&&e.value&&(r.columnFormat["number-format"]=n.value,o.columnFormat=r.columnFormat),t._set(o),v={}}});t.root._beforecreate.push((function(){T._bind({value:1},T.get())}));var S={label:_t("Divide numbers by"),options:e.divisors_opts,optgroups:e.divisors,width:"180px"};"number-divisor"in e.columnFormat&&(S.value=e.columnFormat["number-divisor"],b.value=!0);var F=new Wt({root:t.root,data:S,_bind:function(e,n){var r=t.get(),o={};!b.value&&e.value&&(r.columnFormat["number-divisor"]=n.value,o.columnFormat=r.columnFormat),t._set(o),b={}}});function R(){var e=t.get();M=!0,e.columnFormat["number-prepend"]=f.value,t.set({columnFormat:e.columnFormat}),M=!1}function H(){var e=t.get();N=!0,e.columnFormat["number-append"]=m.value,t.set({columnFormat:e.columnFormat}),N=!1}return t.root._beforecreate.push((function(){F._bind({value:1},F.get())})),{c:function(){T._fragment.c(),n=g("\n\n        \n        "),F._fragment.c(),r=g("\n\n        "),o=p("div"),a=p("label"),i=g(C),u=g("\n            "),s=p("div"),f=p("input"),d=g("\n                #\n                "),m=p("input"),this.h()},h:function(){a.className="control-label",_(f,"input",R),f.autocomplete="screw-you-google-chrome",x(f,"width","6ex"),x(f,"text-align","right"),f.dataset.lpignore="true",f.name="prepend",w(f,"type","text"),_(m,"input",H),m.autocomplete="screw-you-google-chrome",x(m,"width","6ex"),m.dataset.lpignore="true",m.name="append",w(m,"type","text"),s.className="controls form-inline",o.className="control-group vis-option-type-select"},m:function(t,h){T._mount(t,h),c(n,t,h),F._mount(t,h),c(r,t,h),c(o,t,h),l(a,o),l(i,a),l(u,o),l(s,o),l(f,s),f.value=e.columnFormat["number-prepend"],l(d,s),l(m,s),m.value=e.columnFormat["number-append"]},p:function(t,e){var n={};n.label=_t("Round numbers to"),t.roundOptions&&(n.options=e.roundOptions),t.numberFormats&&(n.optgroups=e.numberFormats),!v.value&&t.columnFormat&&(n.value=e.columnFormat["number-format"],v.value=!0),T._set(n),v={};var r={};r.label=_t("Divide numbers by"),t.divisors_opts&&(r.options=e.divisors_opts),t.divisors&&(r.optgroups=e.divisors),!b.value&&t.columnFormat&&(r.value=e.columnFormat["number-divisor"],b.value=!0),F._set(r),b={},M||(f.value=e.columnFormat["number-prepend"]),N||(m.value=e.columnFormat["number-append"])},u:function(){T._unmount(),h(n),F._unmount(),h(r),h(o)},d:function(){T.destroy(!1),F.destroy(!1),y(f,"input",R),y(m,"input",H)}}}function Gt(t){L(this,t),this._state=s({columnFormat:{type:"auto",ignore:!1,"number-divisor":0,"number-format":"auto","number-prepend":"","number-append":""},colTypes:[],divisors_opts:[{value:0,label:_t("describe / column-format / no-change")},{value:"auto",label:_t("describe / column-format / automatic")}],divisors:[{label:_t("describe / column-format / divide-by"),options:[{value:3,label:"1000"},{value:6,label:"1 million"},{value:9,label:"1 billion"}]},{label:_t("describe / column-format / multiply-by"),options:[{value:-2,label:"100"},{value:-3,label:"1000"},{value:-6,label:"1 million"},{value:-9,label:"1 billion"},{value:-12,label:"1 trillion"}]}],numberFormats:[{label:_t("Decimal places"),options:[{value:"n3",label:"3 (1,234.568)"},{value:"n2",label:"2 (1,234.57)"},{value:"n1",label:"1 (1,234.6)"},{value:"n0",label:"0 (1,235)"}]},{label:_t("Significant digits"),options:[{value:"s6",label:"6 (1,234.57)"},{value:"s5",label:"5 (123.45)"},{value:"s4",label:"4 (12.34)"},{value:"s3",label:"3 (1.23)"},{value:"s2",label:"2 (0.12)"},{value:"s1",label:"1 (0.01)"}]}],roundOptions:[{value:"-",label:_t("describe / column-format / individual")},{value:"auto",label:_t("describe / column-format / auto-detect")}]},t.data),this._recompute({column:1},this._state);var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,r,o,a,i,u,s,f,d,m={},v={},b={label:_t("Column type"),options:e.colTypes,width:"180px"};"type"in e.columnFormat&&(b.value=e.columnFormat.type,m.value=!0);var _=new Wt({root:t.root,data:b,_bind:function(e,n){var r=t.get(),o={};!m.value&&e.value&&(r.columnFormat.type=n.value,o.columnFormat=r.columnFormat),t._set(o),m={}}});t.root._beforecreate.push((function(){_._bind({value:1},_.get())}));var y={label:_t("Hide column from visualization")};"ignore"in e.columnFormat&&(y.value=e.columnFormat.ignore,v.value=!0);var w=new Dt({root:t.root,data:y,_bind:function(e,n){var r=t.get(),o={};!v.value&&e.value&&(r.columnFormat.ignore=n.value,o.columnFormat=r.columnFormat),t._set(o),v={}}});t.root._beforecreate.push((function(){w._bind({value:1},w.get())}));var x=e.column&&"number"==e.column.type()&&Jt(t,e);return{c:function(){n=p("div"),r=p("h3"),o=g(e.title),a=g("\n\n    "),i=p("div"),_._fragment.c(),u=g("\n\n        "),w._fragment.c(),s=g("\n\n        "),f=p("hr"),d=g("\n\n        "),x&&x.c(),this.h()},h:function(){r.className="first",i.className="form-horizontal"},m:function(t,e){c(n,t,e),l(r,n),l(o,r),l(a,n),l(i,n),_._mount(i,null),l(u,i),w._mount(i,null),l(s,i),l(f,i),l(d,i),x&&x.m(i,null)},p:function(e,n){e.title&&(o.data=n.title);var r={};r.label=_t("Column type"),e.colTypes&&(r.options=n.colTypes),!m.value&&e.columnFormat&&(r.value=n.columnFormat.type,m.value=!0),_._set(r),m={};var a={};a.label=_t("Hide column from visualization"),!v.value&&e.columnFormat&&(a.value=n.columnFormat.ignore,v.value=!0),w._set(a),v={},n.column&&"number"==n.column.type()?x?x.p(e,n):((x=Jt(t,n)).c(),x.m(i,null)):x&&(x.u(),x.d(),x=null)},u:function(){h(n),x&&x.u()},d:function(){_.destroy(!1),w.destroy(!1),x&&x.d()}}}(this,this._state),this.root._oncreate.push((function(){Zt.call(e),e.fire("update",{changed:{column:1,title:1,colTypes:1,columnFormat:1,roundOptions:1,numberFormats:1,divisors_opts:1,divisors:1},current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,U(this._beforecreate),U(this._oncreate),U(this._aftercreate),this._lock=!1)}s(Gt.prototype,E),s(Gt.prototype,zt),Gt.prototype._recompute=function(t,e){var n;t.column&&this._differs(e.title,e.title=(n=e.column,_t("describe / edit-column").replace("%s",'"'+(n?n.title()||n.name():"--")+'"')))&&(t.title=!0)};var Xt,Qt,Kt=(Xt=function(t,e,n){z(t,n)?t[n]++:t[n]=1},function(t,e,n){var r=Qt?[[],[]]:{};return e=ut(e,n),function(t,e,n){var r,o;if(e=at(e,n),ft(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var a=Z(t);for(r=0,o=a.length;r<o;r++)e(t[a[r]],a[r],t)}}(t,(function(n,o){var a=e(n,o,t);Xt(r,n,a)})),r});function te(t){return(+t).toFixed(function(t){return Math.max(0,String(t-Math.floor(t)).replace(/00000*[0-9]+$/,"").replace(/99999*[0-9]+$/,"").length-2)}(t))}function ee(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var ne,re,oe=(1===(ne=ee).length&&(re=ne,ne=function(t,e){return ee(re(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var o=n+r>>>1;ne(t[o],e)<0?n=o+1:r=o}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var o=n+r>>>1;ne(t[o],e)>0?r=o:n=o+1}return n}}).right;function ae(t){return null===t?NaN:+t}function ie(t,e){var n,r,o,a=t.length,i=-1;if(null==e){for(;++i<a;)if(null!=(n=t[i])&&n>=n)for(r=o=n;++i<a;)null!=(n=t[i])&&(r>n&&(r=n),o<n&&(o=n))}else for(;++i<a;)if(null!=(n=e(t[i],i,t))&&n>=n)for(r=o=n;++i<a;)null!=(n=e(t[i],i,t))&&(r>n&&(r=n),o<n&&(o=n));return[r,o]}var ue=Array.prototype.slice;function se(t){return function(){return t}}function le(t){return t}function ce(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(o);++r<o;)a[r]=t+r*n;return a}var he=Math.sqrt(50),fe=Math.sqrt(10),de=Math.sqrt(2);function me(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,o);return o>=0?(a>=he?10:a>=fe?5:a>=de?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=he?10:a>=fe?5:a>=de?2:1)}function pe(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/o;return a>=he?o*=10:a>=fe?o*=5:a>=de&&(o*=2),e<t?-o:o}function ve(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function ge(){var t=le,e=ie,n=ve;function r(r){var o,a,i=r.length,u=new Array(i);for(o=0;o<i;++o)u[o]=t(r[o],o,r);var s=e(u),l=s[0],c=s[1],h=n(u,l,c);Array.isArray(h)||(h=pe(l,c,h),h=ce(Math.ceil(l/h)*h,c,h));for(var f=h.length;h[0]<=l;)h.shift(),--f;for(;h[f-1]>c;)h.pop(),--f;var d,m=new Array(f+1);for(o=0;o<=f;++o)(d=m[o]=[]).x0=o>0?h[o-1]:l,d.x1=o<f?h[o]:c;for(o=0;o<i;++o)l<=(a=u[o])&&a<=c&&m[oe(h,a,0,f)].push(r[o]);return m}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:se(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:se([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?se(ue.call(t)):se(t),r):n},r}function be(t,e){var n,r,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<o;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<o;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r}function _e(t,e){var n,r=t.length,o=-1,a=[];if(null==e)for(;++o<r;)isNaN(n=ae(t[o]))||a.push(n);else for(;++o<r;)isNaN(n=ae(e(t[o],o,t)))||a.push(n);return function(t,e,n){if(null==n&&(n=ae),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,a=Math.floor(o),i=+n(t[a],a,t);return i+(+n(t[a+1],a+1,t)-i)*(o-a)}}(a.sort(ee),.5)}function ye(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function we(){}function xe(t,e){var n=new we;if(t instanceof we)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,o=-1,a=t.length;if(null==e)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(e(r=t[o],o,t),r)}else if(t)for(var i in t)n.set(i,t[i]);return n}function Ce(){}we.prototype=xe.prototype={constructor:we,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Me=xe.prototype;Ce.prototype=function(t,e){var n=new Ce;if(t instanceof Ce)t.each((function(t){n.add(t)}));else if(t){var r=-1,o=t.length;if(null==e)for(;++r<o;)n.add(t[r]);else for(;++r<o;)n.add(e(t[r],r,t))}return n}.prototype={constructor:Ce,has:Me.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Me.remove,clear:Me.clear,values:Me.keys,size:Me.size,empty:Me.empty,each:Me.each};var Ne=Array.prototype,ke=Ne.map,Te=Ne.slice,Se={name:"implicit"};function Fe(){var t=xe(),e=[],n=[],r=Se;function o(o){var a=o+"",i=t.get(a);if(!i){if(r!==Se)return r;t.set(a,i=e.push(o))}return n[(i-1)%n.length]}return o.domain=function(n){if(!arguments.length)return e.slice();e=[],t=xe();for(var r,a,i=-1,u=n.length;++i<u;)t.has(a=(r=n[i])+"")||t.set(a,e.push(r));return o},o.range=function(t){return arguments.length?(n=Te.call(t),o):n.slice()},o.unknown=function(t){return arguments.length?(r=t,o):r},o.copy=function(){return Fe(e,n).unknown(r)},ye.apply(o,arguments),o}function Re(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function He(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function De(){}var Le="\\s*([+-]?\\d+)\\s*",Ie="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ae="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ue=/^#([0-9a-f]{3})$/,Oe=/^#([0-9a-f]{6})$/,Ee=new RegExp("^rgb\\("+[Le,Le,Le]+"\\)$"),je=new RegExp("^rgb\\("+[Ae,Ae,Ae]+"\\)$"),$e=new RegExp("^rgba\\("+[Le,Le,Le,Ie]+"\\)$"),Ve=new RegExp("^rgba\\("+[Ae,Ae,Ae,Ie]+"\\)$"),Be=new RegExp("^hsl\\("+[Ie,Ae,Ae]+"\\)$"),We=new RegExp("^hsla\\("+[Ie,Ae,Ae,Ie]+"\\)$"),Ye={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function qe(t){var e;return t=(t+"").trim().toLowerCase(),(e=Ue.exec(t))?new Ge((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=Oe.exec(t))?Pe(parseInt(e[1],16)):(e=Ee.exec(t))?new Ge(e[1],e[2],e[3],1):(e=je.exec(t))?new Ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=$e.exec(t))?ze(e[1],e[2],e[3],e[4]):(e=Ve.exec(t))?ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Be.exec(t))?Xe(e[1],e[2]/100,e[3]/100,1):(e=We.exec(t))?Xe(e[1],e[2]/100,e[3]/100,e[4]):Ye.hasOwnProperty(t)?Pe(Ye[t]):"transparent"===t?new Ge(NaN,NaN,NaN,0):null}function Pe(t){return new Ge(t>>16&255,t>>8&255,255&t,1)}function ze(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ge(t,e,n,r)}function Ze(t){return t instanceof De||(t=qe(t)),t?new Ge((t=t.rgb()).r,t.g,t.b,t.opacity):new Ge}function Je(t,e,n,r){return 1===arguments.length?Ze(t):new Ge(t,e,n,null==r?1:r)}function Ge(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Xe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ke(t,e,n,r)}function Qe(t){if(t instanceof Ke)return new Ke(t.h,t.s,t.l,t.opacity);if(t instanceof De||(t=qe(t)),!t)return new Ke;if(t instanceof Ke)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,u=a-o,s=(a+o)/2;return u?(i=e===a?(n-r)/u+6*(n<r):n===a?(r-e)/u+2:(e-n)/u+4,u/=s<.5?a+o:2-a-o,i*=60):u=s>0&&s<1?0:i,new Ke(i,u,s,t.opacity)}function Ke(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function tn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Re(De,qe,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Re(Ge,Je,He(De,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Re(Ke,(function(t,e,n,r){return 1===arguments.length?Qe(t):new Ke(t,e,n,null==r?1:r)}),He(De,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ke(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ke(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Ge(tn(t>=240?t-240:t+120,o,r),tn(t,o,r),tn(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var en=Math.PI/180,nn=180/Math.PI,rn=6/29,on=3*rn*rn;function an(t){if(t instanceof un)return new un(t.l,t.a,t.b,t.opacity);if(t instanceof dn){if(isNaN(t.h))return new un(t.l,0,0,t.opacity);var e=t.h*en;return new un(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Ge||(t=Ze(t));var n,r,o=hn(t.r),a=hn(t.g),i=hn(t.b),u=sn((.2225045*o+.7168786*a+.0606169*i)/1);return o===a&&a===i?n=r=u:(n=sn((.4360747*o+.3850649*a+.1430804*i)/.96422),r=sn((.0139322*o+.0971045*a+.7141733*i)/.82521)),new un(116*u-16,500*(n-u),200*(u-r),t.opacity)}function un(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function sn(t){return t>.008856451679035631?Math.pow(t,1/3):t/on+4/29}function ln(t){return t>rn?t*t*t:on*(t-4/29)}function cn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function hn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fn(t){if(t instanceof dn)return new dn(t.h,t.c,t.l,t.opacity);if(t instanceof un||(t=an(t)),0===t.a&&0===t.b)return new dn(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*nn;return new dn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function dn(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Re(un,(function(t,e,n,r){return 1===arguments.length?an(t):new un(t,e,n,null==r?1:r)}),He(De,{brighter:function(t){return new un(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new un(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Ge(cn(3.1338561*(e=.96422*ln(e))-1.6168667*(t=1*ln(t))-.4906146*(n=.82521*ln(n))),cn(-.9787684*e+1.9161415*t+.033454*n),cn(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Re(dn,(function(t,e,n,r){return 1===arguments.length?fn(t):new dn(t,e,n,null==r?1:r)}),He(De,{brighter:function(t){return new dn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new dn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return an(this).rgb()}}));var mn=-.14861,pn=1.78277,vn=-.29227,gn=-.90649,bn=1.97294,_n=bn*gn,yn=bn*pn,wn=pn*vn-gn*mn;function xn(t){if(t instanceof Cn)return new Cn(t.h,t.s,t.l,t.opacity);t instanceof Ge||(t=Ze(t));var e=t.r/255,n=t.g/255,r=t.b/255,o=(wn*r+_n*e-yn*n)/(wn+_n-yn),a=r-o,i=(bn*(n-o)-vn*a)/gn,u=Math.sqrt(i*i+a*a)/(bn*o*(1-o)),s=u?Math.atan2(i,a)*nn-120:NaN;return new Cn(s<0?s+360:s,u,o,t.opacity)}function Cn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Mn(t){return function(){return t}}function Nn(t){return 1==(t=+t)?kn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Mn(isNaN(e)?n:e)}}function kn(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Mn(isNaN(t)?e:t)}Re(Cn,(function(t,e,n,r){return 1===arguments.length?xn(t):new Cn(t,e,n,null==r?1:r)}),He(De,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Cn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Cn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*en,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),o=Math.sin(t);return new Ge(255*(e+n*(mn*r+pn*o)),255*(e+n*(vn*r+gn*o)),255*(e+n*(bn*r)),this.opacity)}}));var Tn=function t(e){var n=Nn(e);function r(t,e){var r=n((t=Je(t)).r,(e=Je(e)).r),o=n(t.g,e.g),a=n(t.b,e.b),i=kn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=a(e),t.opacity=i(e),t+""}}return r.gamma=t,r}(1);function Sn(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,a=new Array(o),i=new Array(r);for(n=0;n<o;++n)a[n]=An(t[n],e[n]);for(;n<r;++n)i[n]=e[n];return function(t){for(n=0;n<o;++n)i[n]=a[n](t);return i}}function Fn(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}function Rn(t,e){return e-=t=+t,function(n){return t+e*n}}function Hn(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=An(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}var Dn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ln=new RegExp(Dn.source,"g");function In(t,e){var n,r,o,a=Dn.lastIndex=Ln.lastIndex=0,i=-1,u=[],s=[];for(t+="",e+="";(n=Dn.exec(t))&&(r=Ln.exec(e));)(o=r.index)>a&&(o=e.slice(a,o),u[i]?u[i]+=o:u[++i]=o),(n=n[0])===(r=r[0])?u[i]?u[i]+=r:u[++i]=r:(u[++i]=null,s.push({i:i,x:Rn(n,r)})),a=Ln.lastIndex;return a<e.length&&(o=e.slice(a),u[i]?u[i]+=o:u[++i]=o),u.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}function An(t,e){var n,r=typeof e;return null==e||"boolean"===r?Mn(e):("number"===r?Rn:"string"===r?(n=qe(e))?(e=n,Tn):In:e instanceof qe?Tn:e instanceof Date?Fn:Array.isArray(e)?Sn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Hn:Rn)(t,e)}function Un(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}function On(t){return+t}var En,jn=[0,1];function $n(t){return t}function Vn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Bn(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Wn(t,e,n){var r=t[0],o=t[1],a=e[0],i=e[1];return o<r?(r=Vn(o,r),a=n(i,a)):(r=Vn(r,o),a=n(a,i)),function(t){return a(r(t))}}function Yn(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),a=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)o[i]=Vn(t[i],t[i+1]),a[i]=n(e[i],e[i+1]);return function(e){var n=oe(t,e,1,r)-1;return a[n](o[n](e))}}function qn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Pn(t,e){return function(){var t,e,n,r,o,a,i=jn,u=jn,s=An,l=$n;function c(){return r=Math.min(i.length,u.length)>2?Yn:Wn,o=a=null,h}function h(e){return isNaN(e=+e)?n:(o||(o=r(i.map(t),u,s)))(t(l(e)))}return h.invert=function(n){return l(e((a||(a=r(u,i.map(t),Rn)))(n)))},h.domain=function(t){return arguments.length?(i=ke.call(t,On),l===$n||(l=Bn(i)),c()):i.slice()},h.range=function(t){return arguments.length?(u=Te.call(t),c()):u.slice()},h.rangeRound=function(t){return u=Te.call(t),s=Un,c()},h.clamp=function(t){return arguments.length?(l=t?Bn(i):$n,h):l!==$n},h.interpolate=function(t){return arguments.length?(s=t,c()):s},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}()(t,e)}function zn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Zn(t){return(t=zn(Math.abs(t)))?t[1]:NaN}function Jn(t,e){var n=zn(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}var Gn={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,o=1,a=-1;o<r;++o)switch(t[o]){case".":a=n=o;break;case"0":0===a&&(a=o),n=o;break;case"e":break t;default:a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Jn(100*t,e)},r:Jn,s:function(t,e){var n=zn(t,e);if(!n)return t+"";var r=n[0],o=n[1],a=o-(En=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+zn(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Xn=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Qn(t){return new Kn(t)}function Kn(t){if(!(e=Xn.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",o=e[3]||"-",a=e[4]||"",i=!!e[5],u=e[6]&&+e[6],s=!!e[7],l=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(s=!0,c="g"):Gn[c]||(c=""),(i||"0"===n&&"="===r)&&(i=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=o,this.symbol=a,this.zero=i,this.width=u,this.comma=s,this.precision=l,this.type=c}function tr(t){return t}Qn.prototype=Kn.prototype,Kn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var er,nr,rr,or=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function ar(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var o=t.length,a=[],i=0,u=e[0],s=0;o>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(t.substring(o-=u,o+u)),!((s+=u+1)>r));)u=e[i=(i+1)%e.length];return a.reverse().join(n)}):tr,o=t.currency,a=t.decimal,i=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(t.numerals):tr,u=t.percent||"%";function s(t){var e=(t=Qn(t)).fill,n=t.align,s=t.sign,l=t.symbol,c=t.zero,h=t.width,f=t.comma,d=t.precision,m=t.type,p="$"===l?o[0]:"#"===l&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",v="$"===l?o[1]:/[%p]/.test(m)?u:"",g=Gn[m],b=!m||/[defgprs%]/.test(m);function _(t){var o,u,l,_=p,y=v;if("c"===m)y=g(t)+y,t="";else{var w=(t=+t)<0;if(t=g(Math.abs(t),d),w&&0==+t&&(w=!1),_=(w?"("===s?s:"-":"-"===s||"("===s?"":s)+_,y=("s"===m?or[8+En/3]:"")+y+(w&&"("===s?")":""),b)for(o=-1,u=t.length;++o<u;)if(48>(l=t.charCodeAt(o))||l>57){y=(46===l?a+t.slice(o+1):t.slice(o))+y,t=t.slice(0,o);break}}f&&!c&&(t=r(t,1/0));var x=_.length+t.length+y.length,C=x<h?new Array(h-x+1).join(e):"";switch(f&&c&&(t=r(C+t,C.length?h-y.length:1/0),C=""),n){case"<":t=_+t+y+C;break;case"=":t=_+C+t+y;break;case"^":t=C.slice(0,x=C.length>>1)+_+t+y+C.slice(x);break;default:t=C+_+t+y}return i(t)}return d=null==d?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),_.toString=function(){return t+""},_}return{format:s,formatPrefix:function(t,e){var n=s(((t=Qn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Zn(e)/3))),o=Math.pow(10,-r),a=or[8+r/3];return function(t){return n(o*t)+a}}}}function ir(t,e,n,r){var o,a=pe(t,e,n);switch((r=Qn(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zn(e)/3)))-Zn(Math.abs(t)))}(a,i))||(r.precision=o),rr(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Zn(e)-Zn(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(t){return Math.max(0,-Zn(Math.abs(t)))}(a))||(r.precision=o-2*("%"===r.type))}return nr(r)}function ur(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,o,a,i,u=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(i=me(t,e,n))||!isFinite(i))return[];if(i>0)for(t=Math.ceil(t/i),e=Math.floor(e/i),a=new Array(o=Math.ceil(e-t+1));++u<o;)a[u]=(t+u)*i;else for(t=Math.floor(t*i),e=Math.ceil(e*i),a=new Array(o=Math.ceil(t-e+1));++u<o;)a[u]=(t-u)/i;return r&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return ir(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o=e(),a=0,i=o.length-1,u=o[a],s=o[i];return s<u&&(r=u,u=s,s=r,r=a,a=i,i=r),(r=me(u,s,n))>0?r=me(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=me(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),r>0?(o[a]=Math.floor(u/r)*r,o[i]=Math.ceil(s/r)*r,e(o)):r<0&&(o[a]=Math.ceil(u*r)/r,o[i]=Math.floor(s*r)/r,e(o)),t},t}function sr(){var t=Pn($n,$n);return t.copy=function(){return qn(t,sr())},ye.apply(t,arguments),ur(t)}er=ar({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),nr=er.format,rr=er.formatPrefix;var lr=new Date,cr=new Date;function hr(t,e,n,r){function o(e){return t(e=new Date(+e)),e}return o.floor=o,o.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},o.round=function(t){var e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},o.range=function(n,r,a){var i,u=[];if(n=o.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return u;do{u.push(i=new Date(+n)),e(n,a),t(n)}while(i<n&&n<r);return u},o.filter=function(n){return hr((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(o.count=function(e,r){return lr.setTime(+e),cr.setTime(+r),t(lr),t(cr),Math.floor(n(lr,cr))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(r?function(e){return r(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var fr=hr((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));fr.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?hr((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):fr:null};hr((function(t){t.setTime(1e3*Math.floor(t/1e3))}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),hr((function(t){t.setTime(6e4*Math.floor(t/6e4))}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),hr((function(t){var e=6e4*t.getTimezoneOffset()%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}));var dr=hr((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function mr(t){return hr((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var pr=mr(0),vr=mr(1),gr=(mr(2),mr(3),mr(4)),br=(mr(5),mr(6),hr((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),hr((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));br.every=function(t){return isFinite(t=Math.floor(t))&&t>0?hr((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};hr((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),hr((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}));var _r=hr((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}));function yr(t){return hr((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var wr=yr(0),xr=yr(1),Cr=(yr(2),yr(3),yr(4)),Mr=(yr(5),yr(6),hr((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),hr((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function Nr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function kr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Tr(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}Mr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?hr((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Sr,Fr,Rr,Hr={"-":"",_:" ",0:"0"},Dr=/^\s*\d+/,Lr=/^%/,Ir=/[\\^$*+?|[\]().{}]/g;function Ar(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(e)+o:o)}function Ur(t){return t.replace(Ir,"\\$&")}function Or(t){return new RegExp("^(?:"+t.map(Ur).join("|")+")","i")}function Er(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function jr(t,e,n){var r=Dr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $r(t,e,n){var r=Dr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Vr(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Br(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Wr(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Yr(t,e,n){var r=Dr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qr(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Pr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function zr(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Zr(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Jr(t,e,n){var r=Dr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Gr(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Xr(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Qr(t,e,n){var r=Dr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Kr(t,e,n){var r=Dr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function to(t,e,n){var r=Dr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function eo(t,e,n){var r=Lr.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function no(t,e,n){var r=Dr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ro(t,e,n){var r=Dr.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function oo(t,e){return Ar(t.getDate(),e,2)}function ao(t,e){return Ar(t.getHours(),e,2)}function io(t,e){return Ar(t.getHours()%12||12,e,2)}function uo(t,e){return Ar(1+dr.count(br(t),t),e,3)}function so(t,e){return Ar(t.getMilliseconds(),e,3)}function lo(t,e){return so(t,e)+"000"}function co(t,e){return Ar(t.getMonth()+1,e,2)}function ho(t,e){return Ar(t.getMinutes(),e,2)}function fo(t,e){return Ar(t.getSeconds(),e,2)}function mo(t){var e=t.getDay();return 0===e?7:e}function po(t,e){return Ar(pr.count(br(t),t),e,2)}function vo(t,e){var n=t.getDay();return t=n>=4||0===n?gr(t):gr.ceil(t),Ar(gr.count(br(t),t)+(4===br(t).getDay()),e,2)}function go(t){return t.getDay()}function bo(t,e){return Ar(vr.count(br(t),t),e,2)}function _o(t,e){return Ar(t.getFullYear()%100,e,2)}function yo(t,e){return Ar(t.getFullYear()%1e4,e,4)}function wo(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ar(e/60|0,"0",2)+Ar(e%60,"0",2)}function xo(t,e){return Ar(t.getUTCDate(),e,2)}function Co(t,e){return Ar(t.getUTCHours(),e,2)}function Mo(t,e){return Ar(t.getUTCHours()%12||12,e,2)}function No(t,e){return Ar(1+_r.count(Mr(t),t),e,3)}function ko(t,e){return Ar(t.getUTCMilliseconds(),e,3)}function To(t,e){return ko(t,e)+"000"}function So(t,e){return Ar(t.getUTCMonth()+1,e,2)}function Fo(t,e){return Ar(t.getUTCMinutes(),e,2)}function Ro(t,e){return Ar(t.getUTCSeconds(),e,2)}function Ho(t){var e=t.getUTCDay();return 0===e?7:e}function Do(t,e){return Ar(wr.count(Mr(t),t),e,2)}function Lo(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Cr(t):Cr.ceil(t),Ar(Cr.count(Mr(t),t)+(4===Mr(t).getUTCDay()),e,2)}function Io(t){return t.getUTCDay()}function Ao(t,e){return Ar(xr.count(Mr(t),t),e,2)}function Uo(t,e){return Ar(t.getUTCFullYear()%100,e,2)}function Oo(t,e){return Ar(t.getUTCFullYear()%1e4,e,4)}function Eo(){return"+0000"}function jo(){return"%"}function $o(t){return+t}function Vo(t){return Math.floor(+t/1e3)}!function(t){Sr=function(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,a=t.days,i=t.shortDays,u=t.months,s=t.shortMonths,l=Or(o),c=Er(o),h=Or(a),f=Er(a),d=Or(i),m=Er(i),p=Or(u),v=Er(u),g=Or(s),b=Er(s),_={a:function(t){return i[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:oo,e:oo,f:lo,H:ao,I:io,j:uo,L:so,m:co,M:ho,p:function(t){return o[+(t.getHours()>=12)]},Q:$o,s:Vo,S:fo,u:mo,U:po,V:vo,w:go,W:bo,x:null,X:null,y:_o,Y:yo,Z:wo,"%":jo},y={a:function(t){return i[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:xo,e:xo,f:To,H:Co,I:Mo,j:No,L:ko,m:So,M:Fo,p:function(t){return o[+(t.getUTCHours()>=12)]},Q:$o,s:Vo,S:Ro,u:Ho,U:Do,V:Lo,w:Io,W:Ao,x:null,X:null,y:Uo,Y:Oo,Z:Eo,"%":jo},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=m[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=b[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:Zr,e:Zr,f:to,H:Gr,I:Gr,j:Jr,L:Kr,m:zr,M:Xr,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:no,s:ro,S:Qr,u:$r,U:Vr,V:Br,w:jr,W:Wr,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:qr,Y:Yr,Z:Pr,"%":eo};function x(t,e){return function(n){var r,o,a,i=[],u=-1,s=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===t.charCodeAt(u)&&(i.push(t.slice(s,u)),null!=(o=Hr[r=t.charAt(++u)])?r=t.charAt(++u):o="e"===r?" ":"0",(a=e[r])&&(r=a(n,o)),i.push(r),s=u+1);return i.push(t.slice(s,u)),i.join("")}}function C(t,e){return function(n){var r,o,a=Tr(1900);if(M(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(o=(r=kr(Tr(a.y))).getUTCDay(),r=o>4||0===o?xr.ceil(r):xr(r),r=_r.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(o=(r=e(Tr(a.y))).getDay(),r=o>4||0===o?vr.ceil(r):vr(r),r=dr.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),o="Z"in a?kr(Tr(a.y)).getUTCDay():e(Tr(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,kr(a)):e(a)}}function M(t,e,n,r){for(var o,a,i=0,u=e.length,s=n.length;i<u;){if(r>=s)return-1;if(37===(o=e.charCodeAt(i++))){if(o=e.charAt(i++),!(a=w[o in Hr?e.charAt(i++):o])||(r=a(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return _.x=x(n,_),_.X=x(r,_),_.c=x(e,_),y.x=x(n,y),y.X=x(r,y),y.c=x(e,y),{format:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=C(t+="",Nr);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",y);return e.toString=function(){return t},e},utcParse:function(t){var e=C(t,kr);return e.toString=function(){return t},e}}}(t),Sr.format,Sr.parse,Fr=Sr.utcFormat,Rr=Sr.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||Fr("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||Rr("%Y-%m-%dT%H:%M:%S.%LZ");var Bo=sr(),Wo=function t(){var e,n,r=Fe().unknown(void 0),o=r.domain,a=r.range,i=[0,1],u=!1,s=0,l=0,c=.5;function h(){var t=o().length,r=i[1]<i[0],h=i[r-0],f=i[1-r];e=(f-h)/Math.max(1,t-s+2*l),u&&(e=Math.floor(e)),h+=(f-h-e*(t-s))*c,n=e*(1-s),u&&(h=Math.round(h),n=Math.round(n));var d=ce(t).map((function(t){return h+e*t}));return a(r?d.reverse():d)}return delete r.unknown,r.domain=function(t){return arguments.length?(o(t),h()):o()},r.range=function(t){return arguments.length?(i=[+t[0],+t[1]],h()):i.slice()},r.rangeRound=function(t){return i=[+t[0],+t[1]],u=!0,h()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(t){return arguments.length?(u=!!t,h()):u},r.padding=function(t){return arguments.length?(s=Math.min(1,l=+t),h()):s},r.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),h()):s},r.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},r.copy=function(){return t(o(),i).round(u).paddingInner(s).paddingOuter(l).align(c)},ye.apply(h(),arguments)}(),Yo=sr(),qo=function(t){return t?t<.01?"<1%":(100*t).toFixed(0)+"%":"0%"};function Po(t){var e=t.validValues,n=t.format,r=function(t,e){var n,r,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<o;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<o;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r}(e),o=be(e),a=function(t,e){var n,r=t.length,o=r,a=-1,i=0;if(null==e)for(;++a<r;)isNaN(n=ae(t[a]))?--o:i+=n;else for(;++a<r;)isNaN(n=ae(e(t[a],a,t)))?--o:i+=n;if(o)return i/o}(e),i=_e(e);return[{x:r,label:n(r),name:"Min"},{x:o,label:n(o),name:"Max"},{x:a,label:n(a),name:_t("describe / histogram / mean")},{x:i,label:n(i),name:_t("describe / histogram / median")}]}function zo(t){var e=t.niceDomain,n=t.validValues,r=e,o=ge().domain(r).thresholds(ve)(n),a=Kt(o.map((function(t){return t.x1-t.x0})));if(o.length>2&&Z(a).length>1){var i=o[1].x1-o[1].x0,u=r[0]+Math.ceil((r[1]-r[0])/i)*i;return ge().domain([r[0],u]).thresholds(function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),a=0;a<r;a++,t+=n)o[a]=t;return o}(r[0],u+.4*i,i))(n)}return o}function Zo(t,e,n,r){return(0===e?_t("describe / histogram / tooltip / first"):e===n.length-1?_t("describe / histogram / tooltip / last"):_t("describe / histogram / tooltip")).replace("$1",t.length).replace("$2",qo(t.length/r)).replace("$3",te(t.x0)).replace("$4",te(t.x1))}function Jo(){this.resize()}function Go(t,e){var n,r,o,a,i,s=e.tick,f=(e.each_value,e.tick_index,s.label);return{c:function(){n=v("g"),r=v("line"),o=v("text"),a=g(f),this.h()},h:function(){w(r,"y2","3"),w(r,"class","svelte-p5ucpx"),w(o,"y","5"),w(o,"class","svelte-p5ucpx"),w(n,"class","tick svelte-p5ucpx"),w(n,"transform",i="translate("+e.xScale(s.x)+",0)")},m:function(t,e){c(n,t,e),l(r,n),l(o,n),l(a,o)},p:function(t,e){s=e.tick,e.each_value,e.tick_index,t.ticks&&f!==(f=s.label)&&(a.data=f),(t.xScale||t.ticks)&&i!==(i="translate("+e.xScale(s.x)+",0)")&&w(n,"transform",i)},u:function(){h(n)},d:u}}function Xo(t,e){var n,r;return{c:function(){n=v("polygon"),this.h()},h:function(){w(n,"transform",r="translate("+e.xScale(e.highlight.x)+",0)"),w(n,"points","0,0,4,6,-4,6")},m:function(t,e){c(n,t,e)},p:function(t,e){(t.xScale||t.highlight)&&r!==(r="translate("+e.xScale(e.highlight.x)+",0)")&&w(n,"transform",r)},u:function(){h(n)},d:u}}function Qo(t,e){var n,r,o,a,i,s,f,d=e.bin,m=(e.each_value_1,e.i),p=Zo(d,m,e.bins,e.validValues.length);return{c:function(){n=v("g"),r=v("title"),o=g(p),a=v("rect"),this.h()},h:function(){w(a,"width",i=d.x1!=d.x0?e.xScaleBand.bandwidth():20),w(a,"height",s=e.innerHeight-e.yScale(d.length)),w(a,"class","svelte-p5ucpx"),w(n,"class","bar"),w(n,"transform",f="translate("+e.xScaleBand(d.x0)+","+e.yScale(d.length)+")")},m:function(t,e){c(n,t,e),l(r,n),l(o,r),l(a,n)},p:function(t,e){d=e.bin,e.each_value_1,m=e.i,(t.bins||t.validValues)&&p!==(p=Zo(d,m,e.bins,e.validValues.length))&&(o.data=p),(t.bins||t.xScaleBand)&&i!==(i=d.x1!=d.x0?e.xScaleBand.bandwidth():20)&&w(a,"width",i),(t.innerHeight||t.yScale||t.bins)&&s!==(s=e.innerHeight-e.yScale(d.length))&&w(a,"height",s),(t.xScaleBand||t.bins||t.yScale)&&f!==(f="translate("+e.xScaleBand(d.x0)+","+e.yScale(d.length)+")")&&w(n,"transform",f)},u:function(){h(n)},d:u}}function Ko(t,e){var n,r,o,a,i,u=e.s,s=(e.each_value_2,e.s_index,u.name),f=u.label;return{c:function(){n=p("li"),r=g(s),o=g(": "),a=p("tt"),i=g(f),this.h()},h:function(){_(a,"mouseleave",ea),_(a,"mouseenter",na),a.className="svelte-p5ucpx",a._svelte={component:t,each_value_2:e.each_value_2,s_index:e.s_index},n.className="svelte-p5ucpx"},m:function(t,e){c(n,t,e),l(r,n),l(o,n),l(a,n),l(i,a)},p:function(t,e){u=e.s,e.each_value_2,e.s_index,t.stats&&s!==(s=u.name)&&(r.data=s),t.stats&&f!==(f=u.label)&&(i.data=f),a._svelte.each_value_2=e.each_value_2,a._svelte.s_index=e.s_index},u:function(){h(n)},d:function(){y(a,"mouseleave",ea),y(a,"mouseenter",na)}}}function ta(t,e){var n,r,o,a,i,s,f,d,m=_t("describe / histogram / invalid"),v=qo(e.NAs/e.values.length);return{c:function(){n=p("li"),r=g(m),o=g(":\n        "),a=p("tt"),i=g(e.NAs),s=g(" ("),f=g(v),d=g(")"),this.h()},h:function(){x(a,"color","#c71e1d"),a.className="svelte-p5ucpx",n.className="svelte-p5ucpx"},m:function(t,e){c(n,t,e),l(r,n),l(o,n),l(a,n),l(i,a),l(s,n),l(f,n),l(d,n)},p:function(t,e){t.NAs&&(i.data=e.NAs),(t.NAs||t.values)&&v!==(v=qo(e.NAs/e.values.length))&&(f.data=v)},u:function(){h(n)},d:u}}function ea(t){this._svelte.component.show(!1)}function na(t){var e=this._svelte.component,n=this._svelte.each_value_2[this._svelte.s_index];e.show(n)}function ra(t){L(this,t),this.refs={},this._state=s({format:function(t){return t},t:0,padding:{top:10,right:65,bottom:20,left:5},height:200,width:500,values:[],highlight:!1},t.data),this._recompute({values:1,validValues:1,format:1,niceDomain:1,width:1,padding:1,bins:1,innerWidth:1,xScaleBand:1,xScale:1,height:1,innerHeight:1},this._state);var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){for(var n,r,o,a,i,u,f,m,_,y,x,C,M,N,k,T=_t("describe / histogram"),S=_t("describe / histogram / learn-more"),F=e.ticks,R=[],H=0;H<F.length;H+=1)R[H]=Go(t,s(s({},e),{each_value:F,tick:F[H],tick_index:H}));var D=e.highlight&&Xo(t,e),L=e.bins,I=[];for(H=0;H<L.length;H+=1)I[H]=Qo(t,s(s({},e),{each_value_1:L,bin:L[H],i:H}));var A=e.stats,U=[];for(H=0;H<A.length;H+=1)U[H]=Ko(t,s(s({},e),{each_value_2:A,s:A[H],s_index:H}));var O=e.NAs>0&&ta(t,e);return{c:function(){n=p("h3"),r=g(T),o=g("\n"),a=v("svg"),i=v("g"),u=v("g");for(var t=0;t<R.length;t+=1)R[t].c();f=b(),D&&D.c(),_=v("g");for(t=0;t<I.length;t+=1)I[t].c();x=g("\n"),C=p("ul");for(t=0;t<U.length;t+=1)U[t].c();M=b(),O&&O.c(),N=g("\n"),k=p("p"),this.h()},h:function(){n.className="svelte-p5ucpx",w(u,"class","axis x-axis svelte-p5ucpx"),w(u,"transform",m="translate(0, "+e.innerHeight+")"),w(_,"class","bars svelte-p5ucpx"),w(i,"transform",y="translate("+[e.padding.left,e.padding.top]+")"),w(a,"class","svelte-p5ucpx"),C.className="svelte-p5ucpx",k.className="learn-more"},m:function(e,s){c(n,e,s),l(r,n),c(o,e,s),c(a,e,s),l(i,a),l(u,i);for(var h=0;h<R.length;h+=1)R[h].m(u,null);l(f,u),D&&D.m(u,null),l(_,i);for(h=0;h<I.length;h+=1)I[h].m(_,null);t.refs.svg=a,c(x,e,s),c(C,e,s);for(h=0;h<U.length;h+=1)U[h].m(C,null);l(M,C),O&&O.m(C,null),c(N,e,s),c(k,e,s),k.innerHTML=S},p:function(e,n){var r=n.ticks;if(e.xScale||e.ticks){for(var o=0;o<r.length;o+=1){var a=s(s({},n),{each_value:r,tick:r[o],tick_index:o});R[o]?R[o].p(e,a):(R[o]=Go(t,a),R[o].c(),R[o].m(u,f))}for(;o<R.length;o+=1)R[o].u(),R[o].d();R.length=r.length}n.highlight?D?D.p(e,n):((D=Xo(t,n)).c(),D.m(u,null)):D&&(D.u(),D.d(),D=null),e.innerHeight&&m!==(m="translate(0, "+n.innerHeight+")")&&w(u,"transform",m);var l=n.bins;if(e.xScaleBand||e.bins||e.yScale||e.validValues||e.innerHeight){for(o=0;o<l.length;o+=1){var c=s(s({},n),{each_value_1:l,bin:l[o],i:o});I[o]?I[o].p(e,c):(I[o]=Qo(t,c),I[o].c(),I[o].m(_,null))}for(;o<I.length;o+=1)I[o].u(),I[o].d();I.length=l.length}e.padding&&y!==(y="translate("+[n.padding.left,n.padding.top]+")")&&w(i,"transform",y);var h=n.stats;if(e.stats){for(o=0;o<h.length;o+=1){var d=s(s({},n),{each_value_2:h,s:h[o],s_index:o});U[o]?U[o].p(e,d):(U[o]=Ko(t,d),U[o].c(),U[o].m(C,M))}for(;o<U.length;o+=1)U[o].u(),U[o].d();U.length=h.length}n.NAs>0?O?O.p(e,n):((O=ta(t,n)).c(),O.m(C,null)):O&&(O.u(),O.d(),O=null)},u:function(){k.innerHTML="",h(n),h(o),h(a);for(var t=0;t<R.length;t+=1)R[t].u();D&&D.u();for(t=0;t<I.length;t+=1)I[t].u();h(x),h(C);for(t=0;t<U.length;t+=1)U[t].u();O&&O.u(),h(N),h(k)},d:function(){d(R),D&&D.d(),d(I),t.refs.svg===a&&(t.refs.svg=null),d(U),O&&O.d()}}}(this,this._state),this.root._oncreate.push((function(){Jo.call(e),e.fire("update",{changed:{values:1,validValues:1,format:1,xScale:1,niceDomain:1,bins:1,innerWidth:1,xScaleBand:1,innerHeight:1,width:1,padding:1,height:1,ticks:1,highlight:1,yScale:1,stats:1,NAs:1},current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),U(this._oncreate))}s(ra.prototype,E),s(ra.prototype,{show:function(t){this.set({highlight:t})},resize:function(){var t=this.refs.svg.getBoundingClientRect();this.set({width:t.right-t.left,height:t.bottom-t.top})}}),ra.prototype._recompute=function(t,e){t.values&&(this._differs(e.NAs,e.NAs=e.values.filter((function(t){return"string"==typeof t||Number.isNaN(t)})).length)&&(t.NAs=!0),this._differs(e.validValues,e.validValues=function(t){return t.values.filter((function(t){return"number"==typeof t&&!Number.isNaN(t)}))}(e))&&(t.validValues=!0)),(t.validValues||t.format)&&this._differs(e.stats,e.stats=Po(e))&&(t.stats=!0),t.validValues&&this._differs(e.niceDomain,e.niceDomain=function(t){var e=t.validValues;return sr().domain(ie(e)).nice().domain()}(e))&&(t.niceDomain=!0),(t.niceDomain||t.validValues)&&this._differs(e.bins,e.bins=zo(e))&&(t.bins=!0),(t.width||t.padding)&&this._differs(e.innerWidth,e.innerWidth=function(t){var e=t.width,n=t.padding;return e-n.left-n.right}(e))&&(t.innerWidth=!0),(t.bins||t.innerWidth)&&this._differs(e.xScaleBand,e.xScaleBand=function(t){var e=t.bins,n=t.innerWidth;return Wo.domain(e.map((function(t){return t.x0}))).paddingInner(.1).rangeRound([0,n]).align(0)}(e))&&(t.xScaleBand=!0),(t.niceDomain||t.bins||t.xScaleBand)&&this._differs(e.xScale,e.xScale=function(t){var e=t.niceDomain,n=t.bins,r=t.xScaleBand;return Bo.domain(e).rangeRound([0,r.step()*n.length])}(e))&&(t.xScale=!0),(t.xScale||t.format)&&this._differs(e.ticks,e.ticks=function(t){var e=t.xScale,n=t.format;return e.ticks(4).map((function(t){return{x:t,label:n(t)}}))}(e))&&(t.ticks=!0),(t.height||t.padding)&&this._differs(e.innerHeight,e.innerHeight=function(t){var e=t.height,n=t.padding;return e-n.bottom-n.top}(e))&&(t.innerHeight=!0),(t.innerHeight||t.bins)&&this._differs(e.yScale,e.yScale=function(t){var e=t.innerHeight,n=t.bins;return Yo.domain([0,be(n,(function(t){return t.length}))]).range([e,0])}(e))&&(t.yScale=!0),(t.bins||t.xScale)&&this._differs(e.barWidth,e.barWidth=function(t){var e=t.bins,n=t.xScale;return n(e[0].x1)-n(e[0].x0)-1}(e))&&(t.barWidth=!0)};var oa=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,aa=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;function ia(t,e){if(null===t)return null;if(void 0!==t){if((t=String(t)).indexOf("<")<0||t.indexOf(">")<0)return t;if(t=function(t,e){e=(((void 0!==e?e||"":"<a><span><b><br><br/><i><strong><sup><sub><strike><u><em><tt>")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=t,r=t;for(;;)if(r=(n=r).replace(aa,"").replace(oa,(function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""})),n===r)return r}(t,e),"undefined"==typeof document)return t;var n=document.createElement("div");n.innerHTML=t;for(var r=n.querySelectorAll("*"),o=0;o<r.length;o++){"a"===r[o].nodeName.toLowerCase()&&("_self"!==r[o].getAttribute("target")&&r[o].setAttribute("target","_blank"),r[o].setAttribute("rel","nofollow noopener noreferrer"),r[o].getAttribute("href")&&r[o].getAttribute("href").trim().startsWith("javascript:")&&r[o].setAttribute("href",""));for(var a=0;a<r[o].attributes.length;a++){var i=r[o].attributes[a];i.specified&&"on"===i.name.substr(0,2)&&r[o].removeAttribute(i.name)}}return n.innerHTML}}function ua(t,e,n,r){var o={date:"fa fa-clock-o"};return function(a,i,u,s,l,c,h){if(!(n.numColumns()<=s)&&n.hasColumn(s)){var f=n.column(s),d=t.get(),m=d.searchResults,p=d.currentResult,v=d.activeColumn,g=t.getColumnFormat(f.name());if((u=a.toPhysicalRow(u))>0)c=e.columnFormatter(f)(f.val(u-1),!0);parseInt(c)<0&&i.classList.add("negative"),i.classList.add(f.type()+"Type"),i.dataset.column=s,"text"===f.type()&&c&&c.length>70&&(c=c.substr(0,60)+"â€¦"),0===u?(i.classList.add("firstRow"),o[f.type()]&&(c='<i class="'+o[f.type()]+'"></i> '+c)):i.classList.add(u%2?"oddRow":"evenRow"),g.ignore&&i.classList.add("ignored"),v&&v.name()===f.name()&&i.classList.add("active");var b=a.getPlugin("columnSorting").untranslateRow(u);m.forEach((function(t){t.row===b&&t.col===s&&i.classList.add("htSearchResult")})),p&&p.row===b&&p.col===s&&i.classList.add("htCurrentSearchResult"),u>0&&!f.type(!0).isValid(f.val(u-1))&&i.classList.add("parsingError"),h.readOnly&&i.classList.add("readOnly"),e.dataCellChanged(s,u)&&i.classList.add("changed"),function(t,e,n,o,a,i,u){var s=ia(r.helper.stringify(i));e.innerHTML=s}(0,i,0,0,0,c)}}}var sa=null;var la={render:function(){this.get().hot.render()},update:function(){var t=this,e=this.get(),n=e.data,r=e.transpose,o=e.firstRowIsHeader,a=e.skipRows,u=e.hot;if(n){var s=this.store.get("dw_chart"),l=s.dataset(dw.datasource.delimited({csv:n,transpose:r,firstRowIsHeader:o,skipRows:a}).parse()).dataset();this.set({columnOrder:l.columnOrder()});var c=[[]];l.eachColumn((function(t){return c[0].push(t.title())})),l.eachRow((function(t){var e=[];l.eachColumn((function(n){return e.push(n.raw(t))})),c.push(e)})),u.loadData(c);var h=ua(this,s,l,i);u.updateSettings({cells:function(e,n){return{readOnly:t.get().readonly||l.hasColumn(n)&&l.column(n).isComputed&&0===e,renderer:h}},manualColumnMove:[]}),this.set({ds:l}),this.set({has_changes:vt(s.get("metadata.data.changes",[])).length>0}),i.hooks.once("afterRender",(function(){return t.initCustomEvents()})),u.render()}},dataChanged:function(t){var e=this,n=this.get().hot,r=!1;t.forEach((function(t){var o=t[0],a=t[1],i=t[2],u=t[3];if(i!==u){var s=e.store.get("dw_chart"),l=e.get().transpose,c=vt(s.get("metadata.data.changes",[]));if(o=n.toPhysicalRow(o),a=s.dataset().columnOrder()[a],l){var h=o;o=a,a=h}c.push({column:a,row:o,value:u,previous:i,time:(new Date).getTime()}),s.set("metadata.data.changes",c),r=!0}})),r&&setTimeout((function(){e.update(),chart.save()}),100)},columnMoved:function(t,e){var n=this,r=this.get().hot;if(t.length){var o=this.get().columnOrder,a=o.slice(0),u=o[e],s=a.splice(t[0],t.length),l=void 0===u?a.length:u?a.indexOf(u):0;a.splice.apply(a,[l,0].concat(s)),this.store.get("dw_chart").set("metadata.data.column-order",a.slice(0)),this.set({columnOrder:a}),i.hooks.once("afterRender",(function(){setTimeout((function(){n.fire("resetSort"),r.selectCell(0,l,r.countRows()-1,l+s.length-1)}),10)})),this.update()}},updateHeight:function(){var t=document.querySelector(".ht_master.handsontable .wtHolder .wtHider").getBoundingClientRect().height;this.refs.hot.style.height=Math.min(500,t+10)+"px"},checkRange:function(t,e,n,r){var o=this.get().hot,a=this.get().ds;if(e!==r||0!==t||n!==o.countRows()-1)if(e===r||0!==t||n!==o.countRows()-1)this.set({activeColumn:null,multiSelection:!1});else{for(var i=[],u=Math.min(e,r);u<=Math.max(e,r);u++)i.push(+document.querySelector("#data-preview .htCore tbody tr:first-child td:nth-child("+(u+2)+")").dataset.column);this.set({multiSelection:i.map((function(t){return a.column(t)})),activeColumn:null})}},initCustomEvents:function(){var t=this;setTimeout((function(){t.refs.hot.querySelectorAll(".htCore thead th:first-child").forEach((function(t){t.removeEventListener("click",da),t.addEventListener("click",da)})),t.refs.hot.querySelectorAll(".htCore thead th+th").forEach((function(t){t.removeEventListener("click",fa),t.addEventListener("click",fa)}))}),500)},getColumnFormat:function(t){return this.store.get("dw_chart").get("metadata.data.column-format",{})[t]||{type:"auto",ignore:!1}}};function ca(){var t=this;sa=this,i.hooks.once("afterRender",(function(){return t.initCustomEvents()})),window.addEventListener("keyup",(function(e){var n=t.get(),r=n.activeColumn,o=n.ds;if(r&&"input"!==e.target.tagName.toLowerCase()&&"textarea"!==e.target.tagName.toLowerCase()&&("ArrowRight"===e.key||"ArrowLeft"===e.key)){e.preventDefault(),e.stopPropagation();var a=o.indexOf(r.name());"ArrowRight"===e.key?t.set({activeColumn:o.column((a+1)%o.numColumns())}):t.set({activeColumn:o.column((a-1+o.numColumns())%o.numColumns())})}}));var e=this.store.get("dw_chart"),n=new i(this.refs.hot,{data:[],rowHeaders:function(t){return n.getPlugin("ColumnSorting").translateRow(t)+1},colHeaders:!0,fixedRowsTop:1,fixedColumnsLeft:this.get("fixedColumnsLeft"),filters:!0,dropdownMenu:!0,startRows:13,startCols:8,fillHandle:!1,stretchH:"all",height:500,manualColumnMove:!0,selectionMode:"range",autoColumnSize:{useHeaders:!0,syncLimit:5},columnSorting:!0,sortIndicator:!0,sortFunction:function(t,r){if(r.col>-1){var o=e.dataset().column(r.col),a=o.type(),i=n.getPlugin("columnSorting");return function(e,n){var u;if(0===e[0])return-1;switch(e[1]=o.val(e[0]-1),n[1]=o.val(n[0]-1),"number"===a&&(isNaN(e[1])&&(e[1]=t?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY),isNaN(n[1])&&(n[1]=t?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY)),"date"===a&&("string"==typeof e[1]&&(e[1]=new Date(110,0,1)),"string"==typeof n[1]&&(n[1]=new Date(110,0,1))),a){case"date":u=i.dateSort;break;case"number":u=i.numericSort;break;default:u=i.defaultSort}return u(t,r)(e,n)}}return function(t,e){return t[0]-e[0]}},afterGetColHeader:function(e,n){var r=t.get(),o=r.activeColumn,a=r.ds;a&&a.hasColumn(e)&&((0===e||e)&&o&&a.column(e).name()===o.name()&&n.classList.add("selected"),(0===e||e)&&(t.getColumnFormat(a.column(e).name()).ignore?n.classList.add("ignored"):n.classList.remove("ignored")))},search:"search"});window.HT=n,this.set({hot:n}),i.hooks.add("afterSetDataAtCell",(function(e){return t.dataChanged(e)})),i.hooks.add("afterColumnMove",(function(e,n){return t.columnMoved(e,n)})),i.hooks.add("afterRender",(function(){return t.updateHeight()})),i.hooks.add("afterSelection",(function(e,n,r,o){return t.checkRange(e,n,r,o)}))}function ha(t){var e=t.changed,n=t.current,r=t.previous,o=n.hot;if(o){if(e.data&&this.update(),e.firstRowIsHeader&&r&&void 0!==r.firstRowIsHeader&&this.update(),e.hot&&this.update(),e.search&&r&&this.set({searchIndex:0}),e.searchResults&&o.render(),e.currentResult&&n.currentResult){o.render();var a=n.currentResult;o.scrollViewportTo(a.row,a.col),setTimeout((function(){o.scrollViewportTo(a.row,a.col)}),100)}e.activeColumn&&setTimeout((function(){return o.render()}),10),e.fixedColumnsLeft&&o.updateSettings({fixedColumnsLeft:n.fixedColumnsLeft}),e.sorting&&o.sort(chart.dataset().indexOf(n.sorting.sortBy),n.sorting.sortDir)}}function fa(t){for(var e=this.parentNode.children.length,n=-1,r=0;r<e;r++)if(this.parentNode.children.item(r)===this){n=r;break}var o=+sa.refs.hot.querySelector(".htCore tbody tr:first-child td:nth-child("+(n+1)+")").dataset.column,a=sa.store.get("dw_chart"),i=sa.get(),u=i.activeColumn,s=i.hot;if(a.dataset().hasColumn(o)){var l=a.dataset().column(+o);u&&u.name()===l.name()?(t.target.parentNode.classList.remove("selected"),sa.set({activeColumn:!1}),s.deselectCell()):(t.target.parentNode.classList.add("selected"),sa.set({activeColumn:l}))}}function da(t){t.preventDefault();var e=sa.get().transpose;sa.set({transpose:!e}),sa.update()}function ma(t){L(this,t),this.refs={},this._state=s({hot:null,data:"",readonly:!1,skipRows:0,firstRowIsHeader:!0,fixedColumnsLeft:0,searchIndex:0,sortBy:"-",transpose:!1,activeColumn:null,search:"",searchResults:[]},t.data),this._recompute({search:1,hot:1,searchResults:1,searchIndex:1},this._state),this._handlers.state=[ha];var e,n,r=this;t.root||(this._oncreate=[]),this._fragment=(e=this,this._state,{c:function(){n=p("div"),this.h()},h:function(){n.id="data-preview"},m:function(t,r){c(n,t,r),e.refs.hot=n},p:u,u:function(){h(n)},d:function(){e.refs.hot===n&&(e.refs.hot=null)}}),this.root._oncreate.push((function(){var t={searchResults:1,searchIndex:1,search:1,hot:1};ha.call(r,{changed:t,current:r._state}),ca.call(r),r.fire("update",{changed:t,current:r._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),U(this._oncreate))}s(ma.prototype,E),s(ma.prototype,la),ma.prototype._recompute=function(t,e){var n,r,o;(t.search||t.hot)&&this._differs(e.searchResults,e.searchResults=(r=(n=e).search,(o=n.hot)&&r?o.search.query(r):[]))&&(t.searchResults=!0),(t.searchResults||t.searchIndex)&&this._differs(e.currentResult,e.currentResult=function(t){var e=t.searchResults,n=t.searchIndex;if(!e||!e.length)return null;var r=e.length;if(n<0||n>=r){for(;n<0;)n+=r;n>r&&(n%=r)}return e[n]}(e))&&(t.currentResult=!0)};var pa={nextResult:function(t){var e=this.get(),n=e.searchIndex,r=e.searchResults;(n+=t)<0&&(n+=r.length),n%=r.length,this.set({searchIndex:n})},keyPress:function(t){"F3"!==t.key&&"Enter"!==t.key||this.nextResult(t.shiftKey?-1:1)},toggleTranspose:function(){var t=this;this.set({activeColumn:!1}),this.set({transpose:!this.get().transpose}),setTimeout((function(){return t.refs.hot.update()}),500)},revertChanges:function(){var t=this.store.get().dw_chart;t.set("metadata.data.changes",[]),t.saveSoon(),this.refs.hot.update()},cmFocus:function(){var t=this;setTimeout((function(){t.refs.hot.get().hot.render()}),100)},addComputedColumn:function(){for(var t=this.store.get().dw_chart,e=t.dataset(),n=Pt(t.get("metadata.describe.computed-columns",{})),r=1;e.hasColumn("Column "+r);)r++;var o="Column "+r;n[o]="",t.set("metadata.describe.computed-columns",n),t.saveSoon();var a=t.dataset(!0);this.refs.hot.update(),this.set({activeColumn:a.column(o)})},sort:function(t,e,n){t.preventDefault(),t.stopPropagation(),this.set({sortBy:e,sortDir:n}),this.refs.sortDropdownGroup.classList.remove("open")},force:function(t,e){void 0===e&&(e=!0),t.preventDefault(),this.set({forceColumnFormat:e})},hideMultiple:function(t,e){var n=this,r=this.store.get().dw_chart,o=vt(r.get("metadata.data.column-format",{}));t.forEach((function(t){o[t.name()]?o[t.name()].ignore=e:o[t.name()]={type:"auto",ignore:e}})),r.set("metadata.data.column-format",o),r.saveSoon(),setTimeout((function(){n.refs.hot.get().hot.render()}),10),this.set({multiSelection:!1})}};function va(){var t=this;window.addEventListener("keypress",(function(e){e.ctrlKey&&"f"===e.key&&(e.preventDefault(),t.refs.search!==window.document.activeElement?t.refs.search.focus():t.nextResult(1))}))}function ga(t){var e=this,n=t.changed,r=t.current;n.activeColumn&&!r.activeColumn&&this.set({forceColumnFormat:!1});var o={transpose:"metadata.data.transpose",firstRowIsHeader:"metadata.data.horizontal-header",locale:"language"};Object.keys(o).forEach((function(t){if(n[t]){var a=r[t],i=o[t];if(e.store.get().dw_chart.set(""+i,a),"locale"===t){if(!a)return;e.store.get().dw_chart.locale(a,(function(){e.refs.hot.render()}))}}}))}function ba(t,e){var n,r,o,a,i=_t("describe / edit-formula");function u(e){t.force(e,!1)}return{c:function(){n=p("button"),r=p("i"),o=g(" "),a=g(i),this.h()},h:function(){r.className="fa  fa-chevron-left",_(n,"click",u),n.className="btn"},m:function(t,e){c(n,t,e),l(r,n),l(o,n),l(a,n)},u:function(){h(n)},d:function(){y(n,"click",u)}}}function _a(t,e){var n,r,o,a={},i=_t("describe / edit-format"),u={};"customColumn"in e&&(u.column=e.customColumn,a.column=!0),"columns"in e&&(u.columns=e.columns,a.columns=!0);var s=new Mt({root:t.root,data:u,_bind:function(e,n){t.get();var r={};!a.column&&e.column&&(r.customColumn=n.column),!a.columns&&e.columns&&(r.columns=n.columns),t._set(r),a={}}});function f(e){t.force(e,!0)}return t.root._beforecreate.push((function(){s._bind({column:1,columns:1},s.get())})),s.on("updateTable",(function(e){t.refs.hot.update()})),s.on("renderTable",(function(e){t.refs.hot.render()})),s.on("unselect",(function(e){t.set({activeColumn:!1})})),{c:function(){s._fragment.c(),n=g("\n\n                "),r=p("button"),o=g(i),this.h()},h:function(){_(r,"click",f),r.className="btn"},m:function(t,e){s._mount(t,e),c(n,t,e),c(r,t,e),l(o,r)},p:function(t,e){var n={};!a.column&&t.customColumn&&(n.column=e.customColumn,a.column=!0),!a.columns&&t.columns&&(n.columns=e.columns,a.columns=!0),s._set(n),a={}},u:function(){s._unmount(),h(n),h(r)},d:function(){s.destroy(!1),y(r,"click",f)}}}function ya(t,e){var n,r,o={},a={};"columnFormat"in e&&(a.column=e.columnFormat,o.column=!0),"columns"in e&&(a.columns=e.columns,o.columns=!0);var i=new Gt({root:t.root,data:a,_bind:function(e,n){t.get();var r={};!o.column&&e.column&&(r.columnFormat=n.column),!o.columns&&e.columns&&(r.columns=n.columns),t._set(r),o={}}});t.root._beforecreate.push((function(){i._bind({column:1,columns:1},i.get())})),i.on("updateTable",(function(e){t.refs.hot.update()})),i.on("renderTable",(function(e){t.refs.hot.render()}));var u=e.columnFormat.isComputed&&ba(t);return{c:function(){i._fragment.c(),n=g("\n\n                "),u&&u.c(),r=b()},m:function(t,e){i._mount(t,e),c(n,t,e),u&&u.m(t,e),c(r,t,e)},p:function(e,n){var a={};!o.column&&e.columnFormat&&(a.column=n.columnFormat,o.column=!0),!o.columns&&e.columns&&(a.columns=n.columns,o.columns=!0),i._set(a),o={},n.columnFormat.isComputed?u||((u=ba(t)).c(),u.m(r.parentNode,r)):u&&(u.u(),u.d(),u=null)},u:function(){i._unmount(),h(n),u&&u.u(),h(r)},d:function(){i.destroy(!1),u&&u.d()}}}function wa(t,e){var n={},r={};"activeValues"in e&&(r.values=e.activeValues,n.values=!0),"activeFormat"in e&&(r.format=e.activeFormat,n.format=!0);var o=new ra({root:t.root,data:r,_bind:function(e,r){t.get();var o={};!n.values&&e.values&&(o.activeValues=r.values),!n.format&&e.format&&(o.activeFormat=r.format),t._set(o),n={}}});return t.root._beforecreate.push((function(){o._bind({values:1,format:1},o.get())})),{c:function(){o._fragment.c()},m:function(t,e){o._mount(t,e)},p:function(t,e){var r={};!n.values&&t.activeValues&&(r.values=e.activeValues,n.values=!0),!n.format&&t.activeFormat&&(r.format=e.activeFormat,n.format=!0),o._set(r),n={}},u:function(){o._unmount()},d:function(){o.destroy(!1)}}}function xa(t,e){var n,r,o,a,i,s,f=e.locale,d=(e.each_value,e.locale_index,f.label),m=f.value;return{c:function(){n=p("option"),r=g(d),o=g(" ("),a=g(m),i=g(")"),this.h()},h:function(){n.__value=s=f.value,n.value=n.__value},m:function(t,e){c(n,t,e),l(r,n),l(o,n),l(a,n),l(i,n)},p:function(t,e){f=e.locale,e.each_value,e.locale_index,t.locales&&d!==(d=f.label)&&(r.data=d),t.locales&&m!==(m=f.value)&&(a.data=m),t.locales&&s!==(s=f.value)&&(n.__value=s),n.value=n.__value},u:function(){h(n)},d:u}}function Ca(t,e){for(var n,r,o,a,i,u,f=_t("describe / locale-select / hed"),m=_t("describe / locale-select / body"),v=!1,b=e.locales,w=[],x=0;x<b.length;x+=1)w[x]=xa(0,s(s({},e),{each_value:b,locale:b[x],locale_index:x}));function N(){v=!0,t.set({locale:M(u)}),v=!1}return{c:function(){n=p("h4"),r=g(f),o=g("\n\n                "),a=p("p"),i=g("\n\n                "),u=p("select");for(var t=0;t<w.length;t+=1)w[t].c();this.h()},h:function(){_(u,"change",N),"locale"in e||t.root._beforecreate.push(N)},m:function(t,s){c(n,t,s),l(r,n),c(o,t,s),c(a,t,s),a.innerHTML=m,c(i,t,s),c(u,t,s);for(var h=0;h<w.length;h+=1)w[h].m(u,null);C(u,e.locale)},p:function(t,e){var n=e.locales;if(t.locales){for(var r=0;r<n.length;r+=1){var o=s(s({},e),{each_value:n,locale:n[r],locale_index:r});w[r]?w[r].p(t,o):(w[r]=xa(0,o),w[r].c(),w[r].m(u,null))}for(;r<w.length;r+=1)w[r].u(),w[r].d();w.length=n.length}v||C(u,e.locale)},u:function(){a.innerHTML="",h(n),h(o),h(a),h(i),h(u);for(var t=0;t<w.length;t+=1)w[t].u()},d:function(){d(w),y(u,"change",N)}}}function Ma(t,e){var n,r;function o(t){return t.customColumn?_a:t.columnFormat?ya:null}var a=o(e),i=a&&a(t,e),u="number"==e.activeColumn.type()&&wa(t,e);return{c:function(){i&&i.c(),n=g(" "),u&&u.c(),r=b()},m:function(t,e){i&&i.m(t,e),c(n,t,e),u&&u.m(t,e),c(r,t,e)},p:function(e,s){a===(a=o(s))&&i?i.p(e,s):(i&&(i.u(),i.d()),(i=a&&a(t,s))&&i.c(),i&&i.m(n.parentNode,n)),"number"==s.activeColumn.type()?u?u.p(e,s):((u=wa(t,s)).c(),u.m(r.parentNode,r)):u&&(u.u(),u.d(),u=null)},u:function(){i&&i.u(),h(n),u&&u.u(),h(r)},d:function(){i&&i.d(),u&&u.d()}}}function Na(t,e){var n,r,o,a,i,s,f,d,m,v,b,w,C,M,N=_t("describe / show-hide-multi"),k=_t("describe / show-selected"),T=_t("describe / hide-selected");function S(e){var n=t.get();t.hideMultiple(n.multiSelection,!1)}function F(e){var n=t.get();t.hideMultiple(n.multiSelection,!0)}return{c:function(){n=p("h3"),r=g(N),o=g("\n\n                "),a=p("ul"),i=p("li"),s=p("button"),f=p("i"),d=g(" "),m=g(k),v=p("li"),b=p("button"),w=p("i"),C=g(" "),M=g(T),this.h()},h:function(){n.className="first",f.className="fa fa-eye",_(s,"click",S),s.className="btn",x(i,"margin-bottom","5px"),w.className="fa fa-eye-slash",_(b,"click",F),b.className="btn",a.className="unstyled"},m:function(t,e){c(n,t,e),l(r,n),c(o,t,e),c(a,t,e),l(i,a),l(s,i),l(f,s),l(d,s),l(m,s),l(v,a),l(b,v),l(w,b),l(C,b),l(M,b)},p:u,u:function(){h(n),h(o),h(a)},d:function(){y(s,"click",S),y(b,"click",F)}}}function ka(t,e){var n,r,o,a,i,u,s,f=_t("Make sure the data looks right"),d=_t("describe / data-looks-right"),m={},v={label:_t("First row as label")};"firstRowIsHeader"in e&&(v.value=e.firstRowIsHeader,m.value=!0);var _=new Dt({root:t.root,data:v,_bind:function(e,n){t.get();var r={};!m.value&&e.value&&(r.firstRowIsHeader=n.value),t._set(r),m={}}});t.root._beforecreate.push((function(){_._bind({value:1},_.get())}));var y=e.showLocale&&Ca(t,e);return{c:function(){n=p("h3"),r=g(f),o=g("\n\n                "),a=p("p"),i=g("\n\n                "),_._fragment.c(),u=g(" "),y&&y.c(),s=b(),this.h()},h:function(){n.className="first"},m:function(t,e){c(n,t,e),l(r,n),c(o,t,e),c(a,t,e),a.innerHTML=d,c(i,t,e),_._mount(t,e),c(u,t,e),y&&y.m(t,e),c(s,t,e)},p:function(e,n){var r={};r.label=_t("First row as label"),!m.value&&e.firstRowIsHeader&&(r.value=n.firstRowIsHeader,m.value=!0),_._set(r),m={},n.showLocale?y?y.p(e,n):((y=Ca(t,n)).c(),y.m(s.parentNode,s)):y&&(y.u(),y.d(),y=null)},u:function(){a.innerHTML="",h(n),h(o),h(a),h(i),_._unmount(),h(u),y&&y.u(),h(s)},d:function(){_.destroy(!1),y&&y.d()}}}function Ta(t,e){var n,r,o,a,i,u,s,f,d,m,v,b=e.col,w=(e.each_value_1,e.col_index,b.title());return{c:function(){n=p("li"),r=p("a"),o=p("i"),i=g("\n                                    "),u=p("i"),f=g("Â Â Â "),d=g(w),this.h()},h:function(){_(o,"click",Da),o.className=a="fa fa-sort-"+("text"==b.type()?"alpha":"amount")+"-asc fa-fw svelte-1ymbvw3",o._svelte={component:t,each_value_1:e.each_value_1,col_index:e.col_index},_(u,"click",La),u.className=s="fa fa-sort-"+("text"==b.type()?"alpha":"amount")+"-desc fa-fw svelte-1ymbvw3",u._svelte={component:t,each_value_1:e.each_value_1,col_index:e.col_index},_(r,"click",Ia),r.href=m="#/"+b.name(),r.className="svelte-1ymbvw3",r._svelte={component:t,each_value_1:e.each_value_1,col_index:e.col_index},n.className=v=b.name()==e.sortBy?"active":""},m:function(t,e){c(n,t,e),l(r,n),l(o,r),l(i,r),l(u,r),l(f,r),l(d,r)},p:function(t,e){b=e.col,e.each_value_1,e.col_index,t.columns&&a!==(a="fa fa-sort-"+("text"==b.type()?"alpha":"amount")+"-asc fa-fw svelte-1ymbvw3")&&(o.className=a),o._svelte.each_value_1=e.each_value_1,o._svelte.col_index=e.col_index,t.columns&&s!==(s="fa fa-sort-"+("text"==b.type()?"alpha":"amount")+"-desc fa-fw svelte-1ymbvw3")&&(u.className=s),u._svelte.each_value_1=e.each_value_1,u._svelte.col_index=e.col_index,t.columns&&w!==(w=b.title())&&(d.data=w),t.columns&&m!==(m="#/"+b.name())&&(r.href=m),r._svelte.each_value_1=e.each_value_1,r._svelte.col_index=e.col_index,(t.columns||t.sortBy)&&v!==(v=b.name()==e.sortBy?"active":"")&&(n.className=v)},u:function(){h(n)},d:function(){y(o,"click",Da),y(u,"click",La),y(r,"click",Ia)}}}function Sa(t,e){var n,r,o,a;function i(e){t.nextResult(-1)}function u(e){t.nextResult(1)}return{c:function(){n=p("div"),(r=p("button")).innerHTML='<i class="fa fa-chevron-up"></i>',o=g("\n                            "),(a=p("button")).innerHTML='<i class="fa fa-chevron-down"></i>',this.h()},h:function(){_(r,"click",i),r.className="btn svelte-1ymbvw3",_(a,"click",u),a.className="btn svelte-1ymbvw3",n.className="btn-group"},m:function(t,e){c(n,t,e),l(r,n),l(o,n),l(a,n)},u:function(){h(n)},d:function(){y(r,"click",i),y(a,"click",u)}}}function Fa(t,e){var n,r,o,a,i,s,l,f=e.searchIndexSafe+1,d=_t("describe / search / of"),m=e.searchResults.length,p=_t("describe /\n                        search / results");return{c:function(){n=g(f),r=g(" "),o=g(d),a=g(" "),i=g(m),s=g(" "),l=g(p)},m:function(t,e){c(n,t,e),c(r,t,e),c(o,t,e),c(a,t,e),c(i,t,e),c(s,t,e),c(l,t,e)},p:function(t,e){t.searchIndexSafe&&f!==(f=e.searchIndexSafe+1)&&(n.data=f),t.searchResults&&m!==(m=e.searchResults.length)&&(i.data=m)},u:function(){h(n),h(r),h(o),h(a),h(i),h(s),h(l)},d:u}}function Ra(t,e){var n,r=_t("describe / search / no-matches");return{c:function(){n=g(r)},m:function(t,e){c(n,t,e)},p:u,u:function(){h(n)},d:u}}function Ha(t,e){var n;function r(t){return t.searchResults.length>0?Fa:t.search?Ra:null}var o=r(e),a=o&&o(t,e);return{c:function(){n=p("div"),a&&a.c(),this.h()},h:function(){n.className="results svelte-1ymbvw3"},m:function(t,e){c(n,t,e),a&&a.m(n,null)},p:function(e,i){o===(o=r(i))&&a?a.p(e,i):(a&&(a.u(),a.d()),(a=o&&o(t,i))&&a.c(),a&&a.m(n,null))},u:function(){h(n),a&&a.u()},d:function(){a&&a.d()}}}function Da(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];e.sort(t,n.name(),!0)}function La(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];e.sort(t,n.name(),!1)}function Ia(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];e.sort(t,n.name(),!0)}function Aa(t){L(this,t),this.refs={},this._state=s(s(this.store._init(["dw_chart"]),{locale:"en-US",search:"",chartData:"",readonly:!1,transpose:!1,firstRowIsHeader:!0,fixedColumnsLeft:0,searchIndex:0,activeColumn:!1,customColumn:!1,columnFormat:!1,multiSelection:!1,forceColumnFormat:!1,searchResults:[],sortBy:"-",sortDir:!0}),t.data),this.store._add(this,["dw_chart"]),this._recompute({searchIndex:1,searchResults:1,activeColumn:1,forceColumnFormat:1,$dw_chart:1,sortBy:1,sortDir:1},this._state),this._handlers.update=[ga],this._handlers.destroy=[O];var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,r,o,a,i,u,m,v,b,C,M,N,k,T,S,F,R,H,D,L,I,A,U,O,E,j,$,V,B,W,Y,q,P,z,Z,J,G,X,Q,K,tt,et,nt,rt,ot,at,it,ut,st,lt,ct,ht,ft,dt,mt,pt,vt,gt,bt,yt,wt,xt,Ct,Mt,Nt,kt,Tt=_t("Back"),St=_t("Proceed"),Ft=_t("describe / info-table-header"),Rt=_t("describe / sort-by"),Ht=_t("describe / no-sorting"),Dt=!1,Lt={},It=_t("describe / transpose-long"),At=_t("computed columns / add-btn"),Ut=_t("Revert changes");function Ot(t){return t.activeColumn?Ma:t.multiSelection?Na:ka}var Et=Ot(e),jt=Et(t,e);function $t(e){t.sort(e,"-")}for(var Vt=e.columns,Bt=[],Wt=0;Wt<Vt.length;Wt+=1)Bt[Wt]=Ta(t,s(s({},e),{each_value_1:Vt,col:Vt[Wt],col_index:Wt}));function Yt(){Dt=!0,t.set({search:et.value}),Dt=!1}function qt(e){t.keyPress(e)}var Pt=e.searchResults.length>0&&Sa(t),zt=e.search&&Ha(t,e),Zt={};"chartData"in e&&(Zt.data=e.chartData,Lt.data=!0),"transpose"in e&&(Zt.transpose=e.transpose,Lt.transpose=!0),"firstRowIsHeader"in e&&(Zt.firstRowIsHeader=e.firstRowIsHeader,Lt.firstRowIsHeader=!0),"fixedColumnsLeft"in e&&(Zt.fixedColumnsLeft=e.fixedColumnsLeft,Lt.fixedColumnsLeft=!0),"activeColumn"in e&&(Zt.activeColumn=e.activeColumn,Lt.activeColumn=!0),"readonly"in e&&(Zt.readonly=e.readonly,Lt.readonly=!0),"sorting"in e&&(Zt.sorting=e.sorting,Lt.sorting=!0),"search"in e&&(Zt.search=e.search,Lt.search=!0),"searchResults"in e&&(Zt.searchResults=e.searchResults,Lt.searchResults=!0),"searchIndex"in e&&(Zt.searchIndex=e.searchIndex,Lt.searchIndex=!0),"multiSelection"in e&&(Zt.multiSelection=e.multiSelection,Lt.multiSelection=!0);var Jt=new ma({root:t.root,data:Zt,_bind:function(e,n){t.get();var r={};!Lt.data&&e.data&&(r.chartData=n.data),!Lt.transpose&&e.transpose&&(r.transpose=n.transpose),!Lt.firstRowIsHeader&&e.firstRowIsHeader&&(r.firstRowIsHeader=n.firstRowIsHeader),!Lt.fixedColumnsLeft&&e.fixedColumnsLeft&&(r.fixedColumnsLeft=n.fixedColumnsLeft),!Lt.activeColumn&&e.activeColumn&&(r.activeColumn=n.activeColumn),!Lt.readonly&&e.readonly&&(r.readonly=n.readonly),!Lt.sorting&&e.sorting&&(r.sorting=n.sorting),!Lt.search&&e.search&&(r.search=n.search),!Lt.searchResults&&e.searchResults&&(r.searchResults=n.searchResults),!Lt.searchIndex&&e.searchIndex&&(r.searchIndex=n.searchIndex),!Lt.multiSelection&&e.multiSelection&&(r.multiSelection=n.multiSelection),t._set(r),Lt={}}});function Gt(e){t.toggleTranspose()}function Xt(e){t.addComputedColumn()}function Qt(e){t.revertChanges()}return t.root._beforecreate.push((function(){Jt._bind({data:1,transpose:1,firstRowIsHeader:1,fixedColumnsLeft:1,activeColumn:1,readonly:1,sorting:1,search:1,searchResults:1,searchIndex:1,multiSelection:1},Jt.get())})),Jt.on("resetSort",(function(e){t.set({sortBy:"-"})})),t.refs.hot=Jt,{c:function(){n=p("div"),r=p("div"),o=p("div"),a=p("div"),jt.c(),i=g("\n\n                "),u=p("hr"),m=g("\n\n                "),v=p("div"),b=p("a"),C=p("i"),M=g(" "),N=g(Tt),k=g("\n                    "),T=p("a"),S=g(St),F=g(" "),R=p("i"),H=g("\n        "),D=p("div"),L=p("div"),I=p("noscript"),A=g(" "),U=p("img"),O=g("\n            "),E=p("div"),j=p("div"),$=p("div"),V=p("button"),B=p("noscript"),W=g("â€¦ "),Y=p("span"),q=g("\n                        "),P=p("ul"),z=p("li"),Z=p("a");for(var t=0;t<Bt.length;t+=1)Bt[t].c();G=g("\n\n                "),X=p("div"),Q=p("i"),K=g("\n                    "),tt=p("div"),et=p("input"),rt=g("\n                        "),Pt&&Pt.c(),at=g("\n\n                    "),zt&&zt.c(),it=g("\n\n            "),Jt._fragment.c(),ut=g("\n\n            "),st=p("div"),lt=p("button"),ct=p("img"),ht=g(" "),ft=g(It),dt=g("\n\n                "),mt=p("button"),pt=p("i"),vt=g(" "),gt=g(At),bt=g("â€¦"),yt=g("\n\n                "),wt=p("button"),xt=p("i"),Ct=g(" "),Mt=g(Ut),Nt=g("â€¦"),this.h()},h:function(){C.className="icon-chevron-left",b.className="btn submit",b.href="upload",R.className="icon-chevron-right icon-white",T.href="visualize",T.className="submit btn btn-primary",T.id="describe-proceed",v.className="btn-group",a.className="sidebar",o.className="span4",U.src="/static/img/arrow.svg",L.className="help svelte-1ymbvw3",Y.className="caret",V.className="btn dropdown-toggle",V.dataset.toggle="dropdown",_(Z,"click",$t),Z.href="#s",Z.className="svelte-1ymbvw3",z.className=J="-"==e.sortBy?"active":"",P.className="dropdown-menu sort-menu",$.className="btn-group",j.className="sort-box svelte-1ymbvw3",Q.className="im im-magnifier svelte-1ymbvw3",_(et,"input",Yt),_(et,"keypress",qt),et.autocomplete="screw-you-google-chrome",w(et,"type","search"),et.placeholder=_t("Search data table"),et.className=nt=(e.searchResults.length>0?"with-results":"")+" search-query svelte-1ymbvw3",tt.className=ot=e.searchResults.length>0?"input-append":"",X.className="search-box form-search svelte-1ymbvw3",E.className="pull-right",x(E,"margin-bottom","10px"),ct.src="/static/css/chart-editor/transpose.png",ct.className="svelte-1ymbvw3",_(lt,"click",Gt),lt.className="btn transpose svelte-1ymbvw3",pt.className="fa fa-calculator",_(mt,"click",Xt),mt.className="btn computed-columns",xt.className="fa fa-undo",_(wt,"click",Qt),wt.className=kt="btn "+(e.has_changes?"":"disabled")+" svelte-1ymbvw3",wt.id="reset-data-changes",st.className="buttons below-table pull-right svelte-1ymbvw3",D.className="span8 svelte-1ymbvw3",r.className="row",n.className="chart-editor"},m:function(s,h){c(n,s,h),l(r,n),l(o,r),l(a,o),jt.m(a,null),l(i,a),l(u,a),l(m,a),l(v,a),l(b,v),l(C,b),l(M,b),l(N,b),l(k,v),l(T,v),l(S,T),l(F,T),l(R,T),l(H,r),l(D,r),l(L,D),l(I,L),I.insertAdjacentHTML("beforebegin",Ft),l(A,L),l(U,L),l(O,D),l(E,D),l(j,E),l($,j),l(V,$),l(B,V),B.insertAdjacentHTML("beforebegin",Rt),l(W,V),l(Y,V),l(q,$),l(P,$),l(z,P),l(Z,z),Z.innerHTML=Ht;for(var f=0;f<Bt.length;f+=1)Bt[f].m(P,null);t.refs.sortDropdownGroup=$,l(G,E),l(X,E),l(Q,X),l(K,X),l(tt,X),l(et,tt),t.refs.search=et,et.value=e.search,l(rt,tt),Pt&&Pt.m(tt,null),l(at,X),zt&&zt.m(X,null),l(it,D),Jt._mount(D,null),l(ut,D),l(st,D),l(lt,st),l(ct,lt),l(ht,lt),l(ft,lt),l(dt,st),l(mt,st),l(pt,mt),l(vt,mt),l(gt,mt),l(bt,mt),l(yt,st),l(wt,st),l(xt,wt),l(Ct,wt),l(Mt,wt),l(Nt,wt)},p:function(e,n){Et===(Et=Ot(n))&&jt?jt.p(e,n):(jt.u(),jt.d(),(jt=Et(t,n)).c(),jt.m(a,i)),e.sortBy&&J!==(J="-"==n.sortBy?"active":"")&&(z.className=J);var r=n.columns;if(e.columns||e.sortBy){for(var o=0;o<r.length;o+=1){var u=s(s({},n),{each_value_1:r,col:r[o],col_index:o});Bt[o]?Bt[o].p(e,u):(Bt[o]=Ta(t,u),Bt[o].c(),Bt[o].m(P,null))}for(;o<Bt.length;o+=1)Bt[o].u(),Bt[o].d();Bt.length=r.length}Dt||(et.value=n.search),e.searchResults&&nt!==(nt=(n.searchResults.length>0?"with-results":"")+" search-query svelte-1ymbvw3")&&(et.className=nt),n.searchResults.length>0?Pt||((Pt=Sa(t)).c(),Pt.m(tt,null)):Pt&&(Pt.u(),Pt.d(),Pt=null),e.searchResults&&ot!==(ot=n.searchResults.length>0?"input-append":"")&&(tt.className=ot),n.search?zt?zt.p(e,n):((zt=Ha(t,n)).c(),zt.m(X,null)):zt&&(zt.u(),zt.d(),zt=null);var l={};!Lt.data&&e.chartData&&(l.data=n.chartData,Lt.data=!0),!Lt.transpose&&e.transpose&&(l.transpose=n.transpose,Lt.transpose=!0),!Lt.firstRowIsHeader&&e.firstRowIsHeader&&(l.firstRowIsHeader=n.firstRowIsHeader,Lt.firstRowIsHeader=!0),!Lt.fixedColumnsLeft&&e.fixedColumnsLeft&&(l.fixedColumnsLeft=n.fixedColumnsLeft,Lt.fixedColumnsLeft=!0),!Lt.activeColumn&&e.activeColumn&&(l.activeColumn=n.activeColumn,Lt.activeColumn=!0),!Lt.readonly&&e.readonly&&(l.readonly=n.readonly,Lt.readonly=!0),!Lt.sorting&&e.sorting&&(l.sorting=n.sorting,Lt.sorting=!0),!Lt.search&&e.search&&(l.search=n.search,Lt.search=!0),!Lt.searchResults&&e.searchResults&&(l.searchResults=n.searchResults,Lt.searchResults=!0),!Lt.searchIndex&&e.searchIndex&&(l.searchIndex=n.searchIndex,Lt.searchIndex=!0),!Lt.multiSelection&&e.multiSelection&&(l.multiSelection=n.multiSelection,Lt.multiSelection=!0),Jt._set(l),Lt={},e.has_changes&&kt!==(kt="btn "+(n.has_changes?"":"disabled")+" svelte-1ymbvw3")&&(wt.className=kt)},u:function(){f(I),f(B),Z.innerHTML="",h(n),jt.u();for(var t=0;t<Bt.length;t+=1)Bt[t].u();Pt&&Pt.u(),zt&&zt.u()},d:function(){jt.d(),y(Z,"click",$t),d(Bt),t.refs.sortDropdownGroup===$&&(t.refs.sortDropdownGroup=null),y(et,"input",Yt),y(et,"keypress",qt),t.refs.search===et&&(t.refs.search=null),Pt&&Pt.d(),zt&&zt.d(),Jt.destroy(!1),t.refs.hot===Jt&&(t.refs.hot=null),y(lt,"click",Gt),y(mt,"click",Xt),y(wt,"click",Qt)}}}(this,this._state),this.root._oncreate.push((function(){va.call(e),e.fire("update",{changed:{searchIndex:1,searchResults:1,activeColumn:1,forceColumnFormat:1,$dw_chart:1,sortBy:1,sortDir:1,customColumn:1,columns:1,columnFormat:1,activeValues:1,activeFormat:1,multiSelection:1,firstRowIsHeader:1,showLocale:1,locale:1,locales:1,search:1,searchIndexSafe:1,chartData:1,transpose:1,fixedColumnsLeft:1,readonly:1,sorting:1,has_changes:1},current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,U(this._beforecreate),U(this._oncreate),U(this._aftercreate),this._lock=!1)}function Ua(t,e){this._observers={pre:T(),post:T()},this._handlers={},this._dependents=[],this._computed=T(),this._sortedComputedProperties=[],this._state=s({},t),this._differs=e&&e.immutable?R:F}s(Aa.prototype,E),s(Aa.prototype,pa),Aa.prototype._recompute=function(t,e){var n,r,o;(t.searchIndex||t.searchResults)&&this._differs(e.searchIndexSafe,e.searchIndexSafe=function(t){var e=t.searchIndex,n=t.searchResults;return e<0&&(e+=n.length),e%=n.length}(e))&&(t.searchIndexSafe=!0),(t.activeColumn||t.forceColumnFormat)&&(this._differs(e.customColumn,e.customColumn=(r=(n=e).activeColumn,o=n.forceColumnFormat,!(!r||o||!r.isComputed)&&r))&&(t.customColumn=!0),this._differs(e.columnFormat,e.columnFormat=function(t){var e=t.activeColumn,n=t.forceColumnFormat;return!(!e||e.isComputed&&!n)&&e}(e))&&(t.columnFormat=!0)),t.activeColumn&&this._differs(e.activeValues,e.activeValues=function(t){var e=t.activeColumn;return e?e.values():[]}(e))&&(t.activeValues=!0),(t.activeColumn||t.$dw_chart)&&this._differs(e.activeFormat,e.activeFormat=function(t){var e=t.activeColumn,n=t.$dw_chart;return e?n.columnFormatter(e):function(t){return t}}(e))&&(t.activeFormat=!0),t.activeColumn&&this._differs(e.columns,e.columns=function(t){var e=t.activeColumn,n=chart.dataset();if(!e)return n?n.columns():[];try{return n.columns().filter((function(t){return!t.isComputed}))}catch(t){return[]}}(e))&&(t.columns=!0),(t.sortBy||t.sortDir)&&this._differs(e.sorting,e.sorting=function(t){return{sortBy:t.sortBy,sortDir:t.sortDir}}(e))&&(t.sorting=!0)},s(Ua.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n];e["$"+r]=this._state[r]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],r=T();function o(a){if(t[a])throw new Error("Cyclical dependency detected");if(!r[a]){r[a]=!0;var i=e[a];i&&(t[a]=!0,i.deps.forEach(o),n.push(i))}}for(var a in this._computed)t=T(),o(a)},compute:function(t,e,n){var r,o=this,a={deps:e,update:function(a,i,u){var s=e.map((function(t){return t in i&&(u=!0),a[t]}));if(u){var l=n.apply(null,s);o._differs(l,r)&&(r=l,i[t]=!0,a[t]=r)}}};a.update(this._state,{},!0),this._computed[t]=a,this._sortComputedProperties()},fire:H,get:D,observe:I,on:A,onchange:function(t){return console.warn("store.onchange is deprecated in favour of store.on('state', event => {...})"),this.on("state",(function(e){t(e.current,e.changed)}))},set:function(t){var e=this._state,n=this._changed={},r=!1;for(var o in t){if(this._computed[o])throw new Error("'"+o+"' is a read-only property");this._differs(t[o],e[o])&&(n[o]=r=!0)}if(r){this._state=s(s({},e),t);for(var a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,n);this.fire("state",{changed:n,current:this._state,previous:e});var i=this._dependents.slice();for(a=0;a<i.length;a+=1){var u=i[a],l={};r=!1;for(var c=0;c<u.props.length;c+=1){var h=u.props[c];h in n&&(l["$"+h]=this._state[h],r=!0)}r&&u.component.set(l)}this.fire("update",{changed:n,current:this._state,previous:e})}}});return{App:Aa,data:{chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0},store:new Ua({})}}));
