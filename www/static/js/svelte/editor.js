!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("svelte/editor",t):(e=e||self).editor=t()}(this,(function(){"use strict";function noop(){}function assign(e,t){for(var r in t)e[r]=t[r];return e}function insertNode(e,t,r){t.insertBefore(e,r)}function detachNode(e){e.parentNode.removeChild(e)}function createElement(e){return document.createElement(e)}function createText(e){return document.createTextNode(e)}function blankObject(){return Object.create(null)}function destroy(e){this.destroy=noop,this.fire("destroy"),this.set=this.get=noop,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function _differs(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function fire(e,t){var r=e in this._handlers&&this._handlers[e].slice();if(r)for(var n=0;n<r.length;n+=1){var a=r[n];a.__calling||(a.__calling=!0,a.call(this,t),a.__calling=!1)}}function get(e){return e?this._state[e]:this._state}function init(e,t){e._handlers=blankObject(),e._bind=t._bind,e.options=t,e.root=t.root||e,e.store=e.root.store||t.store}function observe(e,t,r){var n=t.bind(this);return r&&!1===r.init||n(this.get()[e],void 0),this.on(r&&r.defer?"update":"state",(function(t){t.changed[e]&&n(t.current[e],t.previous&&t.previous[e])}))}function on(e,t){if("teardown"===e)return this.on("destroy",t);var r=this._handlers[e]||(this._handlers[e]=[]);return r.push(t),{cancel:function(){var e=r.indexOf(t);~e&&r.splice(e,1)}}}function set(e){this._set(assign({},e)),this.root._lock||(this.root._lock=!0,callAll(this.root._beforecreate),callAll(this.root._oncreate),callAll(this.root._aftercreate),this.root._lock=!1)}function _set(e){var t=this._state,r={},n=!1;for(var a in e)this._differs(e[a],t[a])&&(r[a]=n=!0);n&&(this._state=assign(assign({},t),e),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(this.fire("state",{changed:r,current:this._state,previous:t}),this._fragment.p(r,this._state),this.fire("update",{changed:r,current:this._state,previous:t})))}function callAll(e){for(;e&&e.length;)e.shift()()}function _mount(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)}function _unmount(){this._fragment&&this._fragment.u()}function removeFromStore(){this.store._remove(this)}var proto={destroy:destroy,get:get,fire:fire,observe:observe,on:on,set:set,teardown:destroy,_recompute:noop,_set:_set,_mount:_mount,_unmount:_unmount,_differs:_differs},__messages={};function initMessages(e){void 0===e&&(e="core"),"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(__messages[e]=window.__dw.vis.meta.locale||{}):__messages[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function __(e,t){var r=arguments;if(void 0===t&&(t="core"),e=e.trim(),__messages[t]||initMessages(t),!__messages[t][e])return"MISSING:"+e;var n=__messages[t][e];return"string"==typeof n&&arguments.length>2&&(n=n.replace(/\$(\d)/g,(function(e,t){return t=2+Number(t),void 0===r[t]?e:r[t]}))),n}var EditorNav="./EditorNav.html",PublishSidebar="../publish/PublishSidebar.html";function data(){return{datasets:[],steps:[{id:"upload",title:__("Upload Data")},{id:"describe",title:__("Check & Describe")},{id:"visualize",title:__("Visualize")},{id:"publish",title:__("Publish & Embed")}]}}function oncreate(){}function create_main_fragment(e,t){var r,n,a={},i={};"step"in t&&(i.active=t.step,a.active=!0),"maxStep"in t&&(i.maxStep=t.maxStep,a.maxStep=!0),"steps"in t&&(i.steps=t.steps,a.steps=!0),"$chart"in t&&(i.chart=t.$chart,a.chart=!0);var o=new EditorNav({root:e.root,data:i,_bind:function(t,r){e.get();var n={},i={};!a.active&&t.active&&(n.step=r.active),!a.maxStep&&t.maxStep&&(n.maxStep=r.maxStep),!a.steps&&t.steps&&(n.steps=r.steps),!a.chart&&t.chart&&(i.chart=r.chart),e.store.set(i),e._set(n),a={}}});function s(e){return"upload"==e.step?create_if_block:"describe"==e.step?create_if_block_1:"visualize"==e.step?create_if_block_2:"publish"==e.step?create_if_block_3:create_if_block_4}e.root._beforecreate.push((function(){o._bind({active:1,maxStep:1,steps:1,chart:1},o.get())}));var u=s(t),c=u(e,t);return{c:function(){o._fragment.c(),r=createText("\n\n"),n=createElement("div"),c.c()},m:function(e,t){o._mount(e,t),insertNode(r,e,t),insertNode(n,e,t),c.m(n,null)},p:function(t,r){var i={};!a.active&&t.step&&(i.active=r.step,a.active=!0),!a.maxStep&&t.maxStep&&(i.maxStep=r.maxStep,a.maxStep=!0),!a.steps&&t.steps&&(i.steps=r.steps,a.steps=!0),!a.chart&&t.$chart&&(i.chart=r.$chart,a.chart=!0),o._set(i),a={},u!==(u=s(r))&&(c.u(),c.d(),(c=u(e,r)).c(),c.m(n,null))},u:function(){o._unmount(),detachNode(r),detachNode(n),c.u()},d:function(){o.destroy(!1),c.d()}}}function create_if_block(e,t){var r;return{c:function(){r=createText("UPLOAD")},m:function(e,t){insertNode(r,e,t)},u:function(){detachNode(r)},d:noop}}function create_if_block_1(e,t){var r;return{c:function(){r=createText("DESCRIBE")},m:function(e,t){insertNode(r,e,t)},u:function(){detachNode(r)},d:noop}}function create_if_block_2(e,t){var r;return{c:function(){r=createText("VISUALIZE")},m:function(e,t){insertNode(r,e,t)},u:function(){detachNode(r)},d:noop}}function create_if_block_3(e,t){var r=new PublishSidebar({root:e.root});return{c:function(){r._fragment.c()},m:function(e,t){r._mount(e,t)},u:function(){r._unmount()},d:function(){r.destroy(!1)}}}function create_if_block_4(e,t){var r;return{c:function(){r=createText(":(")},m:function(e,t){insertNode(r,e,t)},u:function(){detachNode(r)},d:noop}}function ChartEditor(e){init(this,e),this._state=assign(assign(this.store._init(["chart"]),data()),e.data),this.store._add(this,["chart"]),this._handlers.destroy=[removeFromStore];var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push((function(){oncreate.call(t),t.fire("update",{changed:{step:1,maxStep:1,steps:1,$chart:1},current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function assign$1(e,t){for(var r in t)e[r]=t[r];return e}function blankObject$1(){return Object.create(null)}function _differs$1(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function _differsImmutable(e,t){return e!=e?t==t:e!==t}function fire$1(e,t){var r=e in this._handlers&&this._handlers[e].slice();if(r)for(var n=0;n<r.length;n+=1){var a=r[n];if(!a.__calling)try{a.__calling=!0,a.call(this,t)}finally{a.__calling=!1}}}function get$1(){return this._state}function on$1(e,t){var r=this._handlers[e]||(this._handlers[e]=[]);return r.push(t),{cancel:function(){var e=r.indexOf(t);~e&&r.splice(e,1)}}}function Store(e,t){this._handlers={},this._dependents=[],this._computed=blankObject$1(),this._sortedComputedProperties=[],this._state=assign$1({},e),this._differs=t&&t.immutable?_differsImmutable:_differs$1}function getNestedValue(e,t){for(var r=0;r<t.length;r+=1){if(!e)return;e=e[t[r]]}return e}function observeDeep(e,t,r){var n=e.replace(/\[(\d+)\]/g,".$1").split("."),a=n[0],i=t.bind(this),o=getNestedValue(this.get(),n);return r&&!1===r.init||i(o),this.on(r&&r.defer?"update":"state",(function(e){var t=e.changed,r=e.current;e.previous;if(t[a]){var s=getNestedValue(r,n);s===o&&"object"!=typeof s&&"function"!=typeof s||(i(s,o),o=s)}}))}assign(ChartEditor.prototype,proto),assign$1(Store.prototype,{_add:function(e,t){this._dependents.push({component:e,props:t})},_init:function(e){for(var t={},r=0;r<e.length;r+=1){var n=e[r];t["$"+n]=this._state[n]}return t},_remove:function(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set:function(e,t){var r=this,n=this._state;this._state=assign$1(assign$1({},n),e);for(var a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,t);this.fire("state",{changed:t,previous:n,current:this._state}),this._dependents.filter((function(e){for(var n={},a=!1,i=0;i<e.props.length;i+=1){var o=e.props[i];o in t&&(n["$"+o]=r._state[o],a=!0)}if(a)return e.component._stage(n),!0})).forEach((function(e){e.component.set({})})),this.fire("update",{changed:t,previous:n,current:this._state})},_sortComputedProperties:function(){var e,t=this._computed,r=this._sortedComputedProperties=[],n=blankObject$1();function a(i){var o=t[i];o&&(o.deps.forEach((function(t){if(t===e)throw new Error("Cyclical dependency detected between "+t+" <-> "+i);a(t)})),n[i]||(n[i]=!0,r.push(o)))}for(var i in this._computed)a(e=i)},compute:function(e,t,r){var n,a=this,i={deps:t,update:function(i,o,s){var u=t.map((function(e){return e in o&&(s=!0),i[e]}));if(s){var c=r.apply(null,u);a._differs(c,n)&&(n=c,o[e]=!0,i[e]=n)}}};this._computed[e]=i,this._sortComputedProperties();var o=assign$1({},this._state),s={};i.update(o,s,!0),this._set(o,s)},fire:fire$1,get:get$1,on:on$1,set:function(e){var t=this._state,r=this._changed={},n=!1;for(var a in e){if(this._computed[a])throw new Error("'"+a+"' is a read-only computed property");this._differs(e[a],t[a])&&(r[a]=n=!0)}n&&this._set(e,r)}});var root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,SymbolProto="undefined"!=typeof Symbol?Symbol.prototype:null,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,_isNaN=root.isNaN,_isFinite=root.isFinite,Ctor=function(){};function _(e){return e instanceof _?e:this instanceof _?void(this._wrapped=e):new _(e)}var VERSION=_.VERSION="1.10.2";function optimizeCb(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,a){return e.call(t,r,n,a)};case 4:return function(r,n,a,i){return e.call(t,r,n,a,i)}}return function(){return e.apply(t,arguments)}}function baseIteratee(e,t,r){return null==e?identity:isFunction(e)?optimizeCb(e,t,r):isObject(e)&&!isArray(e)?matcher(e):property(e)}function iteratee(e,t){return baseIteratee(e,t,1/0)}function cb(e,t,r){return _.iteratee!==iteratee?_.iteratee(e,t):baseIteratee(e,t,r)}function restArguments(e,t){return t=null==t?e.length-1:+t,function(){for(var r=arguments,n=Math.max(arguments.length-t,0),a=Array(n),i=0;i<n;i++)a[i]=r[i+t];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,arguments[0],a);case 2:return e.call(this,arguments[0],arguments[1],a)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=r[i];return o[t]=a,e.apply(this,o)}}function baseCreate(e){if(!isObject(e))return{};if(nativeCreate)return nativeCreate(e);Ctor.prototype=e;var t=new Ctor;return Ctor.prototype=null,t}function shallowProperty(e){return function(t){return null==t?void 0:t[e]}}function _has(e,t){return null!=e&&hasOwnProperty.call(e,t)}function deepGet(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}_.iteratee=iteratee;var MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=shallowProperty("length");function isArrayLike(e){var t=getLength(e);return"number"==typeof t&&t>=0&&t<=MAX_ARRAY_INDEX}function each(e,t,r){var n,a;if(t=optimizeCb(t,r),isArrayLike(e))for(n=0,a=e.length;n<a;n++)t(e[n],n,e);else{var i=keys(e);for(n=0,a=i.length;n<a;n++)t(e[i[n]],i[n],e)}return e}function map(e,t,r){t=cb(t,r);for(var n=!isArrayLike(e)&&keys(e),a=(n||e).length,i=Array(a),o=0;o<a;o++){var s=n?n[o]:o;i[o]=t(e[s],s,e)}return i}function createReduce(e){var t=function(t,r,n,a){var i=!isArrayLike(t)&&keys(t),o=(i||t).length,s=e>0?0:o-1;for(a||(n=t[i?i[s]:s],s+=e);s>=0&&s<o;s+=e){var u=i?i[s]:s;n=r(n,t[u],u,t)}return n};return function(e,r,n,a){var i=arguments.length>=3;return t(e,optimizeCb(r,a,4),n,i)}}var reduce=createReduce(1),reduceRight=createReduce(-1);function find(e,t,r){var n=(isArrayLike(e)?findIndex:findKey)(e,t,r);if(void 0!==n&&-1!==n)return e[n]}function filter(e,t,r){var n=[];return t=cb(t,r),each(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function reject(e,t,r){return filter(e,negate(cb(t)),r)}function every(e,t,r){t=cb(t,r);for(var n=!isArrayLike(e)&&keys(e),a=(n||e).length,i=0;i<a;i++){var o=n?n[i]:i;if(!t(e[o],o,e))return!1}return!0}function some(e,t,r){t=cb(t,r);for(var n=!isArrayLike(e)&&keys(e),a=(n||e).length,i=0;i<a;i++){var o=n?n[i]:i;if(t(e[o],o,e))return!0}return!1}function contains(e,t,r,n){return isArrayLike(e)||(e=values(e)),("number"!=typeof r||n)&&(r=0),indexOf(e,t,r)>=0}var invoke=restArguments((function(e,t,r){var n,a;return isFunction(t)?a=t:isArray(t)&&(n=t.slice(0,-1),t=t[t.length-1]),map(e,(function(e){var i=a;if(!i){if(n&&n.length&&(e=deepGet(e,n)),null==e)return;i=e[t]}return null==i?i:i.apply(e,r)}))}));function pluck(e,t){return map(e,property(t))}function where(e,t){return filter(e,matcher(t))}function findWhere(e,t){return find(e,matcher(t))}function max(e,t,r){var n,a,i=-1/0,o=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,u=(e=isArrayLike(e)?e:values(e)).length;s<u;s++)null!=(n=e[s])&&n>i&&(i=n);else t=cb(t,r),each(e,(function(e,r,n){((a=t(e,r,n))>o||a===-1/0&&i===-1/0)&&(i=e,o=a)}));return i}function min(e,t,r){var n,a,i=1/0,o=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,u=(e=isArrayLike(e)?e:values(e)).length;s<u;s++)null!=(n=e[s])&&n<i&&(i=n);else t=cb(t,r),each(e,(function(e,r,n){((a=t(e,r,n))<o||a===1/0&&i===1/0)&&(i=e,o=a)}));return i}function shuffle(e){return sample(e,1/0)}function sample(e,t,r){if(null==t||r)return isArrayLike(e)||(e=values(e)),e[random(e.length-1)];var n=isArrayLike(e)?clone(e):values(e),a=getLength(n);t=Math.max(Math.min(t,a),0);for(var i=a-1,o=0;o<t;o++){var s=random(o,i),u=n[o];n[o]=n[s],n[s]=u}return n.slice(0,t)}function sortBy(e,t,r){var n=0;return t=cb(t,r),pluck(map(e,(function(e,r,a){return{value:e,index:n++,criteria:t(e,r,a)}})).sort((function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index})),"value")}function group(e,t){return function(r,n,a){var i=t?[[],[]]:{};return n=cb(n,a),each(r,(function(t,a){var o=n(t,a,r);e(i,t,o)})),i}}var groupBy=group((function(e,t,r){_has(e,r)?e[r].push(t):e[r]=[t]})),indexBy=group((function(e,t,r){e[r]=t})),countBy=group((function(e,t,r){_has(e,r)?e[r]++:e[r]=1})),reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function toArray(e){return e?isArray(e)?slice.call(e):isString(e)?e.match(reStrSymbol):isArrayLike(e)?map(e,identity):values(e):[]}function size(e){return null==e?0:isArrayLike(e)?e.length:keys(e).length}var partition=group((function(e,t,r){e[r?0:1].push(t)}),!0);function first(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[0]:initial(e,e.length-t)}function initial(e,t,r){return slice.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function last(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[e.length-1]:rest(e,Math.max(0,e.length-t))}function rest(e,t,r){return slice.call(e,null==t||r?1:t)}function compact(e){return filter(e,Boolean)}function _flatten(e,t,r,n){for(var a=(n=n||[]).length,i=0,o=getLength(e);i<o;i++){var s=e[i];if(isArrayLike(s)&&(isArray(s)||isArguments(s)))if(t)for(var u=0,c=s.length;u<c;)n[a++]=s[u++];else _flatten(s,t,r,n),a=n.length;else r||(n[a++]=s)}return n}function flatten(e,t){return _flatten(e,t,!1)}var without=restArguments((function(e,t){return difference(e,t)}));function uniq(e,t,r,n){isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=cb(r,n));for(var a=[],i=[],o=0,s=getLength(e);o<s;o++){var u=e[o],c=r?r(u,o,e):u;t&&!r?(o&&i===c||a.push(u),i=c):r?contains(i,c)||(i.push(c),a.push(u)):contains(a,u)||a.push(u)}return a}var union=restArguments((function(e){return uniq(_flatten(e,!0,!0))}));function intersection(e){for(var t=arguments,r=[],n=arguments.length,a=0,i=getLength(e);a<i;a++){var o=e[a];if(!contains(r,o)){var s;for(s=1;s<n&&contains(t[s],o);s++);s===n&&r.push(o)}}return r}var difference=restArguments((function(e,t){return t=_flatten(t,!0,!0),filter(e,(function(e){return!contains(t,e)}))}));function unzip(e){for(var t=e&&max(e,getLength).length||0,r=Array(t),n=0;n<t;n++)r[n]=pluck(e,n);return r}var zip=restArguments(unzip);function object(e,t){for(var r={},n=0,a=getLength(e);n<a;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function createPredicateIndexFinder(e){return function(t,r,n){r=cb(r,n);for(var a=getLength(t),i=e>0?0:a-1;i>=0&&i<a;i+=e)if(r(t[i],i,t))return i;return-1}}var findIndex=createPredicateIndexFinder(1),findLastIndex=createPredicateIndexFinder(-1);function sortedIndex(e,t,r,n){for(var a=(r=cb(r,n,1))(t),i=0,o=getLength(e);i<o;){var s=Math.floor((i+o)/2);r(e[s])<a?i=s+1:o=s}return i}function createIndexFinder(e,t,r){return function(n,a,i){var o=0,s=getLength(n);if("number"==typeof i)e>0?o=i>=0?i:Math.max(i+s,o):s=i>=0?Math.min(i+1,s):i+s+1;else if(r&&i&&s)return n[i=r(n,a)]===a?i:-1;if(a!=a)return(i=t(slice.call(n,o,s),isNaN$1))>=0?i+o:-1;for(i=e>0?o:s-1;i>=0&&i<s;i+=e)if(n[i]===a)return i;return-1}}var indexOf=createIndexFinder(1,findIndex,sortedIndex),lastIndexOf=createIndexFinder(-1,findLastIndex);function range(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),a=Array(n),i=0;i<n;i++,e+=r)a[i]=e;return a}function chunk(e,t){if(null==t||t<1)return[];for(var r=[],n=0,a=e.length;n<a;)r.push(slice.call(e,n,n+=t));return r}function executeBound(e,t,r,n,a){if(!(n instanceof t))return e.apply(r,a);var i=baseCreate(e.prototype),o=e.apply(i,a);return isObject(o)?o:i}var bind=restArguments((function(e,t,r){if(!isFunction(e))throw new TypeError("Bind must be called on a function");var n=restArguments((function(a){return executeBound(e,n,t,this,r.concat(a))}));return n})),partial=restArguments((function(e,t){var r=partial.placeholder,n=function(){for(var a=arguments,i=0,o=t.length,s=Array(o),u=0;u<o;u++)s[u]=t[u]===r?a[i++]:t[u];for(;i<arguments.length;)s.push(a[i++]);return executeBound(e,n,this,this,s)};return n}));partial.placeholder=_;var bindAll=restArguments((function(e,t){var r=(t=_flatten(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=bind(e[n],e)}}));function memoize(e,t){var r=function(n){var a=r.cache,i=""+(t?t.apply(this,arguments):n);return _has(a,i)||(a[i]=e.apply(this,arguments)),a[i]};return r.cache={},r}var delay=restArguments((function(e,t,r){return setTimeout((function(){return e.apply(null,r)}),t)})),defer=partial(delay,_,1);function throttle(e,t,r){var n,a,i,o,s=0;r||(r={});var u=function(){s=!1===r.leading?0:now(),n=null,o=e.apply(a,i),n||(a=i=null)},c=function(){var c=now();s||!1!==r.leading||(s=c);var l=t-(c-s);return a=this,i=arguments,l<=0||l>t?(n&&(clearTimeout(n),n=null),s=c,o=e.apply(a,i),n||(a=i=null)):n||!1===r.trailing||(n=setTimeout(u,l)),o};return c.cancel=function(){clearTimeout(n),s=0,n=a=i=null},c}function debounce(e,t,r){var n,a,i=function(t,r){n=null,r&&(a=e.apply(t,r))},o=restArguments((function(o){if(n&&clearTimeout(n),r){var s=!n;n=setTimeout(i,t),s&&(a=e.apply(this,o))}else n=delay(i,t,this,o);return a}));return o.cancel=function(){clearTimeout(n),n=null},o}function wrap(e,t){return partial(t,e)}function negate(e){return function(){return!e.apply(this,arguments)}}function compose(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function after(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function before(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var once=partial(before,2),hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(e,t){var r=nonEnumerableProps.length,n=e.constructor,a=isFunction(n)&&n.prototype||ObjProto,i="constructor";for(_has(e,i)&&!contains(t,i)&&t.push(i);r--;)(i=nonEnumerableProps[r])in e&&e[i]!==a[i]&&!contains(t,i)&&t.push(i)}function keys(e){if(!isObject(e))return[];if(nativeKeys)return nativeKeys(e);var t=[];for(var r in e)_has(e,r)&&t.push(r);return hasEnumBug&&collectNonEnumProps(e,t),t}function allKeys(e){if(!isObject(e))return[];var t=[];for(var r in e)t.push(r);return hasEnumBug&&collectNonEnumProps(e,t),t}function values(e){for(var t=keys(e),r=t.length,n=Array(r),a=0;a<r;a++)n[a]=e[t[a]];return n}function mapObject(e,t,r){t=cb(t,r);for(var n=keys(e),a=n.length,i={},o=0;o<a;o++){var s=n[o];i[s]=t(e[s],s,e)}return i}function pairs(e){for(var t=keys(e),r=t.length,n=Array(r),a=0;a<r;a++)n[a]=[t[a],e[t[a]]];return n}function invert(e){for(var t={},r=keys(e),n=0,a=r.length;n<a;n++)t[e[r[n]]]=r[n];return t}function functions(e){var t=[];for(var r in e)isFunction(e[r])&&t.push(r);return t.sort()}function createAssigner(e,t){return function(r){var n=arguments,a=arguments.length;if(t&&(r=Object(r)),a<2||null==r)return r;for(var i=1;i<a;i++)for(var o=n[i],s=e(o),u=s.length,c=0;c<u;c++){var l=s[c];t&&void 0!==r[l]||(r[l]=o[l])}return r}}var extend=createAssigner(allKeys),extendOwn=createAssigner(keys);function findKey(e,t,r){t=cb(t,r);for(var n,a=keys(e),i=0,o=a.length;i<o;i++)if(t(e[n=a[i]],n,e))return n}function keyInObj(e,t,r){return t in r}var pick=restArguments((function(e,t){var r={},n=t[0];if(null==e)return r;isFunction(n)?(t.length>1&&(n=optimizeCb(n,t[1])),t=allKeys(e)):(n=keyInObj,t=_flatten(t,!1,!1),e=Object(e));for(var a=0,i=t.length;a<i;a++){var o=t[a],s=e[o];n(s,o,e)&&(r[o]=s)}return r})),omit=restArguments((function(e,t){var r,n=t[0];return isFunction(n)?(n=negate(n),t.length>1&&(r=t[1])):(t=map(_flatten(t,!1,!1),String),n=function(e,r){return!contains(t,r)}),pick(e,n,r)})),defaults=createAssigner(allKeys,!0);function create(e,t){var r=baseCreate(e);return t&&extendOwn(r,t),r}function clone(e){return isObject(e)?isArray(e)?e.slice():extend({},e):e}function tap(e,t){return t(e),e}function isMatch(e,t){var r=keys(t),n=r.length;if(null==e)return!n;for(var a=Object(e),i=0;i<n;i++){var o=r[i];if(t[o]!==a[o]||!(o in a))return!1}return!0}function eq(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;return("function"===a||"object"===a||"object"==typeof t)&&deepEq(e,t,r,n)}function deepEq(e,t,r,n){e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var a=toString.call(e);if(a!==toString.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return SymbolProto.valueOf.call(e)===SymbolProto.valueOf.call(t)}var i="[object Array]"===a;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(isFunction(o)&&o instanceof o&&isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),i){if((u=e.length)!==t.length)return!1;for(;u--;)if(!eq(e[u],t[u],r,n))return!1}else{var c,l=keys(e);if(u=l.length,keys(t).length!==u)return!1;for(;u--;)if(!_has(t,c=l[u])||!eq(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0}function isEqual(e,t){return eq(e,t)}function isEmpty(e){return null==e||(isArrayLike(e)&&(isArray(e)||isString(e)||isArguments(e))?0===e.length:0===keys(e).length)}function isElement(e){return!(!e||1!==e.nodeType)}function tagTester(e){return function(t){return toString.call(t)==="[object "+e+"]"}}var isArray=nativeIsArray||tagTester("Array");function isObject(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var isArguments=tagTester("Arguments"),isFunction=tagTester("Function"),isString=tagTester("String"),isNumber=tagTester("Number"),isDate=tagTester("Date"),isRegExp=tagTester("RegExp"),isError=tagTester("Error"),isSymbol=tagTester("Symbol"),isMap=tagTester("Map"),isWeakMap=tagTester("WeakMap"),isSet=tagTester("Set"),isWeakSet=tagTester("WeakSet");!function(){isArguments(arguments)||(isArguments=function(e){return _has(e,"callee")})}();var nodelist=root.document&&root.document.childNodes;function isFinite(e){return!isSymbol(e)&&_isFinite(e)&&!_isNaN(parseFloat(e))}function isNaN$1(e){return isNumber(e)&&_isNaN(e)}function isBoolean(e){return!0===e||!1===e||"[object Boolean]"===toString.call(e)}function isNull(e){return null===e}function isUndefined(e){return void 0===e}function has(e,t){if(!isArray(t))return _has(e,t);for(var r=t.length,n=0;n<r;n++){var a=t[n];if(null==e||!hasOwnProperty.call(e,a))return!1;e=e[a]}return!!r}function identity(e){return e}function constant(e){return function(){return e}}function noop$1(){}function property(e){return isArray(e)?function(t){return deepGet(t,e)}:shallowProperty(e)}function propertyOf(e){return null==e?function(){}:function(t){return isArray(t)?deepGet(e,t):e[t]}}function matcher(e){return e=extendOwn({},e),function(t){return isMatch(t,e)}}function times(e,t,r){var n=Array(Math.max(0,e));t=optimizeCb(t,r,1);for(var a=0;a<e;a++)n[a]=t(a);return n}function random(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof nodelist&&(isFunction=function(e){return"function"==typeof e||!1});var now=Date.now||function(){return(new Date).getTime()},escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=invert(escapeMap);function createEscaper(e){var t=function(t){return e[t]},r="(?:"+keys(e).join("|")+")",n=RegExp(r),a=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(a,t):e}}var escape=createEscaper(escapeMap),unescape=createEscaper(unescapeMap);function result(e,t,r){isArray(t)||(t=[t]);var n=t.length;if(!n)return isFunction(r)?r.call(e):r;for(var a=0;a<n;a++){var i=null==e?void 0:e[t[a]];void 0===i&&(i=r,a=n),e=isFunction(i)?i.call(e):i}return e}var idCounter=0;function uniqueId(e){var t=++idCounter+"";return e?e+t:t}var templateSettings=_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(e){return"\\"+escapes[e]};function template(e,t,r){!t&&r&&(t=r),t=defaults({},t,_.templateSettings);var n,a=RegExp([(t.escape||noMatch).source,(t.interpolate||noMatch).source,(t.evaluate||noMatch).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(a,(function(t,r,n,a,s){return o+=e.slice(i,s).replace(escapeRegExp,escapeChar),i=s+t.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t})),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{n=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return n.call(this,e,_)},u=t.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s}function chain(e){var t=_(e);return t._chain=!0,t}function chainResult(e,t){return e._chain?_(t).chain():t}function mixin(e){return each(functions(e),(function(t){var r=_[t]=e[t];_.prototype[t]=function(){var e=[this._wrapped];return push.apply(e,arguments),chainResult(this,r.apply(_,e))}})),_}each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=ArrayProto[e];_.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],chainResult(this,r)}})),each(["concat","join","slice"],(function(e){var t=ArrayProto[e];_.prototype[e]=function(){return chainResult(this,t.apply(this._wrapped,arguments))}})),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)};var allExports=Object.freeze({__proto__:null,default:_,VERSION:VERSION,iteratee:iteratee,restArguments:restArguments,each:each,forEach:each,map:map,collect:map,reduce:reduce,foldl:reduce,inject:reduce,reduceRight:reduceRight,foldr:reduceRight,find:find,detect:find,filter:filter,select:filter,reject:reject,every:every,all:every,some:some,any:some,contains:contains,includes:contains,include:contains,invoke:invoke,pluck:pluck,where:where,findWhere:findWhere,max:max,min:min,shuffle:shuffle,sample:sample,sortBy:sortBy,groupBy:groupBy,indexBy:indexBy,countBy:countBy,toArray:toArray,size:size,partition:partition,first:first,head:first,take:first,initial:initial,last:last,rest:rest,tail:rest,drop:rest,compact:compact,flatten:flatten,without:without,uniq:uniq,unique:uniq,union:union,intersection:intersection,difference:difference,unzip:unzip,zip:zip,object:object,findIndex:findIndex,findLastIndex:findLastIndex,sortedIndex:sortedIndex,indexOf:indexOf,lastIndexOf:lastIndexOf,range:range,chunk:chunk,bind:bind,partial:partial,bindAll:bindAll,memoize:memoize,delay:delay,defer:defer,throttle:throttle,debounce:debounce,wrap:wrap,negate:negate,compose:compose,after:after,before:before,once:once,keys:keys,allKeys:allKeys,values:values,mapObject:mapObject,pairs:pairs,invert:invert,functions:functions,methods:functions,extend:extend,extendOwn:extendOwn,assign:extendOwn,findKey:findKey,pick:pick,omit:omit,defaults:defaults,create:create,clone:clone,tap:tap,isMatch:isMatch,isEqual:isEqual,isEmpty:isEmpty,isElement:isElement,isArray:isArray,isObject:isObject,get isArguments(){return isArguments},get isFunction(){return isFunction},isString:isString,isNumber:isNumber,isDate:isDate,isRegExp:isRegExp,isError:isError,isSymbol:isSymbol,isMap:isMap,isWeakMap:isWeakMap,isSet:isSet,isWeakSet:isWeakSet,isFinite:isFinite,isNaN:isNaN$1,isBoolean:isBoolean,isNull:isNull,isUndefined:isUndefined,has:has,identity:identity,constant:constant,noop:noop$1,property:property,propertyOf:propertyOf,matcher:matcher,matches:matcher,times:times,random:random,now:now,escape:escape,unescape:unescape,result:result,uniqueId:uniqueId,templateSettings:templateSettings,template:template,chain:chain,mixin:mixin}),_$1=mixin(allExports);function dataset(e){var t={},r=e.slice(0);function n(e){for(var r=e.name(),n=r,a=1;t.hasOwnProperty(n);)n=r+"."+a++;n!==r&&e.name(n)}e.forEach((function(e){n(e),t[e.name()]=e}));var a={columns:function(){return e},column:function(r){if(_$1.isString(r)){if(void 0!==t[r])return t[r];throw new Error('No column found with that name: "'+r+'"')}if(!(r<0)){if(void 0!==e[r])return e[r];throw new Error("No column found with that name or index: "+r)}},numColumns:function(){return e.length},numRows:function(){return e[0].length},eachColumn:function(t){e.forEach(t)},hasColumn:function(r){return void 0!==(_$1.isString(r)?t[r]:e[r])},indexOf:function(r){return a.hasColumn(r)?e.indexOf(t[r]):-1},list:function(){return _$1.range(e[0].length).map((function(t){var r={};return e.forEach((function(e){r[e.name()]=e.val(t)})),r}))},csv:function(){var t="";return e.forEach((function(e,r){var n=e.title();n.indexOf('"')>-1&&n.replace('"','\\"'),n.indexOf(",")>-1&&(n='"'+n+'"'),t+=(r>0?",":"")+n})),_$1.range(a.numRows()).forEach((function(r){t+="\n",e.forEach((function(e,n){var a=""+("date"===e.type()?e.raw(r):e.val(r));a.indexOf('"')>-1&&a.replace('"','\\"'),a.indexOf(",")>-1&&(a='"'+a+'"'),t+=(n>0?",":"")+a}))})),t},toCSV:function(){return this.csv()},filterColumns:function(r){return e=e.filter((function(e){return!r[e.name()]})),_$1.each(r,(function(e,r){e&&t[r]&&delete t[r]})),a},eachRow:function(e){var t;for(t=0;t<a.numRows();t++)e(t);return a},add:function(i){return n(i),e.push(i),t[i.name()]=i,r.push(i),a},reset:function(){return e=r.slice(0),t={},e.forEach((function(e){t[e.name()]=e})),a},limitRows:function(t){return e.forEach((function(e){e.limitRows(t)})),a},limitColumns:function(t){return e.length>t&&(e.length=t,r.length=t),a},columnOrder:function(t){return arguments.length?(e.length=0,t.forEach((function(t){e.push(r[t])})),a):e.map((function(e){return r.indexOf(e)}))}};return a}function text(){return{parse:_$1.identity,errors:function(){return 0},name:function(){return"text"},formatter:function(){return _$1.identity},isValid:function(){return!0},format:function(){}}}function equalish(e,t){return Math.abs(e-t)<1e-6}function number(e){var t,r=0,n={"-.":/^ *[-–—−]?[0-9]*(\.[0-9]+)?(e[+-][0-9]+)?%? *$/,"-,":/^ *[-–—−]?[0-9]*(,[0-9]+)?%? *$/,",.":/^ *[-–—−]?[0-9]{1,3}(,[0-9]{3})*(\.[0-9]+)?%? *$/,".,":/^ *[-–—−]?[0-9]{1,3}(\.[0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/,"'.":/^ *[-–—−]?[0-9]{1,3}('[0-9]{3})*(\.[0-9]+)?%? *$/},a={"-.":"1234.56","-,":"1234,56",",.":"1,234.56",".,":"1.234,56"," .":"1 234.56"," ,":"1 234,56"," .":"1 234.56"," ,":"1 234,56"," .":"1 234.56"," ,":"1 234,56"},i={na:1,"n/a":1,"-":1,":":1},o={},s=["-.",0];e=e||[],_$1.each(e,(function(e){_$1.each(n,(function(t,r){void 0===o[r]&&(o[r]=0),t.test(e)&&(o[r]+=1,o[r]>s[1]&&(s[0]=r,s[1]=o[r]))}))})),t=s[0];var u={parse:function(e){if(_$1.isNumber(e)||_$1.isUndefined(e)||_$1.isNull(e))return e;var n=e.replace("%","").replace("−","-").replace("–","-").replace("—","-");return"-"!==t[0]&&(n=n.replace(new RegExp("."===t[0]?"\\.":t[0],"g"),"")),"."!==t[1]&&(n=n.replace(t[1],".")),isNaN(n)||""===n?(i[n.toLowerCase()]||""===n||r++,e):Number(n)},toNum:function(e){return e},fromNum:function(e){return e},errors:function(){return r},name:function(){return"number"},formatter:function(e){var t=e["number-format"]||"-",r=Number(e["number-divisor"]||0),n=(e["number-append"]||"").replace(/ /g," "),a=(e["number-prepend"]||"").replace(/ /g," ");return function(e,i,o){if(isNaN(e))return e;var s=t;if(0!==r&&"-"===s&&(s="n1"),0!==r&&(e=Number(e)/Math.pow(10,r)),"s"===s.substr(0,1)){var u=+s.substr(1);s="n"+Math.max(0,function(e,t){return 0===e?0:Math.round(t-Math.ceil(Math.log(Math.abs(e))/Math.LN10))}(e,u))}return o&&(s="n0"),"-"===s&&(s=equalish(e,Math.round(e))?"n0":equalish(e,.1*Math.round(10*e))?"n1":equalish(e,.01*Math.round(100*e))?"n2":equalish(e,.001*Math.round(1e3*e))?"n3":equalish(e,1e-4*Math.round(1e4*e))?"n4":equalish(e,1e-5*Math.round(1e5*e))?"n5":"n6"),e=Globalize.format(e,"-"!==s?s:null),i?a+e+n:e}},isValid:function(e){return""===e||i[String(e).toLowerCase()]||_$1.isNumber(u.parse(e))},ambiguousFormats:function(){var e=[];return _$1.each(o,(function(t,r){t===s[1]&&e.push([r,a[r]])})),e},format:function(e){return arguments.length?(t=e,u):t}};return u}_$1._=_$1;var begin=/^ */.source,end=/[*']* *$/.source,s0=/[ \-/.]?/.source,s1=/[ \-/.]/.source,s2=/[ \-/.;,]/.source,s3=/[ \-|T]/.source,sM=/[ \-/.m]/.source,rx={YY:{parse:/['’‘]?(\d{2})/},YYYY:{test:/([12]\d{3})/,parse:/(\d{4})/},YYYY2:{test:/(?:1[7-9]|20)\d{2}/,parse:/(\d{4})/},H:{parse:/h([12])/},Q:{parse:/q([1234])/},W:{parse:/w([0-5]?[0-9])/},MM:{test:/(0?[1-9]|1[0-2])/,parse:/(0?[1-9]|1[0-2])/},DD:{parse:/(0?[1-9]|[1-2][0-9]|3[01])/},DOW:{parse:/([0-7])/},HHMM:{parse:/(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *(am|pm)?/}},MONTHS={0:["jan","january","januar","jänner","jän","janv","janvier","ene","enero","gen","gennaio","janeiro"],1:["feb","february","febr","februar","fév","févr","février","febrero","febbraio","fev","fevereiro"],2:["mar","mär","march","mrz","märz","mars","mars","marzo","marzo","março"],3:["apr","april","apr","april","avr","avril","abr","abril","aprile"],4:["may","mai","mayo","mag","maggio","maio","maj"],5:["jun","june","juni","juin","junio","giu","giugno","junho"],6:["jul","july","juli","juil","juillet","julio","lug","luglio","julho"],7:["aug","august","août","ago","agosto"],8:["sep","september","sept","septembre","septiembre","set","settembre","setembro"],9:["oct","october","okt","oktober","octobre","octubre","ott","ottobre","out","outubro"],10:["nov","november","november","novembre","noviembre","novembre","novembro"],11:["dec","december","dez","des","dezember","déc","décembre","dic","diciembre","dicembre","desember","dezembro"]},shortMonthKey={};_$1.each(MONTHS,(function(e,t){_$1.each(e,(function(e){shortMonthKey[e]=t}))})),rx.MMM={parse:new RegExp("("+_$1.flatten(_$1.values(MONTHS)).join("|")+")")},_$1.each(rx,(function(e){e.parse=e.parse.source,_$1.isRegExp(e.test)?e.test=e.test.source:e.test=e.parse}));var knownFormats={YYYY:{test:reg(rx.YYYY2.test),parse:reg(rx.YYYY2.parse),precision:"year"},"YYYY-H":{test:reg(rx.YYYY.test,s0,rx.H.test),parse:reg(rx.YYYY.parse,s0,rx.H.parse),precision:"half"},"H-YYYY":{test:reg(rx.H.test,s1,rx.YYYY.test),parse:reg(rx.H.parse,s1,rx.YYYY.parse),precision:"half"},"YYYY-Q":{test:reg(rx.YYYY.test,s0,rx.Q.test),parse:reg(rx.YYYY.parse,s0,rx.Q.parse),precision:"quarter"},"Q-YYYY":{test:reg(rx.Q.test,s1,rx.YYYY.test),parse:reg(rx.Q.parse,s1,rx.YYYY.parse),precision:"quarter"},"YYYY-M":{test:reg(rx.YYYY.test,sM,rx.MM.test),parse:reg(rx.YYYY.parse,sM,rx.MM.parse),precision:"month"},"M-YYYY":{test:reg(rx.MM.test,s1,rx.YYYY.test),parse:reg(rx.MM.parse,s1,rx.YYYY.parse),precision:"month"},"YYYY-MMM":{test:reg(rx.YYYY.test,s1,rx.MMM.parse),parse:reg(rx.YYYY.parse,s1,rx.MMM.parse),precision:"month"},"MMM-YYYY":{test:reg(rx.MMM.parse,s1,rx.YYYY.test),parse:reg(rx.MMM.parse,s1,rx.YYYY.parse),precision:"month"},"MMM-YY":{test:reg(rx.MMM.parse,s1,rx.YY.test),parse:reg(rx.MMM.parse,s1,rx.YY.parse),precision:"month"},MMM:{test:reg(rx.MMM.parse),parse:reg(rx.MMM.parse),precision:"month"},"YYYY-WW":{test:reg(rx.YYYY.test,s0,rx.W.test),parse:reg(rx.YYYY.parse,s0,rx.W.parse),precision:"week"},"WW-YYYY":{test:reg(rx.W.test,s1,rx.YYYY.test),parse:reg(rx.W.parse,s1,rx.YYYY.parse),precision:"week"},"MM/DD/YYYY":{test:reg(rx.MM.test,"([\\-\\/])",rx.DD.test,"\\2",rx.YYYY.test),parse:reg(rx.MM.parse,"([\\-\\/])",rx.DD.parse,"\\2",rx.YYYY.parse),precision:"day"},"DD/MM/YYYY":{test:reg(rx.DD.test,"([\\-\\.\\/ ?])",rx.MM.test,"\\2",rx.YYYY.test),parse:reg(rx.DD.parse,"([\\-\\.\\/ ?])",rx.MM.parse,"\\2",rx.YYYY.parse),precision:"day"},"DD/MMM/YYYY":{test:reg(rx.DD.test,"([\\-\\.\\/ ?])",rx.MMM.test,"\\2",rx.YYYY.test),parse:reg(rx.DD.parse,"([\\-\\.\\/ ?])",rx.MMM.parse,"\\2",rx.YYYY.parse),precision:"day"},"DD/MMM/YY":{test:reg(rx.DD.test,"([\\-\\.\\/ ?])",rx.MMM.test,"\\2",rx.YY.test),parse:reg(rx.DD.parse,"([\\-\\.\\/ ?])",rx.MMM.parse,"\\2",rx.YY.parse),precision:"day"},"YYYY-MM-DD":{test:reg(rx.YYYY.test,"([\\-\\.\\/ ?])",rx.MM.test,"\\2",rx.DD.test),parse:reg(rx.YYYY.parse,"([\\-\\.\\/ ?])",rx.MM.parse,"\\2",rx.DD.parse),precision:"day"},"MMM-DD-YYYY":{test:reg(rx.MMM.test,s1,rx.DD.test,s2,rx.YYYY.test),parse:reg(rx.MMM.parse,s1,rx.DD.parse,s2,rx.YYYY.parse),precision:"day"},"YYYY-WW-d":{test:reg(rx.YYYY.test,s0,rx.W.test,s1,rx.DOW.test),parse:reg(rx.YYYY.parse,s0,rx.W.parse,s1,rx.DOW.parse),precision:"day"},"MM/DD/YYYY HH:MM":{test:reg(rx.MM.test,"([\\-\\/])",rx.DD.test,"\\2",rx.YYYY.test,s3,rx.HHMM.test),parse:reg(rx.MM.parse,"([\\-\\/])",rx.DD.parse,"\\2",rx.YYYY.parse,s3,rx.HHMM.parse),precision:"day-minutes"},"DD.MM.YYYY HH:MM":{test:reg(rx.DD.test,"([\\-\\.\\/ ?])",rx.MM.test,"\\2",rx.YYYY.test,s3,rx.HHMM.test),parse:reg(rx.DD.parse,"([\\-\\.\\/ ?])",rx.MM.parse,"\\2",rx.YYYY.parse,s3,rx.HHMM.parse),precision:"day-minutes"},"YYYY-MM-DD HH:MM":{test:reg(rx.YYYY.test,"([\\-\\.\\/ ?])",rx.MM.test,"\\2",rx.DD.test,s3,rx.HHMM.test),parse:reg(rx.YYYY.parse,"([\\-\\.\\/ ?])",rx.MM.parse,"\\2",rx.DD.parse,s3,rx.HHMM.parse),precision:"day-minutes"},ISO8601:{test:/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d(\.\d+)?([+-][0-2]\d:[0-5]\d|Z)/,parse:function(e){return e},precision:"day-seconds"}};function reg(){return new RegExp(begin+Array.prototype.slice.call(arguments).join(" *")+end,"i")}function test(e,t){var r=knownFormats[t];return _$1.isRegExp(r.test)?r.test.test(e):r.test(e,t)}function parse(e,t){var r=knownFormats[t];return _$1.isRegExp(r.parse)?e.match(r.parse):r.parse(e,t)}function dateFromIsoWeek(e,t,r){var n=new Date(Date.UTC(e,0,3));return n.setUTCDate(3-n.getUTCDay()+7*(t-1)+parseInt(r,10)),n}function dateToIsoWeek(e){var t=e.getUTCDay(),r=new Date(e.valueOf());r.setDate(r.getDate()-(t+6)%7+3);var n=r.getUTCFullYear(),a=Math.floor((r.getTime()-new Date(n,0,1,-6))/864e5);return[n,1+Math.floor(a/7),t>0?t:7]}function hour(e,t){return 12!==e?e+("pm"===t?12:0):"am"===t?0:12}function date(e){var t,r=0,n={},a=["",0];e=e||[],_$1.each(knownFormats,(function(t,r){_$1.each(e,(function(e){void 0===n[r]&&(n[r]=0),test(e,r)&&(n[r]+=1,n[r]>a[1]&&(a[0]=r,a[1]=n[r]))}))})),t=a[0];var i={parse:function(e){if(_$1.isDate(e)||_$1.isUndefined(e))return e;if(!t||!_$1.isString(e))return r++,e;var n=parse(e.toLowerCase(),t);if(!n)return r++,e;function a(e){return(e=+e)<30?2e3+e:1900+e}test(e,t)||r++;var i=(new Date).getFullYear();switch(t){case"YYYY":return new Date(n[1],0,1);case"YYYY-H":return new Date(n[1],6*(n[2]-1),1);case"H-YYYY":return new Date(n[2],6*(n[1]-1),1);case"YYYY-Q":return new Date(n[1],3*(n[2]-1),1);case"Q-YYYY":return new Date(n[2],3*(n[1]-1),1);case"YYYY-M":return new Date(n[1],n[2]-1,1);case"M-YYYY":return new Date(n[2],n[1]-1,1);case"YYYY-MMM":return new Date(+n[1],shortMonthKey[n[2]],1);case"MMM-YYYY":return new Date(+n[2],shortMonthKey[n[1]],1);case"MMM-YY":return new Date(a(+n[2]),shortMonthKey[n[1]],1);case"MMM":return new Date(i,shortMonthKey[n[1]],1);case"YYYY-WW":return dateFromIsoWeek(n[1],n[2],1);case"WW-YYYY":return dateFromIsoWeek(n[2],n[1],1);case"YYYY-WW-d":return dateFromIsoWeek(n[1],n[2],n[3]);case"YYYY-MM-DD":return new Date(n[1],n[3]-1,n[4]);case"DD/MM/YYYY":return new Date(n[4],n[3]-1,n[1]);case"DD/MMM/YYYY":return new Date(n[4],shortMonthKey[n[3]],n[1]);case"DD/MMM/YY":return new Date(a(n[4]),shortMonthKey[n[3]],n[1]);case"MM/DD/YYYY":return new Date(n[4],n[1]-1,n[3]);case"MMM-DD-YYYY":return new Date(n[3],shortMonthKey[n[1]],n[2]);case"YYYY-MM-DD HH:MM":return new Date(+n[1],n[3]-1,+n[4],hour(+n[5],n[8]),+n[6]||0,+n[7]||0);case"DD.MM.YYYY HH:MM":return new Date(+n[4],n[3]-1,+n[1],hour(+n[5],n[8]),+n[6]||0,+n[7]||0);case"MM/DD/YYYY HH:MM":return new Date(+n[4],n[1]-1,+n[3],hour(+n[5],n[8]),+n[6]||0,+n[7]||0);case"ISO8601":return new Date(n.toUpperCase());default:console.warn("unknown format",t)}return r++,e},toNum:function(e){return e.getTime()},fromNum:function(e){return new Date(e)},errors:function(){return r},name:function(){return"date"},format:function(e){return arguments.length?(t=e,i):t},precision:function(){return knownFormats[t].precision},formatter:function(){if(!t)return _$1.identity;var e=Globalize.culture().calendar.patterns.M.replace("MMMM","MMM");switch(knownFormats[t].precision){case"year":return function(e){return _$1.isDate(e)?e.getFullYear():e};case"half":return function(e){return _$1.isDate(e)?e.getFullYear()+" H"+(e.getMonth()/6+1):e};case"quarter":return function(e){return _$1.isDate(e)?e.getFullYear()+" Q"+(e.getMonth()/3+1):e};case"month":return function(e){return _$1.isDate(e)?Globalize.format(e,"MMM yy"):e};case"week":return function(e){return _$1.isDate(e)?dateToIsoWeek(e).slice(0,2).join(" W"):e};case"day":return function(e,t){return _$1.isDate(e)?Globalize.format(e,t?"D":"d"):e};case"day-minutes":return function(t){return _$1.isDate(t)?Globalize.format(t,e).replace(" ","&nbsp;")+" - "+Globalize.format(t,"t").replace(" ","&nbsp;"):t};case"day-seconds":return function(e){return _$1.isDate(e)?Globalize.format(e,"T").replace(" ","&nbsp;"):e}}},isValid:function(e){return _$1.isDate(i.parse(e))},ambiguousFormats:function(){var e=[];return _$1.each(n,(function(t,r){t===a[1]&&e.push([r,r])})),e}};return i}var columnTypes={text:text,number:number,date:date},TAGS=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,COMMENTS_AND_PHP_TAGS=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,defaultAllowed="<a><span><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function purifyHTML(e,t){if(null===e)return null;if(void 0!==e){if((e=String(e)).indexOf("<")<0||e.indexOf(">")<0)return e;if(e=stripTags(e,t),"undefined"==typeof document)return e;var r=document.createElement("div");r.innerHTML=e;for(var n=r.querySelectorAll("*"),a=0;a<n.length;a++){"a"===n[a].nodeName.toLowerCase()&&("_self"!==n[a].getAttribute("target")&&n[a].setAttribute("target","_blank"),n[a].setAttribute("rel","nofollow noopener noreferrer"),n[a].getAttribute("href")&&n[a].getAttribute("href").trim().startsWith("javascript:")&&n[a].setAttribute("href",""));for(var i=0;i<n[a].attributes.length;i++){var o=n[a].attributes[i];o.specified&&"on"===o.name.substr(0,2)&&n[a].removeAttribute(o.name)}}return r.innerHTML}}function stripTags(e,t){t=(((void 0!==t?t||"":defaultAllowed)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");for(var r=e,n=e;;)if(n=(r=n).replace(COMMENTS_AND_PHP_TAGS,"").replace(TAGS,(function(e,r){return t.indexOf("<"+r.toLowerCase()+">")>-1?e:""})),r===n)return n}function column(e,t,r){function n(e){return null!=e&&""!==e}var a,i,o=_$1.shuffle(_$1.range(t.length)).filter((function(e){return n(t[e])})).slice(0,200).map((function(e){return t[e]}));r=r?columnTypes[r](o):function(e){if(_$1.every(t,_$1.isNumber))return columnTypes.number();if(_$1.every(t,_$1.isDate))return columnTypes.date();var r,a=[columnTypes.date(e),columnTypes.number(e),columnTypes.text()],i=.1*t.filter(n).length;return _$1.each(t,(function(e){_$1.each(a,(function(t){t.parse(e)}))})),_$1.every(a,(function(e){return e.errors()<i&&(r=e),!r})),_$1.isUndefined(r)&&(r=a[2]),r}(o);var s,u=t.slice(0),c={name:function(){return arguments.length?(e=arguments[0],c):purifyHTML(e)},title:function(){return arguments.length?(s=arguments[0],c):purifyHTML(s||e)},length:t.length,val:function(e,n){if(arguments.length){var a=n?u:t;return e<0&&(e+=a.length),r.parse(_$1.isDate(a[e])||_$1.isNumber(a[e])?a[e]:purifyHTML(a[e]))}},values:function(e){var n=e?u:t;return n=_$1.map(n,(function(e){return _$1.isDate(e)||_$1.isNumber(e)?e:purifyHTML(e)})),_$1.map(n,r.parse)},each:function(e){for(var r=0;r<t.length;r++)e(c.val(r),r)},raw:function(e,r){return arguments.length?2===arguments.length?(t[e]=r,c):_$1.isDate(t[e])||_$1.isNumber(t[e])?t[e]:purifyHTML(t[e]):t.map((function(e){return _$1.isDate(e)||_$1.isNumber(e)?e:purifyHTML(e)}))},type:function(e){if(!0===e)return r;if(_$1.isString(e)){if(columnTypes[e])return r=columnTypes[e](o),c;throw new Error("unknown column type: "+e)}return r.name()},range:function(){return!!r.toNum&&(a||(a=[Number.MAX_VALUE,-Number.MAX_VALUE],c.each((function(e){e=r.toNum(e),_$1.isNumber(e)&&!_$1.isNaN(e)&&(e<a[0]&&(a[0]=e),e>a[1]&&(a[1]=e))})),a[0]=r.fromNum(a[0]),a[1]=r.fromNum(a[1])),a)},total:function(){return!!r.toNum&&(i||(i=0,c.each((function(e){i+=r.toNum(e)})),i=r.fromNum(i)),i)},filterRows:function(e){return t=[],arguments.length?_$1.each(e,(function(e){t.push(u[e])})):t=u.slice(0),c.length=t.length,a=i=!1,c},toString:function(){return e+" ("+r.name()+")"},indexOf:function(e){return _$1.find(_$1.range(t.length),(function(t){return c.val(t)===e}))},limitRows:function(e){u.length>e&&(u.length=e,t.length=e,c.length=e)}};return c}function delimited(e){return{dataset:function(){if(e.url){var t=e.url+(e.url.indexOf("?")>-1?"&":"?")+"v="+(new Date).getTime();return window.fetch(t).then((function(e){return e.text()})).then((function(t){return new DelimitedParser(e).parse(t)}))}if(e.csv||""===e.csv)return new Promise((function(t){t(e.csv)})).then((function(t){return new DelimitedParser(e).parse(t)}));throw new Error("you need to provide either an URL or CSV data.")},parse:function(){return new DelimitedParser(e).parse(e.csv)}}}dataset.delimited=delimited;var DelimitedParser=function(e){e=Object.assign({delimiter:"auto",quoteChar:'"',skipRows:0,emptyValue:null,transpose:!1,firstRowIsHeader:!0},e),this.__delimiterPatterns=getDelimiterPatterns(e.delimiter,e.quoteChar),this.opts=e};function getDelimiterPatterns(e,t){return new RegExp("(\\"+e+"|\\r?\\n|\\r|^)(?:"+t+"([^"+t+"]*(?:"+t+'"[^'+t+"]*)*)"+t+"|([^"+t+"\\"+e+"\\r\\n]*))","gi")}function json(e){return{dataset:function(){if(e.url)return fetch(e.url).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)}));if(e.csv)return new Promise((function(t){t(e.csv)})).then((function(e){return JSON.parse(e)}));throw new Error("you need to provide either an URL or CSV data.")},parse:function(){return JSON.parse(e.csv)}}}function reorderColumns(e,t){var r=e.getMetadata("data.column-order",[]);return r.length&&r.length===t.numColumns()&&t.columnOrder(r),t}function applyChanges(e,t){var r=e.getMetadata("data.changes",[]),n=e.getMetadata("data.transpose",!1);r.forEach((function(e){var r="row",a="column";if(n&&(r="column",a="row"),t.hasColumn(e[a]))if(0===e[r]){if(e.previous)if(t.column(e[a]).title()!==e.previous)return;t.column(e[a]).title(e.value)}else{if(e.previous)if(t.column(e[a]).raw(e[r]-1)!==e.previous)return;t.column(e[a]).raw(e[r]-1,e.value)}}));var a=e.getMetadata("data.column-format",{});return _$1.each(a,(function(e,r){e.type&&t.hasColumn(r)&&"auto"!==e.type&&t.column(r).type(e.type),e["input-format"]&&t.hasColumn(r)&&t.column(r).type(!0).format(e["input-format"])})),t}function arrayMin(e,t){var r,n,a=e.length,i=-1;if(null==t){for(;++i<a;)if(null!=(r=e[i])&&r>=r)for(n=r;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else for(;++i<a;)if(null!=(r=t(e[i],i,e))&&r>=r)for(n=r;++i<a;)null!=(r=t(e[i],i,e))&&n>r&&(n=r);return n}function arrayMax(e,t){var r,n,a=e.length,i=-1;if(null==t){for(;++i<a;)if(null!=(r=e[i])&&r>=r)for(n=r;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else for(;++i<a;)if(null!=(r=t(e[i],i,e))&&r>=r)for(n=r;++i<a;)null!=(r=t(e[i],i,e))&&r>n&&(n=r);return n}function arraySum(e,t){var r,n=e.length,a=-1,i=0;if(null==t)for(;++a<n;)(r=+e[a])&&(i+=r);else for(;++a<n;)(r=+t(e[a],a,e))&&(i+=r);return i}function number$1(e){return null===e?NaN:+e}function arrayMean(e,t){var r,n=e.length,a=n,i=-1,o=0;if(null==t)for(;++i<n;)isNaN(r=number$1(e[i]))?--a:o+=r;else for(;++i<n;)isNaN(r=number$1(t(e[i],i,e)))?--a:o+=r;if(a)return o/a}function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function quantile(e,t,r){if(null==r&&(r=number$1),n=e.length){if((t=+t)<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e);return o+(+r(e[i+1],i+1,e)-o)*(a-i)}}function arrayMedian(e,t){var r,n=e.length,a=-1,i=[];if(null==t)for(;++a<n;)isNaN(r=number$1(e[a]))||i.push(r);else for(;++a<n;)isNaN(r=number$1(t(e[a],a,e)))||i.push(r);return quantile(i.sort(ascending),.5)}function columnNameToVariable(e){return e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"").replace(/-/g,"_").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(abstract|arguments|await|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|enum|eval|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|let|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var|void|volatile|while|window|with|yield)$/,"$1_")}function addComputedColumns(chart,dataset){var virtualColumns=chart.getMetadata("describe.computed-columns",{}),data=dataset.list(),columnNameToVar={},columnAggregates={};return dataset.eachColumn((function(e){e.isComputed||(columnNameToVar[e.name()]=columnNameToVariable(e.name()),"number"===e.type()&&(columnAggregates[e.name()]={min:arrayMin(e.values()),max:arrayMax(e.values()),sum:arraySum(e.values()),mean:arrayMean(e.values()),median:arrayMedian(e.values())}))})),_$1.each(virtualColumns,addComputedColumn),dataset;function addComputedColumn(formula,name){var datefmt=function(e){return e.getFullYear()+"-"+leftPad(1+e.getMonth(),2,0)+"-"+leftPad(1+e.getDate(),2,0)},values=data.map((function(row,rowIndex){var context=[];return context.push("var __row = "+rowIndex+";"),Object.keys(row).forEach((function(e){var t=row[e];columnNameToVar[e]&&(context.push("var "+columnNameToVar[e]+" = "+JSON.stringify(t)+";"),"number"===dataset.column(e).type()&&(context.push("var "+columnNameToVar[e]+"__sum = "+columnAggregates[e].sum+";"),context.push("var "+columnNameToVar[e]+"__min = "+columnAggregates[e].min+";"),context.push("var "+columnNameToVar[e]+"__max = "+columnAggregates[e].max+";"),context.push("var "+columnNameToVar[e]+"__mean = "+columnAggregates[e].mean+";"),context.push("var "+columnNameToVar[e]+"__median = "+columnAggregates[e].median+";")))})),context.push("var max = Math.max, min = Math.min;"),function(){try{return eval(this.context.join("\n")+"\n"+formula)}catch(e){return console.warn(e),"n/a"}}.call({context:context})})).map((function(e){return _$1.isBoolean(e)?e?"yes":"no":_$1.isDate(e)?datefmt(e):_$1.isNumber(e)?""+e:String(e)})),virtualColumn=column(name,values);virtualColumn.isComputed=!0,dataset.add(virtualColumn)}function leftPad(e,t,r){for(e=String(e);e.length<t;)e=String(r)+e;return e}}function objectWithoutProperties(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(r[n]=e[n]);return r}function httpReq(e,t){void 0===t&&(t={});var r=Object.assign({},{payload:null,raw:!1,method:"GET",baseUrl:"//"+dw.backend.__api_domain,mode:"cors",credentials:"include"},t,{headers:Object.assign({},{"Content-Type":"application/json"},t.headers)}),n=r.payload,a=r.baseUrl,i=r.raw,o=objectWithoutProperties(r,["payload","baseUrl","raw"]),s=a.replace(/\/$/,"")+"/"+e.replace(/^\//,"");return n&&(o.body=JSON.stringify(n)),window.fetch(s,o).then((function(e){if(i)return e;if(!e.ok)throw new HttpReqError(e);if(204!==e.status){var t=e.headers.get("content-type").split(";")[0];return"application/json"===t?e.json():"image/png"===t||"application/pdf"===t?e.blob():e.text()}}))}DelimitedParser.prototype.parse=function(e){this.__rawData=e;var t=this.opts;"auto"===t.delimiter&&(t.delimiter=this.guessDelimiter(e,t.skipRows),this.__delimiterPatterns=getDelimiterPatterns(t.delimiter,t.quoteChar));var r,n="|"!==t.delimiter?"|":"#";return e=n+"\n"+e.replace(/[ \r\n\f]+$/g,"")+n,r=function(e,t,r){r=r||",";for(var a,i=[[]],o=null;o=e.exec(t);){var s=o[1];s.length&&s!==r&&i.push([]),a=o[2]?o[2].replace(new RegExp('""',"g"),'"'):o[3],i[i.length-1].push(void 0===a?"":a)}i[0][0].substr(0,1)===n&&(i[0][0]=i[0][0].substr(1));var u=i.length-1,c=i[u].length-1,l=i[u][c].length-1;return i[u][c].substr(l)===n&&(i[u][c]=i[u][c].substr(0,l)),i.slice(1)}(this.__delimiterPatterns,e,t.delimiter),t.transpose&&(r=function(e){var t,r,n=e,a=n.length?n.length:0,i=n[0]instanceof Array?n[0].length:0;if(0===i||0===a)return[];var o=[];for(t=0;t<i;t++)for(o[t]=[],r=0;r<a;r++)o[t][r]=n[r][t];return o}(r)),function(e){var r=[],n={},a=e.length,i=e[0].length,o=t.skipRows,s=[];t.firstRowIsHeader&&(s=e[o],o++);for(var u=0;u<i;u++){var c=_$1.isString(s[u])?s[u].replace(/^\s+|\s+$/g,""):"",l=""!==c?"":1;for(c=""!==c?c:"X.";void 0!==n[c+l];)l=""===l?1:l+1;r.push({name:c+l,data:[]}),n[c+l]=!0}return _$1.range(o,a).forEach((function(n){r.forEach((function(r,a){r.data.push(""!==e[n][a]?e[n][a]:t.emptyValue)}))})),dataset(r=r.map((function(e){return column(e.name,e.data)})))}(r)},DelimitedParser.prototype.guessDelimiter=function(e){var t=0,r=-1,n=this,a=["\t",";","|",","];return a.forEach((function(a,i){var o=getDelimiterPatterns(a,n.quoteChar),s=e.match(o).length;"\t"===a&&(s*=1.15),s>t&&(t=s,r=i)})),a[r]},dataset.json=json;var get$2=httpReq.get=httpReqVerb("GET"),patch=httpReq.patch=httpReqVerb("PATCH"),put=httpReq.put=httpReqVerb("PUT"),post=httpReq.post=httpReqVerb("POST"),head=httpReq.head=httpReqVerb("HEAD");function httpReqVerb(e){return function(t,r){if(r&&r.method)throw new Error("Setting option.method is not allowed in httpReq."+e.toLowerCase()+"()");return httpReq(t,Object.assign({},r,{method:e}))}}httpReq.delete=httpReqVerb("DELETE");var HttpReqError=function(e){function t(t){e.call(this),this.name="HttpReqError",this.status=t.status,this.statusText=t.statusText,this.message="["+t.status+"] "+t.statusText,this.response=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);function loadScript(e,t){return void 0===t&&(t=null),new Promise((function(r,n){var a=document.createElement("script");a.src=e,a.onload=function(){t&&t(),r()},a.onerror=n,document.body.appendChild(a)}))}var storeChanges=_$1.debounce((function(e,t){var r=e.serialize();put("/v3/charts/"+r.id,{payload:r}).then((function(){t&&t()})).catch((function(e){console.error("Could not store chart changes",e)}))}),1e3),storeData=_$1.debounce((function(e,t){var r=e.getMetadata("data.json")?JSON.stringify(e.dataset()):e.rawData();put("/v3/charts/"+e.get().id+"/data",{body:r,headers:{"Content-Type":"text/csv"}}).then((function(){t&&t()})).catch((function(e){console.error("Could not store chart data",e)}))}),1e3),Chart=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(e,t){var r=this,n={firstRowIsHeader:this.getMetadata("data.horizontal-header",!0),transpose:this.getMetadata("data.transpose",!1)};return e&&!t?n.csv=e:n.url=t||"data.csv",n.csv&&(this._rawData=n.csv),(this.getMetadata("data.json",!1)?json(n):delimited(n)).dataset().then((function(e){return r.dataset(e),e})).catch((function(e){console.error("could not fetch datasource",e)}))},t.prototype.dataset=function(e){if(arguments.length){!0!==e&&(this._dataset_cache=e);var t="function"!=typeof e.list;return this._dataset=t?e:reorderColumns(this,applyChanges(this,addComputedColumns(this,!0===e?this._dataset_cache:e))),t&&this.set({dataset:e}),this._dataset}return this._dataset},t.prototype.theme=function(e){return arguments.length?(this.set({theme:e}),this):this.get().theme},t.prototype.vis=function(e){return arguments.length?(this.set({vis:e}),this):this.get().vis},t.prototype.locale=function(e,t){return arguments.length&&(this._locale=e=e.replace("_","-"),window.Globalize&&loadGlobalizeLocale(e,t)),this._locale},t.prototype.getMetadata=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var r=this.get().metadata;if(!e)return r;var n=e.split("."),a=r;return _$1.some(n,(function(e){return!(!_$1.isUndefined(a)&&!_$1.isNull(a))||(a=a[e],!1)})),_$1.isUndefined(a)||_$1.isNull(a)?t:a},t.prototype.setMetadata=function(e,t){var r=e.split("."),n=r.pop(),a=this.get().metadata,i=a;return r.forEach((function(e){(_$1.isUndefined(i[e])||_$1.isNull(i[e]))&&(i[e]={}),i=i[e]})),deepEqual(i[n],t)||(i[n]=t,this.set({metadata:a})),this},t.prototype.store=function(e){storeChanges(this,e)},t.prototype.storeData=function(e){storeData(this,e)},t.prototype.serialize=function(){var e=this.get(),t={};return["id","title","theme","createdAt","lastModifiedAt","type","metadata","authorId","showInGallery","language","guestSession","lastEditStep","publishedAt","publicUrl","publicVersion","organizationId","forkedFrom","externalData","forkable","isFork","inFolder","author"].forEach((function(r){t[r]=e[r]})),t},t.prototype.passiveMode=function(){var e=this;this.set({passiveMode:!0}),setTimeout((function(){return e.set({passiveMode:!1})}),100)},t.prototype.isPassive=function(){return this.get().passiveMode},t.prototype.rawData=function(){return this._rawData},t}(Store);function deepEqual(e,t){return JSON.stringify(e)===JSON.stringify(t)}function loadGlobalizeLocale(e,t){window.Globalize.cultures.hasOwnProperty(e)?(window.Globalize.culture(e),"function"==typeof t&&t()):loadScript("/static/vendor/globalize/cultures/globalize.culture."+e+".js",(function(){window.Globalize.culture(e),"function"==typeof t&&t()}))}Chart.prototype.observeDeep=observeDeep;var data$1={},main={App:ChartEditor,Chart:Chart,data:data$1};return main}));
