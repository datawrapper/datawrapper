!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chroma")):"function"==typeof define&&define.amd?define(["chroma"],e):t.controls=e(t.chroma)}(this,function(t){"use strict";function e(){}function n(t){for(var e,n,o=arguments,i=1,c=arguments.length;i<c;i++)for(e in n=o[i])t[e]=n[e];return t}function o(t,e){e.appendChild(t)}function i(t,e,n){e.insertBefore(t,n)}function c(t){t.parentNode.removeChild(t)}function l(t){for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling)}function r(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function a(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function u(){return document.createComment("")}function h(t,e,n){t.addEventListener(e,n,!1)}function f(t,e,n){t.removeEventListener(e,n,!1)}function d(t,e,n){t.setAttribute(e,n)}function v(t){return""===t?void 0:+t}function p(t,e,n){t.style.setProperty(e,n)}function m(t,e){for(var n=0;n<t.options.length;n+=1){var o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function g(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function b(){return Object.create(null)}function x(t){this.destroy=e,this.fire("destroy"),this.set=this.get=e,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function k(t,e){return t!==e||t&&"object"==typeof t||"function"==typeof t}function y(t,e,n,o,i){for(var c in e)if(n[c]){var l=o[c],r=i[c],a=e[c];if(a)for(var s=0;s<a.length;s+=1){var u=a[s];u.__calling||(u.__calling=!0,u.call(t,l,r),u.__calling=!1)}}}function N(t,e){t._observers={pre:b(),post:b()},t._handlers=b(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function C(t){for(;t&&t.length;)t.pop()()}function w(){this.store._remove(this)}t=t&&t.hasOwnProperty("default")?t.default:t;var M,L={destroy:x,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1)n[o].call(this,e)},observe:function(t,e,n){var o=n&&n.defer?this._observers.post:this._observers.pre;return(o[t]||(o[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=o[t].indexOf(e);~n&&o[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||(this.root._lock=!0,C(this.root._beforecreate),C(this.root._oncreate),C(this.root._aftercreate),this.root._lock=!1)},teardown:x,_recompute:e,_set:function(t){var e=this._state,o={},i=!1;for(var c in t)k(t[c],e[c])&&(o[c]=i=!0);i&&(this._state=n({},e,t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(y(this,this._observers.pre,o,this._state,e),this._fragment.p(o,this._state),y(this,this._observers.post,o,this._state,e)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()}};function H(t){N(this,t),this._state=n({},t.data),this._fragment=function(t,e){var n,l,r,u,d;function v(){e.set({value:r.checked})}return{c:function(){n=a("div"),l=a("label"),r=a("input"),u=s(" "),d=s(t.label),this.h()},h:function(){h(r,"change",v),r.type="checkbox",l.className="checkbox",p(l,"text-align","left"),p(l,"width","100%"),p(l,"position","relative"),p(l,"left","0"),n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(e,c){i(n,e,c),o(l,n),o(r,l),r.checked=t.value,o(u,l),o(d,l)},p:function(t,e){r.checked=e.value,t.label&&(d.data=e.label)},u:function(){c(n)},d:function(){f(r,"change",v)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}n(H.prototype,L);var T={bodyClick:function(t){if(M.get){var e=M.get().visible,n=t.target;if(e){for(;!n.classList.contains("color-picker-cont")&&"body"!=n.nodeName.toLowerCase();)n=n.parentNode;M.set({visible:n!=window.document.body})}}}};function K(){window.document.body.removeEventListener("click",this.bodyClick)}function $(e,n){var o=-1,i=999999;return e[0]==e[1]?"-":(e.forEach(function(e,c){var l=t.distance(e,n,"lab");l<i&&(i=l,o=c)}),e[o])}function O(t,e,n,o,i){var c=[t],l=e/n,r=0;for(o=_.isUndefined(o)?n:o,i=i||1;n-- >0;)r+=l,c.unshift(t-r),o-- >0&&c.push(t+r);return c}function z(t){d(t,"svelte-1718989465","")}function E(t,e,n,o,l){var r,s;return{c:function(){r=a("div"),this.h()},h:function(){r.className="color",r.dataset.color=s=n,p(r,"background",n),h(r,"click",G),h(r,"dblclick",P),r._svelte={component:l,palette:e,c_index:o}},m:function(t,e){i(r,t,e)},p:function(t,e,n,o,i){t.palette&&s!==(s=o)&&(r.dataset.color=s),t.palette&&p(r,"background",o),r._svelte.palette=n,r._svelte.c_index=i},u:function(){c(r)},d:function(){f(r,"click",G),f(r,"dblclick",P)}}}function S(t,e,n,o,l){var r,s,u;return{c:function(){r=a("div"),this.h()},h:function(){z(r),r.className=s="color "+(n==t.nearest_l?"selected":""),r.dataset.color=u=n,p(r,"background",n),h(r,"click",q),r._svelte={component:l,gradient_l_1:e,c_index_1:o}},m:function(t,e){i(r,t,e)},p:function(t,e,n,o,i){(t.gradient_l||t.nearest_l)&&s!==(s="color "+(o==e.nearest_l?"selected":""))&&(r.className=s),t.gradient_l&&u!==(u=o)&&(r.dataset.color=u),t.gradient_l&&p(r,"background",o),r._svelte.gradient_l_1=n,r._svelte.c_index_1=i},u:function(){c(r)},d:function(){f(r,"click",q)}}}function A(t,e,n,o,l){var r,s,u;return{c:function(){r=a("div"),this.h()},h:function(){z(r),r.className=s="color "+(n==t.nearest_c?"selected":""),r.dataset.color=u=n,p(r,"background",n),h(r,"click",I),r._svelte={component:l,gradient_c_1:e,c_index_2:o}},m:function(t,e){i(r,t,e)},p:function(t,e,n,o,i){(t.gradient_c||t.nearest_c)&&s!==(s="color "+(o==e.nearest_c?"selected":""))&&(r.className=s),t.gradient_c&&u!==(u=o)&&(r.dataset.color=u),t.gradient_c&&p(r,"background",o),r._svelte.gradient_c_1=n,r._svelte.c_index_2=i},u:function(){c(r)},d:function(){f(r,"click",I)}}}function j(t,e,n,o,l){var r,s,u;return{c:function(){r=a("div"),this.h()},h:function(){z(r),r.className=s="color "+(n==t.nearest_h?"selected":""),r.dataset.color=u=n,p(r,"background",n),h(r,"click",R),r._svelte={component:l,gradient_h_1:e,c_index_3:o}},m:function(t,e){i(r,t,e)},p:function(t,e,n,o,i){(t.gradient_h||t.nearest_h)&&s!==(s="color "+(o==e.nearest_h?"selected":""))&&(r.className=s),t.gradient_h&&u!==(u=o)&&(r.dataset.color=u),t.gradient_h&&p(r,"background",o),r._svelte.gradient_h_1=n,r._svelte.c_index_3=i},u:function(){c(r)},d:function(){f(r,"click",R)}}}function D(t,e){for(var n,l,u,d,v,_,m,g,b,x,k,y,N,C,w,M=!1,L=t.palette,H=[],T=0;T<L.length;T+=1)H[T]=E(0,L,L[T],T,e);var K=t.gradient_l,$=[];for(T=0;T<K.length;T+=1)$[T]=S(t,K,K[T],T,e);var O=t.gradient_c,D=[];for(T=0;T<O.length;T+=1)D[T]=A(t,O,O[T],T,e);var G=t.gradient_h,P=[];for(T=0;T<G.length;T+=1)P[T]=j(t,G,G[T],T,e);function q(){M=!0,e.set({color:k.value}),M=!1}function I(t){e.set({visible:!1})}return{c:function(){n=a("div"),l=a("div");for(var t=0;t<H.length;t+=1)H[t].c();u=s("\n\n        "),d=a("div");for(t=0;t<$.length;t+=1)$[t].c();v=s("\n        "),_=a("div");for(t=0;t<D.length;t+=1)D[t].c();m=s("\n        "),g=a("div");for(t=0;t<P.length;t+=1)P[t].c();b=s("\n\n        "),x=a("div"),k=a("input"),y=s("\n            "),(N=a("button")).innerHTML='<i class="icon-ok"></i>',C=s("\n            "),w=a("div"),this.h()},h:function(){l.className="palette",d.className="color-axis lightness",_.className="color-axis saturation",g.className="color-axis hue",z(k),h(k,"input",q),k.type="text",p(k,"background",t.color),p(k,"border-color",t.borderColor),p(k,"color",t.textColor),k.className="hex",N.className="btn btn-small ok",h(N,"click",I),w.className="color selected",p(w,"background",t.color),x.className="footer",n.className="color-selector"},m:function(e,c){i(n,e,c),o(l,n);for(var r=0;r<H.length;r+=1)H[r].m(l,null);o(u,n),o(d,n);for(r=0;r<$.length;r+=1)$[r].m(d,null);o(v,n),o(_,n);for(r=0;r<D.length;r+=1)D[r].m(_,null);o(m,n),o(g,n);for(r=0;r<P.length;r+=1)P[r].m(g,null);o(b,n),o(x,n),o(k,x),k.value=t.color,o(y,x),o(N,x),o(C,x),o(w,x)},p:function(t,n){var o=n.palette;if(t.palette){for(var i=0;i<o.length;i+=1)H[i]?H[i].p(t,n,o,o[i],i):(H[i]=E(0,o,o[i],i,e),H[i].c(),H[i].m(l,null));for(;i<H.length;i+=1)H[i].u(),H[i].d();H.length=o.length}var c=n.gradient_l;if(t.gradient_l||t.nearest_l){for(i=0;i<c.length;i+=1)$[i]?$[i].p(t,n,c,c[i],i):($[i]=S(n,c,c[i],i,e),$[i].c(),$[i].m(d,null));for(;i<$.length;i+=1)$[i].u(),$[i].d();$.length=c.length}var r=n.gradient_c;if(t.gradient_c||t.nearest_c){for(i=0;i<r.length;i+=1)D[i]?D[i].p(t,n,r,r[i],i):(D[i]=A(n,r,r[i],i,e),D[i].c(),D[i].m(_,null));for(;i<D.length;i+=1)D[i].u(),D[i].d();D.length=r.length}var a=n.gradient_h;if(t.gradient_h||t.nearest_h){for(i=0;i<a.length;i+=1)P[i]?P[i].p(t,n,a,a[i],i):(P[i]=j(n,a,a[i],i,e),P[i].c(),P[i].m(g,null));for(;i<P.length;i+=1)P[i].u(),P[i].d();P.length=a.length}M||(k.value=n.color),t.color&&p(k,"background",n.color),t.borderColor&&p(k,"border-color",n.borderColor),t.textColor&&p(k,"color",n.textColor),t.color&&p(w,"background",n.color)},u:function(){c(n);for(var t=0;t<H.length;t+=1)H[t].u();for(t=0;t<$.length;t+=1)$[t].u();for(t=0;t<D.length;t+=1)D[t].u();for(t=0;t<P.length;t+=1)P[t].u()},d:function(){r(H),r($),r(D),r(P),f(k,"input",q),f(N,"click",I)}}}function G(t){var e=this._svelte.component,n=this._svelte.palette[this._svelte.c_index];e.set({color:n})}function P(t){var e=this._svelte.component,n=this._svelte.palette[this._svelte.c_index];e.set({color:n,visible:!1})}function q(t){var e=this._svelte.component,n=this._svelte.gradient_l_1[this._svelte.c_index_1];e.set({color:n})}function I(t){var e=this._svelte.component,n=this._svelte.gradient_c_1[this._svelte.c_index_2];e.set({color:n})}function R(t){var e=this._svelte.component,n=this._svelte.gradient_h_1[this._svelte.c_index_3];e.set({color:n})}function B(t){N(this,t),this._state=n({palette:[],color:"#63c0de",visible:!1},t.data),this._recompute({color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1},this._state),this._handlers.destroy=[K];var e=function(){var t=this;t.observe("color",function(e,n){t.get().visible&&e!=n&&t.fire("change",e)}),M=this,window.document.body.addEventListener("click",this.bodyClick)}.bind(this);t.root?this.root._oncreate.push(e):this._oncreate=[e],this._fragment=function(t,e){var n,l,r;function u(t){e.set({visible:!0})}var d=t.visible&&t.color&&D(t,e);return{c:function(){n=a("div"),(l=a("div")).innerHTML='<div class="arrow"></div>',r=s("\n    "),d&&d.c(),this.h()},h:function(){z(n),l.className="base-color-picker color-picker",p(l,"background",t.color+" none repeat scroll 0% 0%"),h(l,"click",u),n.className="color-picker-cont"},m:function(t,e){i(n,t,e),o(l,n),o(r,n),d&&d.m(n,null)},p:function(t,o){t.color&&p(l,"background",o.color+" none repeat scroll 0% 0%"),o.visible&&o.color?d?d.p(t,o):((d=D(o,e)).c(),d.m(n,null)):d&&(d.u(),d.d(),d=null)},u:function(){c(n),d&&d.u()},d:function(){f(l,"click",u),d&&d.d()}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),C(this._oncreate))}function U(t,e,n,o,i){return t&&e?(n?_.unique(t.axes(!0)[n].values()):t.colorKeys?t.colorKeys():t.keys()).map(function(t){var e;return e=t,{key:t=dw.utils.purifyHtml(e,""),defined:void 0!==o[t],color:void 0!==o[t]?Q(o[t],i):"#cccccc"}}):[]}n(B.prototype,T,L),B.prototype._recompute=function(e,n){var o,i,c;e.color&&k(n.gradient_l,n.gradient_l=(o=n.color,i=t(o).lch(),c=O(70,55,7,6).map(function(e){return t.lch(e,i[1],i[2]).hex()}),t.scale(["#000000"].concat(c).concat("#ffffff")).mode("lch").gamma(.8).padding(.1).colors(14)))&&(e.gradient_l=!0),(e.color||e.palette)&&k(n.gradient_c,n.gradient_c=function(e,n){var o=t(e).set("lch.c",120);isNaN(o.get("lch.h"))&&(o=t.lch(o.get("lch.l"),50,t(n[0]).get("lch.h")));var i=t(e).set("lch.c",3);return t.scale([i,o]).mode("lch").gamma(1.2).colors(14)}(n.color,n.palette))&&(e.gradient_c=!0),e.color&&k(n.gradient_h,n.gradient_h=function(e){var n=t(e).lch(),o=O(n[2],75,7,6).map(function(e){return t.lch(n[0],n[1],e).hex()});return t.scale(o).mode("lch").colors(14)}(n.color))&&(e.gradient_h=!0),(e.color||e.gradient_l)&&k(n.nearest_l,n.nearest_l=function(t,e){return $(e,t)}(n.color,n.gradient_l))&&(e.nearest_l=!0),(e.color||e.gradient_c)&&k(n.nearest_c,n.nearest_c=function(t,e){return $(e,t)}(n.color,n.gradient_c))&&(e.nearest_c=!0),(e.color||e.gradient_h)&&k(n.nearest_h,n.nearest_h=function(t,e){return $(e,t)}(n.color,n.gradient_h))&&(e.nearest_h=!0),e.color&&(k(n.textColor,n.textColor=function(e){return t(e).get("lab.l")>60?"black":"white"}(n.color))&&(e.textColor=!0),k(n.borderColor,n.borderColor=function(e){return t(e).darker().hex()}(n.color))&&(e.borderColor=!0))};var F={update:function(t){var e=this.get().palette;this.set({value:J(t,e)})},updateCustom:function(t){var e=this.get(),n=e.selected,o=e.palette,i=e.custom;n.forEach(function(e){return i[e]=J(t,o)}),this.set({custom:i})},toggle:function(t){t.preventDefault(),this.set({expanded:!this.get("expanded")})},toggleSelect:function(t,e){e.preventDefault();var n=this.get().selected,o=n.indexOf(t);e.shiftKey?o>-1?n.splice(o,1):n.push(t):(n.length=1,n[0]=t),this.set({selected:n})},getColor:function(t){return Q(t,this.get().palette)},reset:function(){var t=this.get(),e=t.selected,n=t.custom;e.forEach(function(t){return delete n[t]}),this.set({custom:n})},resetAll:function(){var t=this.get().custom;Object.keys(t).forEach(function(e){return delete t[e]}),this.set({custom:t})},selectAll:function(t){t.preventDefault();var e=this.get(),n=e.selected;e.colorKeys.forEach(function(t){n.indexOf(t.key)<0&&n.push(t.key)}),this.set({selected:n})},selectNone:function(t){t.preventDefault();var e=this.get().selected;e.length=0,this.set({selected:e})},selectInvert:function(t){t.preventDefault();var e=this.get(),n=e.selected,o=e.colorKeys;console.log(n),o.forEach(function(t){var e=n.indexOf(t.key);e<0?n.push(t.key):n.splice(e,1)}),console.log(n),this.set({selected:n})}};function J(t,e){var n=e.indexOf(t);return n>-1?n:t}function Q(t,e){return"number"==typeof t?e[t%e.length]:t}function V(t,e){var o={},i={color:t.hexColor,palette:t.palette};"open"in t&&(i.visible=t.open,o.visible=!0);var c=new B({root:e.root,data:i,_bind:function(t,i){e.get();var c={};!o.visible&&t.visible&&(c.open=i.visible),o=n({},t),e._set(c),o={}}});return e.root._beforecreate.push(function(){e.get();var t=c.get(),n={};t&&(o.visible||(n.open=t.visible),o={visible:!0},e._set(n),o={})}),c.on("change",function(t){e.update(t)}),{c:function(){c._fragment.c()},m:function(t,e){c._mount(t,e)},p:function(t,e){var n={};t.hexColor&&(n.color=e.hexColor),t.palette&&(n.palette=e.palette),!o.visible&&t.open&&(n.visible=e.open,o.visible=!0),c._set(n),o={}},u:function(){c._unmount()},d:function(){c.destroy(!1)}}}function W(t,e){var n,l,r;function s(t){e.toggle(t)}return{c:function(){n=a("span"),(l=a("a")).textContent="customize colors...",this.h()},h:function(){l.href="#customize",l.className=r="btn btn-small custom "+(t.expanded?"btn-primary":""),d(l,"role","button"),h(l,"click",s),n.className="custom-color-selector-head"},m:function(t,e){i(n,t,e),o(l,n)},p:function(t,e){t.expanded&&r!==(r="btn btn-small custom "+(e.expanded?"btn-primary":""))&&(l.className=r)},u:function(){c(n)},d:function(){f(l,"click",s)}}}function X(t,e,n,l,r){var u,d,v,_,m,g,b,x,k=n.defined?"":"×",y=n.key;return{c:function(){u=a("li"),d=a("div"),v=s(k),_=s("\n                    "),m=a("label"),g=s(y),this.h()},h:function(){d.className="color",p(d,"background",n.color),u.className=b=t.selected.indexOf(n.key)>-1?"selected":"",u.dataset.series=x=n.key,h(u,"click",et),u._svelte={component:r,colorKeys_1:e,k_index:l}},m:function(t,e){i(u,t,e),o(d,u),o(v,d),o(_,u),o(m,u),o(g,m)},p:function(t,e,n,o,i){t.colorKeys&&k!==(k=o.defined?"":"×")&&(v.data=k),t.colorKeys&&p(d,"background",o.color),t.colorKeys&&y!==(y=o.key)&&(g.data=y),(t.selected||t.colorKeys)&&b!==(b=e.selected.indexOf(o.key)>-1?"selected":"")&&(u.className=b),t.colorKeys&&x!==(x=o.key)&&(u.dataset.series=x),u._svelte.colorKeys_1=n,u._svelte.k_index=i},u:function(){c(u)},d:function(){f(u,"click",et)}}}function Y(t,e){var l,r,u,d={},v={color:t.customColor,palette:t.palette};"openCustom"in t&&(v.visible=t.openCustom,d.visible=!0);var _=new B({root:e.root,data:v,_bind:function(t,o){e.get();var i={};!d.visible&&t.visible&&(i.openCustom=o.visible),d=n({},t),e._set(i),d={}}});function p(t){e.reset()}return e.root._beforecreate.push(function(){e.get();var t=_.get(),n={};t&&(d.visible||(n.openCustom=t.visible),d={visible:!0},e._set(n),d={})}),_.on("change",function(t){e.updateCustom(t)}),{c:function(){l=a("div"),_._fragment.c(),r=s("\n                "),(u=a("button")).textContent="Reset",this.h()},h:function(){u.className="btn",h(u,"click",p),l.className="select"},m:function(t,e){i(l,t,e),_._mount(l,null),o(r,l),o(u,l)},p:function(t,e){var n={};t.customColor&&(n.color=e.customColor),t.palette&&(n.palette=e.palette),!d.visible&&t.openCustom&&(n.visible=e.openCustom,d.visible=!0),_._set(n),d={}},u:function(){c(l)},d:function(){_.destroy(!1),f(u,"click",p)}}}function Z(t,n){var o;return{c:function(){(o=a("div")).textContent="Please select an element on the left to change colors for individual elements...",this.h()},h:function(){o.className="info"},m:function(t,e){i(o,t,e)},p:e,u:function(){c(o)},d:e}}function tt(t,e){for(var n,l,u,d,v,_,m,g,b,x,k,y,N,C,w,M,L,H,T,K,$=t.colorKeys,O=[],z=0;z<$.length;z+=1)O[z]=X(t,$,$[z],z,e);function E(t){e.selectAll(t)}function S(t){e.selectNone(t)}function A(t){e.selectInvert(t)}var j=nt(t),D=j(t,e);function G(t){e.resetAll()}return{c:function(){n=a("div"),l=a("div"),u=a("div"),(d=a("h4")).textContent="Select element(s):",v=s("\n            "),_=a("ul");for(var t=0;t<O.length;t+=1)O[t].c();m=s("\n            "),g=a("div"),b=s("Select:  \n                "),(x=a("a")).textContent="all",k=s("  \n                "),(y=a("a")).textContent="none",N=s("  \n                "),(C=a("a")).textContent="invert",w=s("\n        "),M=a("div"),(L=a("h4")).textContent="Choose a color:",H=s("\n            "),D.c(),T=s("\n            "),(K=a("button")).textContent="Reset all colors",this.h()},h:function(){_.className="dataseries unstyled",x.href="#/select-all",h(x,"click",E),y.href="#/select-none",h(y,"click",S),C.href="#/select-invert",h(C,"click",A),p(g,"font-size","12px"),p(g,"text-align","center"),p(g,"margin-bottom","10px"),u.className="span2",p(u,"width","43%"),p(K,"margin-top","20px"),K.className="btn",h(K,"click",G),M.className="span2",p(M,"width","42%"),l.className="row",n.className="custom-color-selector-body",p(n,"display","block")},m:function(t,e){i(n,t,e),o(l,n),o(u,l),o(d,u),o(v,u),o(_,u);for(var c=0;c<O.length;c+=1)O[c].m(_,null);o(m,u),o(g,u),o(b,g),o(x,g),o(k,g),o(y,g),o(N,g),o(C,g),o(w,l),o(M,l),o(L,M),o(H,M),D.m(M,null),o(T,M),o(K,M)},p:function(t,n){var o=n.colorKeys;if(t.colorKeys||t.selected){for(var i=0;i<o.length;i+=1)O[i]?O[i].p(t,n,o,o[i],i):(O[i]=X(n,o,o[i],i,e),O[i].c(),O[i].m(_,null));for(;i<O.length;i+=1)O[i].u(),O[i].d();O.length=o.length}j===(j=nt(n))&&D?D.p(t,n):(D.u(),D.d(),(D=j(n,e)).c(),D.m(M,T))},u:function(){c(n);for(var t=0;t<O.length;t+=1)O[t].u();D.u()},d:function(){r(O),f(x,"click",E),f(y,"click",S),f(C,"click",A),D.d(),f(K,"click",G)}}}function et(t){var e=this._svelte.component,n=this._svelte.colorKeys_1[this._svelte.k_index];e.toggleSelect(n.key,t)}function nt(t){return t.selected.length?Y:Z}function ot(t){N(this,t),this._state=n(this.store._init(["vis","theme"]),{open:!1,openCustom:!1,customizable:!1,expanded:!1,selected:[],custom:{}},t.data),this.store._add(this,["vis","theme"]),this._recompute({$theme:1,$vis:1,customizable:1,axis:1,custom:1,palette:1,value:1,selected:1},this._state),this._handlers.destroy=[w];var e,l,r,h,f,d,v,_,m,g,b,x,k=function(){var t=this;this.observe("custom",function(e){e&&0===e.length&&(e={}),t.set({custom:e})})}.bind(this);t.root?this.root._oncreate.push(k):(this._oncreate=[k],this._beforecreate=[],this._aftercreate=[]),this._fragment=(e=this._state,l=this,g=e.hexColor&&V(e,l),b=e.customizable&&W(e,l),x=e.customizable&&e.expanded&&tt(e,l),{c:function(){r=a("div"),h=a("label"),f=s("\n    "),d=a("div"),g&&g.c(),v=s("\n\n        "),b&&b.c(),_=s("\n\n"),x&&x.c(),m=u(),this.h()},h:function(){h.className="control-label",p(h,"width","100px"),d.className="controls",r.className="control-group vis-option-type-color"},m:function(t,n){i(r,t,n),o(h,r),h.innerHTML=e.label,o(f,r),o(d,r),g&&g.m(d,null),o(v,d),b&&b.m(d,null),i(_,t,n),x&&x.m(t,n),i(m,t,n)},p:function(t,e){t.label&&(h.innerHTML=e.label),e.hexColor?g?g.p(t,e):((g=V(e,l)).c(),g.m(d,v)):g&&(g.u(),g.d(),g=null),e.customizable?b?b.p(t,e):((b=W(e,l)).c(),b.m(d,null)):b&&(b.u(),b.d(),b=null),e.customizable&&e.expanded?x?x.p(t,e):((x=tt(e,l)).c(),x.m(m.parentNode,m)):x&&(x.u(),x.d(),x=null)},u:function(){h.innerHTML="",c(r),g&&g.u(),b&&b.u(),c(_),x&&x.u(),c(m)},d:function(){g&&g.d(),b&&b.d(),x&&x.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,C(this._beforecreate),C(this._oncreate),C(this._aftercreate),this._lock=!1)}function it(t){var r,u,h,f,d,v,_,p,m,g,b;N(this,t),this._state=n({},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=(r=this._state,b=this._slotted.default,{c:function(){u=a("div"),h=a("label"),f=a("i"),d=s("\n        "),v=a("i"),_=s("\n        "),p=a("noscript"),m=s("\n\n    "),g=a("div"),this.h()},h:function(){f.className="fa fa-chevron-up expand-group pull-right",v.className="fa fa-chevron-down collapse-group pull-right",h.className="group-title",g.className="option-group-content vis-option-type-chart-description",u.className="vis-option-type-group group-open"},m:function(t,e){i(u,t,e),o(h,u),o(f,h),o(d,h),o(v,h),o(_,h),o(p,h),p.insertAdjacentHTML("afterend",r.label),o(m,u),o(g,u),b&&o(b,g)},p:function(t,e){t.label&&(l(p),p.insertAdjacentHTML("afterend",e.label))},u:function(){l(p),c(u),b&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(g,b)},d:e}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function ct(t){d(t,"svelte-1271772055","")}function lt(t){N(this,t),this._state=n({unit:"",width:"100px"},t.data),this._fragment=function(t,e){var n,l,r,u,d,_,m,g,b,x,k=!1;function y(){e.set({value:v(d.value)})}function N(){e.set({value:v(d.value)})}function C(){k=!0,e.set({value:v(m.value)}),k=!1}return{c:function(){n=a("div"),l=a("label"),r=s("\n    "),u=a("div"),d=a("input"),_=s("  "),m=a("input"),g=s(" "),b=a("span"),x=s(t.unit),this.h()},h:function(){p(l,"width",t.width),l.className="control-label",ct(d),h(d,"input",y),h(d,"change",N),d.type="range",d.min=t.min,d.max=t.max,d.step=t.step,ct(m),h(m,"input",C),m.type="number",m.min=t.min,m.max=t.max,m.step=t.step,ct(b),b.className="unit",u.className="controls",n.className="control-group vis-option-group vis-option-type-number"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(r,n),o(u,n),o(d,u),d.value=t.value,o(_,u),o(m,u),m.value=t.value,o(g,u),o(b,u),o(x,b)},p:function(t,e){t.label&&(l.innerHTML=e.label),t.width&&p(l,"width",e.width),d.value=e.value,d.value=e.value,t.min&&(d.min=e.min),t.max&&(d.max=e.max),t.step&&(d.step=e.step),k||(m.value=e.value),t.min&&(m.min=e.min),t.max&&(m.max=e.max),t.step&&(m.step=e.step),t.unit&&(x.data=e.unit)},u:function(){l.innerHTML="",c(n)},d:function(){f(d,"input",y),f(d,"change",N),f(m,"input",C)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function rt(t,e,n,l,r){var u,d,v,_,p,m=n.label;function g(){r.set({value:d.__value})}return{c:function(){u=a("label"),d=a("input"),_=s(" "),p=s(m),this.h()},h:function(){r._bindingGroups[0].push(d),h(d,"change",g),d.type="radio",d.__value=v=n.value,d.value=d.__value,u.className="radio"},m:function(e,n){i(u,e,n),o(d,u),d.checked=d.__value===t.value,o(_,u),o(p,u)},p:function(t,e,n,o,i){d.checked=d.__value===e.value,t.options&&v!==(v=o.value)&&(d.__value=v),d.value=d.__value,t.options&&m!==(m=o.label)&&(p.data=m)},u:function(){c(u)},d:function(){r._bindingGroups[0].splice(r._bindingGroups[0].indexOf(d),1),f(d,"change",g)}}}function at(t){N(this,t),this._state=n({},t.data),this._bindingGroups=[[]],this._fragment=function(t,e){for(var n,l,u,h,f=t.options,d=[],v=0;v<f.length;v+=1)d[v]=rt(t,0,f[v],0,e);return{c:function(){n=a("div"),l=a("label"),u=s("\n\n    "),h=a("div");for(var t=0;t<d.length;t+=1)d[t].c();this.h()},h:function(){l.className="control-label",h.className="controls form-inline",n.className="control-group vis-option-group vis-option-type-radio"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(u,n),o(h,n);for(var r=0;r<d.length;r+=1)d[r].m(h,null)},p:function(t,n){t.label&&(l.innerHTML=n.label);var o=n.options;if(t.options||t.value){for(var i=0;i<o.length;i+=1)d[i]?d[i].p(t,n,o,o[i],i):(d[i]=rt(n,0,o[i],0,e),d[i].c(),d[i].m(h,null));for(;i<d.length;i+=1)d[i].u(),d[i].d();d.length=o.length}},u:function(){l.innerHTML="",c(n);for(var t=0;t<d.length;t+=1)d[t].u()},d:function(){r(d)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function st(t,n,l,r,u){var h,f,d,v=l.label;return{c:function(){h=a("option"),f=s(v),this.h()},h:function(){h.__value=d=l.value,h.value=h.__value},m:function(t,e){i(h,t,e),o(f,h)},p:function(t,e,n,o,i){t.options&&v!==(v=o.label)&&(f.data=v),t.options&&d!==(d=o.value)&&(h.__value=d),h.value=h.__value},u:function(){c(h)},d:e}}function ut(t){N(this,t),this._state=n({width:"auto"},t.data),t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){for(var n,l,u,d,v,_=!1,b=t.options,x=[],k=0;k<b.length;k+=1)x[k]=st(0,0,b[k]);function y(){_=!0,e.set({value:g(v)}),_=!1}return{c:function(){n=a("div"),l=a("label"),u=s("\n\n    "),d=a("div"),v=a("select");for(var t=0;t<x.length;t+=1)x[t].c();this.h()},h:function(){l.className="control-label",h(v,"change",y),"value"in t||e.root._beforecreate.push(y),p(v,"width",t.width),d.className="controls form-inline",n.className="control-group vis-option-type-select"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(u,n),o(d,n),o(v,d);for(var r=0;r<x.length;r+=1)x[r].m(v,null);m(v,t.value)},p:function(t,e){t.label&&(l.innerHTML=e.label);var n=e.options;if(t.options){for(var o=0;o<n.length;o+=1)x[o]?x[o].p(t,e,n,n[o],o):(x[o]=st(0,0,n[o]),x[o].c(),x[o].m(v,null));for(;o<x.length;o+=1)x[o].u(),x[o].d();x.length=n.length}_||m(v,e.value),t.width&&p(v,"width",e.width)},u:function(){l.innerHTML="",c(n);for(var t=0;t<x.length;t+=1)x[t].u()},d:function(){r(x),f(v,"change",y)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),C(this._beforecreate))}function ht(t){d(t,"svelte-457672338","")}function ft(t,n){var l,r,u=t.axis["na-label"]||"--";return{c:function(){l=a("option"),r=s(u),this.h()},h:function(){l.__value="-",l.value=l.__value},m:function(t,e){i(l,t,e),o(r,l)},p:function(t,e){t.axis&&u!==(u=e.axis["na-label"]||"--")&&(r.data=u)},u:function(){c(l)},d:e}}function dt(t,n,l,r,u){var h,f,d,v=l.name;return{c:function(){h=a("option"),f=s(v),this.h()},h:function(){h.__value=d=l.name,h.value=h.__value},m:function(t,e){i(h,t,e),o(f,h)},p:function(t,e,n,o,i){t.columns&&v!==(v=o.name)&&(f.data=v),t.columns&&d!==(d=o.name)&&(h.__value=d),h.value=h.__value},u:function(){c(h)},d:e}}function vt(t){N(this,t),this._state=n(this.store._init(["visMeta","dataset"]),{selected:!1},t.data),this.store._add(this,["visMeta","dataset"]),this._recompute({axis:1,$visMeta:1,$dataset:1},this._state),this._handlers.destroy=[w];var e=function(){var t=this;t.observe("selected",function(e){if(e){var n=t.get().axis,o=_.clone(window.chart.get("metadata.axes",{}));"-"==e?delete o[n]:o[n]=e,window.chart.set("metadata.axes",o)}}),t.store.observe("visMeta",function(e){var n=t.get(),o=n.selected,i=n.axis;!o&&e&&(o=window.chart.get("metadata.axes")[i],t.set({selected:o}))})}.bind(this);t.root?this.root._oncreate.push(e):(this._oncreate=[e],this._beforecreate=[]),this._fragment=function(t,e){for(var n,l,d,v,_,p,b=!1,x=t.$visMeta&&t.$visMeta.axes[t.axis].optional&&ft(t),k=t.columns,y=[],N=0;N<k.length;N+=1)y[N]=dt(0,0,k[N]);function C(){b=!0,e.set({selected:g(_)}),b=!1}return{c:function(){n=a("div"),l=a("label"),d=s("\n\n    "),v=a("div"),_=a("select"),x&&x.c(),p=u();for(var t=0;t<y.length;t+=1)y[t].c();this.h()},h:function(){ht(l),l.className="control-label",ht(_),h(_,"change",C),"selected"in t||e.root._beforecreate.push(C),v.className="controls form-inline",n.className="control-group vis-option-group"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(d,n),o(v,n),o(_,v),x&&x.m(_,null),o(p,_);for(var r=0;r<y.length;r+=1)y[r].m(_,null);m(_,t.selected)},p:function(t,e){t.label&&(l.innerHTML=e.label),e.$visMeta&&e.$visMeta.axes[e.axis].optional?x?x.p(t,e):((x=ft(e)).c(),x.m(_,p)):x&&(x.u(),x.d(),x=null);var n=e.columns;if(t.columns){for(var o=0;o<n.length;o+=1)y[o]?y[o].p(t,e,n,n[o],o):(y[o]=dt(0,0,n[o]),y[o].c(),y[o].m(_,null));for(;o<y.length;o+=1)y[o].u(),y[o].d();y.length=n.length}b||m(_,e.selected)},u:function(){l.innerHTML="",c(n),x&&x.u();for(var t=0;t<y.length;t+=1)y[t].u()},d:function(){x&&x.d(),r(y),f(_,"change",C)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),C(this._beforecreate),C(this._oncreate))}return n(ot.prototype,F,L),ot.prototype._recompute=function(e,n){var o,i;e.$theme&&k(n.palette,n.palette=n.$theme.colors.palette)&&(e.palette=!0),(e.$vis||e.customizable||e.axis||e.custom||e.palette)&&k(n.colorKeys,n.colorKeys=U(n.$vis,n.customizable,n.axis,n.custom,n.palette))&&(e.colorKeys=!0),(e.value||e.palette)&&k(n.hexColor,n.hexColor=(o=n.value,i=n.palette,Q(o,i)))&&(e.hexColor=!0),(e.selected||e.palette||e.custom)&&k(n.customColor,n.customColor=function(e,n,o){if(void 0===o[e[0]])return"#ccc";var i=e.filter(function(t){return void 0!==o[t]}).map(function(t){return Q(o[t],n)});return i.length?t.average(i,"lab"):"#ccc"}(n.selected,n.palette,n.custom))&&(e.customColor=!0)},n(it.prototype,L),n(lt.prototype,L),n(at.prototype,L),n(ut.prototype,L),n(vt.prototype,L),vt.prototype._recompute=function(t,e){(t.axis||t.$visMeta||t.$dataset)&&k(e.columns,e.columns=function(t,e,n){var o=[];return n&&e&&t?(n.eachColumn(function(n){_.indexOf(e.axes[t].accepts,n.type())>-1&&o.push({name:n.name()})}),o):[]}(e.axis,e.$visMeta,e.$dataset))&&(t.columns=!0)},{Checkbox:H,Color:ot,ColorPicker:B,Group:it,NumberInput:lt,Radio:at,Select:ut,SelectAxisColumn:vt}});
