!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chroma")):"function"==typeof define&&define.amd?define(["chroma"],e):t.controls=e(t.chroma)}(this,function(t){"use strict";function e(){}function n(t){for(var e,n,o=arguments,i=1,c=arguments.length;i<c;i++)for(e in n=o[i])t[e]=n[e];return t}function o(t,e){e.appendChild(t)}function i(t,e,n){e.insertBefore(t,n)}function c(t){t.parentNode.removeChild(t)}function l(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}function r(t){for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling)}function a(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function s(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return document.createComment("")}function h(t,e,n){t.addEventListener(e,n,!1)}function d(t,e,n){t.removeEventListener(e,n,!1)}function v(t,e,n){t.setAttribute(e,n)}function m(t){return""===t?void 0:+t}function p(t,e,n){t.style.setProperty(e,n)}function g(t,e){for(var n=0;n<t.options.length;n+=1){var o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function b(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function x(){return Object.create(null)}function y(t){this.destroy=e,this.fire("destroy"),this.set=this.get=e,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function k(t,e){return t!==e||t&&"object"==typeof t||"function"==typeof t}function N(t,e,n,o,i){for(var c in e)if(n[c]){var l=o[c],r=i[c],a=e[c];if(a)for(var s=0;s<a.length;s+=1){var u=a[s];u.__calling||(u.__calling=!0,u.call(t,l,r),u.__calling=!1)}}}function C(t,e){t._observers={pre:x(),post:x()},t._handlers=x(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function M(t){for(;t&&t.length;)t.pop()()}function w(){this.store._remove(this)}t=t&&t.hasOwnProperty("default")?t.default:t;var H,L={destroy:y,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1)n[o].call(this,e)},observe:function(t,e,n){var o=n&&n.defer?this._observers.post:this._observers.pre;return(o[t]||(o[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=o[t].indexOf(e);~n&&o[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||(this.root._lock=!0,M(this.root._beforecreate),M(this.root._oncreate),M(this.root._aftercreate),this.root._lock=!1)},teardown:y,_recompute:e,_set:function(t){var e=this._state,o={},i=!1;for(var c in t)k(t[c],e[c])&&(o[c]=i=!0);i&&(this._state=n({},e,t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(N(this,this._observers.pre,o,this._state,e),this._fragment.p(o,this._state),N(this,this._observers.post,o,this._state,e)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()}};function T(t){C(this,t),this._state=n({},t.data),this._fragment=function(t,e){var n,l,r,a,f;function v(){e.set({value:r.checked})}return{c:function(){n=s("div"),l=s("label"),r=s("input"),a=u(" "),f=u(t.label),this.h()},h:function(){h(r,"change",v),r.type="checkbox",l.className="checkbox",p(l,"text-align","left"),p(l,"width","100%"),p(l,"position","relative"),p(l,"left","0"),n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(e,c){i(n,e,c),o(l,n),o(r,l),r.checked=t.value,o(a,l),o(f,l)},p:function(t,e){r.checked=e.value,t.label&&(f.data=e.label)},u:function(){c(n)},d:function(){d(r,"change",v)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}n(T.prototype,L);var $={bodyClick:function(t){if(H.get){var e=H.get().visible,n=t.target;if(e){for(;!n.classList.contains("color-picker-cont")&&"body"!=n.nodeName.toLowerCase();)n=n.parentNode;H.set({visible:n!=window.document.body})}}}};function Y(){window.document.body.removeEventListener("click",this.bodyClick)}function K(e,n){var o=-1,i=999999;return e[0]==e[1]?"-":(e.forEach(function(e,c){var l=t.distance(e,n,"lab");l<i&&(i=l,o=c)}),e[o])}function A(t,e,n,o,i){var c=[t],l=e/n,r=0;for(o=_.isUndefined(o)?n:o,i=i||1;n-- >0;)r+=l,c.unshift(t-r),o-- >0&&c.push(t+r);return c}function j(t){v(t,"svelte-1718989465","")}function O(t,e,n,o,l){var r,a;return{c:function(){r=s("div"),this.h()},h:function(){r.className="color",r.dataset.color=a=n,p(r,"background",n),h(r,"click",Q),h(r,"dblclick",D),r._svelte={component:l,palette:e,c_index:o}},m:function(t,e){i(r,t,e)},p:function(t,e,n,o,i){t.palette&&a!==(a=o)&&(r.dataset.color=a),t.palette&&p(r,"background",o),r._svelte.palette=n,r._svelte.c_index=i},u:function(){c(r)},d:function(){d(r,"click",Q),d(r,"dblclick",D)}}}function S(t,e,n,o,l){var r,a,u;return{c:function(){r=s("div"),this.h()},h:function(){j(r),r.className=a="color "+(n==t.nearest_l?"selected":""),r.dataset.color=u=n,p(r,"background",n),h(r,"click",G),r._svelte={component:l,gradient_l_1:e,c_index_1:o}},m:function(t,e){i(r,t,e)},p:function(t,e,n,o,i){(t.gradient_l||t.nearest_l)&&a!==(a="color "+(o==e.nearest_l?"selected":""))&&(r.className=a),t.gradient_l&&u!==(u=o)&&(r.dataset.color=u),t.gradient_l&&p(r,"background",o),r._svelte.gradient_l_1=n,r._svelte.c_index_1=i},u:function(){c(r)},d:function(){d(r,"click",G)}}}function z(t,e,n,o,l){var r,a,u;return{c:function(){r=s("div"),this.h()},h:function(){j(r),r.className=a="color "+(n==t.nearest_c?"selected":""),r.dataset.color=u=n,p(r,"background",n),h(r,"click",P),r._svelte={component:l,gradient_c_1:e,c_index_2:o}},m:function(t,e){i(r,t,e)},p:function(t,e,n,o,i){(t.gradient_c||t.nearest_c)&&a!==(a="color "+(o==e.nearest_c?"selected":""))&&(r.className=a),t.gradient_c&&u!==(u=o)&&(r.dataset.color=u),t.gradient_c&&p(r,"background",o),r._svelte.gradient_c_1=n,r._svelte.c_index_2=i},u:function(){c(r)},d:function(){d(r,"click",P)}}}function E(t,e,n,o,l){var r,a,u;return{c:function(){r=s("div"),this.h()},h:function(){j(r),r.className=a="color "+(n==t.nearest_h?"selected":""),r.dataset.color=u=n,p(r,"background",n),h(r,"click",q),r._svelte={component:l,gradient_h_1:e,c_index_3:o}},m:function(t,e){i(r,t,e)},p:function(t,e,n,o,i){(t.gradient_h||t.nearest_h)&&a!==(a="color "+(o==e.nearest_h?"selected":""))&&(r.className=a),t.gradient_h&&u!==(u=o)&&(r.dataset.color=u),t.gradient_h&&p(r,"background",o),r._svelte.gradient_h_1=n,r._svelte.c_index_3=i},u:function(){c(r)},d:function(){d(r,"click",q)}}}function F(t,e){for(var n,l,r,f,v,m,_,g,b,x,y,k,N,C,M,w=!1,H=t.palette,L=[],T=0;T<H.length;T+=1)L[T]=O(0,H,H[T],T,e);var $=t.gradient_l,Y=[];for(T=0;T<$.length;T+=1)Y[T]=S(t,$,$[T],T,e);var K=t.gradient_c,A=[];for(T=0;T<K.length;T+=1)A[T]=z(t,K,K[T],T,e);var F=t.gradient_h,Q=[];for(T=0;T<F.length;T+=1)Q[T]=E(t,F,F[T],T,e);function D(){w=!0,e.set({color:y.value}),w=!1}function G(t){e.set({visible:!1})}return{c:function(){n=s("div"),l=s("div");for(var t=0;t<L.length;t+=1)L[t].c();r=u("\n\n        "),f=s("div");for(t=0;t<Y.length;t+=1)Y[t].c();v=u("\n        "),m=s("div");for(t=0;t<A.length;t+=1)A[t].c();_=u("\n        "),g=s("div");for(t=0;t<Q.length;t+=1)Q[t].c();b=u("\n\n        "),x=s("div"),y=s("input"),k=u("\n            "),(N=s("button")).innerHTML='<i class="icon-ok"></i>',C=u("\n            "),M=s("div"),this.h()},h:function(){l.className="palette",f.className="color-axis lightness",m.className="color-axis saturation",g.className="color-axis hue",j(y),h(y,"input",D),y.type="text",p(y,"background",t.color),p(y,"border-color",t.borderColor),p(y,"color",t.textColor),y.className="hex",N.className="btn btn-small ok",h(N,"click",G),M.className="color selected",p(M,"background",t.color),x.className="footer",n.className="color-selector"},m:function(e,c){i(n,e,c),o(l,n);for(var a=0;a<L.length;a+=1)L[a].m(l,null);o(r,n),o(f,n);for(a=0;a<Y.length;a+=1)Y[a].m(f,null);o(v,n),o(m,n);for(a=0;a<A.length;a+=1)A[a].m(m,null);o(_,n),o(g,n);for(a=0;a<Q.length;a+=1)Q[a].m(g,null);o(b,n),o(x,n),o(y,x),y.value=t.color,o(k,x),o(N,x),o(C,x),o(M,x)},p:function(t,n){var o=n.palette;if(t.palette){for(var i=0;i<o.length;i+=1)L[i]?L[i].p(t,n,o,o[i],i):(L[i]=O(0,o,o[i],i,e),L[i].c(),L[i].m(l,null));for(;i<L.length;i+=1)L[i].u(),L[i].d();L.length=o.length}var c=n.gradient_l;if(t.gradient_l||t.nearest_l){for(i=0;i<c.length;i+=1)Y[i]?Y[i].p(t,n,c,c[i],i):(Y[i]=S(n,c,c[i],i,e),Y[i].c(),Y[i].m(f,null));for(;i<Y.length;i+=1)Y[i].u(),Y[i].d();Y.length=c.length}var r=n.gradient_c;if(t.gradient_c||t.nearest_c){for(i=0;i<r.length;i+=1)A[i]?A[i].p(t,n,r,r[i],i):(A[i]=z(n,r,r[i],i,e),A[i].c(),A[i].m(m,null));for(;i<A.length;i+=1)A[i].u(),A[i].d();A.length=r.length}var a=n.gradient_h;if(t.gradient_h||t.nearest_h){for(i=0;i<a.length;i+=1)Q[i]?Q[i].p(t,n,a,a[i],i):(Q[i]=E(n,a,a[i],i,e),Q[i].c(),Q[i].m(g,null));for(;i<Q.length;i+=1)Q[i].u(),Q[i].d();Q.length=a.length}w||(y.value=n.color),t.color&&p(y,"background",n.color),t.borderColor&&p(y,"border-color",n.borderColor),t.textColor&&p(y,"color",n.textColor),t.color&&p(M,"background",n.color)},u:function(){c(n);for(var t=0;t<L.length;t+=1)L[t].u();for(t=0;t<Y.length;t+=1)Y[t].u();for(t=0;t<A.length;t+=1)A[t].u();for(t=0;t<Q.length;t+=1)Q[t].u()},d:function(){a(L),a(Y),a(A),a(Q),d(y,"input",D),d(N,"click",G)}}}function Q(t){var e=this._svelte.component,n=this._svelte.palette[this._svelte.c_index];e.set({color:n})}function D(t){var e=this._svelte.component,n=this._svelte.palette[this._svelte.c_index];e.set({color:n,visible:!1})}function G(t){var e=this._svelte.component,n=this._svelte.gradient_l_1[this._svelte.c_index_1];e.set({color:n})}function P(t){var e=this._svelte.component,n=this._svelte.gradient_c_1[this._svelte.c_index_2];e.set({color:n})}function q(t){var e=this._svelte.component,n=this._svelte.gradient_h_1[this._svelte.c_index_3];e.set({color:n})}function I(t){C(this,t),this._state=n({palette:[],color:"#63c0de",visible:!1},t.data),this._recompute({color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1},this._state),this._handlers.destroy=[Y];var e=function(){var t=this;t.observe("color",function(e,n){t.get().visible&&e!=n&&t.fire("change",e)}),H=this,window.document.body.addEventListener("click",this.bodyClick)}.bind(this);t.root?this.root._oncreate.push(e):this._oncreate=[e],this._fragment=function(t,e){var n,l,r;function a(t){e.set({visible:!0})}var f=t.visible&&t.color&&F(t,e);return{c:function(){n=s("div"),(l=s("div")).innerHTML='<div class="arrow"></div>',r=u("\n    "),f&&f.c(),this.h()},h:function(){j(n),l.className="base-color-picker color-picker",p(l,"background",t.color+" none repeat scroll 0% 0%"),h(l,"click",a),n.className="color-picker-cont"},m:function(t,e){i(n,t,e),o(l,n),o(r,n),f&&f.m(n,null)},p:function(t,o){t.color&&p(l,"background",o.color+" none repeat scroll 0% 0%"),o.visible&&o.color?f?f.p(t,o):((f=F(o,e)).c(),f.m(n,null)):f&&(f.u(),f.d(),f=null)},u:function(){c(n),f&&f.u()},d:function(){d(l,"click",a),f&&f.d()}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),M(this._oncreate))}function R(t,e,n,o,i){return t&&e?(n?_.unique(t.axes(!0)[n].values()):t.colorKeys?t.colorKeys():t.keys()).map(function(t){var e;return e=t,{key:t=dw.utils.purifyHtml(e,""),defined:void 0!==o[t],color:void 0!==o[t]?J(o[t],i):"#cccccc"}}):[]}n(I.prototype,$,L),I.prototype._recompute=function(e,n){var o,i,c;e.color&&k(n.gradient_l,n.gradient_l=(o=n.color,i=t(o).lch(),c=A(70,55,7,6).map(function(e){return t.lch(e,i[1],i[2]).hex()}),t.scale(["#000000"].concat(c).concat("#ffffff")).mode("lch").gamma(.8).padding(.1).colors(14)))&&(e.gradient_l=!0),(e.color||e.palette)&&k(n.gradient_c,n.gradient_c=function(e,n){var o=t(e).set("lch.c",120);isNaN(o.get("lch.h"))&&(o=t.lch(o.get("lch.l"),50,t(n[0]).get("lch.h")));var i=t(e).set("lch.c",3);return t.scale([i,o]).mode("lch").gamma(1.2).colors(14)}(n.color,n.palette))&&(e.gradient_c=!0),e.color&&k(n.gradient_h,n.gradient_h=function(e){var n=t(e).lch(),o=A(n[2],75,7,6).map(function(e){return t.lch(n[0],n[1],e).hex()});return t.scale(o).mode("lch").colors(14)}(n.color))&&(e.gradient_h=!0),(e.color||e.gradient_l)&&k(n.nearest_l,n.nearest_l=function(t,e){return K(e,t)}(n.color,n.gradient_l))&&(e.nearest_l=!0),(e.color||e.gradient_c)&&k(n.nearest_c,n.nearest_c=function(t,e){return K(e,t)}(n.color,n.gradient_c))&&(e.nearest_c=!0),(e.color||e.gradient_h)&&k(n.nearest_h,n.nearest_h=function(t,e){return K(e,t)}(n.color,n.gradient_h))&&(e.nearest_h=!0),e.color&&(k(n.textColor,n.textColor=function(e){return t(e).get("lab.l")>60?"black":"white"}(n.color))&&(e.textColor=!0),k(n.borderColor,n.borderColor=function(e){return t(e).darker().hex()}(n.color))&&(e.borderColor=!0))};var B={update:function(t){var e=this.get().palette;this.set({value:U(t,e)})},updateCustom:function(t){var e=this.get(),n=e.selected,o=e.palette,i=e.custom;n.forEach(function(e){return i[e]=U(t,o)}),this.set({custom:i})},toggle:function(t){t.preventDefault(),this.set({expanded:!this.get("expanded")})},toggleSelect:function(t,e){e.preventDefault();var n=this.get().selected,o=n.indexOf(t);e.shiftKey?o>-1?n.splice(o,1):n.push(t):(n.length=1,n[0]=t),this.set({selected:n})},getColor:function(t){return J(t,this.get().palette)},reset:function(){var t=this.get(),e=t.selected,n=t.custom;e.forEach(function(t){return delete n[t]}),this.set({custom:n})},resetAll:function(){var t=this.get().custom;Object.keys(t).forEach(function(e){return delete t[e]}),this.set({custom:t})},selectAll:function(t){t.preventDefault();var e=this.get(),n=e.selected;e.colorKeys.forEach(function(t){n.indexOf(t.key)<0&&n.push(t.key)}),this.set({selected:n})},selectNone:function(t){t.preventDefault();var e=this.get().selected;e.length=0,this.set({selected:e})},selectInvert:function(t){t.preventDefault();var e=this.get(),n=e.selected,o=e.colorKeys;console.log(n),o.forEach(function(t){var e=n.indexOf(t.key);e<0?n.push(t.key):n.splice(e,1)}),console.log(n),this.set({selected:n})}};function U(t,e){var n=e.indexOf(t);return n>-1?n:t}function J(t,e){return"number"==typeof t?e[t%e.length]:t}function V(t,e){var o={},i={color:t.hexColor,palette:t.palette};"open"in t&&(i.visible=t.open,o.visible=!0);var c=new I({root:e.root,data:i,_bind:function(t,i){e.get();var c={};!o.visible&&t.visible&&(c.open=i.visible),o=n({},t),e._set(c),o={}}});return e.root._beforecreate.push(function(){e.get();var t=c.get(),n={};t&&(o.visible||(n.open=t.visible),o={visible:!0},e._set(n),o={})}),c.on("change",function(t){e.update(t)}),{c:function(){c._fragment.c()},m:function(t,e){c._mount(t,e)},p:function(t,e){var n={};t.hexColor&&(n.color=e.hexColor),t.palette&&(n.palette=e.palette),!o.visible&&t.open&&(n.visible=e.open,o.visible=!0),c._set(n),o={}},u:function(){c._unmount()},d:function(){c.destroy(!1)}}}function W(t,e){var n,l,r;function a(t){e.toggle(t)}return{c:function(){n=s("span"),(l=s("a")).textContent="customize colors...",this.h()},h:function(){l.href="#customize",l.className=r="btn btn-small custom "+(t.expanded?"btn-primary":""),v(l,"role","button"),h(l,"click",a),n.className="custom-color-selector-head"},m:function(t,e){i(n,t,e),o(l,n)},p:function(t,e){t.expanded&&r!==(r="btn btn-small custom "+(e.expanded?"btn-primary":""))&&(l.className=r)},u:function(){c(n)},d:function(){d(l,"click",a)}}}function X(t,e,n,l,r){var a,f,v,m,_,g,b,x,y=n.defined?"":"×",k=n.key;return{c:function(){a=s("li"),f=s("div"),v=u(y),m=u("\n                    "),_=s("label"),g=u(k),this.h()},h:function(){f.className="color",p(f,"background",n.color),a.className=b=t.selected.indexOf(n.key)>-1?"selected":"",a.dataset.series=x=n.key,h(a,"click",nt),a._svelte={component:r,colorKeys_1:e,k_index:l}},m:function(t,e){i(a,t,e),o(f,a),o(v,f),o(m,a),o(_,a),o(g,_)},p:function(t,e,n,o,i){t.colorKeys&&y!==(y=o.defined?"":"×")&&(v.data=y),t.colorKeys&&p(f,"background",o.color),t.colorKeys&&k!==(k=o.key)&&(g.data=k),(t.selected||t.colorKeys)&&b!==(b=e.selected.indexOf(o.key)>-1?"selected":"")&&(a.className=b),t.colorKeys&&x!==(x=o.key)&&(a.dataset.series=x),a._svelte.colorKeys_1=n,a._svelte.k_index=i},u:function(){c(a)},d:function(){d(a,"click",nt)}}}function Z(t,e){var l,r,a,f={},v={color:t.customColor,palette:t.palette};"openCustom"in t&&(v.visible=t.openCustom,f.visible=!0);var m=new I({root:e.root,data:v,_bind:function(t,o){e.get();var i={};!f.visible&&t.visible&&(i.openCustom=o.visible),f=n({},t),e._set(i),f={}}});function p(t){e.reset()}return e.root._beforecreate.push(function(){e.get();var t=m.get(),n={};t&&(f.visible||(n.openCustom=t.visible),f={visible:!0},e._set(n),f={})}),m.on("change",function(t){e.updateCustom(t)}),{c:function(){l=s("div"),m._fragment.c(),r=u("\n                "),(a=s("button")).textContent="Reset",this.h()},h:function(){a.className="btn",h(a,"click",p),l.className="select"},m:function(t,e){i(l,t,e),m._mount(l,null),o(r,l),o(a,l)},p:function(t,e){var n={};t.customColor&&(n.color=e.customColor),t.palette&&(n.palette=e.palette),!f.visible&&t.openCustom&&(n.visible=e.openCustom,f.visible=!0),m._set(n),f={}},u:function(){c(l)},d:function(){m.destroy(!1),d(a,"click",p)}}}function tt(t,n){var o;return{c:function(){(o=s("div")).textContent="Please select an element on the left to change colors for individual elements...",this.h()},h:function(){o.className="info"},m:function(t,e){i(o,t,e)},p:e,u:function(){c(o)},d:e}}function et(t,e){for(var n,l,r,f,v,m,_,g,b,x,y,k,N,C,M,w,H,L,T,$,Y=t.colorKeys,K=[],A=0;A<Y.length;A+=1)K[A]=X(t,Y,Y[A],A,e);function j(t){e.selectAll(t)}function O(t){e.selectNone(t)}function S(t){e.selectInvert(t)}var z=ot(t),E=z(t,e);function F(t){e.resetAll()}return{c:function(){n=s("div"),l=s("div"),r=s("div"),(f=s("h4")).textContent="Select element(s):",v=u("\n            "),m=s("ul");for(var t=0;t<K.length;t+=1)K[t].c();_=u("\n            "),g=s("div"),b=u("Select:  \n                "),(x=s("a")).textContent="all",y=u("  \n                "),(k=s("a")).textContent="none",N=u("  \n                "),(C=s("a")).textContent="invert",M=u("\n        "),w=s("div"),(H=s("h4")).textContent="Choose a color:",L=u("\n            "),E.c(),T=u("\n            "),($=s("button")).textContent="Reset all colors",this.h()},h:function(){m.className="dataseries unstyled",x.href="#/select-all",h(x,"click",j),k.href="#/select-none",h(k,"click",O),C.href="#/select-invert",h(C,"click",S),p(g,"font-size","12px"),p(g,"text-align","center"),p(g,"margin-bottom","10px"),r.className="span2",p(r,"width","43%"),p($,"margin-top","20px"),$.className="btn",h($,"click",F),w.className="span2",p(w,"width","42%"),l.className="row",n.className="custom-color-selector-body",p(n,"display","block")},m:function(t,e){i(n,t,e),o(l,n),o(r,l),o(f,r),o(v,r),o(m,r);for(var c=0;c<K.length;c+=1)K[c].m(m,null);o(_,r),o(g,r),o(b,g),o(x,g),o(y,g),o(k,g),o(N,g),o(C,g),o(M,l),o(w,l),o(H,w),o(L,w),E.m(w,null),o(T,w),o($,w)},p:function(t,n){var o=n.colorKeys;if(t.colorKeys||t.selected){for(var i=0;i<o.length;i+=1)K[i]?K[i].p(t,n,o,o[i],i):(K[i]=X(n,o,o[i],i,e),K[i].c(),K[i].m(m,null));for(;i<K.length;i+=1)K[i].u(),K[i].d();K.length=o.length}z===(z=ot(n))&&E?E.p(t,n):(E.u(),E.d(),(E=z(n,e)).c(),E.m(w,T))},u:function(){c(n);for(var t=0;t<K.length;t+=1)K[t].u();E.u()},d:function(){a(K),d(x,"click",j),d(k,"click",O),d(C,"click",S),E.d(),d($,"click",F)}}}function nt(t){var e=this._svelte.component,n=this._svelte.colorKeys_1[this._svelte.k_index];e.toggleSelect(n.key,t)}function ot(t){return t.selected.length?Z:tt}function it(t){C(this,t),this._state=n(this.store._init(["vis","theme"]),{open:!1,openCustom:!1,customizable:!1,expanded:!1,selected:[],custom:{}},t.data),this.store._add(this,["vis","theme"]),this._recompute({$theme:1,$vis:1,customizable:1,axis:1,custom:1,palette:1,value:1,selected:1},this._state),this._handlers.destroy=[w];var e,l,r,a,h,d,v,m,_,g,b,x,y=function(){var t=this;this.observe("custom",function(e){e&&0===e.length&&(e={}),t.set({custom:e})})}.bind(this);t.root?this.root._oncreate.push(y):(this._oncreate=[y],this._beforecreate=[],this._aftercreate=[]),this._fragment=(e=this._state,l=this,g=e.hexColor&&V(e,l),b=e.customizable&&W(e,l),x=e.customizable&&e.expanded&&et(e,l),{c:function(){r=s("div"),a=s("label"),h=u("\n    "),d=s("div"),g&&g.c(),v=u("\n\n        "),b&&b.c(),m=u("\n\n"),x&&x.c(),_=f(),this.h()},h:function(){a.className="control-label",p(a,"width","100px"),d.className="controls",r.className="control-group vis-option-type-color"},m:function(t,n){i(r,t,n),o(a,r),a.innerHTML=e.label,o(h,r),o(d,r),g&&g.m(d,null),o(v,d),b&&b.m(d,null),i(m,t,n),x&&x.m(t,n),i(_,t,n)},p:function(t,e){t.label&&(a.innerHTML=e.label),e.hexColor?g?g.p(t,e):((g=V(e,l)).c(),g.m(d,v)):g&&(g.u(),g.d(),g=null),e.customizable?b?b.p(t,e):((b=W(e,l)).c(),b.m(d,null)):b&&(b.u(),b.d(),b=null),e.customizable&&e.expanded?x?x.p(t,e):((x=et(e,l)).c(),x.m(_.parentNode,_)):x&&(x.u(),x.d(),x=null)},u:function(){a.innerHTML="",c(r),g&&g.u(),b&&b.u(),c(m),x&&x.u(),c(_)},d:function(){g&&g.d(),b&&b.d(),x&&x.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}function ct(t){v(t,"svelte-1035002555","")}function lt(t,n){var r,a,f,h,d;return{c:function(){r=s("div"),a=u("For help on custom formats, check the "),f=s("noscript"),h=s("noscript"),d=u("."),this.h()},h:function(){ct(r),r.className="small"},m:function(e,n){i(r,e,n),o(a,r),o(f,r),f.insertAdjacentHTML("afterend",t.customFormatHelp),o(h,r),o(d,r)},p:function(t,e){t.customFormatHelp&&(l(f,h),f.insertAdjacentHTML("afterend",e.customFormatHelp))},u:function(){l(f,h),c(r)},d:e}}function rt(t,n,l,r,a){var f,h,d,v=l.l;return{c:function(){f=s("option"),h=u(v),this.h()},h:function(){f.__value=d=l.f,f.value=f.__value},m:function(t,e){i(f,t,e),o(h,f)},p:function(t,e,n,o,i){t.options&&v!==(v=o.l)&&(h.data=v),t.options&&d!==(d=o.f)&&(f.__value=d),f.value=f.__value},u:function(){c(f)},d:e}}function at(t,e){var n,o=!1;function l(){o=!0,e.set({custom:n.value}),o=!1}return{c:function(){n=s("input"),this.h()},h:function(){ct(n),h(n,"input",l),n.type="text"},m:function(e,o){i(n,e,o),n.value=t.custom},p:function(t,e){o||(n.value=e.custom)},u:function(){c(n)},d:function(){d(n,"input",l)}}}function st(t){C(this,t),this._state=n(this.store._init(["vis","dataset"]),{axis:!1,value:"",custom:"",selected:null},t.data),this.store._add(this,["vis","dataset"]),this._recompute({$vis:1,$dataset:1,axis:1,axisCol:1},this._state),this._handlers.destroy=[w];var e=function(){var t=this;this.observe("selected",function(e,n){e!=n&&t.set({value:"custom"!=e?e:t.get("custom")+" "})}),this.observe("value",function(e,n){if(e!=n){for(var o=0,i=t.get().options;o<i.length;o+=1)if(i[o].f==e)return t.set({selected:e});t.set({selected:"custom",custom:e})}}),this.observe("custom",function(e,n){e!=n&&"custom"==t.get().selected&&t.set({value:e})})}.bind(this);t.root?this.root._oncreate.push(e):(this._oncreate=[e],this._beforecreate=[]),this._fragment=function(t,e){for(var n,l,r,f,v,m,p,_,x,y=!1,k="custom"==t.selected&&lt(t),N=t.options,C=[],M=0;M<N.length;M+=1)C[M]=rt(0,0,N[M]);function w(){y=!0,e.set({selected:b(m)}),y=!1}var H="custom"==t.selected&&at(t,e);return{c:function(){n=s("div"),l=s("label"),r=u("\n\n    "),f=s("div"),k&&k.c(),v=u("\n\n        "),m=s("select");for(var t=0;t<C.length;t+=1)C[t].c();p=s("option"),_=u("(custom)"),x=u("\n        "),H&&H.c(),this.h()},h:function(){ct(l),l.className="control-label",ct(m),p.__value="custom",p.value=p.__value,h(m,"change",w),"selected"in t||e.root._beforecreate.push(w),f.className="controls form-inline",n.className="control-group vis-option-custom-format"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(r,n),o(f,n),k&&k.m(f,null),o(v,f),o(m,f);for(var a=0;a<C.length;a+=1)C[a].m(m,null);o(p,m),o(_,p),g(m,t.selected),o(x,f),H&&H.m(f,null)},p:function(t,n){t.label&&(l.innerHTML=n.label),"custom"==n.selected?k?k.p(t,n):((k=lt(n)).c(),k.m(f,v)):k&&(k.u(),k.d(),k=null);var o=n.options;if(t.options){for(var i=0;i<o.length;i+=1)C[i]?C[i].p(t,n,o,o[i],i):(C[i]=rt(0,0,o[i]),C[i].c(),C[i].m(m,p));for(;i<C.length;i+=1)C[i].u(),C[i].d();C.length=o.length}y||g(m,n.selected),"custom"==n.selected?H?H.p(t,n):((H=at(n,e)).c(),H.m(f,null)):H&&(H.u(),H.d(),H=null)},u:function(){l.innerHTML="",c(n),k&&k.u();for(var t=0;t<C.length;t+=1)C[t].u();H&&H.u()},d:function(){k&&k.d(),a(C),d(m,"change",w),H&&H.d()}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),M(this._beforecreate),M(this._oncreate))}function ut(t){var l,a,f,h,d,v,m,p,_,g,b;C(this,t),this._state=n({},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=(l=this._state,b=this._slotted.default,{c:function(){a=s("div"),f=s("label"),h=s("i"),d=u("\n        "),v=s("i"),m=u("\n        "),p=s("noscript"),_=u("\n\n    "),g=s("div"),this.h()},h:function(){h.className="fa fa-chevron-up expand-group pull-right",v.className="fa fa-chevron-down collapse-group pull-right",f.className="group-title",g.className="option-group-content vis-option-type-chart-description",a.className="vis-option-type-group group-open"},m:function(t,e){i(a,t,e),o(f,a),o(h,f),o(d,f),o(v,f),o(m,f),o(p,f),p.insertAdjacentHTML("afterend",l.label),o(_,a),o(g,a),b&&o(b,g)},p:function(t,e){t.label&&(r(p),p.insertAdjacentHTML("afterend",e.label))},u:function(){r(p),c(a),b&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(g,b)},d:e}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function ft(t){v(t,"svelte-1271772055","")}function ht(t){C(this,t),this._state=n({unit:"",width:"100px"},t.data),this._fragment=function(t,e){var n,l,r,a,f,v,_,g,b,x,y=!1;function k(){e.set({value:m(f.value)})}function N(){e.set({value:m(f.value)})}function C(){y=!0,e.set({value:m(_.value)}),y=!1}return{c:function(){n=s("div"),l=s("label"),r=u("\n    "),a=s("div"),f=s("input"),v=u("  "),_=s("input"),g=u(" "),b=s("span"),x=u(t.unit),this.h()},h:function(){p(l,"width",t.width),l.className="control-label",ft(f),h(f,"input",k),h(f,"change",N),f.type="range",f.min=t.min,f.max=t.max,f.step=t.step,ft(_),h(_,"input",C),_.type="number",_.min=t.min,_.max=t.max,_.step=t.step,ft(b),b.className="unit",a.className="controls",n.className="control-group vis-option-group vis-option-type-number"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(r,n),o(a,n),o(f,a),f.value=t.value,o(v,a),o(_,a),_.value=t.value,o(g,a),o(b,a),o(x,b)},p:function(t,e){t.label&&(l.innerHTML=e.label),t.width&&p(l,"width",e.width),f.value=e.value,f.value=e.value,t.min&&(f.min=e.min),t.max&&(f.max=e.max),t.step&&(f.step=e.step),y||(_.value=e.value),t.min&&(_.min=e.min),t.max&&(_.max=e.max),t.step&&(_.step=e.step),t.unit&&(x.data=e.unit)},u:function(){l.innerHTML="",c(n)},d:function(){d(f,"input",k),d(f,"change",N),d(_,"input",C)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function dt(t,e,n,l,r){var a,f,v,m,p,_=n.label;function g(){r.set({value:f.__value})}return{c:function(){a=s("label"),f=s("input"),m=u(" "),p=u(_),this.h()},h:function(){r._bindingGroups[0].push(f),h(f,"change",g),f.type="radio",f.__value=v=n.value,f.value=f.__value,a.className="radio"},m:function(e,n){i(a,e,n),o(f,a),f.checked=f.__value===t.value,o(m,a),o(p,a)},p:function(t,e,n,o,i){f.checked=f.__value===e.value,t.options&&v!==(v=o.value)&&(f.__value=v),f.value=f.__value,t.options&&_!==(_=o.label)&&(p.data=_)},u:function(){c(a)},d:function(){r._bindingGroups[0].splice(r._bindingGroups[0].indexOf(f),1),d(f,"change",g)}}}function vt(t){C(this,t),this._state=n({},t.data),this._bindingGroups=[[]],this._fragment=function(t,e){for(var n,l,r,f,h=t.options,d=[],v=0;v<h.length;v+=1)d[v]=dt(t,0,h[v],0,e);return{c:function(){n=s("div"),l=s("label"),r=u("\n\n    "),f=s("div");for(var t=0;t<d.length;t+=1)d[t].c();this.h()},h:function(){l.className="control-label",f.className="controls form-inline",n.className="control-group vis-option-group vis-option-type-radio"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(r,n),o(f,n);for(var a=0;a<d.length;a+=1)d[a].m(f,null)},p:function(t,n){t.label&&(l.innerHTML=n.label);var o=n.options;if(t.options||t.value){for(var i=0;i<o.length;i+=1)d[i]?d[i].p(t,n,o,o[i],i):(d[i]=dt(n,0,o[i],0,e),d[i].c(),d[i].m(f,null));for(;i<d.length;i+=1)d[i].u(),d[i].d();d.length=o.length}},u:function(){l.innerHTML="",c(n);for(var t=0;t<d.length;t+=1)d[t].u()},d:function(){a(d)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function mt(t,n,l,r,a){var f,h,d,v=l.label;return{c:function(){f=s("option"),h=u(v),this.h()},h:function(){f.__value=d=l.value,f.value=f.__value},m:function(t,e){i(f,t,e),o(h,f)},p:function(t,e,n,o,i){t.options&&v!==(v=o.label)&&(h.data=v),t.options&&d!==(d=o.value)&&(f.__value=d),f.value=f.__value},u:function(){c(f)},d:e}}function pt(t){C(this,t),this._state=n({width:"auto"},t.data),t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){for(var n,l,r,f,v,m=!1,_=t.options,x=[],y=0;y<_.length;y+=1)x[y]=mt(0,0,_[y]);function k(){m=!0,e.set({value:b(v)}),m=!1}return{c:function(){n=s("div"),l=s("label"),r=u("\n\n    "),f=s("div"),v=s("select");for(var t=0;t<x.length;t+=1)x[t].c();this.h()},h:function(){l.className="control-label",h(v,"change",k),"value"in t||e.root._beforecreate.push(k),p(v,"width",t.width),f.className="controls form-inline",n.className="control-group vis-option-type-select"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(r,n),o(f,n),o(v,f);for(var a=0;a<x.length;a+=1)x[a].m(v,null);g(v,t.value)},p:function(t,e){t.label&&(l.innerHTML=e.label);var n=e.options;if(t.options){for(var o=0;o<n.length;o+=1)x[o]?x[o].p(t,e,n,n[o],o):(x[o]=mt(0,0,n[o]),x[o].c(),x[o].m(v,null));for(;o<x.length;o+=1)x[o].u(),x[o].d();x.length=n.length}m||g(v,e.value),t.width&&p(v,"width",e.width)},u:function(){l.innerHTML="",c(n);for(var t=0;t<x.length;t+=1)x[t].u()},d:function(){a(x),d(v,"change",k)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),M(this._beforecreate))}function _t(t){v(t,"svelte-457672338","")}function gt(t,n){var l,r,a=t.axis["na-label"]||"--";return{c:function(){l=s("option"),r=u(a),this.h()},h:function(){l.__value="-",l.value=l.__value},m:function(t,e){i(l,t,e),o(r,l)},p:function(t,e){t.axis&&a!==(a=e.axis["na-label"]||"--")&&(r.data=a)},u:function(){c(l)},d:e}}function bt(t,n,l,r,a){var f,h,d,v=l.name;return{c:function(){f=s("option"),h=u(v),this.h()},h:function(){f.__value=d=l.name,f.value=f.__value},m:function(t,e){i(f,t,e),o(h,f)},p:function(t,e,n,o,i){t.columns&&v!==(v=o.name)&&(h.data=v),t.columns&&d!==(d=o.name)&&(f.__value=d),f.value=f.__value},u:function(){c(f)},d:e}}function xt(t){C(this,t),this._state=n(this.store._init(["visMeta","dataset"]),{selected:!1},t.data),this.store._add(this,["visMeta","dataset"]),this._recompute({axis:1,$visMeta:1,$dataset:1},this._state),this._handlers.destroy=[w];var e=function(){var t=this;t.observe("selected",function(e){if(e){var n=t.get().axis,o=_.clone(window.chart.get("metadata.axes",{}));"-"==e?delete o[n]:o[n]=e,window.chart.set("metadata.axes",o)}}),t.store.observe("visMeta",function(e){var n=t.get(),o=n.selected,i=n.axis;!o&&e&&(o=window.chart.get("metadata.axes")[i],t.set({selected:o}))})}.bind(this);t.root?this.root._oncreate.push(e):(this._oncreate=[e],this._beforecreate=[]),this._fragment=function(t,e){for(var n,l,r,v,m,p,_=!1,x=t.$visMeta&&t.$visMeta.axes[t.axis].optional&&gt(t),y=t.columns,k=[],N=0;N<y.length;N+=1)k[N]=bt(0,0,y[N]);function C(){_=!0,e.set({selected:b(m)}),_=!1}return{c:function(){n=s("div"),l=s("label"),r=u("\n\n    "),v=s("div"),m=s("select"),x&&x.c(),p=f();for(var t=0;t<k.length;t+=1)k[t].c();this.h()},h:function(){_t(l),l.className="control-label",_t(m),h(m,"change",C),"selected"in t||e.root._beforecreate.push(C),v.className="controls form-inline",n.className="control-group vis-option-group"},m:function(e,c){i(n,e,c),o(l,n),l.innerHTML=t.label,o(r,n),o(v,n),o(m,v),x&&x.m(m,null),o(p,m);for(var a=0;a<k.length;a+=1)k[a].m(m,null);g(m,t.selected)},p:function(t,e){t.label&&(l.innerHTML=e.label),e.$visMeta&&e.$visMeta.axes[e.axis].optional?x?x.p(t,e):((x=gt(e)).c(),x.m(m,p)):x&&(x.u(),x.d(),x=null);var n=e.columns;if(t.columns){for(var o=0;o<n.length;o+=1)k[o]?k[o].p(t,e,n,n[o],o):(k[o]=bt(0,0,n[o]),k[o].c(),k[o].m(m,null));for(;o<k.length;o+=1)k[o].u(),k[o].d();k.length=n.length}_||g(m,e.selected)},u:function(){l.innerHTML="",c(n),x&&x.u();for(var t=0;t<k.length;t+=1)k[t].u()},d:function(){x&&x.d(),a(k),d(m,"change",C)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),M(this._beforecreate),M(this._oncreate))}return n(it.prototype,B,L),it.prototype._recompute=function(e,n){var o,i;e.$theme&&k(n.palette,n.palette=n.$theme.colors.palette)&&(e.palette=!0),(e.$vis||e.customizable||e.axis||e.custom||e.palette)&&k(n.colorKeys,n.colorKeys=R(n.$vis,n.customizable,n.axis,n.custom,n.palette))&&(e.colorKeys=!0),(e.value||e.palette)&&k(n.hexColor,n.hexColor=(o=n.value,i=n.palette,J(o,i)))&&(e.hexColor=!0),(e.selected||e.palette||e.custom)&&k(n.customColor,n.customColor=function(e,n,o){if(void 0===o[e[0]])return"#ccc";var i=e.filter(function(t){return void 0!==o[t]}).map(function(t){return J(o[t],n)});return i.length?t.average(i,"lab"):"#ccc"}(n.selected,n.palette,n.custom))&&(e.customColor=!0)},n(st.prototype,L),st.prototype._recompute=function(t,e){(t.$vis||t.$dataset||t.axis)&&k(e.axisCol,e.axisCol=function(t,e,n){if(!t||!n)return null;var o=t.axes()[n];return e.column("object"==typeof o?o[0]:o)}(e.$vis,e.$dataset,e.axis))&&(t.axisCol=!0),t.axisCol&&(k(e.customFormatHelp,e.customFormatHelp=function(t){if(t)return"date"==t.type()?'<a href="http://momentjs.com/docs/#/displaying/format/" target="_blank">moment.js documentation</a>':"number"==t.type()?'<a href="http://numeraljs.com/#format" target="_blank">numeral.js documentation</a>':""}(e.axisCol))&&(t.customFormatHelp=!0),k(e.options,e.options=function(t){return t?"number"==t.type()?[{l:"1,000[.00]",f:"0,0.[00]"},{l:"0",f:"0"},{l:"0.0",f:"0.0"},{l:"0.00",f:"0.00"},{l:"0.000",f:"0.000"},{l:"0.[0]",f:"0.[0]"},{l:"0.[00]",f:"0.[00]"},{l:"0%",f:"0%"},{l:"0.0%",f:"0.0%"},{l:"0.00%",f:"0.00%"},{l:"0.[0]%",f:"0.[0]%"},{l:"0.[00]%",f:"0.[00]%"},{l:"10,000",f:"0,0"},{l:"1st",f:"0o"},{l:"123k",f:"0a"},{l:"123.4k",f:"0.[0]a"},{l:"123.45k",f:"0.[00]a"}]:"date"==t.type()?[{l:"2015, 2016",f:"YYYY"},{l:"2015 Q1, 2015 Q2",f:"YYYY [Q]Q"},{l:"2015, Q2, Q3",f:"YYYY|\\QQ"},{l:"2015, Feb, Mar",f:"YYYY|MMM"},{l:"’15, ’16",f:"’YY"},{l:"April, May",f:"MMMM"},{l:"Apr, May",f:"MMM"},{l:"Apr ’15, May ’15",f:"MMM ’YY"},{l:"April, 2, 3",f:"MMM|DD"}]:void 0:[]}(e.axisCol))&&(t.options=!0))},n(ut.prototype,L),n(ht.prototype,L),n(vt.prototype,L),n(pt.prototype,L),n(xt.prototype,L),xt.prototype._recompute=function(t,e){(t.axis||t.$visMeta||t.$dataset)&&k(e.columns,e.columns=function(t,e,n){var o=[];return n&&e&&t?(n.eachColumn(function(n){_.indexOf(e.axes[t].accepts,n.type())>-1&&o.push({name:n.name()})}),o):[]}(e.axis,e.$visMeta,e.$dataset))&&(t.columns=!0)},{Checkbox:T,Color:it,ColorPicker:I,Group:ut,NumberInput:ht,Radio:vt,Select:pt,SelectAxisColumn:xt,CustomFormat:st}});
