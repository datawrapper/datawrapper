!function(s,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("svelte/signin",n):(s=s||self).signin=n()}(this,(function(){"use strict";function s(){}function n(s,n){for(var r in n)s[r]=n[r];return s}function r(s,n){s.appendChild(n)}function t(s,n,r){s.insertBefore(n,r)}function e(s){s.parentNode.removeChild(s)}function o(s){return document.createElement(s)}function i(s){return document.createTextNode(s)}function a(s,n,r,t){s.addEventListener(n,r,t)}function p(s,n,r,t){s.removeEventListener(n,r,t)}function d(s,n,r){null==r?s.removeAttribute(n):s.setAttribute(n,r)}function c(s,n,r){s.style.setProperty(n,r)}function u(s,n,r){s.classList[r?"add":"remove"](n)}function l(){return Object.create(null)}function f(s,n){return s!=s?n==n:s!==n||s&&"object"==typeof s||"function"==typeof s}function g(s,n){return s!=s?n==n:s!==n}function w(s,n){var r=s in this._handlers&&this._handlers[s].slice();if(r)for(var t=0;t<r.length;t+=1){var e=r[t];if(!e.__calling)try{e.__calling=!0,e.call(this,n)}finally{e.__calling=!1}}}function m(s){s._lock=!0,E(s._beforecreate),E(s._oncreate),E(s._aftercreate),s._lock=!1}function h(){return this._state}function v(s,n){s._handlers=l(),s._slots=l(),s._bind=n._bind,s._staged={},s.options=n,s.root=n.root||s,s.store=n.store||s.root.store,n.root||(s._beforecreate=[],s._oncreate=[],s._aftercreate=[])}function _(s,n){var r=this._handlers[s]||(this._handlers[s]=[]);return r.push(n),{cancel:function(){var s=r.indexOf(n);~s&&r.splice(s,1)}}}function E(s){for(;s&&s.length;)s.shift()()}var S={destroy:function(n){this.destroy=s,this.fire("destroy"),this.set=s,this._fragment.d(!1!==n),this._fragment=null,this._state={}},get:h,fire:w,on:_,set:function(s){this._set(n({},s)),this.root._lock||m(this.root)},_recompute:s,_set:function(s){var r=this._state,t={},e=!1;for(var o in s=n(this._staged,s),this._staged={},s)this._differs(s[o],r[o])&&(t[o]=e=!0);e&&(this._state=n(n({},r),s),this._recompute(t,this._state),this._bind&&this._bind(t,this._state),this._fragment&&(this.fire("state",{changed:t,current:this._state,previous:r}),this._fragment.p(t,this._state),this.fire("update",{changed:t,current:this._state,previous:r})))},_stage:function(s){n(this._staged,s)},_mount:function(s,n){this._fragment[this._fragment.i?"i":"m"](s,n||null)},_differs:f},b={};function P(s){void 0===s&&(s="core"),"chart"===s?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(b[s]=window.__dw.vis.meta.locale||{}):b[s]="core"===s?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[s])}function k(s,n){var r=arguments;if(void 0===n&&(n="core"),s=s.trim(),b[n]||P(n),!b[n][s])return"MISSING:"+s;var t=b[n][s];return"string"==typeof t&&arguments.length>2&&(t=t.replace(/\$(\d)/g,(function(s,n){return n=2+Number(n),void 0===r[n]?s:r[n]}))),t}function H(s,n){void 0===n&&(n={});var r=Object.assign({},{payload:null,raw:!1,method:"GET",baseUrl:"//"+dw.backend.__api_domain,mode:"cors",credentials:"include"},n,{headers:Object.assign({},{"Content-Type":"application/json"},n.headers)}),t=r.payload,e=r.baseUrl,o=r.raw,i=function(s,n){var r={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&-1===n.indexOf(t)&&(r[t]=s[t]);return r}(r,["payload","baseUrl","raw"]),a=e.replace(/\/$/,"")+"/"+s.replace(/^\//,"");return t&&(i.body=JSON.stringify(t)),window.fetch(a,i).then((function(s){if(o)return s;if(!s.ok)throw new N(s);if(204!==s.status){var n=s.headers.get("content-type").split(";")[0];return"application/json"===n?s.json():"image/png"===n||"application/pdf"===n?s.blob():s.text()}}))}H.get=L("GET"),H.patch=L("PATCH"),H.put=L("PUT"),H.post=L("POST"),H.head=L("HEAD");function L(s){return function(n,r){if(r&&r.method)throw new Error("Setting option.method is not allowed in httpReq."+s.toLowerCase()+"()");return H(n,Object.assign({},r,{method:s}))}}H.delete=L("DELETE");var y,N=function(s){function n(n){s.call(this),this.name="HttpReqError",this.status=n.status,this.statusText=n.statusText,this.message="["+n.status+"] "+n.statusText,this.response=n}return s&&(n.__proto__=s),n.prototype=Object.create(s&&s.prototype),n.prototype.constructor=n,n}(Error),T=!1;function R(s){var n=s.password;return y?y(n):(!T&&n.length>4&&(T=!0,require(["zxcvbn"],(function(s){y=s}))),!1)}function M(s,n){var r,o=n.password.length>=8&&x();return{c:function(){o&&o.c(),r=document.createComment("")},m:function(s,n){o&&o.m(s,n),t(s,r,n)},p:function(s,n){n.password.length>=8?o||((o=x()).c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d:function(s){o&&o.d(s),s&&e(r)}}}function x(n,r){return{c:s,m:s,d:s}}function O(s){v(this,s),this._state=n({password:"",passwordRepeat:""},s.data),this._recompute({password:1,passwordRepeat:1,passwordStrength:1,passwordTooShort:1,passwordHelp:1,passwordMismatch:1},this._state),this._intro=!0,this._fragment=M(0,this._state),s.target&&(this._fragment.c(),this._mount(s.target,s.anchor))}n(O.prototype,S),O.prototype._recompute=function(s,n){s.password&&this._differs(n.passwordTooShort,n.passwordTooShort=n.password.length<8)&&(s.passwordTooShort=!0),(s.password||s.passwordRepeat)&&this._differs(n.passwordMismatch,n.passwordMismatch=function(s){var n=s.password,r=s.passwordRepeat;return n&&n!==r}(n))&&(s.passwordMismatch=!0),s.password&&this._differs(n.passwordStrength,n.passwordStrength=R(n))&&(s.passwordStrength=!0),(s.password||s.passwordStrength)&&this._differs(n.passwordHelp,n.passwordHelp=function(s){var n=s.password,r=s.passwordStrength;return""!==n&&r?k("account / password / "+["bad","weak","ok","good","excellent"][r.score]):k("account / pwd-too-short").replace("%num",8)}(n))&&(s.passwordHelp=!0),(s.password||s.passwordTooShort||s.passwordStrength||s.passwordHelp)&&this._differs(n.passwordError,n.passwordError=function(s){var n=s.password,r=s.passwordTooShort,t=s.passwordStrength,e=s.passwordHelp;return!!n&&(r?k("account / pwd-too-short").replace("%num",8):!!(t&&t.score<2)&&e)}(n))&&(s.passwordError=!0),(s.passwordStrength||s.passwordHelp)&&this._differs(n.passwordSuccess,n.passwordSuccess=function(s){var n=s.passwordStrength,r=s.passwordHelp;return!!(n&&n.score>2)&&r}(n))&&(s.passwordSuccess=!0),s.passwordMismatch&&this._differs(n.passwordRepeatError,n.passwordRepeatError=function(s){return!!s.passwordMismatch&&k("account / password / mismatch")}(n))&&(s.passwordRepeatError=!0),(s.password||s.passwordMismatch||s.passwordTooShort)&&this._differs(n.passwordOk,n.passwordOk=function(s){var n=s.password,r=s.passwordMismatch,t=s.passwordTooShort;return n&&!r&&!t}(n))&&(s.passwordOk=!0)};var j=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function I(s){return j.test(s)}var C={doLogIn:async function(){var s=this.get(),n=s.loginEmail,r=s.loginPassword,t=s.rememberLogin;this.set({loggingIn:!0,loginError:"",loginSuccess:""});try{await H.post("/v3/auth/login",{payload:{email:n,password:r,keepSession:t}}),this.set({loginSuccess:"Login successful, reloading page"}),setTimeout((function(){window.window.location.href="/"}),2e3)}catch(s){if("HttpReqError"===s.name){var e=await s.response.json();this.set({loginError:e?e.message:s.message})}else this.set({loginError:s})}this.set({loggingIn:!1})},doSignUp:async function(){var s=this.get(),n=s.signupEmail,r=s.signupPassword;if(r!==s.signupPassword2)return this.set({signupError:"Passwords must match"});this.set({signingUp:!0,signupError:"",signupSuccess:""});try{await H.post("/v3/auth/signup",{payload:{email:n,password:r}}),this.set({signupSuccess:"Sign up successful. Redirecting to user dashboard."}),setTimeout((function(){window.location.href="/"}),2e3)}catch(s){if("HttpReqError"===s.name){var t=await s.response.json();this.set({signupError:t?t.message:s.message})}else this.set({signupError:s})}this.set({signingUp:!1})},requestNewPassword:async function(){var s=this.get().loginEmail;this.set({requestingPassword:!0,loginError:"",loginSuccess:""});try{await H.post("/v3/auth/reset-password",{payload:{email:s}}),this.set({loginSuccess:k("signin / password-reset / success")})}catch(s){if("HttpReqError"===s.name){var n=await s.response.json();this.set({loginError:n.message?k("signin / password-reset / error / "+n.message):s.message})}else this.set({loginError:s})}this.set({requestingPassword:!1})}};function A(s,n,r){var t=Object.create(s);return t.signin=n[r],t}function F(s,n){var r;return{c:function(){(r=o("div")).className="alert alert-success"},m:function(s,e){t(s,r,e),r.innerHTML=n.loginSuccess},p:function(s,n){s.loginSuccess&&(r.innerHTML=n.loginSuccess)},d:function(s){s&&e(r)}}}function q(s,n){var r;return{c:function(){(r=o("div")).className="alert alert-error"},m:function(s,e){t(s,r,e),r.innerHTML=n.loginError},p:function(s,n){s.loginError&&(r.innerHTML=n.loginError)},d:function(s){s&&e(r)}}}function U(s,n){var c,u,l,f,g,w=k("password"),m=!1;function h(){m=!0,s.set({loginPassword:g.value}),m=!1}return{c:function(){c=o("div"),u=o("label"),l=i(w),f=i("\n                        "),g=o("input"),u.className="svelte-6km566",a(g,"input",h),g.className="login-pwd input-xxlarge span3 svelte-6km566",g.autocomplete="current-password",d(g,"type","password"),c.className="control-group svelte-6km566"},m:function(s,e){t(s,c,e),r(c,u),r(u,l),r(c,f),r(c,g),g.value=n.loginPassword},p:function(s,n){!m&&s.loginPassword&&(g.value=n.loginPassword)},d:function(s){s&&e(c),p(g,"input",h)}}}function D(s,n){var u,l,f,g,w,m,h,v,_=k("Remember login?");function E(){s.set({rememberLogin:f.checked})}var S=n.loggingIn&&$();function b(n){n.preventDefault(),s.doLogIn()}return{c:function(){u=o("div"),l=o("label"),f=o("input"),g=i(" "),w=o("noscript"),m=i("\n                    "),h=o("button"),S&&S.c(),v=i(" Login"),a(f,"change",E),f.className="keep-login svelte-6km566",d(f,"type","checkbox"),l.className="checkbox svelte-6km566",l.htmlFor="keep-login",c(l,"margin-top","10px"),a(h,"click",b),h.disabled=n.invalidLoginForm,h.className="btn btn-login btn-primary svelte-6km566"},m:function(s,e){t(s,u,e),r(u,l),r(l,f),f.checked=n.rememberLogin,r(l,g),r(l,w),w.insertAdjacentHTML("afterend",_),r(u,m),r(u,h),S&&S.m(h,null),r(h,v)},p:function(s,n){s.rememberLogin&&(f.checked=n.rememberLogin),n.loggingIn?S||((S=$()).c(),S.m(h,v)):S&&(S.d(1),S=null),s.invalidLoginForm&&(h.disabled=n.invalidLoginForm)},d:function(s){s&&e(u),p(f,"change",E),S&&S.d(),p(h,"click",b)}}}function $(s,n){var r;return{c:function(){(r=o("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(s,n){t(s,r,n)},d:function(s){s&&e(r)}}}function z(s,n){var d,u,l,f,g=k("Send new password"),w=n.requestingPassword&&G();function m(n){n.preventDefault(),s.requestNewPassword()}return{c:function(){d=o("div"),u=o("button"),w&&w.c(),l=i(" "),f=o("noscript"),a(u,"click",m),u.disabled=n.invalidLoginEmail,u.className="btn btn-send-pw btn-primary",c(d,"padding-bottom","10px")},m:function(s,n){t(s,d,n),r(d,u),w&&w.m(u,null),r(u,l),r(u,f),f.insertAdjacentHTML("afterend",g)},p:function(s,n){n.requestingPassword?w||((w=G()).c(),w.m(u,l)):w&&(w.d(1),w=null),s.invalidLoginEmail&&(u.disabled=n.invalidLoginEmail)},d:function(s){s&&e(d),w&&w.d(),p(u,"click",m)}}}function G(s,n){var r;return{c:function(){(r=o("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(s,n){t(s,r,n)},d:function(s){s&&e(r)}}}function Z(s,n){var r,i=k("Can't recall your password?");function d(n){n.preventDefault(),s.set({forgotPassword:!0})}return{c:function(){a(r=o("a"),"click",d),r.href="#/forgot-password"},m:function(s,n){t(s,r,n),r.innerHTML=i},d:function(s){s&&e(r),p(r,"click",d)}}}function B(s,n){var r,i=k("Return to login...");function d(n){n.preventDefault(),s.set({forgotPassword:!1})}return{c:function(){a(r=o("a"),"click",d),r.href="#/return"},m:function(s,n){t(s,r,n),r.innerHTML=i},d:function(s){s&&e(r),p(r,"click",d)}}}function J(n,r){var i;return{c:function(){(i=o("style")).textContent="#dwLoginForm {\n                width: 420px;\n                margin-left: -210px;\n                box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n                border: 0;\n                position: relative;\n            }"},m:function(s,n){t(s,i,n)},p:s,d:function(s){s&&e(i)}}}function K(s,n){var l,f,g,w,m,h,v,_,E,S,b,P,H,L,y,N,T,R,M,x,j,I,C,A,F,q,U,D,$,z,G,Z,B,J,K=k("login / signup / headline"),ts=k("login / signup / intro"),es=k("email"),os=!1,is=k("password"),as=!1,ps={},ds=k("repeat password"),cs=!1,us=k("Sign Up"),ls=n.signupSuccess&&Q(s,n),fs=n.signupError&&V(s,n);function gs(){os=!0,s.set({signupEmail:L.value}),os=!1}function ws(){as=!0,s.set({signupPassword:x.value}),as=!1}var ms={};void 0!==n.signupPassword&&(ms.password=n.signupPassword,ps.password=!0),void 0!==n.signupPassword2&&(ms.passwordRepeat=n.signupPassword2,ps.passwordRepeat=!0),void 0!==n.passwordHelp&&(ms.passwordHelp=n.passwordHelp,ps.passwordHelp=!0),void 0!==n.passwordSuccess&&(ms.passwordSuccess=n.passwordSuccess,ps.passwordSuccess=!0),void 0!==n.passwordError&&(ms.passwordError=n.passwordError,ps.passwordError=!0),void 0!==n.passwordRepeatError&&(ms.passwordRepeatError=n.passwordRepeatError,ps.passwordRepeatError=!0),void 0!==n.signupPasswordOk&&(ms.passwordOk=n.signupPasswordOk,ps.passwordOk=!0);var hs=new O({root:s.root,store:s.store,data:ms,_bind:function(n,r){var t={};!ps.password&&n.password&&(t.signupPassword=r.password),!ps.passwordRepeat&&n.passwordRepeat&&(t.signupPassword2=r.passwordRepeat),!ps.passwordHelp&&n.passwordHelp&&(t.passwordHelp=r.passwordHelp),!ps.passwordSuccess&&n.passwordSuccess&&(t.passwordSuccess=r.passwordSuccess),!ps.passwordError&&n.passwordError&&(t.passwordError=r.passwordError),!ps.passwordRepeatError&&n.passwordRepeatError&&(t.passwordRepeatError=r.passwordRepeatError),!ps.passwordOk&&n.passwordOk&&(t.signupPasswordOk=r.passwordOk),s._set(t),ps={}}});function vs(s){return s.passwordError?Y:s.passwordSuccess?X:s.passwordHelp?W:void 0}s.root._beforecreate.push((function(){hs._bind({password:1,passwordRepeat:1,passwordHelp:1,passwordSuccess:1,passwordError:1,passwordRepeatError:1,passwordOk:1},hs.get())}));var _s=vs(n),Es=_s&&_s(s,n);function Ss(){cs=!0,s.set({signupPassword2:$.value}),cs=!1}var bs=n.passwordRepeatError&&ss(s,n);function Ps(s){return s.signingUp?rs:ns}var ks=Ps(n),Hs=ks(s,n);function Ls(n){n.preventDefault(),s.doSignUp()}return{c:function(){l=o("div"),f=o("h3"),g=i("\n            "),w=o("p"),m=i("\n\n            "),ls&&ls.c(),h=i(" "),fs&&fs.c(),v=i("\n\n            "),_=o("div"),E=o("form"),S=o("div"),b=o("label"),P=i(es),H=i("\n                        "),L=o("input"),y=i("\n                    "),N=o("div"),T=o("label"),R=i(is),M=i("\n                        "),x=o("input"),j=i("\n                        "),I=o("div"),hs._fragment.c(),C=i("\n                            "),Es&&Es.c(),A=i("\n                    "),F=o("div"),q=o("label"),U=i(ds),D=i("\n                        "),$=o("input"),z=i("\n                        "),bs&&bs.c(),G=i("\n                    "),Z=o("button"),Hs.c(),B=i("\n                        \n                        "),J=o("noscript"),b.className="svelte-6km566",a(L,"input",gs),d(L,"type","email"),L.autocomplete="username",L.className="span3 input-xlarge register-email svelte-6km566",S.className="control-group svelte-6km566",u(S,"error",n.invalidSignupEmail),T.className="svelte-6km566",a(x,"input",ws),x.autocomplete="new-password",d(x,"type","password"),x.className="span3 input-xlarge register-pwd svelte-6km566",c(I,"width","270px"),N.className="control-group svelte-6km566",u(N,"warning",n.passwordError),u(N,"success",n.passwordSuccess),q.className="svelte-6km566",a($,"input",Ss),$.autocomplete="new-password",d($,"type","password"),$.className="span3 input-xlarge register-pwd-2 svelte-6km566",F.className="control-group svelte-6km566",u(F,"error",n.passwordRepeatError),a(Z,"click",Ls),Z.disabled=n.invalidSignupForm,Z.className="btn btn-default",_.className="signup-form form-vertcal",l.className="span3 row-signup"},m:function(s,e){t(s,l,e),r(l,f),f.innerHTML=K,r(l,g),r(l,w),w.innerHTML=ts,r(l,m),ls&&ls.m(l,null),r(l,h),fs&&fs.m(l,null),r(l,v),r(l,_),r(_,E),r(E,S),r(S,b),r(b,P),r(S,H),r(S,L),L.value=n.signupEmail,r(E,y),r(E,N),r(N,T),r(T,R),r(N,M),r(N,x),x.value=n.signupPassword,r(N,j),r(N,I),hs._mount(I,null),r(I,C),Es&&Es.m(I,null),r(E,A),r(E,F),r(F,q),r(q,U),r(F,D),r(F,$),$.value=n.signupPassword2,r(F,z),bs&&bs.m(F,null),r(E,G),r(E,Z),Hs.m(Z,null),r(Z,B),r(Z,J),J.insertAdjacentHTML("afterend",us)},p:function(r,t){(n=t).signupSuccess?ls?ls.p(r,n):((ls=Q(s,n)).c(),ls.m(l,h)):ls&&(ls.d(1),ls=null),n.signupError?fs?fs.p(r,n):((fs=V(s,n)).c(),fs.m(l,v)):fs&&(fs.d(1),fs=null),!os&&r.signupEmail&&(L.value=n.signupEmail),r.invalidSignupEmail&&u(S,"error",n.invalidSignupEmail),!as&&r.signupPassword&&(x.value=n.signupPassword);var e={};!ps.password&&r.signupPassword&&(e.password=n.signupPassword,ps.password=void 0!==n.signupPassword),!ps.passwordRepeat&&r.signupPassword2&&(e.passwordRepeat=n.signupPassword2,ps.passwordRepeat=void 0!==n.signupPassword2),!ps.passwordHelp&&r.passwordHelp&&(e.passwordHelp=n.passwordHelp,ps.passwordHelp=void 0!==n.passwordHelp),!ps.passwordSuccess&&r.passwordSuccess&&(e.passwordSuccess=n.passwordSuccess,ps.passwordSuccess=void 0!==n.passwordSuccess),!ps.passwordError&&r.passwordError&&(e.passwordError=n.passwordError,ps.passwordError=void 0!==n.passwordError),!ps.passwordRepeatError&&r.passwordRepeatError&&(e.passwordRepeatError=n.passwordRepeatError,ps.passwordRepeatError=void 0!==n.passwordRepeatError),!ps.passwordOk&&r.signupPasswordOk&&(e.passwordOk=n.signupPasswordOk,ps.passwordOk=void 0!==n.signupPasswordOk),hs._set(e),ps={},_s===(_s=vs(n))&&Es?Es.p(r,n):(Es&&Es.d(1),(Es=_s&&_s(s,n))&&Es.c(),Es&&Es.m(I,null)),r.passwordError&&u(N,"warning",n.passwordError),r.passwordSuccess&&u(N,"success",n.passwordSuccess),!cs&&r.signupPassword2&&($.value=n.signupPassword2),n.passwordRepeatError?bs?bs.p(r,n):((bs=ss(s,n)).c(),bs.m(F,null)):bs&&(bs.d(1),bs=null),r.passwordRepeatError&&u(F,"error",n.passwordRepeatError),ks!==(ks=Ps(n))&&(Hs.d(1),(Hs=ks(s,n)).c(),Hs.m(Z,B)),r.invalidSignupForm&&(Z.disabled=n.invalidSignupForm)},d:function(s){s&&e(l),ls&&ls.d(),fs&&fs.d(),p(L,"input",gs),p(x,"input",ws),hs.destroy(),Es&&Es.d(),p($,"input",Ss),bs&&bs.d(),Hs.d(),p(Z,"click",Ls)}}}function Q(s,n){var r;return{c:function(){(r=o("div")).className="alert alert-success"},m:function(s,e){t(s,r,e),r.innerHTML=n.signupSuccess},p:function(s,n){s.signupSuccess&&(r.innerHTML=n.signupSuccess)},d:function(s){s&&e(r)}}}function V(s,n){var r;return{c:function(){(r=o("div")).className="alert alert-error"},m:function(s,e){t(s,r,e),r.innerHTML=n.signupError},p:function(s,n){s.signupError&&(r.innerHTML=n.signupError)},d:function(s){s&&e(r)}}}function W(s,n){var r;return{c:function(){(r=o("p")).className="help muted svelte-6km566"},m:function(s,e){t(s,r,e),r.innerHTML=n.passwordHelp},p:function(s,n){s.passwordHelp&&(r.innerHTML=n.passwordHelp)},d:function(s){s&&e(r)}}}function X(s,n){var r;return{c:function(){(r=o("p")).className="help text-success svelte-6km566"},m:function(s,e){t(s,r,e),r.innerHTML=n.passwordSuccess},p:function(s,n){s.passwordSuccess&&(r.innerHTML=n.passwordSuccess)},d:function(s){s&&e(r)}}}function Y(s,n){var r;return{c:function(){(r=o("p")).className="help text-warning svelte-6km566"},m:function(s,e){t(s,r,e),r.innerHTML=n.passwordError},p:function(s,n){s.passwordError&&(r.innerHTML=n.passwordError)},d:function(s){s&&e(r)}}}function ss(s,n){var r;return{c:function(){(r=o("p")).className="help text-error svelte-6km566"},m:function(s,e){t(s,r,e),r.innerHTML=n.passwordRepeatError},p:function(s,n){s.passwordRepeatError&&(r.innerHTML=n.passwordRepeatError)},d:function(s){s&&e(r)}}}function ns(s,n){var r;return{c:function(){(r=o("i")).className="fa fa-fw fa-pencil"},m:function(s,n){t(s,r,n)},d:function(s){s&&e(r)}}}function rs(s,n){var r;return{c:function(){(r=o("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(s,n){t(s,r,n)},d:function(s){s&&e(r)}}}function ts(s,n){for(var a,p,d,c=k("login / alternative signin"),u=n.alternativeSignIn,l=[],f=0;f<u.length;f+=1)l[f]=os(s,A(n,u,f));return{c:function(){a=o("div"),p=o("noscript"),d=i(" ");for(var s=0;s<l.length;s+=1)l[s].c();a.className="alternative-signin svelte-6km566"},m:function(s,n){t(s,a,n),r(a,p),p.insertAdjacentHTML("beforebegin",c),r(a,d);for(var e=0;e<l.length;e+=1)l[e].m(a,null)},p:function(n,r){if(n.alternativeSignIn){u=r.alternativeSignIn;for(var t=0;t<u.length;t+=1){var e=A(r,u,t);l[t]?l[t].p(n,e):(l[t]=os(s,e),l[t].c(),l[t].m(a,null))}for(;t<l.length;t+=1)l[t].d(1);l.length=u.length}},d:function(s){s&&e(a),function(s,n){for(var r=0;r<s.length;r+=1)s[r]&&s[r].d(n)}(l,s)}}}function es(s,n){var r,i;return{c:function(){(r=o("i")).className=i=n.signin.icon+" svelte-6km566"},m:function(s,n){t(s,r,n)},p:function(s,n){s.alternativeSignIn&&i!==(i=n.signin.icon+" svelte-6km566")&&(r.className=i)},d:function(s){s&&e(r)}}}function os(s,n){var a,p,d,c,u=n.signin.label,l=n.signin.icon&&es(0,n);return{c:function(){a=o("a"),l&&l.c(),p=i(" "),d=o("noscript"),a.href=c=n.signin.url,a.className="alternative-signin-link svelte-6km566"},m:function(s,n){t(s,a,n),l&&l.m(a,null),r(a,p),r(a,d),d.insertAdjacentHTML("afterend",u)},p:function(s,n){n.signin.icon?l?l.p(s,n):((l=es(0,n)).c(),l.m(a,p)):l&&(l.d(1),l=null),s.alternativeSignIn&&u!==(u=n.signin.label)&&(!function(s){for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling)}(d),d.insertAdjacentHTML("afterend",u)),s.alternativeSignIn&&c!==(c=n.signin.url)&&(a.href=c)},d:function(s){s&&e(a),l&&l.d()}}}function is(s){v(this,s),this._state=n({noSignup:!1,alternativeSignIn:[],forgotPassword:!1,loginEmail:"",loginPassword:"",rememberLogin:!0,loginEmailError:!1,loginError:"",loginSuccess:"",signupEmail:"",signupPassword:"",signupPassword2:"",signupPasswordOk:!1,passwordHelp:!1,passwordSuccess:!1,passwordError:!1,passwordRepeatError:!1,requestingPassword:!1,loggingIn:!1,signingUp:!1},s.data),this._recompute({loginEmail:1,forgotPassword:1,loginPassword:1,signupEmail:1,signupPassword:1,signupPassword2:1},this._state),this._intro=!0,this._fragment=function(s,n){var c,l,f,g,w,m,h,v,_,E,S,b,P,H,L,y,N,T,R,M,x,O,j,I,C,A,$,G,Q,V,W,X,Y,ss,ns,rs=k("login / login / headline"),es=k("login / login / intro"),os=k("email"),is=!1,as=k("login / signup / confirmation-email"),ps=k("login / signup / confirmation-email-hint"),ds=k("login / signup / confirm"),cs=n.loginSuccess&&F(s,n),us=n.loginError&&q(s,n);function ls(){is=!0,s.set({loginEmail:T.value}),is=!1}var fs=!n.forgotPassword&&U(s,n),gs=!n.forgotPassword&&D(s,n),ws=n.forgotPassword&&z(s,n);function ms(s){return s.forgotPassword?B:Z}var hs=ms(n),vs=hs(s,n);function _s(s){return s.noSignup?J:K}var Es=_s(n),Ss=Es(s,n),bs=n.alternativeSignIn.length&&ts(s,n);function Ps(n){n.stopPropagation(),s.fire("keyup",n)}return{c:function(){c=o("div"),(l=o("button")).textContent="×",f=i("\n    "),g=o("div"),w=o("div"),m=o("h3"),h=i("\n\n            "),v=o("p"),_=i("\n\n            "),cs&&cs.c(),E=i(" "),us&&us.c(),S=i("\n\n            "),b=o("form"),P=o("div"),H=o("div"),L=o("label"),y=i(os),N=i("\n                        "),T=o("input"),R=i("\n                    "),fs&&fs.c(),M=i("\n                "),gs&&gs.c(),x=i("\n\n            "),O=o("div"),ws&&ws.c(),j=i("\n                "),I=o("div"),vs.c(),A=i("\n        "),Ss.c(),$=i("\n\n    "),bs&&bs.c(),G=i("\n\n    "),Q=o("div"),V=o("div"),W=o("noscript"),X=i("\n\n            "),Y=o("div"),ss=i("\n\n            "),ns=o("button"),l.type="button",l.className="close",l.dataset.dismiss="modal",L.className="svelte-6km566",a(T,"input",ls),T.className="login-email input-xxlarge span3 svelte-6km566",T.autocomplete="username",d(T,"type","email"),H.className="control-group svelte-6km566",u(H,"error",n.invalidLoginEmail),b.className="login-form form-vertical",w.className=C="span"+(n.noSignup?4:3)+" row-login svelte-6km566",g.className="row login-signup",Y.className="sub",ns.className="button btn btn-got-it",V.className="jumbo-text",Q.className="signup-confirm hidden",a(c,"keyup",Ps),c.className="modal-body svelte-6km566",c.dataset.piwikMask=!0},m:function(s,e){t(s,c,e),r(c,l),r(c,f),r(c,g),r(g,w),r(w,m),m.innerHTML=rs,r(w,h),r(w,v),v.innerHTML=es,r(w,_),cs&&cs.m(w,null),r(w,E),us&&us.m(w,null),r(w,S),r(w,b),r(b,P),r(P,H),r(H,L),r(L,y),r(H,N),r(H,T),T.value=n.loginEmail,r(P,R),fs&&fs.m(P,null),r(b,M),gs&&gs.m(b,null),r(w,x),r(w,O),ws&&ws.m(O,null),r(O,j),r(O,I),vs.m(I,null),r(g,A),Ss.m(g,null),r(c,$),bs&&bs.m(c,null),r(c,G),r(c,Q),r(Q,V),r(V,W),W.insertAdjacentHTML("beforebegin",as),r(V,X),r(V,Y),Y.innerHTML=ps,r(V,ss),r(V,ns),ns.innerHTML=ds},p:function(n,r){r.loginSuccess?cs?cs.p(n,r):((cs=F(s,r)).c(),cs.m(w,E)):cs&&(cs.d(1),cs=null),r.loginError?us?us.p(n,r):((us=q(s,r)).c(),us.m(w,S)):us&&(us.d(1),us=null),!is&&n.loginEmail&&(T.value=r.loginEmail),n.invalidLoginEmail&&u(H,"error",r.invalidLoginEmail),r.forgotPassword?fs&&(fs.d(1),fs=null):fs?fs.p(n,r):((fs=U(s,r)).c(),fs.m(P,null)),r.forgotPassword?gs&&(gs.d(1),gs=null):gs?gs.p(n,r):((gs=D(s,r)).c(),gs.m(b,null)),r.forgotPassword?ws?ws.p(n,r):((ws=z(s,r)).c(),ws.m(O,j)):ws&&(ws.d(1),ws=null),hs!==(hs=ms(r))&&(vs.d(1),(vs=hs(s,r)).c(),vs.m(I,null)),n.noSignup&&C!==(C="span"+(r.noSignup?4:3)+" row-login svelte-6km566")&&(w.className=C),Es===(Es=_s(r))&&Ss?Ss.p(n,r):(Ss.d(1),(Ss=Es(s,r)).c(),Ss.m(g,null)),r.alternativeSignIn.length?bs?bs.p(n,r):((bs=ts(s,r)).c(),bs.m(c,G)):bs&&(bs.d(1),bs=null)},d:function(s){s&&e(c),cs&&cs.d(),us&&us.d(),p(T,"input",ls),fs&&fs.d(),gs&&gs.d(),ws&&ws.d(),vs.d(),Ss.d(),bs&&bs.d(),p(c,"keyup",Ps)}}}(this,this._state),s.target&&(this._fragment.c(),this._mount(s.target,s.anchor),m(this))}function as(s,r){this._handlers={},this._dependents=[],this._computed=l(),this._sortedComputedProperties=[],this._state=n({},s),this._differs=r&&r.immutable?g:f}n(is.prototype,S),n(is.prototype,C),is.prototype._recompute=function(s,n){var r,t,e;(s.loginEmail||s.forgotPassword)&&this._differs(n.invalidLoginEmail,n.invalidLoginEmail=(t=(r=n).loginEmail,e=r.forgotPassword,!(I(t)||""===t&&!e)))&&(s.invalidLoginEmail=!0),(s.loginEmail||s.loginPassword)&&this._differs(n.invalidLoginForm,n.invalidLoginForm=function(s){var n=s.loginEmail,r=s.loginPassword;return!I(n)||""===r}(n))&&(s.invalidLoginForm=!0),(s.signupEmail||s.signupPassword||s.signupPassword2)&&this._differs(n.invalidSignupForm,n.invalidSignupForm=function(s){var n=s.signupEmail,r=s.signupPassword,t=s.signupPassword2;return!I(n)||(r!==t||(r.length<8||void 0))}(n))&&(s.invalidSignupForm=!0),(s.signupEmail||s.forgotPassword)&&this._differs(n.invalidSignupEmail,n.invalidSignupEmail=function(s){var n=s.signupEmail;return s.forgotPassword,!I(n)&&""!==n}(n))&&(s.invalidSignupEmail=!0),(s.signupPassword||s.signupPassword2)&&this._differs(n.invalidSignupPassword,n.invalidSignupPassword=function(s){var n=s.signupPassword,r=s.signupPassword2;return""!==n&&n!==r}(n))&&(s.invalidSignupPassword=!0)},n(as.prototype,{_add:function(s,n){this._dependents.push({component:s,props:n})},_init:function(s){for(var n={},r=0;r<s.length;r+=1){var t=s[r];n["$"+t]=this._state[t]}return n},_remove:function(s){for(var n=this._dependents.length;n--;)if(this._dependents[n].component===s)return void this._dependents.splice(n,1)},_set:function(s,r){var t=this,e=this._state;this._state=n(n({},e),s);for(var o=0;o<this._sortedComputedProperties.length;o+=1)this._sortedComputedProperties[o].update(this._state,r);this.fire("state",{changed:r,previous:e,current:this._state}),this._dependents.filter((function(s){for(var n={},e=!1,o=0;o<s.props.length;o+=1){var i=s.props[o];i in r&&(n["$"+i]=t._state[i],e=!0)}if(e)return s.component._stage(n),!0})).forEach((function(s){s.component.set({})})),this.fire("update",{changed:r,previous:e,current:this._state})},_sortComputedProperties:function(){var s,n=this._computed,r=this._sortedComputedProperties=[],t=l();function e(o){var i=n[o];i&&(i.deps.forEach((function(n){if(n===s)throw new Error("Cyclical dependency detected between "+n+" <-> "+o);e(n)})),t[o]||(t[o]=!0,r.push(i)))}for(var o in this._computed)e(s=o)},compute:function(s,r,t){var e,o=this,i={deps:r,update:function(n,i,a){var p=r.map((function(s){return s in i&&(a=!0),n[s]}));if(a){var d=t.apply(null,p);o._differs(d,e)&&(e=d,i[s]=!0,n[s]=e)}}};this._computed[s]=i,this._sortComputedProperties();var a=n({},this._state),p={};i.update(a,p,!0),this._set(a,p)},fire:w,get:h,on:_,set:function(s){var n=this._state,r=this._changed={},t=!1;for(var e in s){if(this._computed[e])throw new Error("'"+e+"' is a read-only computed property");this._differs(s[e],n[e])&&(r[e]=t=!0)}t&&this._set(s,r)}});return{App:is,data:{},store:new as({}),init:function(s){}}}));
