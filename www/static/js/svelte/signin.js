!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("svelte/signin",t):(n=n||self).signin=t()}(this,(function(){"use strict";function n(n,t,e){return n(e={path:t,exports:{},require:function(n,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&e.path)}},e.exports),e.exports}var t=n((function(n){function t(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=t=function(n){return typeof n}:n.exports=t=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(e)}n.exports=t}));function e(){}function r(n,t){for(var e in t)n[e]=t[e];return n}function o(n,t){for(var e in t)n[e]=1;return n}function s(n,t){n.appendChild(t)}function i(n,t,e){n.insertBefore(t,e)}function a(n){n.parentNode.removeChild(n)}function u(n){return document.createElement(n)}function c(n){return document.createTextNode(n)}function l(n,t,e,r){n.addEventListener(t,e,r)}function p(n,t,e,r){n.removeEventListener(t,e,r)}function d(n,t,e){null==e?n.removeAttribute(t):n.setAttribute(t,e)}function f(n,t,e){n.style.setProperty(t,e)}function g(n,t,e){n.classList[e?"add":"remove"](t)}function m(){return Object.create(null)}function w(n,e){return n!=n?e==e:n!==e||n&&"object"===t(n)||"function"==typeof n}function v(n,t){return n!=n?t==t:n!==t}function h(n,t){var e=n in this._handlers&&this._handlers[n].slice();if(e)for(var r=0;r<e.length;r+=1){var o=e[r];if(!o.__calling)try{o.__calling=!0,o.call(this,t)}finally{o.__calling=!1}}}function b(n){n._lock=!0,k(n._beforecreate),k(n._oncreate),k(n._aftercreate),n._lock=!1}function _(){return this._state}function S(n,t){n._handlers=m(),n._slots=m(),n._bind=t._bind,n._staged={},n.options=t,n.root=t.root||n,n.store=t.store||n.root.store,t.root||(n._beforecreate=[],n._oncreate=[],n._aftercreate=[])}function y(n,t){var e=this._handlers[n]||(this._handlers[n]=[]);return e.push(t),{cancel:function(){var n=e.indexOf(t);~n&&e.splice(n,1)}}}function k(n){for(;n&&n.length;)n.shift()()}var x={destroy:function(n){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==n),this._fragment=null,this._state={}},get:_,fire:h,on:y,set:function(n){this._set(r({},n)),this.root._lock||b(this.root)},_recompute:e,_set:function(n){var t=this._state,e={},o=!1;for(var s in n=r(this._staged,n),this._staged={},n)this._differs(n[s],t[s])&&(e[s]=o=!0);o&&(this._state=r(r({},t),n),this._recompute(e,this._state),this._bind&&this._bind(e,this._state),this._fragment&&(this.fire("state",{changed:e,current:this._state,previous:t}),this._fragment.p(e,this._state),this.fire("update",{changed:e,current:this._state,previous:t})))},_stage:function(n){r(this._staged,n)},_mount:function(n,t){this._fragment[this._fragment.i?"i":"m"](n,t||null)},_differs:w},E={};function P(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===n?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(E[n]=window.__dw.vis.meta.locale||{}):E[n]="core"===n?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[n])}function N(n){var t=arguments,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(n=n.trim(),E[e]||P(e),!E[e][n])return"MISSING:"+n;var r=E[e][n];return"string"==typeof r&&arguments.length>2&&(r=r.replace(/\$(\d)/g,(function(n,e){return e=2+Number(e),void 0===t[e]?n:t[e]}))),r}var H=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},O=n((function(n){function t(n){return(t="function"==typeof Symbol&&"symbol"===O(Symbol.iterator)?function(n){return O(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":O(n)})(n)}function e(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?n.exports=e=function(n){return t(n)}:n.exports=e=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":t(n)},e(r)}n.exports=e}));var L=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};var T=function(n,t){return!t||"object"!==O(t)&&"function"!=typeof t?L(n):t},j=n((function(n){function t(e){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},t(e)}n.exports=t})),M=n((function(n){function t(e,r){return n.exports=t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},t(e,r)}n.exports=t}));var C=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&M(n,t)};var A=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")},I=n((function(n){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function e(r,o,s){return t()?n.exports=e=Reflect.construct:n.exports=e=function(n,t,e){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(n,r));return e&&M(o,e.prototype),o},e.apply(null,arguments)}n.exports=e})),q=n((function(n){function t(e){var r="function"==typeof Map?new Map:void 0;return n.exports=t=function(n){if(null===n||!A(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return I(n,arguments,j(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),M(t,n)},t(e)}n.exports=t}));var F=function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n};var U=function(n,t){if(null==n)return{};var e,r,o={},s=Object.keys(n);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||(o[e]=n[e]);return o};var W=function(n,t){if(null==n)return{};var e,r,o=U(n,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(o[e]=n[e])}return o};function D(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function R(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?D(Object(e),!0).forEach((function(t){F(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):D(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function $(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=R({payload:null,raw:!1,method:"GET",baseUrl:"//".concat(dw.backend.__api_domain),mode:"cors",credentials:"include"},t,{headers:R({"Content-Type":"application/json"},t.headers)}),r=e.payload,o=e.baseUrl,s=e.raw,i=W(e,["payload","baseUrl","raw"]),a="".concat(o.replace(/\/$/,""),"/").concat(n.replace(/^\//,""));return r&&(i.body=JSON.stringify(r)),window.fetch(a,i).then((function(n){if(s)return n;if(!n.ok)throw new G(n);if(204===n.status||!n.headers.get("content-type"))return n;var t=n.headers.get("content-type").split(";")[0];return"application/json"===t?n.json():"image/png"===t||"application/pdf"===t?n.blob():n.text()}))}$.get=z("GET"),$.patch=z("PATCH"),$.put=z("PUT"),$.post=z("POST"),$.head=z("HEAD");function z(n){return function(t,e){if(e&&e.method)throw new Error("Setting option.method is not allowed in httpReq.".concat(n.toLowerCase(),"()"));return $(t,R({},e,{method:n}))}}$.delete=z("DELETE");var G=function(n){function t(n){var e;return H(this,t),(e=T(this,j(t).call(this))).name="HttpReqError",e.status=n.status,e.statusText=n.statusText,e.message="[".concat(n.status,"] ").concat(n.statusText),e.response=n,e}return C(t,n),t}(q(Error));var Z,B=!1;function J(n){var t=n.password;return Z?Z(t):(!B&&t.length>4&&(B=!0,require(["zxcvbn"],(function(n){Z=n}))),!1)}function K(n,t){var e,r=t.password.length>=8&&Q();return{c:function(){r&&r.c(),e=document.createComment("")},m:function(n,t){r&&r.m(n,t),i(n,e,t)},p:function(n,t){t.password.length>=8?r||((r=Q()).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d:function(n){r&&r.d(n),n&&a(e)}}}function Q(n,t){return{c:e,m:e,d:e}}function V(n){S(this,n),this._state=r({password:""},n.data),this._recompute({password:1,passwordStrength:1,passwordTooShort:1,passwordHelp:1},this._state),this._intro=!0,this._fragment=K(0,this._state),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor))}function X(n,t,e){return e?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}r(V.prototype,x),V.prototype._recompute=function(n,t){n.password&&(this._differs(t.passwordTooShort,t.passwordTooShort=t.password.length<8)&&(n.passwordTooShort=!0),this._differs(t.passwordStrength,t.passwordStrength=J(t))&&(n.passwordStrength=!0)),(n.password||n.passwordStrength)&&this._differs(t.passwordHelp,t.passwordHelp=function(n){var t=n.password,e=n.passwordStrength;if(""===t||!e)return N("account / pwd-too-short").replace("%num",8);var r=["bad","weak","ok","good","excellent"][e.score];return N("account / password / ".concat(r))}(t))&&(n.passwordHelp=!0),(n.password||n.passwordTooShort||n.passwordStrength||n.passwordHelp)&&this._differs(t.passwordError,t.passwordError=function(n){var t=n.password,e=n.passwordTooShort,r=n.passwordStrength,o=n.passwordHelp;return!!t&&(e?N("account / pwd-too-short").replace("%num",8):!!(r&&r.score<2)&&o)}(t))&&(n.passwordError=!0),(n.passwordStrength||n.passwordHelp)&&this._differs(t.passwordSuccess,t.passwordSuccess=function(n){var t=n.passwordStrength,e=n.passwordHelp;return!!(t&&t.score>2)&&e}(t))&&(n.passwordSuccess=!0),(n.password||n.passwordTooShort)&&this._differs(t.passwordOk,t.passwordOk=function(n){var t=n.password,e=n.passwordTooShort;return t&&!e}(t))&&(n.passwordOk=!0)};var Y=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function nn(){}function tn(n){var t=n();if(t&&t.then)return t.then(nn)}function en(n,t){try{var e=n()}catch(n){return t(n)}return e&&e.then?e.then(void 0,t):e}function rn(n,t){return n&&n.then?n.then(t):t(n)}function on(n){return Y.test(n)}var sn={doLogIn:function(){try{var n=this,t=n.get(),e=t.loginEmail,r=t.loginPassword,o=t.rememberLogin;return n.set({loggingIn:!0,loginError:"",loginSuccess:""}),rn(en((function(){return X($.post("/v3/auth/login",{payload:{email:e,password:r,keepSession:o}}),(function(){n.set({loginSuccess:"Login successful, reloading page"}),setTimeout((function(){window.window.location.href="/"}),2e3)}))}),(function(t){return tn((function(){if("HttpReqError"===t.name)return X(t.response.json(),(function(e){n.set({loginError:e?e.message:t.message})}));n.set({loginError:t})}))})),(function(){n.set({loggingIn:!1})}))}catch(n){return Promise.reject(n)}},doSignUp:function(){try{var n=this,t=n.get(),e=t.signupWithoutPassword,r=t.signupEmail,o=t.signupPassword;if(t.signingUp)return;return n.set({signingUp:!0,signupError:"",signupSuccess:""}),function(n){if(n&&n.then)return n.then(nn)}(en((function(){return X($.post("/v3/auth/signup",{payload:{email:r,invitation:e,password:e?void 0:o}}),(function(){var t,r,o,s;t="App",r="sign-up",window._paq&&window._paq.push(["trackEvent",t,r,o,s]),e?n.set({signupSuccess:"Please check your e-mail inbox to proceed on your desktop computer.",signingUp:!1}):(n.set({signupSuccess:"Sign up successful. Redirecting to user dashboard."}),setTimeout((function(){window.location.href="/"}),2e3))}))}),(function(t){return e=function(){n.set({signingUp:!1})},(r=function(){if("HttpReqError"===t.name)return X(t.response.json(),(function(e){n.set({signupError:e?e.message:t.message})}));n.set({signupError:t})}())&&r.then?r.then(e):e(r);var e,r})))}catch(n){return Promise.reject(n)}},requestNewPassword:function(){try{var n=this,t=n.get().loginEmail;return n.set({requestingPassword:!0,loginError:"",loginSuccess:""}),rn(en((function(){return X($.post("/v3/auth/reset-password",{payload:{email:t}}),(function(){n.set({loginSuccess:N("signin / password-reset / success")})}))}),(function(t){return tn((function(){if("HttpReqError"===t.name)return X(t.response.json(),(function(e){n.set({loginError:e.message?N("signin / password-reset / error / ".concat(e.message)):t.message})}));n.set({loginError:t})}))})),(function(){n.set({requestingPassword:!1})}))}catch(n){return Promise.reject(n)}}};function an(){window.innerWidth<740&&this.set({noSignin:!0,signupWithoutPassword:!0})}function un(n,t,e){var r=Object.create(n);return r.signin=t[e],r}function cn(n,t){var e,r,o,f,m,w,v,h,b,_,S,y,k,x,E,P,H,O,L,T,j,M=N("login / login / headline"),C=N("login / login / intro"),A=N("email"),I=!1,q=t.loginSuccess&&ln(n,t),F=t.loginError&&pn(n,t);function U(){I=!0,n.set({loginEmail:x.value}),I=!1}var W=!t.forgotPassword&&dn(n,t),D=!t.forgotPassword&&fn(n,t),R=t.forgotPassword&&mn(n,t);function $(n){return n.forgotPassword?hn:vn}var z=$(t),G=z(n,t);return{c:function(){e=u("div"),r=u("h3"),o=c("\n\n            "),f=u("p"),m=c("\n\n            "),q&&q.c(),w=c(" "),F&&F.c(),v=c("\n\n            "),h=u("form"),b=u("div"),_=u("div"),S=u("label"),y=c(A),k=c("\n                        "),x=u("input"),E=c("\n                    "),W&&W.c(),P=c("\n                "),D&&D.c(),H=c("\n\n            "),O=u("div"),R&&R.c(),L=c("\n                "),T=u("div"),G.c(),r.className="svelte-1x6vgwk",S.className="svelte-1x6vgwk",l(x,"input",U),x.className="login-email input-xxlarge span3 svelte-1x6vgwk",x.autocomplete="username",d(x,"type","email"),_.className="control-group svelte-1x6vgwk",g(_,"error",t.invalidLoginEmail),b.className="svelte-1x6vgwk",h.className="login-form form-vertical",T.className="svelte-1x6vgwk",O.className="svelte-1x6vgwk",e.className=j="span"+(t.noSignup?4:3)+" row-login svelte-1x6vgwk"},m:function(n,a){i(n,e,a),s(e,r),r.innerHTML=M,s(e,o),s(e,f),f.innerHTML=C,s(e,m),q&&q.m(e,null),s(e,w),F&&F.m(e,null),s(e,v),s(e,h),s(h,b),s(b,_),s(_,S),s(S,y),s(_,k),s(_,x),x.value=t.loginEmail,s(b,E),W&&W.m(b,null),s(h,P),D&&D.m(h,null),s(e,H),s(e,O),R&&R.m(O,null),s(O,L),s(O,T),G.m(T,null)},p:function(t,r){r.loginSuccess?q?q.p(t,r):((q=ln(n,r)).c(),q.m(e,w)):q&&(q.d(1),q=null),r.loginError?F?F.p(t,r):((F=pn(n,r)).c(),F.m(e,v)):F&&(F.d(1),F=null),!I&&t.loginEmail&&(x.value=r.loginEmail),t.invalidLoginEmail&&g(_,"error",r.invalidLoginEmail),r.forgotPassword?W&&(W.d(1),W=null):W?W.p(t,r):((W=dn(n,r)).c(),W.m(b,null)),r.forgotPassword?D&&(D.d(1),D=null):D?D.p(t,r):((D=fn(n,r)).c(),D.m(h,null)),r.forgotPassword?R?R.p(t,r):((R=mn(n,r)).c(),R.m(O,L)):R&&(R.d(1),R=null),z!==(z=$(r))&&(G.d(1),(G=z(n,r)).c(),G.m(T,null)),t.noSignup&&j!==(j="span"+(r.noSignup?4:3)+" row-login svelte-1x6vgwk")&&(e.className=j)},d:function(n){n&&a(e),q&&q.d(),F&&F.d(),p(x,"input",U),W&&W.d(),D&&D.d(),R&&R.d(),G.d()}}}function ln(n,t){var e;return{c:function(){(e=u("div")).className="alert alert-success svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.innerHTML=t.loginSuccess},p:function(n,t){n.loginSuccess&&(e.innerHTML=t.loginSuccess)},d:function(n){n&&a(e)}}}function pn(n,t){var e;return{c:function(){(e=u("div")).className="alert alert-error svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.innerHTML=t.loginError},p:function(n,t){n.loginError&&(e.innerHTML=t.loginError)},d:function(n){n&&a(e)}}}function dn(n,t){var e,r,o,f,g,m=N("password"),w=!1;function v(){w=!0,n.set({loginPassword:g.value}),w=!1}return{c:function(){e=u("div"),r=u("label"),o=c(m),f=c("\n                        "),g=u("input"),r.className="svelte-1x6vgwk",l(g,"input",v),g.className="login-pwd input-xxlarge span3 svelte-1x6vgwk",g.autocomplete="current-password",d(g,"type","password"),e.className="control-group svelte-1x6vgwk"},m:function(n,a){i(n,e,a),s(e,r),s(r,o),s(e,f),s(e,g),g.value=t.loginPassword},p:function(n,t){!w&&n.loginPassword&&(g.value=t.loginPassword)},d:function(n){n&&a(e),p(g,"input",v)}}}function fn(n,t){var e,r,o,g,m,w,v,h,b=N("Remember login?");function _(){n.set({rememberLogin:o.checked})}var S=t.loggingIn&&gn();function y(t){t.preventDefault(),n.doLogIn()}return{c:function(){e=u("div"),r=u("label"),o=u("input"),g=c("\n                        "),m=u("noscript"),w=c("\n                    "),v=u("button"),S&&S.c(),h=c(" Login"),l(o,"change",_),o.className="keep-login svelte-1x6vgwk",d(o,"type","checkbox"),r.className="checkbox svelte-1x6vgwk",r.htmlFor="keep-login",f(r,"margin-top","10px"),l(v,"click",y),v.disabled=t.invalidLoginForm,v.className="btn btn-login btn-primary svelte-1x6vgwk",e.className="svelte-1x6vgwk"},m:function(n,a){i(n,e,a),s(e,r),s(r,o),o.checked=t.rememberLogin,s(r,g),s(r,m),m.insertAdjacentHTML("afterend",b),s(e,w),s(e,v),S&&S.m(v,null),s(v,h)},p:function(n,t){n.rememberLogin&&(o.checked=t.rememberLogin),t.loggingIn?S||((S=gn()).c(),S.m(v,h)):S&&(S.d(1),S=null),n.invalidLoginForm&&(v.disabled=t.invalidLoginForm)},d:function(n){n&&a(e),p(o,"change",_),S&&S.d(),p(v,"click",y)}}}function gn(n,t){var e;return{c:function(){(e=u("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){i(n,e,t)},d:function(n){n&&a(e)}}}function mn(n,t){var e,r,o,d,g=N("Send new password"),m=t.requestingPassword&&wn();function w(t){t.preventDefault(),n.requestNewPassword()}return{c:function(){e=u("div"),r=u("button"),m&&m.c(),o=c("\n                        "),d=u("noscript"),l(r,"click",w),r.disabled=t.invalidLoginEmail,r.className="btn btn-send-pw btn-primary",f(e,"padding-bottom","10px"),e.className="svelte-1x6vgwk"},m:function(n,t){i(n,e,t),s(e,r),m&&m.m(r,null),s(r,o),s(r,d),d.insertAdjacentHTML("afterend",g)},p:function(n,t){t.requestingPassword?m||((m=wn()).c(),m.m(r,o)):m&&(m.d(1),m=null),n.invalidLoginEmail&&(r.disabled=t.invalidLoginEmail)},d:function(n){n&&a(e),m&&m.d(),p(r,"click",w)}}}function wn(n,t){var e;return{c:function(){(e=u("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){i(n,e,t)},d:function(n){n&&a(e)}}}function vn(n,t){var e,r=N("Can't recall your password?");function o(t){t.preventDefault(),n.set({forgotPassword:!0})}return{c:function(){l(e=u("a"),"click",o),e.href="#/forgot-password"},m:function(n,t){i(n,e,t),e.innerHTML=r},d:function(n){n&&a(e),p(e,"click",o)}}}function hn(n,t){var e,r=N("Return to login...");function o(t){t.preventDefault(),n.set({forgotPassword:!1})}return{c:function(){l(e=u("a"),"click",o),e.href="#/return"},m:function(n,t){i(n,e,t),e.innerHTML=r},d:function(n){n&&a(e),p(e,"click",o)}}}function bn(n,t){var r;return{c:function(){(r=u("style")).textContent="#dwLoginForm {\n                width: 420px;\n                margin-left: -210px;\n                box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n                border: 0;\n                position: relative;\n            }"},m:function(n,t){i(n,r,t)},p:e,d:function(n){n&&a(r)}}}function _n(n,t){var e,r,o,l,p,d,f,g,m=N("login / signup / headline");function w(n){return n.signupWithoutPassword?yn:Sn}var v=w(t),h=v(n,t),b=t.signupSuccess&&kn(n,t),_=t.signupError&&xn(n,t),S=(!t.signupSuccess||!t.signupWithoutPassword)&&En(n,t),y=t.signupWithoutPassword&&!t.signupSuccess&&Cn(n);return{c:function(){e=u("div"),r=u("h3"),o=c("\n\n            "),h.c(),l=c(" "),b&&b.c(),p=c(" "),_&&_.c(),d=c(" "),S&&S.c(),f=c(" "),y&&y.c(),r.className="svelte-1x6vgwk",e.className=g="span"+(t.noSignin?4:3)+" row-signup svelte-1x6vgwk"},m:function(n,t){i(n,e,t),s(e,r),r.innerHTML=m,s(e,o),h.m(e,null),s(e,l),b&&b.m(e,null),s(e,p),_&&_.m(e,null),s(e,d),S&&S.m(e,null),s(e,f),y&&y.m(e,null)},p:function(t,r){v!==(v=w(r))&&(h.d(1),(h=v(n,r)).c(),h.m(e,l)),r.signupSuccess?b?b.p(t,r):((b=kn(n,r)).c(),b.m(e,p)):b&&(b.d(1),b=null),r.signupError?_?_.p(t,r):((_=xn(n,r)).c(),_.m(e,d)):_&&(_.d(1),_=null),r.signupSuccess&&r.signupWithoutPassword?S&&(S.d(1),S=null):S?S.p(t,r):((S=En(n,r)).c(),S.m(e,f)),r.signupWithoutPassword&&!r.signupSuccess?y||((y=Cn(n)).c(),y.m(e,null)):y&&(y.d(1),y=null),t.noSignin&&g!==(g="span"+(r.noSignin?4:3)+" row-signup svelte-1x6vgwk")&&(e.className=g)},d:function(n){n&&a(e),h.d(),b&&b.d(),_&&_.d(),S&&S.d(),y&&y.d()}}}function Sn(n,t){var e,r=N("login / signup / intro");return{c:function(){e=u("p")},m:function(n,t){i(n,e,t),e.innerHTML=r},d:function(n){n&&a(e)}}}function yn(n,t){var e,r,o,l,p,d=N("signup / mobile / p1"),f=N("signup / mobile / p2");return{c:function(){e=u("p"),r=c(d),o=c("\n            "),l=u("p"),p=c(f)},m:function(n,t){i(n,e,t),s(e,r),i(n,o,t),i(n,l,t),s(l,p)},d:function(n){n&&(a(e),a(o),a(l))}}}function kn(n,t){var e;return{c:function(){(e=u("div")).className="alert alert-success svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.innerHTML=t.signupSuccess},p:function(n,t){n.signupSuccess&&(e.innerHTML=t.signupSuccess)},d:function(n){n&&a(e)}}}function xn(n,t){var e;return{c:function(){(e=u("div")).className="alert alert-error svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.innerHTML=t.signupError},p:function(n,t){n.signupError&&(e.innerHTML=t.signupError)},d:function(n){n&&a(e)}}}function En(n,t){var e,r,o,f,m,w,v,h,b,_,S,y,k=N("email"),x=!1,E=N("Sign Up");function P(){x=!0,n.set({signupEmail:v.value}),x=!1}var H=!t.signupWithoutPassword&&Pn(n,t);function O(n){return n.signingUp?Mn:jn}var L=O(t),T=L(n,t);function j(t){t.preventDefault(),n.doSignUp()}return{c:function(){e=u("div"),r=u("form"),o=u("div"),f=u("label"),m=c(k),w=c("\n                        "),v=u("input"),h=c("\n                    "),H&&H.c(),b=c("\n                    "),_=u("button"),T.c(),S=c("\n                        \n                        "),y=u("noscript"),f.className="svelte-1x6vgwk",l(v,"input",P),d(v,"type","email"),v.autocomplete="username",v.className="span3 input-xlarge register-email svelte-1x6vgwk",o.className="control-group svelte-1x6vgwk",g(o,"error",t.invalidSignupEmail),l(_,"click",j),_.disabled=t.invalidSignupForm,_.className="btn btn-default",e.className="signup-form form-vertcal svelte-1x6vgwk"},m:function(n,a){i(n,e,a),s(e,r),s(r,o),s(o,f),s(f,m),s(o,w),s(o,v),v.value=t.signupEmail,s(r,h),H&&H.m(r,null),s(r,b),s(r,_),T.m(_,null),s(_,S),s(_,y),y.insertAdjacentHTML("afterend",E)},p:function(t,e){!x&&t.signupEmail&&(v.value=e.signupEmail),t.invalidSignupEmail&&g(o,"error",e.invalidSignupEmail),e.signupWithoutPassword?H&&(H.d(1),H=null):H?H.p(t,e):((H=Pn(n,e)).c(),H.m(r,b)),L!==(L=O(e))&&(T.d(1),(T=L(n,e)).c(),T.m(_,S)),t.invalidSignupForm&&(_.disabled=e.invalidSignupForm)},d:function(n){n&&a(e),p(v,"input",P),H&&H.d(),T.d(),p(_,"click",j)}}}function Pn(n,t){var e,r,o,m,w,v,h,b,_,S,y,k,x,E=N("password"),P={},H=N("account / invite / password-clear-text");function O(n){return n.showPasswordAsClearText?Hn:Nn}var L=O(t),T=L(n,t),j={};void 0!==t.signupPassword&&(j.password=t.signupPassword,P.password=!0),void 0!==t.passwordHelp&&(j.passwordHelp=t.passwordHelp,P.passwordHelp=!0),void 0!==t.passwordSuccess&&(j.passwordSuccess=t.passwordSuccess,P.passwordSuccess=!0),void 0!==t.passwordError&&(j.passwordError=t.passwordError,P.passwordError=!0),void 0!==t.signupPasswordOk&&(j.passwordOk=t.signupPasswordOk,P.passwordOk=!0);var M=new V({root:n.root,store:n.store,data:j,_bind:function(t,e){var r={};!P.password&&t.password&&(r.signupPassword=e.password),!P.passwordHelp&&t.passwordHelp&&(r.passwordHelp=e.passwordHelp),!P.passwordSuccess&&t.passwordSuccess&&(r.passwordSuccess=e.passwordSuccess),!P.passwordError&&t.passwordError&&(r.passwordError=e.passwordError),!P.passwordOk&&t.passwordOk&&(r.signupPasswordOk=e.passwordOk),n._set(r),P={}}});function C(n){return n.passwordError?Tn:n.passwordSuccess?Ln:n.passwordHelp?On:void 0}n.root._beforecreate.push((function(){M._bind({password:1,passwordHelp:1,passwordSuccess:1,passwordError:1,passwordOk:1},M.get())}));var A=C(t),I=A&&A(n,t);function q(){n.set({showPasswordAsClearText:y.checked})}return{c:function(){e=u("div"),r=u("label"),o=c(E),m=c("\n                        "),T.c(),w=c("\n                        "),v=u("div"),M._fragment.c(),h=c("\n                            "),I&&I.c(),b=c("\n                    "),_=u("div"),S=u("label"),y=u("input"),k=c(" "),x=u("noscript"),r.className="svelte-1x6vgwk",f(v,"width","270px"),v.className="svelte-1x6vgwk",e.className="control-group svelte-1x6vgwk",g(e,"warning",t.passwordError),g(e,"success",t.passwordSuccess),l(y,"change",q),d(y,"type","checkbox"),y.className="svelte-1x6vgwk",S.className="checkbox svelte-1x6vgwk",S.htmlFor="keep-login",f(S,"margin-top","10px"),_.className="control-group svelte-1x6vgwk"},m:function(n,a){i(n,e,a),s(e,r),s(r,o),s(e,m),T.m(e,null),s(e,w),s(e,v),M._mount(v,null),s(v,h),I&&I.m(v,null),i(n,b,a),i(n,_,a),s(_,S),s(S,y),y.checked=t.showPasswordAsClearText,s(S,k),s(S,x),x.insertAdjacentHTML("afterend",H)},p:function(r,o){L===(L=O(t=o))&&T?T.p(r,t):(T.d(1),(T=L(n,t)).c(),T.m(e,w));var s={};!P.password&&r.signupPassword&&(s.password=t.signupPassword,P.password=void 0!==t.signupPassword),!P.passwordHelp&&r.passwordHelp&&(s.passwordHelp=t.passwordHelp,P.passwordHelp=void 0!==t.passwordHelp),!P.passwordSuccess&&r.passwordSuccess&&(s.passwordSuccess=t.passwordSuccess,P.passwordSuccess=void 0!==t.passwordSuccess),!P.passwordError&&r.passwordError&&(s.passwordError=t.passwordError,P.passwordError=void 0!==t.passwordError),!P.passwordOk&&r.signupPasswordOk&&(s.passwordOk=t.signupPasswordOk,P.passwordOk=void 0!==t.signupPasswordOk),M._set(s),P={},A===(A=C(t))&&I?I.p(r,t):(I&&I.d(1),(I=A&&A(n,t))&&I.c(),I&&I.m(v,null)),r.passwordError&&g(e,"warning",t.passwordError),r.passwordSuccess&&g(e,"success",t.passwordSuccess),r.showPasswordAsClearText&&(y.checked=t.showPasswordAsClearText)},d:function(n){n&&a(e),T.d(),M.destroy(),I&&I.d(),n&&(a(b),a(_)),p(y,"change",q)}}}function Nn(n,t){var e,r=!1;function o(){r=!0,n.set({signupPassword:e.value}),r=!1}return{c:function(){l(e=u("input"),"input",o),e.dataset.lpignore="true",e.autocomplete="off",d(e,"type","password"),e.className="span3 input-xlarge register-pwd svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.value=t.signupPassword},p:function(n,t){!r&&n.signupPassword&&(e.value=t.signupPassword)},d:function(n){n&&a(e),p(e,"input",o)}}}function Hn(n,t){var e,r=!1;function o(){r=!0,n.set({signupPassword:e.value}),r=!1}return{c:function(){l(e=u("input"),"input",o),e.dataset.lpignore="true",e.autocomplete="off",d(e,"type","text"),e.className="span3 input-xlarge register-pwd svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.value=t.signupPassword},p:function(n,t){!r&&n.signupPassword&&(e.value=t.signupPassword)},d:function(n){n&&a(e),p(e,"input",o)}}}function On(n,t){var e;return{c:function(){(e=u("p")).className="help muted svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.innerHTML=t.passwordHelp},p:function(n,t){n.passwordHelp&&(e.innerHTML=t.passwordHelp)},d:function(n){n&&a(e)}}}function Ln(n,t){var e;return{c:function(){(e=u("p")).className="help text-success svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.innerHTML=t.passwordSuccess},p:function(n,t){n.passwordSuccess&&(e.innerHTML=t.passwordSuccess)},d:function(n){n&&a(e)}}}function Tn(n,t){var e;return{c:function(){(e=u("p")).className="help text-warning svelte-1x6vgwk"},m:function(n,r){i(n,e,r),e.innerHTML=t.passwordError},p:function(n,t){n.passwordError&&(e.innerHTML=t.passwordError)},d:function(n){n&&a(e)}}}function jn(n,t){var e;return{c:function(){(e=u("i")).className="fa fa-fw fa-pencil"},m:function(n,t){i(n,e,t)},d:function(n){n&&a(e)}}}function Mn(n,t){var e;return{c:function(){(e=u("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){i(n,e,t)},d:function(n){n&&a(e)}}}function Cn(n,t){var e,r,o=N("signup / mobile / back");function d(t){n.set({signupWithoutPassword:!1,noSignin:!1})}return{c:function(){e=u("a"),r=c(o),l(e,"click",d),e.href="#"},m:function(n,t){i(n,e,t),s(e,r)},d:function(n){n&&a(e),p(e,"click",d)}}}function An(n,t){for(var e,r,o,l,p,d,f,g=N("login / alternative signin"),m=N("login / agree-terms"),w=t.alternativeSignIn,v=[],h=0;h<w.length;h+=1)v[h]=qn(n,un(t,w,h));return{c:function(){e=u("div"),r=u("div"),o=u("noscript"),l=c(" ");for(var n=0;n<v.length;n+=1)v[n].c();p=c("."),d=c("\n        "),f=u("div"),r.className="svelte-1x6vgwk",f.className="svelte-1x6vgwk",e.className="alternative-signin svelte-1x6vgwk"},m:function(n,t){i(n,e,t),s(e,r),s(r,o),o.insertAdjacentHTML("beforebegin",g),s(r,l);for(var a=0;a<v.length;a+=1)v[a].m(r,null);s(r,p),s(e,d),s(e,f),f.innerHTML=m},p:function(t,e){if(t.alternativeSignIn){w=e.alternativeSignIn;for(var o=0;o<w.length;o+=1){var s=un(e,w,o);v[o]?v[o].p(t,s):(v[o]=qn(n,s),v[o].c(),v[o].m(r,p))}for(;o<v.length;o+=1)v[o].d(1);v.length=w.length}},d:function(n){n&&a(e),function(n,t){for(var e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}(v,n)}}}function In(n,t){var e,r;return{c:function(){(e=u("i")).className=r=t.signin.icon+" svelte-1x6vgwk"},m:function(n,t){i(n,e,t)},p:function(n,t){n.alternativeSignIn&&r!==(r=t.signin.icon+" svelte-1x6vgwk")&&(e.className=r)},d:function(n){n&&a(e)}}}function qn(n,t){var e,r,o,l,p=t.signin.label,d=t.signin.icon&&In(0,t);return{c:function(){e=u("a"),d&&d.c(),r=c(" "),o=u("noscript"),e.href=l=t.signin.url,e.className="alternative-signin-link svelte-1x6vgwk"},m:function(n,t){i(n,e,t),d&&d.m(e,null),s(e,r),s(e,o),o.insertAdjacentHTML("afterend",p)},p:function(n,t){t.signin.icon?d?d.p(n,t):((d=In(0,t)).c(),d.m(e,r)):d&&(d.d(1),d=null),n.alternativeSignIn&&p!==(p=t.signin.label)&&(!function(n){for(;n.nextSibling;)n.parentNode.removeChild(n.nextSibling)}(o),o.insertAdjacentHTML("afterend",p)),n.alternativeSignIn&&l!==(l=t.signin.url)&&(e.href=l)},d:function(n){n&&a(e),d&&d.d()}}}function Fn(n){var t=this;S(this,n),this._state=r({noSignup:!1,noSignin:!1,signupWithoutPassword:!1,alternativeSignIn:[],forgotPassword:!1,loginEmail:"",loginPassword:"",rememberLogin:!0,loginEmailError:!1,loginError:"",loginSuccess:"",signupEmail:"",signupPassword:"",signupPasswordOk:!1,passwordHelp:!1,passwordSuccess:!1,passwordError:!1,showPasswordAsClearText:!1,requestingPassword:!1,loggingIn:!1,signingUp:!1},n.data),this._recompute({loginEmail:1,forgotPassword:1,loggingIn:1,loginPassword:1,signupWithoutPassword:1,signingUp:1,signupEmail:1,signupPassword:1,signupPasswordOk:1},this._state),this._intro=!0,this._fragment=function(n,t){var e,r,o,d,f,g,m,w,v,h,b,_,S,y,k=N("login / signup / confirmation-email"),x=N("login / signup / confirmation-email-hint"),E=N("login / signup / confirm"),P=!t.noSignin&&cn(n,t);function H(n){return n.noSignup?bn:_n}var O=H(t),L=O(n,t),T=!t.noSignin&&t.alternativeSignIn.length&&An(n,t);function j(t){t.stopPropagation(),n.fire("keyup",t)}return{c:function(){e=u("div"),(r=u("button")).textContent="×",o=c("\n    "),d=u("div"),P&&P.c(),f=c(" "),L.c(),g=c("\n\n    "),T&&T.c(),m=c("\n\n    "),w=u("div"),v=u("div"),h=u("noscript"),b=c("\n\n            "),_=u("div"),S=c("\n\n            "),y=u("button"),r.type="button",r.className="close",r.dataset.dismiss="modal",d.className="row login-signup",_.className="sub",y.className="button btn btn-got-it",v.className="jumbo-text",w.className="signup-confirm hidden",l(e,"keyup",j),e.className="modal-body svelte-1x6vgwk",e.dataset.piwikMask=!0},m:function(n,t){i(n,e,t),s(e,r),s(e,o),s(e,d),P&&P.m(d,null),s(d,f),L.m(d,null),s(e,g),T&&T.m(e,null),s(e,m),s(e,w),s(w,v),s(v,h),h.insertAdjacentHTML("beforebegin",k),s(v,b),s(v,_),_.innerHTML=x,s(v,S),s(v,y),y.innerHTML=E},p:function(t,r){r.noSignin?P&&(P.d(1),P=null):P?P.p(t,r):((P=cn(n,r)).c(),P.m(d,f)),O===(O=H(r))&&L?L.p(t,r):(L.d(1),(L=O(n,r)).c(),L.m(d,null)),!r.noSignin&&r.alternativeSignIn.length?T?T.p(t,r):((T=An(n,r)).c(),T.m(e,m)):T&&(T.d(1),T=null)},d:function(n){n&&a(e),P&&P.d(),L.d(),T&&T.d(),p(e,"keyup",j)}}}(this,this._state),this.root._oncreate.push((function(){an.call(t),t.fire("update",{changed:o({},t._state),current:t._state})})),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor),b(this))}function Un(n,t){this._handlers={},this._dependents=[],this._computed=m(),this._sortedComputedProperties=[],this._state=r({},n),this._differs=t&&t.immutable?v:w}r(Fn.prototype,x),r(Fn.prototype,sn),Fn.prototype._recompute=function(n,t){var e,r,o,s,i,a,u,c;(n.loginEmail||n.forgotPassword)&&this._differs(t.invalidLoginEmail,t.invalidLoginEmail=(r=(e=t).loginEmail,o=e.forgotPassword,!(on(r)||""===r&&!o)))&&(n.invalidLoginEmail=!0),(n.loggingIn||n.loginEmail||n.loginPassword)&&this._differs(t.invalidLoginForm,t.invalidLoginForm=function(n){var t=n.loggingIn,e=n.loginEmail,r=n.loginPassword;return!!t||(!on(e)||""===r)}(t))&&(n.invalidLoginForm=!0),(n.signupWithoutPassword||n.signingUp||n.signupEmail||n.signupPassword||n.signupPasswordOk)&&this._differs(t.invalidSignupForm,t.invalidSignupForm=(i=(s=t).signupWithoutPassword,a=s.signingUp,u=s.signupEmail,s.signupPassword,c=s.signupPasswordOk,!!a||!on(u)||!i&&!c||void 0))&&(n.invalidSignupForm=!0),(n.signupEmail||n.forgotPassword)&&this._differs(t.invalidSignupEmail,t.invalidSignupEmail=function(n){var t=n.signupEmail;return n.forgotPassword,!on(t)&&""!==t}(t))&&(n.invalidSignupEmail=!0)},r(Un.prototype,{_add:function(n,t){this._dependents.push({component:n,props:t})},_init:function(n){for(var t={},e=0;e<n.length;e+=1){var r=n[e];t["$"+r]=this._state[r]}return t},_remove:function(n){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===n)return void this._dependents.splice(t,1)},_set:function(n,t){var e=this,o=this._state;this._state=r(r({},o),n);for(var s=0;s<this._sortedComputedProperties.length;s+=1)this._sortedComputedProperties[s].update(this._state,t);this.fire("state",{changed:t,previous:o,current:this._state}),this._dependents.filter((function(n){for(var r={},o=!1,s=0;s<n.props.length;s+=1){var i=n.props[s];i in t&&(r["$"+i]=e._state[i],o=!0)}if(o)return n.component._stage(r),!0})).forEach((function(n){n.component.set({})})),this.fire("update",{changed:t,previous:o,current:this._state})},_sortComputedProperties:function(){var n,t=this._computed,e=this._sortedComputedProperties=[],r=m();function o(s){var i=t[s];i&&(i.deps.forEach((function(t){if(t===n)throw new Error("Cyclical dependency detected between ".concat(t," <-> ").concat(s));o(t)})),r[s]||(r[s]=!0,e.push(i)))}for(var s in this._computed)o(n=s)},compute:function(n,t,e){var o,s=this,i={deps:t,update:function(r,i,a){var u=t.map((function(n){return n in i&&(a=!0),r[n]}));if(a){var c=e.apply(null,u);s._differs(c,o)&&(o=c,i[n]=!0,r[n]=o)}}};this._computed[n]=i,this._sortComputedProperties();var a=r({},this._state),u={};i.update(a,u,!0),this._set(a,u)},fire:h,get:_,on:y,set:function(n){var t=this._state,e=this._changed={},r=!1;for(var o in n){if(this._computed[o])throw new Error("'".concat(o,"' is a read-only computed property"));this._differs(n[o],t[o])&&(e[o]=r=!0)}r&&this._set(n,e)}});return{App:Fn,data:{},store:new Un({}),init:function(n){}}}));
