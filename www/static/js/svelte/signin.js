!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("svelte/signin",t):(n=n||self).signin=t()}(this,(function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function t(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function e(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function r(n){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?e(Object(s),!0).forEach((function(e){t(n,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))}))}return n}function s(n){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function o(n,t){return(o=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function a(n,t,e){return(a=i()?Reflect.construct:function(n,t,e){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(n,r));return e&&o(s,e.prototype),s}).apply(null,arguments)}function u(n){var t="function"==typeof Map?new Map:void 0;return(u=function(n){if(null===n||(e=n,-1===Function.toString.call(e).indexOf("[native code]")))return n;var e;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return a(n,arguments,s(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,n)})(n)}function c(n,t){if(null==n)return{};var e,r,s=function(n,t){if(null==n)return{};var e,r,s={},o=Object.keys(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||(s[e]=n[e]);return s}(n,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(s[e]=n[e])}return s}function l(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function p(){}function d(n,t){for(var e in t)n[e]=t[e];return n}function f(n,t){for(var e in t)n[e]=1;return n}function g(n,t){n.appendChild(t)}function m(n,t,e){n.insertBefore(t,e)}function w(n){n.parentNode.removeChild(n)}function h(n){return document.createElement(n)}function v(n){return document.createTextNode(n)}function _(n,t,e,r){n.addEventListener(t,e,r)}function b(n,t,e,r){n.removeEventListener(t,e,r)}function S(n,t,e){null==e?n.removeAttribute(t):n.setAttribute(t,e)}function y(n,t,e){n.style.setProperty(t,e)}function E(n,t,e){n.classList[e?"add":"remove"](t)}function P(){return Object.create(null)}function k(t,e){return t!=t?e==e:t!==e||t&&"object"===n(t)||"function"==typeof t}function O(n,t){return n!=n?t==t:n!==t}function H(n,t){var e=n in this._handlers&&this._handlers[n].slice();if(e)for(var r=0;r<e.length;r+=1){var s=e[r];if(!s.__calling)try{s.__calling=!0,s.call(this,t)}finally{s.__calling=!1}}}function L(n){n._lock=!0,j(n._beforecreate),j(n._oncreate),j(n._aftercreate),n._lock=!1}function N(){return this._state}function T(n,t){n._handlers=P(),n._slots=P(),n._bind=t._bind,n._staged={},n.options=t,n.root=t.root||n,n.store=t.store||n.root.store,t.root||(n._beforecreate=[],n._oncreate=[],n._aftercreate=[])}function x(n,t){var e=this._handlers[n]||(this._handlers[n]=[]);return e.push(t),{cancel:function(){var n=e.indexOf(t);~n&&e.splice(n,1)}}}function j(n){for(;n&&n.length;)n.shift()()}var M={destroy:function(n){this.destroy=p,this.fire("destroy"),this.set=p,this._fragment.d(!1!==n),this._fragment=null,this._state={}},get:N,fire:H,on:x,set:function(n){this._set(d({},n)),this.root._lock||L(this.root)},_recompute:p,_set:function(n){var t=this._state,e={},r=!1;for(var s in n=d(this._staged,n),this._staged={},n)this._differs(n[s],t[s])&&(e[s]=r=!0);r&&(this._state=d(d({},t),n),this._recompute(e,this._state),this._bind&&this._bind(e,this._state),this._fragment&&(this.fire("state",{changed:e,current:this._state,previous:t}),this._fragment.p(e,this._state),this.fire("update",{changed:e,current:this._state,previous:t})))},_stage:function(n){d(this._staged,n)},_mount:function(n,t){this._fragment[this._fragment.i?"i":"m"](n,t||null)},_differs:k},C={};function I(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===n?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(C[n]=window.__dw.vis.meta.locale||{}):C[n]="core"===n?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[n])}function A(n){var t=arguments,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(n=n.trim(),C[e]||I(e),!C[e][n])return"MISSING:"+n;var r=C[e][n];return"string"==typeof r&&arguments.length>2&&(r=r.replace(/\$(\d)/g,(function(n,e){return e=2+Number(e),void 0===t[e]?n:t[e]}))),r}function F(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r({payload:null,raw:!1,method:"GET",baseUrl:"//".concat(dw.backend.__api_domain),mode:"cors",credentials:"include"},t,{headers:r({"Content-Type":"application/json"},t.headers)}),s=e.payload,o=e.baseUrl,i=e.raw,a=c(e,["payload","baseUrl","raw"]),u="".concat(o.replace(/\/$/,""),"/").concat(n.replace(/^\//,""));return s&&(a.body=JSON.stringify(s)),window.fetch(u,a).then((function(n){if(i)return n;if(!n.ok)throw new R(n);if(204!==n.status){var t=n.headers.get("content-type").split(";")[0];return"application/json"===t?n.json():"image/png"===t||"application/pdf"===t?n.blob():n.text()}}))}F.get=U("GET"),F.patch=U("PATCH"),F.put=U("PUT"),F.post=U("POST"),F.head=U("HEAD");function U(n){return function(t,e){if(e&&e.method)throw new Error("Setting option.method is not allowed in httpReq.".concat(n.toLowerCase(),"()"));return F(t,r({},e,{method:n}))}}F.delete=U("DELETE");var W,R=function(n){function t(n){var e;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=l(this,s(t).call(this))).name="HttpReqError",e.status=n.status,e.statusText=n.statusText,e.message="[".concat(n.status,"] ").concat(n.statusText),e.response=n,e}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&o(n,t)}(t,n),t}(u(Error)),q=!1;function D(n){var t=n.password;return W?W(t):(!q&&t.length>4&&(q=!0,require(["zxcvbn"],(function(n){W=n}))),!1)}function $(n,t){var e,r=t.password.length>=8&&z();return{c:function(){r&&r.c(),e=document.createComment("")},m:function(n,t){r&&r.m(n,t),m(n,e,t)},p:function(n,t){t.password.length>=8?r||((r=z()).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d:function(n){r&&r.d(n),n&&w(e)}}}function z(n,t){return{c:p,m:p,d:p}}function G(n){T(this,n),this._state=d({password:""},n.data),this._recompute({password:1,passwordStrength:1,passwordTooShort:1,passwordHelp:1},this._state),this._intro=!0,this._fragment=$(0,this._state),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor))}function Z(n,t,e){return e?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}d(G.prototype,M),G.prototype._recompute=function(n,t){n.password&&(this._differs(t.passwordTooShort,t.passwordTooShort=t.password.length<8)&&(n.passwordTooShort=!0),this._differs(t.passwordStrength,t.passwordStrength=D(t))&&(n.passwordStrength=!0)),(n.password||n.passwordStrength)&&this._differs(t.passwordHelp,t.passwordHelp=function(n){var t=n.password,e=n.passwordStrength;if(""===t||!e)return A("account / pwd-too-short").replace("%num",8);var r=["bad","weak","ok","good","excellent"][e.score];return A("account / password / ".concat(r))}(t))&&(n.passwordHelp=!0),(n.password||n.passwordTooShort||n.passwordStrength||n.passwordHelp)&&this._differs(t.passwordError,t.passwordError=function(n){var t=n.password,e=n.passwordTooShort,r=n.passwordStrength,s=n.passwordHelp;return!!t&&(e?A("account / pwd-too-short").replace("%num",8):!!(r&&r.score<2)&&s)}(t))&&(n.passwordError=!0),(n.passwordStrength||n.passwordHelp)&&this._differs(t.passwordSuccess,t.passwordSuccess=function(n){var t=n.passwordStrength,e=n.passwordHelp;return!!(t&&t.score>2)&&e}(t))&&(n.passwordSuccess=!0),(n.password||n.passwordTooShort)&&this._differs(t.passwordOk,t.passwordOk=function(n){var t=n.password,e=n.passwordTooShort;return t&&!e}(t))&&(n.passwordOk=!0)};var B=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function J(){}function K(n){var t=n();if(t&&t.then)return t.then(J)}function Q(n,t){try{var e=n()}catch(n){return t(n)}return e&&e.then?e.then(void 0,t):e}function V(n,t){return n&&n.then?n.then(t):t(n)}function X(n){return B.test(n)}var Y={doLogIn:function(){try{var n=this,t=n.get(),e=t.loginEmail,r=t.loginPassword,s=t.rememberLogin;return n.set({loggingIn:!0,loginError:"",loginSuccess:""}),V(Q((function(){return Z(F.post("/v3/auth/login",{payload:{email:e,password:r,keepSession:s}}),(function(){n.set({loginSuccess:"Login successful, reloading page"}),setTimeout((function(){window.window.location.href="/"}),2e3)}))}),(function(t){return K((function(){if("HttpReqError"===t.name)return Z(t.response.json(),(function(e){n.set({loginError:e?e.message:t.message})}));n.set({loginError:t})}))})),(function(){n.set({loggingIn:!1})}))}catch(n){return Promise.reject(n)}},doSignUp:function(){try{var n=this,t=n.get(),e=t.signupWithoutPassword,r=t.signupEmail,s=t.signupPassword;if(t.signingUp)return;return n.set({signingUp:!0,signupError:"",signupSuccess:""}),function(n){if(n&&n.then)return n.then(J)}(Q((function(){return Z(F.post("/v3/auth/signup",{payload:{email:r,invitation:e,password:e?void 0:s}}),(function(){e?n.set({signupSuccess:"Please check your e-mail inbox to proceed on your desktop computer.",signingUp:!1}):(n.set({signupSuccess:"Sign up successful. Redirecting to user dashboard."}),setTimeout((function(){window.location.href="/"}),2e3))}))}),(function(t){return e=function(){n.set({signingUp:!1})},(r=function(){if("HttpReqError"===t.name)return Z(t.response.json(),(function(e){n.set({signupError:e?e.message:t.message})}));n.set({signupError:t})}())&&r.then?r.then(e):e(r);var e,r})))}catch(n){return Promise.reject(n)}},requestNewPassword:function(){try{var n=this,t=n.get().loginEmail;return n.set({requestingPassword:!0,loginError:"",loginSuccess:""}),V(Q((function(){return Z(F.post("/v3/auth/reset-password",{payload:{email:t}}),(function(){n.set({loginSuccess:A("signin / password-reset / success")})}))}),(function(t){return K((function(){if("HttpReqError"===t.name)return Z(t.response.json(),(function(e){n.set({loginError:e.message?A("signin / password-reset / error / ".concat(e.message)):t.message})}));n.set({loginError:t})}))})),(function(){n.set({requestingPassword:!1})}))}catch(n){return Promise.reject(n)}}};function nn(){window.innerWidth<600&&this.set({noSignin:!0,signupWithoutPassword:!0})}function tn(n,t,e){var r=Object.create(n);return r.signin=t[e],r}function en(n,t){var e,r,s,o,i,a,u,c,l,p,d,f,y,P,k,O,H,L,N,T,x,j=A("login / login / headline"),M=A("login / login / intro"),C=A("email"),I=!1,F=t.loginSuccess&&rn(n,t),U=t.loginError&&sn(n,t);function W(){I=!0,n.set({loginEmail:P.value}),I=!1}var R=!t.forgotPassword&&on(n,t),q=!t.forgotPassword&&an(n,t),D=t.forgotPassword&&cn(n,t);function $(n){return n.forgotPassword?dn:pn}var z=$(t),G=z(n,t);return{c:function(){e=h("div"),r=h("h3"),s=v("\n\n            "),o=h("p"),i=v("\n\n            "),F&&F.c(),a=v(" "),U&&U.c(),u=v("\n\n            "),c=h("form"),l=h("div"),p=h("div"),d=h("label"),f=v(C),y=v("\n                        "),P=h("input"),k=v("\n                    "),R&&R.c(),O=v("\n                "),q&&q.c(),H=v("\n\n            "),L=h("div"),D&&D.c(),N=v("\n                "),T=h("div"),G.c(),r.className="svelte-gekla9",d.className="svelte-gekla9",_(P,"input",W),P.className="login-email input-xxlarge span3 svelte-gekla9",P.autocomplete="username",S(P,"type","email"),p.className="control-group svelte-gekla9",E(p,"error",t.invalidLoginEmail),c.className="login-form form-vertical",e.className=x="span"+(t.noSignup?4:3)+" row-login svelte-gekla9"},m:function(n,w){m(n,e,w),g(e,r),r.innerHTML=j,g(e,s),g(e,o),o.innerHTML=M,g(e,i),F&&F.m(e,null),g(e,a),U&&U.m(e,null),g(e,u),g(e,c),g(c,l),g(l,p),g(p,d),g(d,f),g(p,y),g(p,P),P.value=t.loginEmail,g(l,k),R&&R.m(l,null),g(c,O),q&&q.m(c,null),g(e,H),g(e,L),D&&D.m(L,null),g(L,N),g(L,T),G.m(T,null)},p:function(t,r){r.loginSuccess?F?F.p(t,r):((F=rn(n,r)).c(),F.m(e,a)):F&&(F.d(1),F=null),r.loginError?U?U.p(t,r):((U=sn(n,r)).c(),U.m(e,u)):U&&(U.d(1),U=null),!I&&t.loginEmail&&(P.value=r.loginEmail),t.invalidLoginEmail&&E(p,"error",r.invalidLoginEmail),r.forgotPassword?R&&(R.d(1),R=null):R?R.p(t,r):((R=on(n,r)).c(),R.m(l,null)),r.forgotPassword?q&&(q.d(1),q=null):q?q.p(t,r):((q=an(n,r)).c(),q.m(c,null)),r.forgotPassword?D?D.p(t,r):((D=cn(n,r)).c(),D.m(L,N)):D&&(D.d(1),D=null),z!==(z=$(r))&&(G.d(1),(G=z(n,r)).c(),G.m(T,null)),t.noSignup&&x!==(x="span"+(r.noSignup?4:3)+" row-login svelte-gekla9")&&(e.className=x)},d:function(n){n&&w(e),F&&F.d(),U&&U.d(),b(P,"input",W),R&&R.d(),q&&q.d(),D&&D.d(),G.d()}}}function rn(n,t){var e;return{c:function(){(e=h("div")).className="alert alert-success"},m:function(n,r){m(n,e,r),e.innerHTML=t.loginSuccess},p:function(n,t){n.loginSuccess&&(e.innerHTML=t.loginSuccess)},d:function(n){n&&w(e)}}}function sn(n,t){var e;return{c:function(){(e=h("div")).className="alert alert-error"},m:function(n,r){m(n,e,r),e.innerHTML=t.loginError},p:function(n,t){n.loginError&&(e.innerHTML=t.loginError)},d:function(n){n&&w(e)}}}function on(n,t){var e,r,s,o,i,a=A("password"),u=!1;function c(){u=!0,n.set({loginPassword:i.value}),u=!1}return{c:function(){e=h("div"),r=h("label"),s=v(a),o=v("\n                        "),i=h("input"),r.className="svelte-gekla9",_(i,"input",c),i.className="login-pwd input-xxlarge span3 svelte-gekla9",i.autocomplete="current-password",S(i,"type","password"),e.className="control-group svelte-gekla9"},m:function(n,a){m(n,e,a),g(e,r),g(r,s),g(e,o),g(e,i),i.value=t.loginPassword},p:function(n,t){!u&&n.loginPassword&&(i.value=t.loginPassword)},d:function(n){n&&w(e),b(i,"input",c)}}}function an(n,t){var e,r,s,o,i,a,u,c,l=A("Remember login?");function p(){n.set({rememberLogin:s.checked})}var d=t.loggingIn&&un();function f(t){t.preventDefault(),n.doLogIn()}return{c:function(){e=h("div"),r=h("label"),s=h("input"),o=v(" "),i=h("noscript"),a=v("\n                    "),u=h("button"),d&&d.c(),c=v(" Login"),_(s,"change",p),s.className="keep-login svelte-gekla9",S(s,"type","checkbox"),r.className="checkbox svelte-gekla9",r.htmlFor="keep-login",y(r,"margin-top","10px"),_(u,"click",f),u.disabled=t.invalidLoginForm,u.className="btn btn-login btn-primary svelte-gekla9"},m:function(n,p){m(n,e,p),g(e,r),g(r,s),s.checked=t.rememberLogin,g(r,o),g(r,i),i.insertAdjacentHTML("afterend",l),g(e,a),g(e,u),d&&d.m(u,null),g(u,c)},p:function(n,t){n.rememberLogin&&(s.checked=t.rememberLogin),t.loggingIn?d||((d=un()).c(),d.m(u,c)):d&&(d.d(1),d=null),n.invalidLoginForm&&(u.disabled=t.invalidLoginForm)},d:function(n){n&&w(e),b(s,"change",p),d&&d.d(),b(u,"click",f)}}}function un(n,t){var e;return{c:function(){(e=h("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){m(n,e,t)},d:function(n){n&&w(e)}}}function cn(n,t){var e,r,s,o,i=A("Send new password"),a=t.requestingPassword&&ln();function u(t){t.preventDefault(),n.requestNewPassword()}return{c:function(){e=h("div"),r=h("button"),a&&a.c(),s=v(" "),o=h("noscript"),_(r,"click",u),r.disabled=t.invalidLoginEmail,r.className="btn btn-send-pw btn-primary",y(e,"padding-bottom","10px")},m:function(n,t){m(n,e,t),g(e,r),a&&a.m(r,null),g(r,s),g(r,o),o.insertAdjacentHTML("afterend",i)},p:function(n,t){t.requestingPassword?a||((a=ln()).c(),a.m(r,s)):a&&(a.d(1),a=null),n.invalidLoginEmail&&(r.disabled=t.invalidLoginEmail)},d:function(n){n&&w(e),a&&a.d(),b(r,"click",u)}}}function ln(n,t){var e;return{c:function(){(e=h("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){m(n,e,t)},d:function(n){n&&w(e)}}}function pn(n,t){var e,r=A("Can't recall your password?");function s(t){t.preventDefault(),n.set({forgotPassword:!0})}return{c:function(){_(e=h("a"),"click",s),e.href="#/forgot-password"},m:function(n,t){m(n,e,t),e.innerHTML=r},d:function(n){n&&w(e),b(e,"click",s)}}}function dn(n,t){var e,r=A("Return to login...");function s(t){t.preventDefault(),n.set({forgotPassword:!1})}return{c:function(){_(e=h("a"),"click",s),e.href="#/return"},m:function(n,t){m(n,e,t),e.innerHTML=r},d:function(n){n&&w(e),b(e,"click",s)}}}function fn(n,t){var e;return{c:function(){(e=h("style")).textContent="#dwLoginForm {\n                width: 420px;\n                margin-left: -210px;\n                box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n                border: 0;\n                position: relative;\n            }"},m:function(n,t){m(n,e,t)},p:p,d:function(n){n&&w(e)}}}function gn(n,t){var e,r,s,o,i,a,u,c,l=A("login / signup / headline");function p(n){return n.signupWithoutPassword?wn:mn}var d=p(t),f=d(n,t),_=t.signupSuccess&&hn(n,t),b=t.signupError&&vn(n,t),S=(!t.signupSuccess||!t.signupWithoutPassword)&&_n(n,t),y=t.signupWithoutPassword&&!t.signupSuccess&&Ln(n);return{c:function(){e=h("div"),r=h("h3"),s=v("\n\n            "),f.c(),o=v(" "),_&&_.c(),i=v(" "),b&&b.c(),a=v(" "),S&&S.c(),u=v("\n            "),y&&y.c(),r.className="svelte-gekla9",e.className=c="span"+(t.noSignin?4:3)+" row-signup svelte-gekla9"},m:function(n,t){m(n,e,t),g(e,r),r.innerHTML=l,g(e,s),f.m(e,null),g(e,o),_&&_.m(e,null),g(e,i),b&&b.m(e,null),g(e,a),S&&S.m(e,null),g(e,u),y&&y.m(e,null)},p:function(t,r){d!==(d=p(r))&&(f.d(1),(f=d(n,r)).c(),f.m(e,o)),r.signupSuccess?_?_.p(t,r):((_=hn(n,r)).c(),_.m(e,i)):_&&(_.d(1),_=null),r.signupError?b?b.p(t,r):((b=vn(n,r)).c(),b.m(e,a)):b&&(b.d(1),b=null),r.signupSuccess&&r.signupWithoutPassword?S&&(S.d(1),S=null):S?S.p(t,r):((S=_n(n,r)).c(),S.m(e,u)),r.signupWithoutPassword&&!r.signupSuccess?y||((y=Ln(n)).c(),y.m(e,null)):y&&(y.d(1),y=null),t.noSignin&&c!==(c="span"+(r.noSignin?4:3)+" row-signup svelte-gekla9")&&(e.className=c)},d:function(n){n&&w(e),f.d(),_&&_.d(),b&&b.d(),S&&S.d(),y&&y.d()}}}function mn(n,t){var e,r=A("login / signup / intro");return{c:function(){e=h("p")},m:function(n,t){m(n,e,t),e.innerHTML=r},d:function(n){n&&w(e)}}}function wn(n,t){var e,r,s,o,i,a=A("signup / mobile / p1"),u=A("signup / mobile / p2");return{c:function(){e=h("p"),r=v(a),s=v("\n            "),o=h("p"),i=v(u)},m:function(n,t){m(n,e,t),g(e,r),m(n,s,t),m(n,o,t),g(o,i)},d:function(n){n&&(w(e),w(s),w(o))}}}function hn(n,t){var e;return{c:function(){(e=h("div")).className="alert alert-success"},m:function(n,r){m(n,e,r),e.innerHTML=t.signupSuccess},p:function(n,t){n.signupSuccess&&(e.innerHTML=t.signupSuccess)},d:function(n){n&&w(e)}}}function vn(n,t){var e;return{c:function(){(e=h("div")).className="alert alert-error"},m:function(n,r){m(n,e,r),e.innerHTML=t.signupError},p:function(n,t){n.signupError&&(e.innerHTML=t.signupError)},d:function(n){n&&w(e)}}}function _n(n,t){var e,r,s,o,i,a,u,c,l,p,d,f,y=A("email"),P=!1,k=A("Sign Up");function O(){P=!0,n.set({signupEmail:u.value}),P=!1}var H=!t.signupWithoutPassword&&bn(n,t);function L(n){return n.signingUp?Hn:On}var N=L(t),T=N(n,t);function x(t){t.preventDefault(),n.doSignUp()}return{c:function(){e=h("div"),r=h("form"),s=h("div"),o=h("label"),i=v(y),a=v("\n                        "),u=h("input"),c=v("\n                    "),H&&H.c(),l=v("\n                    "),p=h("button"),T.c(),d=v("\n                        \n                        "),f=h("noscript"),o.className="svelte-gekla9",_(u,"input",O),S(u,"type","email"),u.autocomplete="username",u.className="span3 input-xlarge register-email svelte-gekla9",s.className="control-group svelte-gekla9",E(s,"error",t.invalidSignupEmail),_(p,"click",x),p.disabled=t.invalidSignupForm,p.className="btn btn-default",e.className="signup-form form-vertcal"},m:function(n,w){m(n,e,w),g(e,r),g(r,s),g(s,o),g(o,i),g(s,a),g(s,u),u.value=t.signupEmail,g(r,c),H&&H.m(r,null),g(r,l),g(r,p),T.m(p,null),g(p,d),g(p,f),f.insertAdjacentHTML("afterend",k)},p:function(t,e){!P&&t.signupEmail&&(u.value=e.signupEmail),t.invalidSignupEmail&&E(s,"error",e.invalidSignupEmail),e.signupWithoutPassword?H&&(H.d(1),H=null):H?H.p(t,e):((H=bn(n,e)).c(),H.m(r,l)),N!==(N=L(e))&&(T.d(1),(T=N(n,e)).c(),T.m(p,d)),t.invalidSignupForm&&(p.disabled=e.invalidSignupForm)},d:function(n){n&&w(e),b(u,"input",O),H&&H.d(),T.d(),b(p,"click",x)}}}function bn(n,t){var e,r,s,o,i,a,u,c,l,p,d,f,P,k=A("password"),O={},H=A("account / invite / password-clear-text");function L(n){return n.showPasswordAsClearText?yn:Sn}var N=L(t),T=N(n,t),x={};void 0!==t.signupPassword&&(x.password=t.signupPassword,O.password=!0),void 0!==t.passwordHelp&&(x.passwordHelp=t.passwordHelp,O.passwordHelp=!0),void 0!==t.passwordSuccess&&(x.passwordSuccess=t.passwordSuccess,O.passwordSuccess=!0),void 0!==t.passwordError&&(x.passwordError=t.passwordError,O.passwordError=!0),void 0!==t.signupPasswordOk&&(x.passwordOk=t.signupPasswordOk,O.passwordOk=!0);var j=new G({root:n.root,store:n.store,data:x,_bind:function(t,e){var r={};!O.password&&t.password&&(r.signupPassword=e.password),!O.passwordHelp&&t.passwordHelp&&(r.passwordHelp=e.passwordHelp),!O.passwordSuccess&&t.passwordSuccess&&(r.passwordSuccess=e.passwordSuccess),!O.passwordError&&t.passwordError&&(r.passwordError=e.passwordError),!O.passwordOk&&t.passwordOk&&(r.signupPasswordOk=e.passwordOk),n._set(r),O={}}});function M(n){return n.passwordError?kn:n.passwordSuccess?Pn:n.passwordHelp?En:void 0}n.root._beforecreate.push((function(){j._bind({password:1,passwordHelp:1,passwordSuccess:1,passwordError:1,passwordOk:1},j.get())}));var C=M(t),I=C&&C(n,t);function F(){n.set({showPasswordAsClearText:d.checked})}return{c:function(){e=h("div"),r=h("label"),s=v(k),o=v("\n                        "),T.c(),i=v("\n                        "),a=h("div"),j._fragment.c(),u=v("\n                            "),I&&I.c(),c=v("\n                    "),l=h("div"),p=h("label"),d=h("input"),f=v(" "),P=h("noscript"),r.className="svelte-gekla9",y(a,"width","270px"),e.className="control-group svelte-gekla9",E(e,"warning",t.passwordError),E(e,"success",t.passwordSuccess),_(d,"change",F),S(d,"type","checkbox"),d.className="svelte-gekla9",p.className="checkbox svelte-gekla9",p.htmlFor="keep-login",y(p,"margin-top","10px"),l.className="control-group svelte-gekla9"},m:function(n,w){m(n,e,w),g(e,r),g(r,s),g(e,o),T.m(e,null),g(e,i),g(e,a),j._mount(a,null),g(a,u),I&&I.m(a,null),m(n,c,w),m(n,l,w),g(l,p),g(p,d),d.checked=t.showPasswordAsClearText,g(p,f),g(p,P),P.insertAdjacentHTML("afterend",H)},p:function(r,s){N===(N=L(t=s))&&T?T.p(r,t):(T.d(1),(T=N(n,t)).c(),T.m(e,i));var o={};!O.password&&r.signupPassword&&(o.password=t.signupPassword,O.password=void 0!==t.signupPassword),!O.passwordHelp&&r.passwordHelp&&(o.passwordHelp=t.passwordHelp,O.passwordHelp=void 0!==t.passwordHelp),!O.passwordSuccess&&r.passwordSuccess&&(o.passwordSuccess=t.passwordSuccess,O.passwordSuccess=void 0!==t.passwordSuccess),!O.passwordError&&r.passwordError&&(o.passwordError=t.passwordError,O.passwordError=void 0!==t.passwordError),!O.passwordOk&&r.signupPasswordOk&&(o.passwordOk=t.signupPasswordOk,O.passwordOk=void 0!==t.signupPasswordOk),j._set(o),O={},C===(C=M(t))&&I?I.p(r,t):(I&&I.d(1),(I=C&&C(n,t))&&I.c(),I&&I.m(a,null)),r.passwordError&&E(e,"warning",t.passwordError),r.passwordSuccess&&E(e,"success",t.passwordSuccess),r.showPasswordAsClearText&&(d.checked=t.showPasswordAsClearText)},d:function(n){n&&w(e),T.d(),j.destroy(),I&&I.d(),n&&(w(c),w(l)),b(d,"change",F)}}}function Sn(n,t){var e,r=!1;function s(){r=!0,n.set({signupPassword:e.value}),r=!1}return{c:function(){_(e=h("input"),"input",s),e.dataset.lpignore="true",e.autocomplete="off",S(e,"type","password"),e.className="span3 input-xlarge register-pwd svelte-gekla9"},m:function(n,r){m(n,e,r),e.value=t.signupPassword},p:function(n,t){!r&&n.signupPassword&&(e.value=t.signupPassword)},d:function(n){n&&w(e),b(e,"input",s)}}}function yn(n,t){var e,r=!1;function s(){r=!0,n.set({signupPassword:e.value}),r=!1}return{c:function(){_(e=h("input"),"input",s),e.dataset.lpignore="true",e.autocomplete="off",S(e,"type","text"),e.className="span3 input-xlarge register-pwd svelte-gekla9"},m:function(n,r){m(n,e,r),e.value=t.signupPassword},p:function(n,t){!r&&n.signupPassword&&(e.value=t.signupPassword)},d:function(n){n&&w(e),b(e,"input",s)}}}function En(n,t){var e;return{c:function(){(e=h("p")).className="help muted svelte-gekla9"},m:function(n,r){m(n,e,r),e.innerHTML=t.passwordHelp},p:function(n,t){n.passwordHelp&&(e.innerHTML=t.passwordHelp)},d:function(n){n&&w(e)}}}function Pn(n,t){var e;return{c:function(){(e=h("p")).className="help text-success svelte-gekla9"},m:function(n,r){m(n,e,r),e.innerHTML=t.passwordSuccess},p:function(n,t){n.passwordSuccess&&(e.innerHTML=t.passwordSuccess)},d:function(n){n&&w(e)}}}function kn(n,t){var e;return{c:function(){(e=h("p")).className="help text-warning svelte-gekla9"},m:function(n,r){m(n,e,r),e.innerHTML=t.passwordError},p:function(n,t){n.passwordError&&(e.innerHTML=t.passwordError)},d:function(n){n&&w(e)}}}function On(n,t){var e;return{c:function(){(e=h("i")).className="fa fa-fw fa-pencil"},m:function(n,t){m(n,e,t)},d:function(n){n&&w(e)}}}function Hn(n,t){var e;return{c:function(){(e=h("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){m(n,e,t)},d:function(n){n&&w(e)}}}function Ln(n,t){var e,r,s=A("signup / mobile / back");function o(t){n.set({signupWithoutPassword:!1,noSignin:!1})}return{c:function(){e=h("a"),r=v(s),_(e,"click",o),e.href="#"},m:function(n,t){m(n,e,t),g(e,r)},d:function(n){n&&w(e),b(e,"click",o)}}}function Nn(n,t){for(var e,r,s,o=A("login / alternative signin"),i=t.alternativeSignIn,a=[],u=0;u<i.length;u+=1)a[u]=xn(n,tn(t,i,u));return{c:function(){e=h("div"),r=h("noscript"),s=v(" ");for(var n=0;n<a.length;n+=1)a[n].c();e.className="alternative-signin svelte-gekla9"},m:function(n,t){m(n,e,t),g(e,r),r.insertAdjacentHTML("beforebegin",o),g(e,s);for(var i=0;i<a.length;i+=1)a[i].m(e,null)},p:function(t,r){if(t.alternativeSignIn){i=r.alternativeSignIn;for(var s=0;s<i.length;s+=1){var o=tn(r,i,s);a[s]?a[s].p(t,o):(a[s]=xn(n,o),a[s].c(),a[s].m(e,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=i.length}},d:function(n){n&&w(e),function(n,t){for(var e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}(a,n)}}}function Tn(n,t){var e,r;return{c:function(){(e=h("i")).className=r=t.signin.icon+" svelte-gekla9"},m:function(n,t){m(n,e,t)},p:function(n,t){n.alternativeSignIn&&r!==(r=t.signin.icon+" svelte-gekla9")&&(e.className=r)},d:function(n){n&&w(e)}}}function xn(n,t){var e,r,s,o,i=t.signin.label,a=t.signin.icon&&Tn(0,t);return{c:function(){e=h("a"),a&&a.c(),r=v(" "),s=h("noscript"),e.href=o=t.signin.url,e.className="alternative-signin-link svelte-gekla9"},m:function(n,t){m(n,e,t),a&&a.m(e,null),g(e,r),g(e,s),s.insertAdjacentHTML("afterend",i)},p:function(n,t){t.signin.icon?a?a.p(n,t):((a=Tn(0,t)).c(),a.m(e,r)):a&&(a.d(1),a=null),n.alternativeSignIn&&i!==(i=t.signin.label)&&(!function(n){for(;n.nextSibling;)n.parentNode.removeChild(n.nextSibling)}(s),s.insertAdjacentHTML("afterend",i)),n.alternativeSignIn&&o!==(o=t.signin.url)&&(e.href=o)},d:function(n){n&&w(e),a&&a.d()}}}function jn(n){var t=this;T(this,n),this._state=d({noSignup:!1,noSignin:!1,signupWithoutPassword:!1,alternativeSignIn:[],forgotPassword:!1,loginEmail:"",loginPassword:"",rememberLogin:!0,loginEmailError:!1,loginError:"",loginSuccess:"",signupEmail:"",signupPassword:"",signupPasswordOk:!1,passwordHelp:!1,passwordSuccess:!1,passwordError:!1,showPasswordAsClearText:!1,requestingPassword:!1,loggingIn:!1,signingUp:!1},n.data),this._recompute({loginEmail:1,forgotPassword:1,loggingIn:1,loginPassword:1,signupWithoutPassword:1,signingUp:1,signupEmail:1,signupPassword:1,signupPasswordOk:1},this._state),this._intro=!0,this._fragment=function(n,t){var e,r,s,o,i,a,u,c,l,p,d,f,S,y,E=A("login / signup / confirmation-email"),P=A("login / signup / confirmation-email-hint"),k=A("login / signup / confirm"),O=!t.noSignin&&en(n,t);function H(n){return n.noSignup?fn:gn}var L=H(t),N=L(n,t),T=!t.noSignin&&t.alternativeSignIn.length&&Nn(n,t);function x(t){t.stopPropagation(),n.fire("keyup",t)}return{c:function(){e=h("div"),(r=h("button")).textContent="×",s=v("\n    "),o=h("div"),O&&O.c(),i=v(" "),N.c(),a=v("\n\n    "),T&&T.c(),u=v("\n\n    "),c=h("div"),l=h("div"),p=h("noscript"),d=v("\n\n            "),f=h("div"),S=v("\n\n            "),y=h("button"),r.type="button",r.className="close",r.dataset.dismiss="modal",o.className="row login-signup",f.className="sub",y.className="button btn btn-got-it",l.className="jumbo-text",c.className="signup-confirm hidden",_(e,"keyup",x),e.className="modal-body svelte-gekla9",e.dataset.piwikMask=!0},m:function(n,t){m(n,e,t),g(e,r),g(e,s),g(e,o),O&&O.m(o,null),g(o,i),N.m(o,null),g(e,a),T&&T.m(e,null),g(e,u),g(e,c),g(c,l),g(l,p),p.insertAdjacentHTML("beforebegin",E),g(l,d),g(l,f),f.innerHTML=P,g(l,S),g(l,y),y.innerHTML=k},p:function(t,r){r.noSignin?O&&(O.d(1),O=null):O?O.p(t,r):((O=en(n,r)).c(),O.m(o,i)),L===(L=H(r))&&N?N.p(t,r):(N.d(1),(N=L(n,r)).c(),N.m(o,null)),!r.noSignin&&r.alternativeSignIn.length?T?T.p(t,r):((T=Nn(n,r)).c(),T.m(e,u)):T&&(T.d(1),T=null)},d:function(n){n&&w(e),O&&O.d(),N.d(),T&&T.d(),b(e,"keyup",x)}}}(this,this._state),this.root._oncreate.push((function(){nn.call(t),t.fire("update",{changed:f({},t._state),current:t._state})})),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor),L(this))}function Mn(n,t){this._handlers={},this._dependents=[],this._computed=P(),this._sortedComputedProperties=[],this._state=d({},n),this._differs=t&&t.immutable?O:k}d(jn.prototype,M),d(jn.prototype,Y),jn.prototype._recompute=function(n,t){var e,r,s,o,i,a,u,c;(n.loginEmail||n.forgotPassword)&&this._differs(t.invalidLoginEmail,t.invalidLoginEmail=(r=(e=t).loginEmail,s=e.forgotPassword,!(X(r)||""===r&&!s)))&&(n.invalidLoginEmail=!0),(n.loggingIn||n.loginEmail||n.loginPassword)&&this._differs(t.invalidLoginForm,t.invalidLoginForm=function(n){var t=n.loggingIn,e=n.loginEmail,r=n.loginPassword;return!!t||(!X(e)||""===r)}(t))&&(n.invalidLoginForm=!0),(n.signupWithoutPassword||n.signingUp||n.signupEmail||n.signupPassword||n.signupPasswordOk)&&this._differs(t.invalidSignupForm,t.invalidSignupForm=(i=(o=t).signupWithoutPassword,a=o.signingUp,u=o.signupEmail,o.signupPassword,c=o.signupPasswordOk,!!a||!X(u)||!i&&!c||void 0))&&(n.invalidSignupForm=!0),(n.signupEmail||n.forgotPassword)&&this._differs(t.invalidSignupEmail,t.invalidSignupEmail=function(n){var t=n.signupEmail;return n.forgotPassword,!X(t)&&""!==t}(t))&&(n.invalidSignupEmail=!0)},d(Mn.prototype,{_add:function(n,t){this._dependents.push({component:n,props:t})},_init:function(n){for(var t={},e=0;e<n.length;e+=1){var r=n[e];t["$"+r]=this._state[r]}return t},_remove:function(n){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===n)return void this._dependents.splice(t,1)},_set:function(n,t){var e=this,r=this._state;this._state=d(d({},r),n);for(var s=0;s<this._sortedComputedProperties.length;s+=1)this._sortedComputedProperties[s].update(this._state,t);this.fire("state",{changed:t,previous:r,current:this._state}),this._dependents.filter((function(n){for(var r={},s=!1,o=0;o<n.props.length;o+=1){var i=n.props[o];i in t&&(r["$"+i]=e._state[i],s=!0)}if(s)return n.component._stage(r),!0})).forEach((function(n){n.component.set({})})),this.fire("update",{changed:t,previous:r,current:this._state})},_sortComputedProperties:function(){var n,t=this._computed,e=this._sortedComputedProperties=[],r=P();function s(o){var i=t[o];i&&(i.deps.forEach((function(t){if(t===n)throw new Error("Cyclical dependency detected between ".concat(t," <-> ").concat(o));s(t)})),r[o]||(r[o]=!0,e.push(i)))}for(var o in this._computed)s(n=o)},compute:function(n,t,e){var r,s=this,o={deps:t,update:function(o,i,a){var u=t.map((function(n){return n in i&&(a=!0),o[n]}));if(a){var c=e.apply(null,u);s._differs(c,r)&&(r=c,i[n]=!0,o[n]=r)}}};this._computed[n]=o,this._sortComputedProperties();var i=d({},this._state),a={};o.update(i,a,!0),this._set(i,a)},fire:H,get:N,on:x,set:function(n){var t=this._state,e=this._changed={},r=!1;for(var s in n){if(this._computed[s])throw new Error("'".concat(s,"' is a read-only computed property"));this._differs(n[s],t[s])&&(e[s]=r=!0)}r&&this._set(n,e)}});return{App:jn,data:{},store:new Mn({}),init:function(n){}}}));
