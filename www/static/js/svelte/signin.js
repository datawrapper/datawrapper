!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("svelte/signin",t):(n=n||self).signin=t()}(this,(function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function t(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function e(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function r(n){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?e(Object(s),!0).forEach((function(e){t(n,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))}))}return n}function s(n){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function o(n,t){return(o=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function a(n,t,e){return(a=i()?Reflect.construct:function(n,t,e){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(n,r));return e&&o(s,e.prototype),s}).apply(null,arguments)}function c(n){var t="function"==typeof Map?new Map:void 0;return(c=function(n){if(null===n||(e=n,-1===Function.toString.call(e).indexOf("[native code]")))return n;var e;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return a(n,arguments,s(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,n)})(n)}function u(n,t){if(null==n)return{};var e,r,s=function(n,t){if(null==n)return{};var e,r,s={},o=Object.keys(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||(s[e]=n[e]);return s}(n,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(s[e]=n[e])}return s}function l(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function p(){}function d(n,t){for(var e in t)n[e]=t[e];return n}function f(n,t){n.appendChild(t)}function g(n,t,e){n.insertBefore(t,e)}function m(n){n.parentNode.removeChild(n)}function w(n){return document.createElement(n)}function h(n){return document.createTextNode(n)}function v(n,t,e,r){n.addEventListener(t,e,r)}function _(n,t,e,r){n.removeEventListener(t,e,r)}function b(n,t,e){null==e?n.removeAttribute(t):n.setAttribute(t,e)}function S(n,t,e){n.style.setProperty(t,e)}function E(n,t,e){n.classList[e?"add":"remove"](t)}function y(){return Object.create(null)}function P(t,e){return t!=t?e==e:t!==e||t&&"object"===n(t)||"function"==typeof t}function k(n,t){return n!=n?t==t:n!==t}function O(n,t){var e=n in this._handlers&&this._handlers[n].slice();if(e)for(var r=0;r<e.length;r+=1){var s=e[r];if(!s.__calling)try{s.__calling=!0,s.call(this,t)}finally{s.__calling=!1}}}function H(n){n._lock=!0,x(n._beforecreate),x(n._oncreate),x(n._aftercreate),n._lock=!1}function L(){return this._state}function T(n,t){n._handlers=y(),n._slots=y(),n._bind=t._bind,n._staged={},n.options=t,n.root=t.root||n,n.store=t.store||n.root.store,t.root||(n._beforecreate=[],n._oncreate=[],n._aftercreate=[])}function N(n,t){var e=this._handlers[n]||(this._handlers[n]=[]);return e.push(t),{cancel:function(){var n=e.indexOf(t);~n&&e.splice(n,1)}}}function x(n){for(;n&&n.length;)n.shift()()}var j={destroy:function(n){this.destroy=p,this.fire("destroy"),this.set=p,this._fragment.d(!1!==n),this._fragment=null,this._state={}},get:L,fire:O,on:N,set:function(n){this._set(d({},n)),this.root._lock||H(this.root)},_recompute:p,_set:function(n){var t=this._state,e={},r=!1;for(var s in n=d(this._staged,n),this._staged={},n)this._differs(n[s],t[s])&&(e[s]=r=!0);r&&(this._state=d(d({},t),n),this._recompute(e,this._state),this._bind&&this._bind(e,this._state),this._fragment&&(this.fire("state",{changed:e,current:this._state,previous:t}),this._fragment.p(e,this._state),this.fire("update",{changed:e,current:this._state,previous:t})))},_stage:function(n){d(this._staged,n)},_mount:function(n,t){this._fragment[this._fragment.i?"i":"m"](n,t||null)},_differs:P},M={};function C(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===n?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(M[n]=window.__dw.vis.meta.locale||{}):M[n]="core"===n?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[n])}function A(n){var t=arguments,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(n=n.trim(),M[e]||C(e),!M[e][n])return"MISSING:"+n;var r=M[e][n];return"string"==typeof r&&arguments.length>2&&(r=r.replace(/\$(\d)/g,(function(n,e){return e=2+Number(e),void 0===t[e]?n:t[e]}))),r}function I(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r({payload:null,raw:!1,method:"GET",baseUrl:"//".concat(dw.backend.__api_domain),mode:"cors",credentials:"include"},t,{headers:r({"Content-Type":"application/json"},t.headers)}),s=e.payload,o=e.baseUrl,i=e.raw,a=u(e,["payload","baseUrl","raw"]),c="".concat(o.replace(/\/$/,""),"/").concat(n.replace(/^\//,""));return s&&(a.body=JSON.stringify(s)),window.fetch(c,a).then((function(n){if(i)return n;if(!n.ok)throw new q(n);if(204!==n.status){var t=n.headers.get("content-type").split(";")[0];return"application/json"===t?n.json():"image/png"===t||"application/pdf"===t?n.blob():n.text()}}))}I.get=F("GET"),I.patch=F("PATCH"),I.put=F("PUT"),I.post=F("POST"),I.head=F("HEAD");function F(n){return function(t,e){if(e&&e.method)throw new Error("Setting option.method is not allowed in httpReq.".concat(n.toLowerCase(),"()"));return I(t,r({},e,{method:n}))}}I.delete=F("DELETE");var R,q=function(n){function t(n){var e;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=l(this,s(t).call(this))).name="HttpReqError",e.status=n.status,e.statusText=n.statusText,e.message="[".concat(n.status,"] ").concat(n.statusText),e.response=n,e}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&o(n,t)}(t,n),t}(c(Error)),D=!1;function U(n){var t=n.password;return R?R(t):(!D&&t.length>4&&(D=!0,require(["zxcvbn"],(function(n){R=n}))),!1)}function $(n,t){var e,r=t.password.length>=8&&z();return{c:function(){r&&r.c(),e=document.createComment("")},m:function(n,t){r&&r.m(n,t),g(n,e,t)},p:function(n,t){t.password.length>=8?r||((r=z()).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d:function(n){r&&r.d(n),n&&m(e)}}}function z(n,t){return{c:p,m:p,d:p}}function G(n){T(this,n),this._state=d({password:""},n.data),this._recompute({password:1,passwordStrength:1,passwordTooShort:1,passwordHelp:1},this._state),this._intro=!0,this._fragment=$(0,this._state),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor))}function Z(n,t,e){return e?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}d(G.prototype,j),G.prototype._recompute=function(n,t){n.password&&(this._differs(t.passwordTooShort,t.passwordTooShort=t.password.length<8)&&(n.passwordTooShort=!0),this._differs(t.passwordStrength,t.passwordStrength=U(t))&&(n.passwordStrength=!0)),(n.password||n.passwordStrength)&&this._differs(t.passwordHelp,t.passwordHelp=function(n){var t=n.password,e=n.passwordStrength;if(""===t||!e)return A("account / pwd-too-short").replace("%num",8);var r=["bad","weak","ok","good","excellent"][e.score];return A("account / password / ".concat(r))}(t))&&(n.passwordHelp=!0),(n.password||n.passwordTooShort||n.passwordStrength||n.passwordHelp)&&this._differs(t.passwordError,t.passwordError=function(n){var t=n.password,e=n.passwordTooShort,r=n.passwordStrength,s=n.passwordHelp;return!!t&&(e?A("account / pwd-too-short").replace("%num",8):!!(r&&r.score<2)&&s)}(t))&&(n.passwordError=!0),(n.passwordStrength||n.passwordHelp)&&this._differs(t.passwordSuccess,t.passwordSuccess=function(n){var t=n.passwordStrength,e=n.passwordHelp;return!!(t&&t.score>2)&&e}(t))&&(n.passwordSuccess=!0),(n.password||n.passwordTooShort)&&this._differs(t.passwordOk,t.passwordOk=function(n){var t=n.password,e=n.passwordTooShort;return t&&!e}(t))&&(n.passwordOk=!0)};var B=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function J(){}function K(n){var t=n();if(t&&t.then)return t.then(J)}function Q(n,t){try{var e=n()}catch(n){return t(n)}return e&&e.then?e.then(void 0,t):e}function V(n,t){return n&&n.then?n.then(t):t(n)}function W(n){return B.test(n)}var X={doLogIn:function(){try{var n=this,t=n.get(),e=t.loginEmail,r=t.loginPassword,s=t.rememberLogin;return n.set({loggingIn:!0,loginError:"",loginSuccess:""}),V(Q((function(){return Z(I.post("/v3/auth/login",{payload:{email:e,password:r,keepSession:s}}),(function(){n.set({loginSuccess:"Login successful, reloading page"}),setTimeout((function(){window.window.location.href="/"}),2e3)}))}),(function(t){return K((function(){if("HttpReqError"===t.name)return Z(t.response.json(),(function(e){n.set({loginError:e?e.message:t.message})}));n.set({loginError:t})}))})),(function(){n.set({loggingIn:!1})}))}catch(n){return Promise.reject(n)}},doSignUp:function(){try{var n=this,t=n.get(),e=t.signupEmail,r=t.signupPassword;return n.set({signingUp:!0,signupError:"",signupSuccess:""}),V(Q((function(){return Z(I.post("/v3/auth/signup",{payload:{email:e,password:r}}),(function(){n.set({signupSuccess:"Sign up successful. Redirecting to user dashboard."}),setTimeout((function(){window.location.href="/"}),2e3)}))}),(function(t){return K((function(){if("HttpReqError"===t.name)return Z(t.response.json(),(function(e){n.set({signupError:e?e.message:t.message})}));n.set({signupError:t})}))})),(function(){n.set({signingUp:!1})}))}catch(n){return Promise.reject(n)}},requestNewPassword:function(){try{var n=this,t=n.get().loginEmail;return n.set({requestingPassword:!0,loginError:"",loginSuccess:""}),V(Q((function(){return Z(I.post("/v3/auth/reset-password",{payload:{email:t}}),(function(){n.set({loginSuccess:A("signin / password-reset / success")})}))}),(function(t){return K((function(){if("HttpReqError"===t.name)return Z(t.response.json(),(function(e){n.set({loginError:e.message?A("signin / password-reset / error / ".concat(e.message)):t.message})}));n.set({loginError:t})}))})),(function(){n.set({requestingPassword:!1})}))}catch(n){return Promise.reject(n)}}};function Y(n,t,e){var r=Object.create(n);return r.signin=t[e],r}function nn(n,t){var e;return{c:function(){(e=w("div")).className="alert alert-success"},m:function(n,r){g(n,e,r),e.innerHTML=t.loginSuccess},p:function(n,t){n.loginSuccess&&(e.innerHTML=t.loginSuccess)},d:function(n){n&&m(e)}}}function tn(n,t){var e;return{c:function(){(e=w("div")).className="alert alert-error"},m:function(n,r){g(n,e,r),e.innerHTML=t.loginError},p:function(n,t){n.loginError&&(e.innerHTML=t.loginError)},d:function(n){n&&m(e)}}}function en(n,t){var e,r,s,o,i,a=A("password"),c=!1;function u(){c=!0,n.set({loginPassword:i.value}),c=!1}return{c:function(){e=w("div"),r=w("label"),s=h(a),o=h("\n                        "),i=w("input"),r.className="svelte-t7kh6t",v(i,"input",u),i.className="login-pwd input-xxlarge span3 svelte-t7kh6t",i.autocomplete="current-password",b(i,"type","password"),e.className="control-group svelte-t7kh6t"},m:function(n,a){g(n,e,a),f(e,r),f(r,s),f(e,o),f(e,i),i.value=t.loginPassword},p:function(n,t){!c&&n.loginPassword&&(i.value=t.loginPassword)},d:function(n){n&&m(e),_(i,"input",u)}}}function rn(n,t){var e,r,s,o,i,a,c,u,l=A("Remember login?");function p(){n.set({rememberLogin:s.checked})}var d=t.loggingIn&&sn();function E(t){t.preventDefault(),n.doLogIn()}return{c:function(){e=w("div"),r=w("label"),s=w("input"),o=h(" "),i=w("noscript"),a=h("\n                    "),c=w("button"),d&&d.c(),u=h(" Login"),v(s,"change",p),s.className="keep-login svelte-t7kh6t",b(s,"type","checkbox"),r.className="checkbox svelte-t7kh6t",r.htmlFor="keep-login",S(r,"margin-top","10px"),v(c,"click",E),c.disabled=t.invalidLoginForm,c.className="btn btn-login btn-primary svelte-t7kh6t"},m:function(n,p){g(n,e,p),f(e,r),f(r,s),s.checked=t.rememberLogin,f(r,o),f(r,i),i.insertAdjacentHTML("afterend",l),f(e,a),f(e,c),d&&d.m(c,null),f(c,u)},p:function(n,t){n.rememberLogin&&(s.checked=t.rememberLogin),t.loggingIn?d||((d=sn()).c(),d.m(c,u)):d&&(d.d(1),d=null),n.invalidLoginForm&&(c.disabled=t.invalidLoginForm)},d:function(n){n&&m(e),_(s,"change",p),d&&d.d(),_(c,"click",E)}}}function sn(n,t){var e;return{c:function(){(e=w("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){g(n,e,t)},d:function(n){n&&m(e)}}}function on(n,t){var e,r,s,o,i=A("Send new password"),a=t.requestingPassword&&an();function c(t){t.preventDefault(),n.requestNewPassword()}return{c:function(){e=w("div"),r=w("button"),a&&a.c(),s=h(" "),o=w("noscript"),v(r,"click",c),r.disabled=t.invalidLoginEmail,r.className="btn btn-send-pw btn-primary",S(e,"padding-bottom","10px")},m:function(n,t){g(n,e,t),f(e,r),a&&a.m(r,null),f(r,s),f(r,o),o.insertAdjacentHTML("afterend",i)},p:function(n,t){t.requestingPassword?a||((a=an()).c(),a.m(r,s)):a&&(a.d(1),a=null),n.invalidLoginEmail&&(r.disabled=t.invalidLoginEmail)},d:function(n){n&&m(e),a&&a.d(),_(r,"click",c)}}}function an(n,t){var e;return{c:function(){(e=w("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){g(n,e,t)},d:function(n){n&&m(e)}}}function cn(n,t){var e,r=A("Can't recall your password?");function s(t){t.preventDefault(),n.set({forgotPassword:!0})}return{c:function(){v(e=w("a"),"click",s),e.href="#/forgot-password"},m:function(n,t){g(n,e,t),e.innerHTML=r},d:function(n){n&&m(e),_(e,"click",s)}}}function un(n,t){var e,r=A("Return to login...");function s(t){t.preventDefault(),n.set({forgotPassword:!1})}return{c:function(){v(e=w("a"),"click",s),e.href="#/return"},m:function(n,t){g(n,e,t),e.innerHTML=r},d:function(n){n&&m(e),_(e,"click",s)}}}function ln(n,t){var e;return{c:function(){(e=w("style")).textContent="#dwLoginForm {\n                width: 420px;\n                margin-left: -210px;\n                box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n                border: 0;\n                position: relative;\n            }"},m:function(n,t){g(n,e,t)},p:p,d:function(n){n&&m(e)}}}function pn(n,t){var e,r,s,o,i,a,c,u,l,p,d,y,P,k,O,H,L,T,N,x,j,M,C,I,F,R,q,D,U,$,z,Z,B=A("login / signup / headline"),J=A("login / signup / intro"),K=A("email"),Q=!1,V=A("password"),W={},X=A("account / invite / password-clear-text"),Y=A("Sign Up"),nn=t.signupSuccess&&dn(n,t),tn=t.signupError&&fn(n,t);function en(){Q=!0,n.set({signupEmail:k.value}),Q=!1}function rn(n){return n.showPasswordAsClearText?mn:gn}var sn=rn(t),on=sn(n,t),an={};void 0!==t.signupPassword&&(an.password=t.signupPassword,W.password=!0),void 0!==t.passwordHelp&&(an.passwordHelp=t.passwordHelp,W.passwordHelp=!0),void 0!==t.passwordSuccess&&(an.passwordSuccess=t.passwordSuccess,W.passwordSuccess=!0),void 0!==t.passwordError&&(an.passwordError=t.passwordError,W.passwordError=!0),void 0!==t.signupPasswordOk&&(an.passwordOk=t.signupPasswordOk,W.passwordOk=!0);var cn=new G({root:n.root,store:n.store,data:an,_bind:function(t,e){var r={};!W.password&&t.password&&(r.signupPassword=e.password),!W.passwordHelp&&t.passwordHelp&&(r.passwordHelp=e.passwordHelp),!W.passwordSuccess&&t.passwordSuccess&&(r.passwordSuccess=e.passwordSuccess),!W.passwordError&&t.passwordError&&(r.passwordError=e.passwordError),!W.passwordOk&&t.passwordOk&&(r.signupPasswordOk=e.passwordOk),n._set(r),W={}}});function un(n){return n.passwordError?vn:n.passwordSuccess?hn:n.passwordHelp?wn:void 0}n.root._beforecreate.push((function(){cn._bind({password:1,passwordHelp:1,passwordSuccess:1,passwordError:1,passwordOk:1},cn.get())}));var ln=un(t),pn=ln&&ln(n,t);function Sn(){n.set({showPasswordAsClearText:R.checked})}function En(n){return n.signingUp?bn:_n}var yn=En(t),Pn=yn(n,t);function kn(t){t.preventDefault(),n.doSignUp()}return{c:function(){e=w("div"),r=w("h3"),s=h("\n            "),o=w("p"),i=h("\n\n            "),nn&&nn.c(),a=h(" "),tn&&tn.c(),c=h("\n\n            "),u=w("div"),l=w("form"),p=w("div"),d=w("label"),y=h(K),P=h("\n                        "),k=w("input"),O=h("\n                    "),H=w("div"),L=w("label"),T=h(V),N=h("\n                        "),on.c(),x=h("\n                        "),j=w("div"),cn._fragment.c(),M=h("\n                            "),pn&&pn.c(),C=h("\n                    "),I=w("div"),F=w("label"),R=w("input"),q=h(" "),D=w("noscript"),U=h("\n                    "),$=w("button"),Pn.c(),z=h("\n                        \n                        "),Z=w("noscript"),r.className="svelte-t7kh6t",d.className="svelte-t7kh6t",v(k,"input",en),b(k,"type","email"),k.autocomplete="username",k.className="span3 input-xlarge register-email svelte-t7kh6t",p.className="control-group svelte-t7kh6t",E(p,"error",t.invalidSignupEmail),L.className="svelte-t7kh6t",S(j,"width","270px"),H.className="control-group svelte-t7kh6t",E(H,"warning",t.passwordError),E(H,"success",t.passwordSuccess),v(R,"change",Sn),b(R,"type","checkbox"),R.className="svelte-t7kh6t",F.className="checkbox svelte-t7kh6t",F.htmlFor="keep-login",S(F,"margin-top","10px"),I.className="control-group svelte-t7kh6t",v($,"click",kn),$.disabled=t.invalidSignupForm,$.className="btn btn-default",u.className="signup-form form-vertcal",e.className="span3 row-signup svelte-t7kh6t"},m:function(n,m){g(n,e,m),f(e,r),r.innerHTML=B,f(e,s),f(e,o),o.innerHTML=J,f(e,i),nn&&nn.m(e,null),f(e,a),tn&&tn.m(e,null),f(e,c),f(e,u),f(u,l),f(l,p),f(p,d),f(d,y),f(p,P),f(p,k),k.value=t.signupEmail,f(l,O),f(l,H),f(H,L),f(L,T),f(H,N),on.m(H,null),f(H,x),f(H,j),cn._mount(j,null),f(j,M),pn&&pn.m(j,null),f(l,C),f(l,I),f(I,F),f(F,R),R.checked=t.showPasswordAsClearText,f(F,q),f(F,D),D.insertAdjacentHTML("afterend",X),f(l,U),f(l,$),Pn.m($,null),f($,z),f($,Z),Z.insertAdjacentHTML("afterend",Y)},p:function(r,s){(t=s).signupSuccess?nn?nn.p(r,t):((nn=dn(n,t)).c(),nn.m(e,a)):nn&&(nn.d(1),nn=null),t.signupError?tn?tn.p(r,t):((tn=fn(n,t)).c(),tn.m(e,c)):tn&&(tn.d(1),tn=null),!Q&&r.signupEmail&&(k.value=t.signupEmail),r.invalidSignupEmail&&E(p,"error",t.invalidSignupEmail),sn===(sn=rn(t))&&on?on.p(r,t):(on.d(1),(on=sn(n,t)).c(),on.m(H,x));var o={};!W.password&&r.signupPassword&&(o.password=t.signupPassword,W.password=void 0!==t.signupPassword),!W.passwordHelp&&r.passwordHelp&&(o.passwordHelp=t.passwordHelp,W.passwordHelp=void 0!==t.passwordHelp),!W.passwordSuccess&&r.passwordSuccess&&(o.passwordSuccess=t.passwordSuccess,W.passwordSuccess=void 0!==t.passwordSuccess),!W.passwordError&&r.passwordError&&(o.passwordError=t.passwordError,W.passwordError=void 0!==t.passwordError),!W.passwordOk&&r.signupPasswordOk&&(o.passwordOk=t.signupPasswordOk,W.passwordOk=void 0!==t.signupPasswordOk),cn._set(o),W={},ln===(ln=un(t))&&pn?pn.p(r,t):(pn&&pn.d(1),(pn=ln&&ln(n,t))&&pn.c(),pn&&pn.m(j,null)),r.passwordError&&E(H,"warning",t.passwordError),r.passwordSuccess&&E(H,"success",t.passwordSuccess),r.showPasswordAsClearText&&(R.checked=t.showPasswordAsClearText),yn!==(yn=En(t))&&(Pn.d(1),(Pn=yn(n,t)).c(),Pn.m($,z)),r.invalidSignupForm&&($.disabled=t.invalidSignupForm)},d:function(n){n&&m(e),nn&&nn.d(),tn&&tn.d(),_(k,"input",en),on.d(),cn.destroy(),pn&&pn.d(),_(R,"change",Sn),Pn.d(),_($,"click",kn)}}}function dn(n,t){var e;return{c:function(){(e=w("div")).className="alert alert-success"},m:function(n,r){g(n,e,r),e.innerHTML=t.signupSuccess},p:function(n,t){n.signupSuccess&&(e.innerHTML=t.signupSuccess)},d:function(n){n&&m(e)}}}function fn(n,t){var e;return{c:function(){(e=w("div")).className="alert alert-error"},m:function(n,r){g(n,e,r),e.innerHTML=t.signupError},p:function(n,t){n.signupError&&(e.innerHTML=t.signupError)},d:function(n){n&&m(e)}}}function gn(n,t){var e,r=!1;function s(){r=!0,n.set({signupPassword:e.value}),r=!1}return{c:function(){v(e=w("input"),"input",s),e.dataset.lpignore="true",e.autocomplete="off",b(e,"type","password"),e.className="span3 input-xlarge register-pwd svelte-t7kh6t"},m:function(n,r){g(n,e,r),e.value=t.signupPassword},p:function(n,t){!r&&n.signupPassword&&(e.value=t.signupPassword)},d:function(n){n&&m(e),_(e,"input",s)}}}function mn(n,t){var e,r=!1;function s(){r=!0,n.set({signupPassword:e.value}),r=!1}return{c:function(){v(e=w("input"),"input",s),e.dataset.lpignore="true",e.autocomplete="off",b(e,"type","text"),e.className="span3 input-xlarge register-pwd svelte-t7kh6t"},m:function(n,r){g(n,e,r),e.value=t.signupPassword},p:function(n,t){!r&&n.signupPassword&&(e.value=t.signupPassword)},d:function(n){n&&m(e),_(e,"input",s)}}}function wn(n,t){var e;return{c:function(){(e=w("p")).className="help muted svelte-t7kh6t"},m:function(n,r){g(n,e,r),e.innerHTML=t.passwordHelp},p:function(n,t){n.passwordHelp&&(e.innerHTML=t.passwordHelp)},d:function(n){n&&m(e)}}}function hn(n,t){var e;return{c:function(){(e=w("p")).className="help text-success svelte-t7kh6t"},m:function(n,r){g(n,e,r),e.innerHTML=t.passwordSuccess},p:function(n,t){n.passwordSuccess&&(e.innerHTML=t.passwordSuccess)},d:function(n){n&&m(e)}}}function vn(n,t){var e;return{c:function(){(e=w("p")).className="help text-warning svelte-t7kh6t"},m:function(n,r){g(n,e,r),e.innerHTML=t.passwordError},p:function(n,t){n.passwordError&&(e.innerHTML=t.passwordError)},d:function(n){n&&m(e)}}}function _n(n,t){var e;return{c:function(){(e=w("i")).className="fa fa-fw fa-pencil"},m:function(n,t){g(n,e,t)},d:function(n){n&&m(e)}}}function bn(n,t){var e;return{c:function(){(e=w("i")).className="fa fa-fw fa-spinner fa-pulse"},m:function(n,t){g(n,e,t)},d:function(n){n&&m(e)}}}function Sn(n,t){for(var e,r,s,o=A("login / alternative signin"),i=t.alternativeSignIn,a=[],c=0;c<i.length;c+=1)a[c]=yn(n,Y(t,i,c));return{c:function(){e=w("div"),r=w("noscript"),s=h(" ");for(var n=0;n<a.length;n+=1)a[n].c();e.className="alternative-signin svelte-t7kh6t"},m:function(n,t){g(n,e,t),f(e,r),r.insertAdjacentHTML("beforebegin",o),f(e,s);for(var i=0;i<a.length;i+=1)a[i].m(e,null)},p:function(t,r){if(t.alternativeSignIn){i=r.alternativeSignIn;for(var s=0;s<i.length;s+=1){var o=Y(r,i,s);a[s]?a[s].p(t,o):(a[s]=yn(n,o),a[s].c(),a[s].m(e,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=i.length}},d:function(n){n&&m(e),function(n,t){for(var e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}(a,n)}}}function En(n,t){var e,r;return{c:function(){(e=w("i")).className=r=t.signin.icon+" svelte-t7kh6t"},m:function(n,t){g(n,e,t)},p:function(n,t){n.alternativeSignIn&&r!==(r=t.signin.icon+" svelte-t7kh6t")&&(e.className=r)},d:function(n){n&&m(e)}}}function yn(n,t){var e,r,s,o,i=t.signin.label,a=t.signin.icon&&En(0,t);return{c:function(){e=w("a"),a&&a.c(),r=h(" "),s=w("noscript"),e.href=o=t.signin.url,e.className="alternative-signin-link svelte-t7kh6t"},m:function(n,t){g(n,e,t),a&&a.m(e,null),f(e,r),f(e,s),s.insertAdjacentHTML("afterend",i)},p:function(n,t){t.signin.icon?a?a.p(n,t):((a=En(0,t)).c(),a.m(e,r)):a&&(a.d(1),a=null),n.alternativeSignIn&&i!==(i=t.signin.label)&&(!function(n){for(;n.nextSibling;)n.parentNode.removeChild(n.nextSibling)}(s),s.insertAdjacentHTML("afterend",i)),n.alternativeSignIn&&o!==(o=t.signin.url)&&(e.href=o)},d:function(n){n&&m(e),a&&a.d()}}}function Pn(n){T(this,n),this._state=d({noSignup:!1,alternativeSignIn:[],forgotPassword:!1,loginEmail:"",loginPassword:"",rememberLogin:!0,loginEmailError:!1,loginError:"",loginSuccess:"",signupEmail:"",signupPassword:"",signupPasswordOk:!1,passwordHelp:!1,passwordSuccess:!1,passwordError:!1,showPasswordAsClearText:!1,requestingPassword:!1,loggingIn:!1,signingUp:!1},n.data),this._recompute({loginEmail:1,forgotPassword:1,loginPassword:1,signupEmail:1,signupPassword:1,signupPasswordOk:1},this._state),this._intro=!0,this._fragment=function(n,t){var e,r,s,o,i,a,c,u,l,p,d,S,y,P,k,O,H,L,T,N,x,j,M,C,I,F,R,q,D,U,$,z,G,Z,B,J=A("login / login / headline"),K=A("login / login / intro"),Q=A("email"),V=!1,W=A("login / signup / confirmation-email"),X=A("login / signup / confirmation-email-hint"),Y=A("login / signup / confirm"),sn=t.loginSuccess&&nn(n,t),an=t.loginError&&tn(n,t);function dn(){V=!0,n.set({loginEmail:L.value}),V=!1}var fn=!t.forgotPassword&&en(n,t),gn=!t.forgotPassword&&rn(n,t),mn=t.forgotPassword&&on(n,t);function wn(n){return n.forgotPassword?un:cn}var hn=wn(t),vn=hn(n,t);function _n(n){return n.noSignup?ln:pn}var bn=_n(t),En=bn(n,t),yn=t.alternativeSignIn.length&&Sn(n,t);function Pn(t){t.stopPropagation(),n.fire("keyup",t)}return{c:function(){e=w("div"),(r=w("button")).textContent="Ã—",s=h("\n    "),o=w("div"),i=w("div"),a=w("h3"),c=h("\n\n            "),u=w("p"),l=h("\n\n            "),sn&&sn.c(),p=h(" "),an&&an.c(),d=h("\n\n            "),S=w("form"),y=w("div"),P=w("div"),k=w("label"),O=h(Q),H=h("\n                        "),L=w("input"),T=h("\n                    "),fn&&fn.c(),N=h("\n                "),gn&&gn.c(),x=h("\n\n            "),j=w("div"),mn&&mn.c(),M=h("\n                "),C=w("div"),vn.c(),F=h("\n        "),En.c(),R=h("\n\n    "),yn&&yn.c(),q=h("\n\n    "),D=w("div"),U=w("div"),$=w("noscript"),z=h("\n\n            "),G=w("div"),Z=h("\n\n            "),B=w("button"),r.type="button",r.className="close",r.dataset.dismiss="modal",a.className="svelte-t7kh6t",k.className="svelte-t7kh6t",v(L,"input",dn),L.className="login-email input-xxlarge span3 svelte-t7kh6t",L.autocomplete="username",b(L,"type","email"),P.className="control-group svelte-t7kh6t",E(P,"error",t.invalidLoginEmail),S.className="login-form form-vertical",i.className=I="span"+(t.noSignup?4:3)+" row-login svelte-t7kh6t",o.className="row login-signup",G.className="sub",B.className="button btn btn-got-it",U.className="jumbo-text",D.className="signup-confirm hidden",v(e,"keyup",Pn),e.className="modal-body svelte-t7kh6t",e.dataset.piwikMask=!0},m:function(n,m){g(n,e,m),f(e,r),f(e,s),f(e,o),f(o,i),f(i,a),a.innerHTML=J,f(i,c),f(i,u),u.innerHTML=K,f(i,l),sn&&sn.m(i,null),f(i,p),an&&an.m(i,null),f(i,d),f(i,S),f(S,y),f(y,P),f(P,k),f(k,O),f(P,H),f(P,L),L.value=t.loginEmail,f(y,T),fn&&fn.m(y,null),f(S,N),gn&&gn.m(S,null),f(i,x),f(i,j),mn&&mn.m(j,null),f(j,M),f(j,C),vn.m(C,null),f(o,F),En.m(o,null),f(e,R),yn&&yn.m(e,null),f(e,q),f(e,D),f(D,U),f(U,$),$.insertAdjacentHTML("beforebegin",W),f(U,z),f(U,G),G.innerHTML=X,f(U,Z),f(U,B),B.innerHTML=Y},p:function(t,r){r.loginSuccess?sn?sn.p(t,r):((sn=nn(n,r)).c(),sn.m(i,p)):sn&&(sn.d(1),sn=null),r.loginError?an?an.p(t,r):((an=tn(n,r)).c(),an.m(i,d)):an&&(an.d(1),an=null),!V&&t.loginEmail&&(L.value=r.loginEmail),t.invalidLoginEmail&&E(P,"error",r.invalidLoginEmail),r.forgotPassword?fn&&(fn.d(1),fn=null):fn?fn.p(t,r):((fn=en(n,r)).c(),fn.m(y,null)),r.forgotPassword?gn&&(gn.d(1),gn=null):gn?gn.p(t,r):((gn=rn(n,r)).c(),gn.m(S,null)),r.forgotPassword?mn?mn.p(t,r):((mn=on(n,r)).c(),mn.m(j,M)):mn&&(mn.d(1),mn=null),hn!==(hn=wn(r))&&(vn.d(1),(vn=hn(n,r)).c(),vn.m(C,null)),t.noSignup&&I!==(I="span"+(r.noSignup?4:3)+" row-login svelte-t7kh6t")&&(i.className=I),bn===(bn=_n(r))&&En?En.p(t,r):(En.d(1),(En=bn(n,r)).c(),En.m(o,null)),r.alternativeSignIn.length?yn?yn.p(t,r):((yn=Sn(n,r)).c(),yn.m(e,q)):yn&&(yn.d(1),yn=null)},d:function(n){n&&m(e),sn&&sn.d(),an&&an.d(),_(L,"input",dn),fn&&fn.d(),gn&&gn.d(),mn&&mn.d(),vn.d(),En.d(),yn&&yn.d(),_(e,"keyup",Pn)}}}(this,this._state),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor),H(this))}function kn(n,t){this._handlers={},this._dependents=[],this._computed=y(),this._sortedComputedProperties=[],this._state=d({},n),this._differs=t&&t.immutable?k:P}d(Pn.prototype,j),d(Pn.prototype,X),Pn.prototype._recompute=function(n,t){var e,r,s,o,i,a;(n.loginEmail||n.forgotPassword)&&this._differs(t.invalidLoginEmail,t.invalidLoginEmail=(r=(e=t).loginEmail,s=e.forgotPassword,!(W(r)||""===r&&!s)))&&(n.invalidLoginEmail=!0),(n.loginEmail||n.loginPassword)&&this._differs(t.invalidLoginForm,t.invalidLoginForm=function(n){var t=n.loginEmail,e=n.loginPassword;return!W(t)||""===e}(t))&&(n.invalidLoginForm=!0),(n.signupEmail||n.signupPassword||n.signupPasswordOk)&&this._differs(t.invalidSignupForm,t.invalidSignupForm=(i=(o=t).signupEmail,o.signupPassword,a=o.signupPasswordOk,!W(i)||!a||void 0))&&(n.invalidSignupForm=!0),(n.signupEmail||n.forgotPassword)&&this._differs(t.invalidSignupEmail,t.invalidSignupEmail=function(n){var t=n.signupEmail;return n.forgotPassword,!W(t)&&""!==t}(t))&&(n.invalidSignupEmail=!0)},d(kn.prototype,{_add:function(n,t){this._dependents.push({component:n,props:t})},_init:function(n){for(var t={},e=0;e<n.length;e+=1){var r=n[e];t["$"+r]=this._state[r]}return t},_remove:function(n){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===n)return void this._dependents.splice(t,1)},_set:function(n,t){var e=this,r=this._state;this._state=d(d({},r),n);for(var s=0;s<this._sortedComputedProperties.length;s+=1)this._sortedComputedProperties[s].update(this._state,t);this.fire("state",{changed:t,previous:r,current:this._state}),this._dependents.filter((function(n){for(var r={},s=!1,o=0;o<n.props.length;o+=1){var i=n.props[o];i in t&&(r["$"+i]=e._state[i],s=!0)}if(s)return n.component._stage(r),!0})).forEach((function(n){n.component.set({})})),this.fire("update",{changed:t,previous:r,current:this._state})},_sortComputedProperties:function(){var n,t=this._computed,e=this._sortedComputedProperties=[],r=y();function s(o){var i=t[o];i&&(i.deps.forEach((function(t){if(t===n)throw new Error("Cyclical dependency detected between ".concat(t," <-> ").concat(o));s(t)})),r[o]||(r[o]=!0,e.push(i)))}for(var o in this._computed)s(n=o)},compute:function(n,t,e){var r,s=this,o={deps:t,update:function(o,i,a){var c=t.map((function(n){return n in i&&(a=!0),o[n]}));if(a){var u=e.apply(null,c);s._differs(u,r)&&(r=u,i[n]=!0,o[n]=r)}}};this._computed[n]=o,this._sortComputedProperties();var i=d({},this._state),a={};o.update(i,a,!0),this._set(i,a)},fire:O,get:L,on:N,set:function(n){var t=this._state,e=this._changed={},r=!1;for(var s in n){if(this._computed[s])throw new Error("'".concat(s,"' is a read-only computed property"));this._differs(n[s],t[s])&&(e[s]=r=!0)}r&&this._set(n,e)}});return{App:Pn,data:{},store:new kn({}),init:function(n){}}}));
