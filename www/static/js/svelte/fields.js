!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("svelte/fields",e):(t=t||self).fields=e()}(this,(function(){"use strict";var t=function(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e}));function e(){}function n(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){for(var n in e)t[n]=1;return t}function o(t){t()}function a(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n)}function s(t){t.parentNode.removeChild(t)}function l(){return document.createDocumentFragment()}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function c(){return document.createComment("")}function h(t,e,n,i){t.addEventListener(e,n,i)}function p(t,e,n,i){t.removeEventListener(e,n,i)}function f(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function m(t,e){t.data=""+e}function v(t,e,n){t.style.setProperty(e,n)}function g(t,e,n){t.classList[n?"add":"remove"](e)}function _(t){return t}function b(t,n,i,a,r){var s,l,d,u=i.call(t,n,a),c=!1;return{t:r?0:1,running:!1,program:null,pending:null,run:function(t,e){var n=this;"function"==typeof u?w.wait().then((function(){u=u(),n._run(t,e)})):this._run(t,e)},_run:function(t,i){s=u.duration||300,l=u.easing||_;var o={start:window.performance.now()+(u.delay||0),b:t,callback:i||e};r&&!c&&(u.css&&u.delay&&(d=n.style.cssText,n.style.cssText+=u.css(0,1)),u.tick&&u.tick(0,1),c=!0),t||(o.group=y.current,y.current.remaining+=1),u.delay?this.pending=o:this.start(o),this.running||(this.running=!0,w.add(this))},start:function(e){if(t.fire("".concat(e.b?"intro":"outro",".start"),{node:n}),e.a=this.t,e.delta=e.b-e.a,e.duration=s*Math.abs(e.b-e.a),e.end=e.start+e.duration,u.css){u.delay&&(n.style.cssText=d);var i=function(t,e,n){for(var i=t.a,o=t.b,a=t.delta,r=16.666/t.duration,s="{\n",l=0;l<=1;l+=r){var d=i+a*e(l);s+=100*l+"%{".concat(n(d,1-d),"}\n")}return s+"100% {".concat(n(o,1-o),"}\n}")}(e,l,u.css);w.addRule(i,e.name="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(i)),n.style.animation=(n.style.animation||"").split(", ").filter((function(t){return t&&(e.delta<0||!/__svelte/.test(t))})).concat("".concat(e.name," ").concat(e.duration,"ms linear 1 forwards")).join(", ")}this.program=e,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*l(n/e.duration),u.tick&&u.tick(this.t,1-this.t)}},done:function(){var e=this.program;this.t=e.b,u.tick&&u.tick(this.t,1-this.t),t.fire("".concat(e.b?"intro":"outro",".end"),{node:n}),e.b||e.invalidated?u.css&&w.deleteRule(n,e.name):(e.group.callbacks.push((function(){e.callback(),u.css&&w.deleteRule(n,e.name)})),0==--e.group.remaining&&e.group.callbacks.forEach(o)),this.running=!!this.pending},abort:function(t){this.program&&(t&&u.tick&&u.tick(1,0),u.css&&w.deleteRule(n,this.program.name),this.program=this.pending=null,this.running=!1)},invalidate:function(){this.program&&(this.program.invalidated=!0)}}}var y={};var w={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},promise:null,add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){if(!this.stylesheet){var n=d("style");document.head.appendChild(n),w.stylesheet=n.sheet}this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes ".concat(e," ").concat(t),this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(var i=this.stylesheet.cssRules.length;i--;)this.stylesheet.deleteRule(i);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter((function(t){return t&&-1===t.indexOf(e)})).join(", ")},wait:function(){return w.promise||(w.promise=Promise.resolve(),w.promise.then((function(){w.promise=null}))),w.promise}};function x(){return Object.create(null)}function k(e,n){return e!=e?n==n:e!==n||e&&"object"===t(e)||"function"==typeof e}function N(t,e){return t!=t?e==e:t!==e}function F(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var i=0;i<n.length;i+=1){var o=n[i];if(!o.__calling)try{o.__calling=!0,o.call(this,e)}finally{o.__calling=!1}}}function C(t){t._lock=!0,S(t._beforecreate),S(t._oncreate),S(t._aftercreate),t._lock=!1}function R(){return this._state}function T(t,e){t._handlers=x(),t._slots=x(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function W(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function S(t){for(;t&&t.length;)t.shift()()}var E={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:R,fire:F,on:W,set:function(t){this._set(n({},t)),this.root._lock||C(this.root)},_recompute:e,_set:function(t){var e=this._state,i={},o=!1;for(var a in t=n(this._staged,t),this._staged={},t)this._differs(t[a],e[a])&&(i[a]=o=!0);o&&(this._state=n(n({},e),t),this._recompute(i,this._state),this._bind&&this._bind(i,this._state),this._fragment&&(this.fire("state",{changed:i,current:this._state,previous:e}),this._fragment.p(i,this._state),this.fire("update",{changed:i,current:this._state,previous:e})))},_stage:function(t){n(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:k};var z="100px";function L(t,e){var n;return{c:function(){v(n=d("label"),"width",e.width||z),n.className="control-label svelte-p72242",g(n,"disabled",e.disabled)},m:function(t,i){r(t,n,i),n.innerHTML=e.label},p:function(t,e){t.label&&(n.innerHTML=e.label),t.width&&v(n,"width",e.width||z),t.disabled&&g(n,"disabled",e.disabled)},d:function(t){t&&s(n)}}}function j(t,e){var n,i;return{c:function(){v(n=d("p"),"padding-left",e.inline?0:e.width||z),n.className=i="mini-help "+e.type+" svelte-p72242",g(n,"mini-help-block",!e.inline)},m:function(t,i){r(t,n,i),n.innerHTML=e.help},p:function(t,e){t.help&&(n.innerHTML=e.help),(t.inline||t.width)&&v(n,"padding-left",e.inline?0:e.width||z),t.type&&i!==(i="mini-help "+e.type+" svelte-p72242")&&(n.className=i),(t.type||t.inline)&&g(n,"mini-help-block",!e.inline)},d:function(t){t&&s(n)}}}function H(t){var e,i,o,l,c,h,p,f,m,_;T(this,t),this._state=n({disabled:!1,help:!1,type:"default",valign:"baseline",inline:!1},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=(e=this,i=this._state,f=e._slotted.default,m=i.label&&L(0,i),_=i.help&&j(0,i),{c:function(){o=d("div"),m&&m.c(),l=u("\n    "),c=d("div"),h=u("\n    "),_&&_.c(),c.className="controls svelte-p72242",v(c,"width","calc(100% - "+(i.width||z)+" - 32px)"),g(c,"form-inline",i.inline),o.className=p="control-group vis-option-group vis-option-group-"+i.type+" label-"+i.valign+" svelte-p72242"},m:function(t,e){r(t,o,e),m&&m.m(o,null),a(o,l),a(o,c),f&&a(c,f),a(o,h),_&&_.m(o,null)},p:function(t,e){e.label?m?m.p(t,e):((m=L(0,e)).c(),m.m(o,l)):m&&(m.d(1),m=null),t.width&&v(c,"width","calc(100% - "+(e.width||z)+" - 32px)"),t.inline&&g(c,"form-inline",e.inline),e.help?_?_.p(t,e):((_=j(0,e)).c(),_.m(o,null)):_&&(_.d(1),_=null),(t.type||t.valign)&&p!==(p="control-group vis-option-group vis-option-group-"+e.type+" label-"+e.valign+" svelte-p72242")&&(o.className=p)},d:function(t){t&&s(o),m&&m.d(),f&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(c,f),_&&_.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function M(t){T(this,t),this._state=n({id:"",autocomplete:"off",placeholder:"",width:"100%",height:"auto"},t.data),this._intro=!0,this._fragment=function(t,e){var n,i,o=!1;function l(){o=!0,t.set({value:i.value}),o=!1}return{c:function(){n=d("div"),h(i=d("textarea"),"input",l),i.id=e.id,i.placeholder=e.placeholder,i.disabled=e.disabled,f(i,"autocomplete",e.autocomplete),v(i,"height",e.height),i.className="svelte-1t08y9k",n.className="textarea-container svelte-1t08y9k",v(n,"width",e.width)},m:function(t,o){r(t,n,o),a(n,i),i.value=e.value},p:function(t,e){!o&&t.value&&(i.value=e.value),t.id&&(i.id=e.id),t.placeholder&&(i.placeholder=e.placeholder),t.disabled&&(i.disabled=e.disabled),t.autocomplete&&f(i,"autocomplete",e.autocomplete),t.height&&v(i,"height",e.height),t.width&&v(n,"width",e.width)},d:function(t){t&&s(n),p(i,"input",l)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function P(t){T(this,t),this._state=n({id:"",autocomplete:"off",placeholder:"",labelWidth:"100px",width:"100%",height:"auto"},t.data),this._intro=!0,this._fragment=function(t,e){var n,i={},o={placeholder:e.placeholder,disabled:e.disabled,id:e.id,autocomplete:e.autocomplete,width:e.width,height:e.height};void 0!==e.value&&(o.value=e.value,i.value=!0);var r=new M({root:t.root,store:t.store,data:o,_bind:function(e,n){var o={};!i.value&&e.value&&(o.value=n.value),t._set(o),i={}}});t.root._beforecreate.push((function(){r._bind({value:1},r.get())}));var s={disabled:e.disabled,type:"textarea",width:e.labelWidth,label:e.label,help:e.help},u=new H({root:t.root,store:t.store,slots:{default:l()},data:s});return{c:function(){n=d("div"),r._fragment.c(),u._fragment.c(),n.className="textarea-container",v(n,"width",e.width)},m:function(t,e){a(u._slotted.default,n),r._mount(n,null),u._mount(t,e)},p:function(t,o){e=o;var a={};t.placeholder&&(a.placeholder=e.placeholder),t.disabled&&(a.disabled=e.disabled),t.id&&(a.id=e.id),t.autocomplete&&(a.autocomplete=e.autocomplete),t.width&&(a.width=e.width),t.height&&(a.height=e.height),!i.value&&t.value&&(a.value=e.value,i.value=void 0!==e.value),r._set(a),i={},t.width&&v(n,"width",e.width);var s={};t.disabled&&(s.disabled=e.disabled),t.labelWidth&&(s.width=e.labelWidth),t.label&&(s.label=e.label),t.help&&(s.help=e.help),u._set(s)},d:function(t){r.destroy(),u.destroy(t)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),C(this))}n(H.prototype,E),n(M.prototype,E),n(P.prototype,E);var A={resize:function(t){var e=window.getComputedStyle(t).lineHeight,n=parseInt(e)*this.get().rows,i=function(t){var e=t.style.height;t.style.height="auto";var n=t.scrollHeight-8;return t.style.height=e,n}(t);this.set({height:n<i?n:i,scroll:n<i})}};function O(){this.get().expandable&&this.resize(this.refs.textarea)}function q(t,e){var n,i=!1;function o(){i=!0,t.set({value:n.value}),i=!1}return{c:function(){h(n=d("input"),"input",o),f(n,"type","text"),n.id=e.id,n.disabled=e.disabled,n.placeholder=e.placeholder,n.autocomplete=e.autocomplete,n.className="svelte-7gynmf"},m:function(t,i){r(t,n,i),n.value=e.value},p:function(t,e){!i&&t.value&&(n.value=e.value),t.id&&(n.id=e.id),t.disabled&&(n.disabled=e.disabled),t.placeholder&&(n.placeholder=e.placeholder),t.autocomplete&&(n.autocomplete=e.autocomplete)},d:function(t){t&&s(n),p(n,"input",o)}}}function B(t,e){var n,i=!1;function o(){i=!0,t.set({value:n.value}),i=!1}function a(e){t.resize(e.target)}return{c:function(){h(n=d("textarea"),"input",o),h(n,"input",a),v(n,"height",e.height+"px"),n.rows="1",n.id=e.id,n.disabled=e.disabled,n.placeholder=e.placeholder,f(n,"autocomplete",e.autocomplete),n.className="svelte-7gynmf",g(n,"scroll",e.scroll)},m:function(i,o){r(i,n,o),t.refs.textarea=n,n.value=e.value},p:function(t,e){!i&&t.value&&(n.value=e.value),t.height&&v(n,"height",e.height+"px"),t.id&&(n.id=e.id),t.disabled&&(n.disabled=e.disabled),t.placeholder&&(n.placeholder=e.placeholder),t.autocomplete&&f(n,"autocomplete",e.autocomplete),t.scroll&&g(n,"scroll",e.scroll)},d:function(e){e&&s(n),p(n,"input",o),p(n,"input",a),t.refs.textarea===n&&(t.refs.textarea=null)}}}function D(t){var e=this;T(this,t),this.refs={},this._state=n({value:"",id:"",autocomplete:"off",disabled:!1,expandable:!1,placeholder:"",width:"100%",height:20,rows:5},t.data),this._intro=!0,this._fragment=function(t,e){var n;function i(t){return t.expandable?B:q}var o=i(e),a=o(t,e);return{c:function(){n=d("div"),a.c(),n.className="text-container svelte-7gynmf",v(n,"width",e.width)},m:function(t,e){r(t,n,e),a.m(n,null)},p:function(e,r){o===(o=i(r))&&a?a.p(e,r):(a.d(1),(a=o(t,r)).c(),a.m(n,null)),e.width&&v(n,"width",r.width)},d:function(t){t&&s(n),a.d()}}}(this,this._state),this.root._oncreate.push((function(){O.call(e),e.fire("update",{changed:i({},e._state),current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),C(this))}function J(t){var e=t-1;return e*e*e+1}function $(t,e){var n=e.delay;void 0===n&&(n=0);var i=e.duration;void 0===i&&(i=400);var o=e.easing;void 0===o&&(o=J);var a=getComputedStyle(t),r=+a.opacity,s=parseFloat(a.height),l=parseFloat(a.paddingTop),d=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),h=parseFloat(a.borderTopWidth),p=parseFloat(a.borderBottomWidth);return{delay:n,duration:i,easing:o,css:function(t){return"overflow: hidden;opacity: "+Math.min(20*t,1)*r+";height: "+t*s+"px;padding-top: "+t*l+"px;padding-bottom: "+t*d+"px;margin-top: "+t*u+"px;margin-bottom: "+t*c+"px;border-top-width: "+t*h+"px;border-bottom-width: "+t*p+"px;"}}}function I(t,e){var n,i,o,h,p,f={},m=e.prepend&&G(t,e),v={expandable:e.expandable,rows:e.rows,id:e.id,autocomplete:e.autocomplete,disabled:e.disabled,placeholder:e.placeholder,width:e.width};void 0!==e.value&&(v.value=e.value,f.value=!0);var g=new D({root:t.root,store:t.store,data:v,_bind:function(e,n){var i={};!f.value&&e.value&&(i.value=n.value),t._set(i),f={}}});t.root._beforecreate.push((function(){g._bind({value:1},g.get())}));var _=e.append&&K(t,e),b={disabled:e.disabled,type:"text",width:e.labelWidth,label:e.label,help:e.help,valign:e.valign},w=new H({root:t.root,store:t.store,slots:{default:l()},data:b}),x=e.disabled&&e.disabled_msg&&Q(t,e);return{c:function(){n=d("div"),m&&m.c(),i=u("\n        "),g._fragment.c(),o=u("\n        "),_&&_.c(),w._fragment.c(),h=u("\n\n"),x&&x.c(),p=c(),n.className="flex svelte-13m1sbv"},m:function(t,e){a(w._slotted.default,n),m&&m.m(n,null),a(n,i),g._mount(n,null),a(n,o),_&&_.m(n,null),w._mount(t,e),r(t,h,e),x&&x.i(t,e),r(t,p,e)},p:function(o,a){(e=a).prepend?m?m.p(o,e):((m=G(t,e)).c(),m.m(n,i)):m&&(m.d(1),m=null);var r={};o.expandable&&(r.expandable=e.expandable),o.rows&&(r.rows=e.rows),o.id&&(r.id=e.id),o.autocomplete&&(r.autocomplete=e.autocomplete),o.disabled&&(r.disabled=e.disabled),o.placeholder&&(r.placeholder=e.placeholder),o.width&&(r.width=e.width),!f.value&&o.value&&(r.value=e.value,f.value=void 0!==e.value),g._set(r),f={},e.append?_?_.p(o,e):((_=K(t,e)).c(),_.m(n,null)):_&&(_.d(1),_=null);var s={};o.disabled&&(s.disabled=e.disabled),o.labelWidth&&(s.width=e.labelWidth),o.label&&(s.label=e.label),o.help&&(s.help=e.help),o.valign&&(s.valign=e.valign),w._set(s),e.disabled&&e.disabled_msg?(x?x.p(o,e):(x=Q(t,e))&&x.c(),x.i(p.parentNode,p)):x&&(y.current={remaining:0,callbacks:[]},x.o((function(){x.d(1),x=null})))},d:function(t){m&&m.d(),g.destroy(),_&&_.d(),w.destroy(t),t&&s(h),x&&x.d(t),t&&s(p)}}}function G(t,e){var n,i;return{c:function(){n=d("div"),i=u(e.prepend),n.className="prepend"},m:function(t,e){r(t,n,e),a(n,i)},p:function(t,e){t.prepend&&m(i,e.prepend)},d:function(t){t&&s(n)}}}function K(t,e){var n,i;return{c:function(){n=d("div"),i=u(e.append),n.className="append"},m:function(t,e){r(t,n,e),a(n,i)},p:function(t,e){t.append&&m(i,e.append)},d:function(t){t&&s(n)}}}function Q(t,e){var n,i,o,l;return{c:function(){n=d("div"),(i=d("div")).className="disabled-msg svelte-13m1sbv"},m:function(t,o){r(t,n,o),a(n,i),i.innerHTML=e.disabled_msg,l=!0},p:function(t,e){l&&!t.disabled_msg||(i.innerHTML=e.disabled_msg)},i:function(e,i){l||(t.root._intro&&(o&&o.invalidate(),t.root._aftercreate.push((function(){o||(o=b(t,n,$,{},!0)),o.run(1)}))),this.m(e,i))},o:function(e){l&&(o||(o=b(t,n,$,{},!1)),o.run(0,(function(){e(),o=null})),l=!1)},d:function(t){t&&(s(n),o&&o.abort())}}}function U(t){T(this,t),this._state=n({id:"",autocomplete:"off",disabled:!1,disabled_msg:"",expandable:!1,labelWidth:"100px",width:"100%",valign:"middle",help:"",placeholder:"",prepend:"",append:""},t.data),this._intro=!0,this._fragment=I(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),C(this))}function V(e){if(!e||"object"!==t(e))return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function X(t){var e=t.changed,n=t.current,i=this.store.get().dw_chart;if(e.customFields&&n.customFields){var o=V(i.get("metadata.custom",{}));n.customFields.forEach((function(t){o[t.key]||(o[t.key]="")})),this.set({custom:o,initialized:!0})}e.custom&&n.initialized&&(i.set("metadata.custom",V(n.custom)),i.saveSoon&&i.saveSoon())}function Y(t,e,n){var i=Object.create(t);return i.field=e[n],i}function Z(t,e){var n,i,o,l,c,f=!e.notoggle&&tt();function m(e){t.toggle()}for(var v=e.customFields,g=[],_=0;_<v.length;_+=1)g[_]=it(t,Y(e,v,_));return{c:function(){n=d("div"),i=d("label"),f&&f.c(),o=u(" Custom fields"),l=u("\n\n    "),c=d("div");for(var t=0;t<g.length;t+=1)g[t].c();h(i,"click",m),i.className="group-title",c.className="option-group-content vis-option-type-chart-description",n.className="vis-option-type-group group-open svelte-11r7z9v svelte-ref-customfields"},m:function(e,s){r(e,n,s),a(n,i),f&&f.m(i,null),a(i,o),a(n,l),a(n,c);for(var d=0;d<g.length;d+=1)g[d].m(c,null);t.refs.customfields=n},p:function(e,n){if(n.notoggle?f&&(f.d(1),f=null):f||((f=tt()).c(),f.m(i,o)),e.customFields||e.custom){v=n.customFields;for(var a=0;a<v.length;a+=1){var r=Y(n,v,a);g[a]?g[a].p(e,r):(g[a]=it(t,r),g[a].c(),g[a].m(c,null))}for(;a<g.length;a+=1)g[a].d(1);g.length=v.length}},d:function(e){e&&s(n),f&&f.d(),p(i,"click",m),function(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(g,e),t.refs.customfields===n&&(t.refs.customfields=null)}}}function tt(t,e){var n,i,o;return{c:function(){n=d("i"),i=u("\n        "),o=d("i"),n.className="fa fa-chevron-up expand-group pull-right",o.className="fa fa-chevron-down collapse-group pull-right"},m:function(t,e){r(t,n,e),r(t,i,e),r(t,o,e)},d:function(t){t&&(s(n),s(i),s(o))}}}function et(t,e){var n={},i={labelWidth:"auto",width:"120px",label:e.field.title,help:e.field.description};void 0!==e.custom[e.field.key]&&(i.value=e.custom[e.field.key],n.value=!0);var o=new P({root:t.root,store:t.store,data:i,_bind:function(i,o){var a={};!n.value&&i.value&&(e.custom[e.field.key]=o.value,a.custom=e.custom),t._set(a),n={}}});return t.root._beforecreate.push((function(){o._bind({value:1},o.get())})),{c:function(){o._fragment.c()},m:function(t,e){o._mount(t,e)},p:function(t,i){e=i;var a={};t.customFields&&(a.label=e.field.title),t.customFields&&(a.help=e.field.description),(!n.value&&t.custom||t.customFields)&&(a.value=e.custom[e.field.key],n.value=void 0!==e.custom[e.field.key]),o._set(a),n={}},d:function(t){o.destroy(t)}}}function nt(t,e){var n={},i={labelWidth:"auto",width:"120px",label:e.field.title,help:e.field.description};void 0!==e.custom[e.field.key]&&(i.value=e.custom[e.field.key],n.value=!0);var o=new U({root:t.root,store:t.store,data:i,_bind:function(i,o){var a={};!n.value&&i.value&&(e.custom[e.field.key]=o.value,a.custom=e.custom),t._set(a),n={}}});return t.root._beforecreate.push((function(){o._bind({value:1},o.get())})),{c:function(){o._fragment.c()},m:function(t,e){o._mount(t,e)},p:function(t,i){e=i;var a={};t.customFields&&(a.label=e.field.title),t.customFields&&(a.help=e.field.description),(!n.value&&t.custom||t.customFields)&&(a.value=e.custom[e.field.key],n.value=void 0!==e.custom[e.field.key]),o._set(a),n={}},d:function(t){o.destroy(t)}}}function it(t,e){var n;function i(t){return"text"==t.field.type?nt:"textArea"==t.field.type?et:void 0}var o=i(e),a=o&&o(t,e);return{c:function(){a&&a.c(),n=c()},m:function(t,e){a&&a.m(t,e),r(t,n,e)},p:function(e,r){o===(o=i(r))&&a?a.p(e,r):(a&&a.d(1),(a=o&&o(t,r))&&a.c(),a&&a.m(n.parentNode,n))},d:function(t){a&&a.d(t),t&&s(n)}}}function ot(t){var e,o,a,l,d=this;T(this,t),this.refs={},this._state=n({customFields:[],custom:{},initialized:!1},t.data),this._intro=!0,this._handlers.state=[X],X.call(this,{changed:i({},this._state),current:this._state}),this._fragment=(e=this,o=this._state,l=o.customFields.length&&o.initialized&&Z(e,o),{c:function(){l&&l.c(),a=c()},m:function(t,e){l&&l.m(t,e),r(t,a,e)},p:function(t,n){n.customFields.length&&n.initialized?l?l.p(t,n):((l=Z(e,n)).c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},d:function(t){l&&l.d(t),t&&s(a)}}),this.root._oncreate.push((function(){d.fire("update",{changed:i({},d._state),current:d._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),C(this))}function at(t,e){this._handlers={},this._dependents=[],this._computed=x(),this._sortedComputedProperties=[],this._state=n({},t),this._differs=e&&e.immutable?N:k}n(D.prototype,E),n(D.prototype,A),n(U.prototype,E),n(ot.prototype,E),n(at.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var i=t[n];e["$"+i]=this._state[i]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_set:function(t,e){var i=this,o=this._state;this._state=n(n({},o),t);for(var a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,e);this.fire("state",{changed:e,previous:o,current:this._state}),this._dependents.filter((function(t){for(var n={},o=!1,a=0;a<t.props.length;a+=1){var r=t.props[a];r in e&&(n["$"+r]=i._state[r],o=!0)}if(o)return t.component._stage(n),!0})).forEach((function(t){t.component.set({})})),this.fire("update",{changed:e,previous:o,current:this._state})},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],i=x();function o(a){var r=e[a];r&&(r.deps.forEach((function(e){if(e===t)throw new Error("Cyclical dependency detected between ".concat(e," <-> ").concat(a));o(e)})),i[a]||(i[a]=!0,n.push(r)))}for(var a in this._computed)o(t=a)},compute:function(t,e,i){var o,a=this,r={deps:e,update:function(n,r,s){var l=e.map((function(t){return t in r&&(s=!0),n[t]}));if(s){var d=i.apply(null,l);a._differs(d,o)&&(o=d,r[t]=!0,n[t]=o)}}};this._computed[t]=r,this._sortComputedProperties();var s=n({},this._state),l={};r.update(s,l,!0),this._set(s,l)},fire:F,get:R,on:W,set:function(t){var e=this._state,n=this._changed={},i=!1;for(var o in t){if(this._computed[o])throw new Error("'".concat(o,"' is a read-only computed property"));this._differs(t[o],e[o])&&(n[o]=i=!0)}i&&this._set(t,n)}});return{App:ot,data:{chart:{id:""}},store:new at({}),init:function(t){window.dw.backend.on("dataset-loaded",(function(){t.store.set({dataset:chart.dataset()})})).on("theme-changed-and-loaded",(function(){t.store.set({theme:window.dw.theme(chart.get("theme"))})})).on("backend-vis-loaded",(function(e){t.store.set({vis:e})}))}}}));
