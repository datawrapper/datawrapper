!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("svelte/account",e):(t=t||self).account=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?n(Object(a),!0).forEach((function(n){e(t,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,n){return(c=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var a=new(Function.bind.apply(t,r));return n&&o(a,n.prototype),a}).apply(null,arguments)}function i(t){var e="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,t)})(t)}function u(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){}function f(t,e){for(var n in e)t[n]=e[n];return t}function p(t,e){for(var n in e)t[n]=1;return t}function m(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n)}function v(t){t.parentNode.removeChild(t)}function w(t,e){for(;t.nextSibling;)e.appendChild(t.nextSibling)}function g(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(){return document.createDocumentFragment()}function _(t){return document.createElement(t)}function T(t){return document.createTextNode(t)}function y(){return document.createComment("")}function N(t,e,n,r){t.addEventListener(e,n,r)}function P(t,e,n,r){t.removeEventListener(e,n,r)}function k(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function E(t,e){t.data=""+e}function O(t,e,n){t.style.setProperty(e,n)}function S(t,e){for(var n=0;n<t.options.length;n+=1){var r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function H(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function j(t,e,n){t.classList[n?"add":"remove"](e)}function x(t,n){var r,a=n.token={};function o(t,r,o,s){if(n.token===a){n.resolved=o&&e({},o,s);var c=f(f({},n.ctx),n.resolved),i=t&&(n.current=t)(n.component,c);n.block&&(n.blocks?n.blocks.forEach((function(t,e){e!==r&&t&&t.o((function(){t.d(1),n.blocks[e]=null}))})):n.block.d(1),i.c(),i[i.i?"i":"m"](n.mount(),n.anchor),n.component.root.set({})),n.block=i,n.blocks&&(n.blocks[r]=i)}}if((r=t)&&"function"==typeof r.then){if(t.then((function(t){o(n.then,1,n.value,t)}),(function(t){o(n.catch,2,n.error,t)})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=e({},n.value,t)}}function A(){return Object.create(null)}function R(e,n){return e!=e?n==n:e!==n||e&&"object"===t(e)||"function"==typeof e}function q(t,e){return t!=t?e==e:t!==e}function M(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var a=n[r];if(!a.__calling)try{a.__calling=!0,a.call(this,e)}finally{a.__calling=!1}}}function L(t){t._lock=!0,U(t._beforecreate),U(t._oncreate),U(t._aftercreate),t._lock=!1}function C(){return this._state}function D(t,e){t._handlers=A(),t._slots=A(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function I(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function U(t){for(;t&&t.length;)t.shift()()}var Y={destroy:function(t){this.destroy=d,this.fire("destroy"),this.set=d,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:C,fire:M,on:I,set:function(t){this._set(f({},t)),this.root._lock||L(this.root)},_recompute:d,_set:function(t){var e=this._state,n={},r=!1;for(var a in t=f(this._staged,t),this._staged={},t)this._differs(t[a],e[a])&&(n[a]=r=!0);r&&(this._state=f(f({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))},_stage:function(t){f(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:R},G={};function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===t?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(G[t]=window.__dw.vis.meta.locale||{}):G[t]="core"===t?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[t])}function $(t){var e=arguments,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(t=t.trim(),G[n]||J(n),!G[n][t])return"MISSING:"+t;var r=G[n][t];return"string"==typeof r&&arguments.length>2&&(r=r.replace(/\$(\d)/g,(function(t,n){return n=2+Number(n),void 0===e[n]?t:e[n]}))),r}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;return"string"!=typeof t?t:t.length<e+n+3?t:t.substr(0,e).trim()+"…"+t.substr(t.length-n).trim()}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r({payload:null,raw:!1,method:"GET",baseUrl:"//".concat(dw.backend.__api_domain),mode:"cors",credentials:"include"},e,{headers:r({"Content-Type":"application/json"},e.headers)}),a=n.payload,o=n.baseUrl,s=n.raw,c=u(n,["payload","baseUrl","raw"]),i="".concat(o.replace(/\/$/,""),"/").concat(t.replace(/^\//,""));return a&&(c.body=JSON.stringify(a)),window.fetch(i,c).then((function(t){if(s)return t;if(!t.ok)throw new z(t);if(204!==t.status){var e=t.headers.get("content-type").split(";")[0];return"application/json"===e?t.json():"image/png"===e||"application/pdf"===e?t.blob():t.text()}}))}F.get=W("GET"),F.patch=W("PATCH"),F.put=W("PUT"),F.post=W("POST"),F.head=W("HEAD");function W(t){return function(e,n){if(n&&n.method)throw new Error("Setting option.method is not allowed in httpReq.".concat(t.toLowerCase(),"()"));return F(e,r({},n,{method:t}))}}F.delete=W("DELETE");var z=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=l(this,a(e).call(this))).name="HttpReqError",n.status=t.status,n.statusText=t.statusText,n.message="[".concat(t.status,"] ").concat(t.statusText),n.response=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),e}(i(Error));function K(t,e){var n;return{c:function(){(n=_("label")).className="control-label svelte-4hqcdn"},m:function(t,r){h(t,n,r),n.innerHTML=e.label},p:function(t,e){t.label&&(n.innerHTML=e.label)},d:function(t){t&&v(n)}}}function Q(t,e){var n;return{c:function(){(n=_("div")).className="help success svelte-4hqcdn"},m:function(t,r){h(t,n,r),n.innerHTML=e.success},p:function(t,e){t.success&&(n.innerHTML=e.success)},d:function(t){t&&v(n)}}}function V(t,e){var n;return{c:function(){(n=_("div")).className="help error svelte-4hqcdn"},m:function(t,r){h(t,n,r),n.innerHTML=e.error},p:function(t,e){t.error&&(n.innerHTML=e.error)},d:function(t){t&&v(n)}}}function X(t,e){var n;return{c:function(){(n=_("div")).className="help svelte-4hqcdn"},m:function(t,r){h(t,n,r),n.innerHTML=e.help},p:function(t,e){t.help&&(n.innerHTML=e.help)},d:function(t){t&&v(n)}}}function Z(t){var e,n,r,a,o,s,c,i,u,l,d,p,w;D(this,t),this._state=f({label:"",help:"",error:!1,success:!1,width:"auto"},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=(e=this,n=this._state,u=e._slotted.default,l=n.label&&K(0,n),d=n.success&&Q(0,n),p=n.error&&V(0,n),w=!n.success&&!n.error&&n.help&&X(0,n),{c:function(){r=_("div"),l&&l.c(),a=T("\n    "),o=_("div"),s=T("\n    "),d&&d.c(),c=T(" "),p&&p.c(),i=T(" "),w&&w.c(),o.className="form-controls svelte-4hqcdn",r.className="form-block svelte-4hqcdn",O(r,"width",n.width),j(r,"success",n.success),j(r,"error",n.error)},m:function(t,e){h(t,r,e),l&&l.m(r,null),m(r,a),m(r,o),u&&m(o,u),m(r,s),d&&d.m(r,null),m(r,c),p&&p.m(r,null),m(r,i),w&&w.m(r,null)},p:function(t,e){e.label?l?l.p(t,e):((l=K(0,e)).c(),l.m(r,a)):l&&(l.d(1),l=null),e.success?d?d.p(t,e):((d=Q(0,e)).c(),d.m(r,c)):d&&(d.d(1),d=null),e.error?p?p.p(t,e):((p=V(0,e)).c(),p.m(r,i)):p&&(p.d(1),p=null),e.success||e.error||!e.help?w&&(w.d(1),w=null):w?w.p(t,e):((w=X(0,e)).c(),w.m(r,null)),t.width&&O(r,"width",e.width),t.success&&j(r,"success",e.success),t.error&&j(r,"error",e.error)},d:function(t){t&&v(r),l&&l.d(),u&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(o,u),d&&d.d(),p&&p.d(),w&&w.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}f(Z.prototype,Y);var tt,et=!1;function nt(t){var e=t.password;return tt?tt(e):(!et&&e.length>4&&(et=!0,require(["zxcvbn"],(function(t){tt=t}))),!1)}function rt(t,e){return{c:d,m:d,d:d}}function at(t){var e,n,r;D(this,t),this._state=f({password:"",passwordRepeat:""},t.data),this._recompute({password:1,passwordRepeat:1,passwordStrength:1,passwordTooShort:1,passwordHelp:1,passwordMismatch:1},this._state),this._intro=!0,this._fragment=(e=this._state,r=e.password.length>=8&&rt(),{c:function(){r&&r.c(),n=y()},m:function(t,e){r&&r.m(t,e),h(t,n,e)},p:function(t,e){e.password.length>=8?r||((r=rt()).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d:function(t){r&&r.d(t),t&&v(n)}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function ot(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function st(){}function ct(t){var e=t();if(e&&e.then)return e.then(st)}function it(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}function ut(t,e){return t&&t.then?t.then(e):e(t)}f(at.prototype,Y),at.prototype._recompute=function(t,e){var n,r,a;t.password&&this._differs(e.passwordTooShort,e.passwordTooShort=e.password.length<8)&&(t.passwordTooShort=!0),(t.password||t.passwordRepeat)&&this._differs(e.passwordMismatch,e.passwordMismatch=(r=(n=e).password,a=n.passwordRepeat,r&&r!==a))&&(t.passwordMismatch=!0),t.password&&this._differs(e.passwordStrength,e.passwordStrength=nt(e))&&(t.passwordStrength=!0),(t.password||t.passwordStrength)&&this._differs(e.passwordHelp,e.passwordHelp=function(t){var e=t.password,n=t.passwordStrength;if(""===e||!n)return $("account / pwd-too-short").replace("%num",8);var r=["bad","weak","ok","good","excellent"][n.score];return $("account / password / ".concat(r))}(e))&&(t.passwordHelp=!0),(t.password||t.passwordTooShort||t.passwordStrength||t.passwordHelp)&&this._differs(e.passwordError,e.passwordError=function(t){var e=t.password,n=t.passwordTooShort,r=t.passwordStrength,a=t.passwordHelp;return!!e&&(n?$("account / pwd-too-short").replace("%num",8):!!(r&&r.score<2)&&a)}(e))&&(t.passwordError=!0),(t.passwordStrength||t.passwordHelp)&&this._differs(e.passwordSuccess,e.passwordSuccess=function(t){var e=t.passwordStrength,n=t.passwordHelp;return!!(e&&e.score>2)&&n}(e))&&(t.passwordSuccess=!0),t.passwordMismatch&&this._differs(e.passwordRepeatError,e.passwordRepeatError=!!e.passwordMismatch&&$("account / password / mismatch"))&&(t.passwordRepeatError=!0),(t.password||t.passwordMismatch||t.passwordTooShort)&&this._differs(e.passwordOk,e.passwordOk=function(t){var e=t.password,n=t.passwordMismatch,r=t.passwordTooShort;return e&&!n&&!r}(e))&&(t.passwordOk=!0)};var lt={changeEmail:function(){try{var t=this,e=t.get().email;t.set({savingEmail:!0});var n=[],r=[];return ut(it((function(){return ot(F.patch("/v3/me",{payload:{email:e}}),(function(e){n.push("Your email has been changed successfully. You will receive an email with a confirmation link."),t.set({email:e.email})}))}),(function(t){return ct((function(){if("HttpReqError"===t.name)return ot(t.response.json(),(function(e){"Invalid request payload input"===e.message?r.push($("account / change-email / error / invalid-email")):r.push(e.message?$("account / change-email / error / ".concat(e.message)):t.message)}));r.push("Unknown error: "+t)}))})),(function(){t.set({savingEmail:!1}),r.length?t.set({errors:r}):t.set({changeEmail:!1,messages:n,errors:[]})}))}catch(t){return Promise.reject(t)}},changePassword:function(){try{var t=this,e=t.get(),n=e.currentPassword,r=e.newPassword1;t.set({savingPassword:!0});var a={password:r,oldPassword:n},o=[],s=[];return ut(it((function(){return ot(F.patch("/v3/me",{payload:a}),(function(){o.push("Your password has been changed!")}))}),(function(t){return ct((function(){if("HttpReqError"===t.name)return ot(t.response.json(),(function(e){s.push(e.message||t.message)}));s.push("Unknown error: "+t)}))})),(function(){0===s.length?t.set({changePassword:!1,messages:o,errors:[]}):t.set({errors:s}),t.set({savingPassword:!1,currentPassword:"",newPassword1:"",newPassword2:""})}))}catch(t){return Promise.reject(t)}},deleteAccount:function(){try{var t=this,e=t.get(),n=e.confirmPassword,r=e.confirmEmail;t.set({deletingAccount:!0});var a=[];return ut(it((function(){return function(t,e){if(!e)return t&&t.then?t.then(st):Promise.resolve()}(F.delete("/v3/me",{payload:{password:n,email:r}}))}),(function(t){return ct((function(){if("HttpReqError"===t.name)return ot(t.response.json(),(function(e){a.push(e.message||t.message)}));a.push("Unknown error: "+t)}))})),(function(){t.set({deletingAccount:!1}),a.length?t.set({errors:a}):t.set({deleteAccount2:!1,deleteAccount3:!0})}))}catch(t){return Promise.reject(t)}}};function dt(t,e,n){var r=Object.create(t);return r.message=e[n],r}function ft(t,e,n){var r=Object.create(t);return r.message=e[n],r}function pt(t,e){for(var n,r,a,o=e.messages,s=[],c=0;c<o.length;c+=1)s[c]=mt(t,ft(e,o,c));return{c:function(){n=_("div"),r=_("div"),a=_("div");for(var t=0;t<s.length;t+=1)s[t].c();a.className="alert alert-success svelte-1uqq9ww",r.className="span6",n.className="row",O(n,"margin-top","20px")},m:function(t,e){h(t,n,e),m(n,r),m(r,a);for(var o=0;o<s.length;o+=1)s[o].m(a,null)},p:function(e,n){if(e.messages){o=n.messages;for(var r=0;r<o.length;r+=1){var c=ft(n,o,r);s[r]?s[r].p(e,c):(s[r]=mt(t,c),s[r].c(),s[r].m(a,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d:function(t){t&&v(n),g(s,t)}}}function mt(t,e){var n,r=e.message;return{c:function(){(n=_("p")).className="svelte-1uqq9ww"},m:function(t,e){h(t,n,e),n.innerHTML=r},p:function(t,e){t.messages&&r!==(r=e.message)&&(n.innerHTML=r)},d:function(t){t&&v(n)}}}function ht(t,e){var n,r=e.errors.join("");return{c:function(){(n=_("div")).className="alert alert-warning"},m:function(t,e){h(t,n,e),n.innerHTML=r},p:function(t,e){t.errors&&r!==(r=e.errors.join(""))&&(n.innerHTML=r)},d:function(t){t&&v(n)}}}function vt(t,e){var n,r,a=$("account / email");function o(e){t.set({changeEmail:!0})}return{c:function(){n=_("button"),r=T(a),N(n,"click",o),n.className="btn btn-save btn-default"},m:function(t,e){h(t,n,e),m(n,r)},p:d,d:function(t){t&&v(n),P(n,"click",o)}}}function wt(t,e){var n,r,a,o,s,c,i,u,l=$("Back"),d=$("account / email");function f(e){t.set({changeEmail:!1})}function p(e){t.changeEmail()}return{c:function(){n=_("button"),r=T(l),a=T("\n            "),o=_("button"),s=_("i"),i=T("  "),u=T(d),N(n,"click",f),n.className="btn btn-default",s.className=c="fa "+(e.savingEmail?"fa-spin fa-spinner":"fa-check")+" svelte-1uqq9ww",N(o,"click",p),o.className="btn btn-save btn-primary"},m:function(t,e){h(t,n,e),m(n,r),h(t,a,e),h(t,o,e),m(o,s),m(o,i),m(o,u)},p:function(t,e){t.savingEmail&&c!==(c="fa "+(e.savingEmail?"fa-spin fa-spinner":"fa-check")+" svelte-1uqq9ww")&&(s.className=c)},d:function(t){t&&v(n),P(n,"click",f),t&&(v(a),v(o)),P(o,"click",p)}}}function gt(t,e){var n,r,a,o,s,c,i,u,l,d,f,p,w,g,y,E,S,H,j,x,A,R,q,M=$("account / password"),L=$("Back"),C=!1,D=!1,I={},U=!1,Y=$("account / password");function G(e){t.set({changePassword:!1})}var J=e.changePassword&&e.errors&&e.errors.length&&_t(t,e);function B(){C=!0,t.set({currentPassword:u.value}),C=!1}var F={label:$("Current Password"),help:$("account / password / current-password-note")},W=new Z({root:t.root,store:t.store,slots:{default:b()},data:F});function z(){D=!0,t.set({newPassword1:d.value}),D=!1}var K={};void 0!==e.newPassword1&&(K.password=e.newPassword1,I.password=!0),void 0!==e.newPassword2&&(K.passwordRepeat=e.newPassword2,I.passwordRepeat=!0),void 0!==e.passwordHelp&&(K.passwordHelp=e.passwordHelp,I.passwordHelp=!0),void 0!==e.passwordSuccess&&(K.passwordSuccess=e.passwordSuccess,I.passwordSuccess=!0),void 0!==e.passwordError&&(K.passwordError=e.passwordError,I.passwordError=!0),void 0!==e.passwordRepeatError&&(K.passwordRepeatError=e.passwordRepeatError,I.passwordRepeatError=!0),void 0!==e.newPasswordOk&&(K.passwordOk=e.newPasswordOk,I.passwordOk=!0);var Q=new at({root:t.root,store:t.store,data:K,_bind:function(e,n){var r={};!I.password&&e.password&&(r.newPassword1=n.password),!I.passwordRepeat&&e.passwordRepeat&&(r.newPassword2=n.passwordRepeat),!I.passwordHelp&&e.passwordHelp&&(r.passwordHelp=n.passwordHelp),!I.passwordSuccess&&e.passwordSuccess&&(r.passwordSuccess=n.passwordSuccess),!I.passwordError&&e.passwordError&&(r.passwordError=n.passwordError),!I.passwordRepeatError&&e.passwordRepeatError&&(r.passwordRepeatError=n.passwordRepeatError),!I.passwordOk&&e.passwordOk&&(r.newPasswordOk=n.passwordOk),t._set(r),I={}}});t.root._beforecreate.push((function(){Q._bind({password:1,passwordRepeat:1,passwordHelp:1,passwordSuccess:1,passwordError:1,passwordRepeatError:1,passwordOk:1},Q.get())}));var V={error:e.passwordError,label:$("New Password"),success:e.passwordSuccess,help:e.passwordHelp},X=new Z({root:t.root,store:t.store,slots:{default:b()},data:V});function tt(){U=!0,t.set({newPassword2:g.value}),U=!1}var et={error:e.passwordRepeatError,label:$("(repeat)"),help:""},nt=new Z({root:t.root,store:t.store,slots:{default:b()},data:et});function rt(e){t.changePassword()}return{c:function(){n=_("h3"),r=T(M),a=T("\n            "),o=_("button"),s=T(L),c=T("\n        "),J&&J.c(),i=T("\n        "),u=_("input"),W._fragment.c(),l=T("\n\n        "),d=_("input"),f=T("\n            "),p=_("div"),Q._fragment.c(),X._fragment.c(),w=T("\n        "),g=_("input"),nt._fragment.c(),y=T("\n\n        "),E=_("button"),S=_("i"),j=T("  "),x=T(Y),R=T("\n        "),q=_("hr"),N(o,"click",G),o.className="btn btn-save btn-default btn-back",N(u,"input",B),k(u,"type","password"),u.className="input-xlarge",N(d,"input",z),k(d,"type","password"),d.className="input-xlarge",O(p,"width","287px"),N(g,"input",tt),k(g,"type","password"),g.className="input-xlarge",S.className=H="fa "+(e.savingPassword?"fa-spin fa-spinner":"fa-check")+" svelte-1uqq9ww",N(E,"click",rt),E.disabled=A=!(e.newPasswordOk&&e.currentPassword),E.className="btn btn-primary"},m:function(t,v){h(t,n,v),m(n,r),m(n,a),m(n,o),m(o,s),h(t,c,v),J&&J.m(t,v),h(t,i,v),m(W._slotted.default,u),u.value=e.currentPassword,W._mount(t,v),h(t,l,v),m(X._slotted.default,d),d.value=e.newPassword1,m(X._slotted.default,f),m(X._slotted.default,p),Q._mount(p,null),X._mount(t,v),h(t,w,v),m(nt._slotted.default,g),g.value=e.newPassword2,nt._mount(t,v),h(t,y,v),h(t,E,v),m(E,S),m(E,j),m(E,x),h(t,R,v),h(t,q,v)},p:function(n,r){(e=r).changePassword&&e.errors&&e.errors.length?J?J.p(n,e):((J=_t(t,e)).c(),J.m(i.parentNode,i)):J&&(J.d(1),J=null),!C&&n.currentPassword&&(u.value=e.currentPassword),!D&&n.newPassword1&&(d.value=e.newPassword1);var a={};!I.password&&n.newPassword1&&(a.password=e.newPassword1,I.password=void 0!==e.newPassword1),!I.passwordRepeat&&n.newPassword2&&(a.passwordRepeat=e.newPassword2,I.passwordRepeat=void 0!==e.newPassword2),!I.passwordHelp&&n.passwordHelp&&(a.passwordHelp=e.passwordHelp,I.passwordHelp=void 0!==e.passwordHelp),!I.passwordSuccess&&n.passwordSuccess&&(a.passwordSuccess=e.passwordSuccess,I.passwordSuccess=void 0!==e.passwordSuccess),!I.passwordError&&n.passwordError&&(a.passwordError=e.passwordError,I.passwordError=void 0!==e.passwordError),!I.passwordRepeatError&&n.passwordRepeatError&&(a.passwordRepeatError=e.passwordRepeatError,I.passwordRepeatError=void 0!==e.passwordRepeatError),!I.passwordOk&&n.newPasswordOk&&(a.passwordOk=e.newPasswordOk,I.passwordOk=void 0!==e.newPasswordOk),Q._set(a),I={};var o={};n.passwordError&&(o.error=e.passwordError),n.passwordSuccess&&(o.success=e.passwordSuccess),n.passwordHelp&&(o.help=e.passwordHelp),X._set(o),!U&&n.newPassword2&&(g.value=e.newPassword2);var s={};n.passwordRepeatError&&(s.error=e.passwordRepeatError),nt._set(s),n.savingPassword&&H!==(H="fa "+(e.savingPassword?"fa-spin fa-spinner":"fa-check")+" svelte-1uqq9ww")&&(S.className=H),(n.newPasswordOk||n.currentPassword)&&A!==(A=!(e.newPasswordOk&&e.currentPassword))&&(E.disabled=A)},d:function(t){t&&v(n),P(o,"click",G),t&&v(c),J&&J.d(t),t&&v(i),P(u,"input",B),W.destroy(t),t&&v(l),P(d,"input",z),Q.destroy(),X.destroy(t),t&&v(w),P(g,"input",tt),nt.destroy(t),t&&(v(y),v(E)),P(E,"click",rt),t&&(v(R),v(q))}}}function bt(t,e){var n,r,a,o,s=$("account / password");function c(e){t.set({changePassword:!0})}var i={label:$("Password"),help:""},u=new Z({root:t.root,store:t.store,slots:{default:b()},data:i});return{c:function(){n=_("input"),r=T("\n            "),a=_("button"),o=T(s),u._fragment.c(),n.disabled=!0,n.value="abcdefgh",k(n,"type","password"),N(a,"click",c),a.className="btn btn-save btn-default"},m:function(t,e){m(u._slotted.default,n),m(u._slotted.default,r),m(u._slotted.default,a),m(a,o),u._mount(t,e)},p:d,d:function(t){P(a,"click",c),u.destroy(t)}}}function _t(t,e){for(var n,r=e.errors,a=[],o=0;o<r.length;o+=1)a[o]=Tt(t,dt(e,r,o));return{c:function(){n=_("div");for(var t=0;t<a.length;t+=1)a[t].c();n.className="alert svelte-1uqq9ww"},m:function(t,e){h(t,n,e);for(var r=0;r<a.length;r+=1)a[r].m(n,null)},p:function(e,o){if(e.errors){r=o.errors;for(var s=0;s<r.length;s+=1){var c=dt(o,r,s);a[s]?a[s].p(e,c):(a[s]=Tt(t,c),a[s].c(),a[s].m(n,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}},d:function(t){t&&v(n),g(a,t)}}}function Tt(t,e){var n,r=e.message;return{c:function(){(n=_("p")).className="svelte-1uqq9ww"},m:function(t,e){h(t,n,e),n.innerHTML=r},p:function(t,e){t.errors&&r!==(r=e.message)&&(n.innerHTML=r)},d:function(t){t&&v(n)}}}function yt(t,e){var n,r,a=$("account / delete");function o(e){t.set({deleteAccount:!0})}var s=new Z({root:t.root,store:t.store,slots:{default:b()},data:{label:"Delete account",help:""}});return{c:function(){n=_("button"),r=T(a),s._fragment.c(),N(n,"click",o),n.className="btn btn-danger",k(n,"href","#")},m:function(t,e){m(s._slotted.default,n),m(n,r),s._mount(t,e)},p:d,d:function(t){P(n,"click",o),s.destroy(t)}}}function Nt(t,e){var n,r,a,o,s,c,i,u,l,f,p,w,g,b,y,k,E=$("account / confirm-account-deletion"),O=$("account / confirm-account-deletion / no"),S=$("account / or"),H=$("account / confirm-account-deletion / yes");function j(e){t.set({deleteAccount:!1})}function x(e){t.set({deleteAccount:!1,deleteAccount2:!0})}return{c:function(){n=_("h3"),r=_("i"),a=T(" "),o=T(E),s=T("\n        "),c=_("button"),i=_("i"),u=T("   "),l=T(O),f=T("\n\n        "),p=T(S),w=T("\n\n        "),g=_("button"),b=_("i"),y=T("   "),k=T(H),r.className="fa fa-times svelte-1uqq9ww",n.className="svelte-1uqq9ww",i.className="fa fa-chevron-left",N(c,"click",j),c.className="btn btn-back btn-primary",b.className="fa fa-times",N(g,"click",x),g.className="btn btn-default"},m:function(t,e){h(t,n,e),m(n,r),m(n,a),m(n,o),h(t,s,e),h(t,c,e),m(c,i),m(c,u),m(c,l),h(t,f,e),h(t,p,e),h(t,w,e),h(t,g,e),m(g,b),m(g,y),m(g,k)},p:d,d:function(t){t&&(v(n),v(s),v(c)),P(c,"click",j),t&&(v(f),v(p),v(w),v(g)),P(g,"click",x)}}}function Pt(t,e){var n,r,a,o,s,c,i,u,l,d,f,p,w,g,y,E,S,H,j,x,A,R,q,M,L,C,D,I,U,Y,G,J,B,F,W,z,K,Q=$("account / delete / hed"),V=$("account / delete / really"),X=$("account / confirm-account-deletion / free"),tt=$("You cannot login and logout anymore."),et=$("You cannot edit or remove your charts anymore."),nt=$("account / delete / charts-stay-online"),rt=!1,at=!1,ot=$("account / delete / really-really"),st=$("No, I changed my mind.."),ct=$("Yes, delete it!");function it(){rt=!0,t.set({confirmEmail:A.value}),rt=!1}function ut(){at=!0,t.set({confirmPassword:q.value}),at=!1}var lt={label:$("Please enter your password to confirm the deletion request:"),error:!(!e.errors||!e.errors.length)&&e.errors.join(". ")},dt=new Z({root:t.root,store:t.store,slots:{default:b()},data:lt});function ft(e){t.set({deleteAccount2:!1})}function pt(e){t.deleteAccount()}return{c:function(){n=_("h2"),r=T(Q),a=T("\n        "),o=_("div"),s=_("p"),c=T(V),i=T("\n            "),u=_("ul"),l=_("li"),d=T(X),f=T("\n                "),p=_("li"),w=T(tt),g=T("\n                "),y=_("li"),E=T(et),S=T("\n            "),H=_("p"),j=T(nt),x=T("\n\n            "),A=_("input"),R=T("\n                "),q=_("input"),dt._fragment.c(),M=T("\n            "),L=_("p"),C=T("\n            "),D=_("div"),I=_("button"),U=_("i"),Y=T("  "),G=T(st),J=T("\n                "),B=_("button"),F=_("i"),z=T("  "),K=T(ct),O(n,"margin-bottom","20px"),N(A,"input",it),k(A,"type","email"),A.placeholder=$("Email"),N(q,"input",ut),k(q,"type","password"),q.placeholder=$("Password"),L.className="lead",U.className="fa fa-chevron-left",N(I,"click",ft),I.className="btn btn-info",F.className=W="fa "+(e.deletingAccount?"fa-spin fa-spinner":"fa-check")+" svelte-1uqq9ww",N(B,"click",pt),B.className="btn btn-danger",D.className="control-group",o.className="delete-account"},m:function(t,v){h(t,n,v),m(n,r),h(t,a,v),h(t,o,v),m(o,s),m(s,c),m(o,i),m(o,u),m(u,l),m(l,d),m(u,f),m(u,p),m(p,w),m(u,g),m(u,y),m(y,E),m(o,S),m(o,H),m(H,j),m(o,x),m(dt._slotted.default,A),A.value=e.confirmEmail,m(dt._slotted.default,R),m(dt._slotted.default,q),q.value=e.confirmPassword,dt._mount(o,null),m(o,M),m(o,L),L.innerHTML=ot,m(o,C),m(o,D),m(D,I),m(I,U),m(I,Y),m(I,G),m(D,J),m(D,B),m(B,F),m(B,z),m(B,K)},p:function(t,e){!rt&&t.confirmEmail&&(A.value=e.confirmEmail),!at&&t.confirmPassword&&(q.value=e.confirmPassword);var n={};t.errors&&(n.error=!(!e.errors||!e.errors.length)&&e.errors.join(". ")),dt._set(n),t.deletingAccount&&W!==(W="fa "+(e.deletingAccount?"fa-spin fa-spinner":"fa-check")+" svelte-1uqq9ww")&&(F.className=W)},d:function(t){t&&(v(n),v(a),v(o)),P(A,"input",it),P(q,"input",ut),dt.destroy(),P(I,"click",ft),P(B,"click",pt)}}}function kt(t,e){var n,r,a,o,s,c,i,u,l=$("account / delete / hed"),f=$("Your account has been deleted."),p=$("Goodbye!");return{c:function(){n=_("h2"),r=T(l),a=T("\n        "),o=_("h3"),s=T(f),c=T("\n        "),i=_("a"),u=T(p),O(n,"margin-bottom","20px"),i.href="/",i.className="btn btn-primary btn-large"},m:function(t,e){h(t,n,e),m(n,r),h(t,a,e),h(t,o,e),m(o,s),h(t,c,e),h(t,i,e),m(i,u)},p:d,d:function(t){t&&(v(n),v(a),v(o),v(c),v(i))}}}function Et(t){D(this,t),this._state=f({changePassword:!1,changeEmail:!1,deleteAccount:!1,deleteAccount2:!1,deleteAccount3:!1,deletingAccount:!1,showPasswordInPlaintext:!1,messages:[],currentPassword:"",newPassword1:"",newPassword2:"",newPasswordOk:!1,passwordError:!1,passwordRepeatError:!1,passwordHelp:!1,passwordSuccess:!1,confirmEmail:"",confirmPassword:"",email:"",savingEmail:!1,savingPassword:!1,errors:[],groups:[{title:"Account settings",tabs:[{title:"Profile",icon:"fa fa-fw fa-user"}]},{title:"Team settings",tabs:[]}]},t.data),this._intro=!0,this._fragment=function(t,e){var n,r,a,o,s,c,i,u,l,d,f,p,w,g,E,S,H,j=$("Edit profile"),x=!1,A=$("account / change-login"),R=e.messages&&e.messages.length&&pt(t,e),q=e.changeEmail&&e.errors.length&&ht(t,e);function M(){x=!0,t.set({email:u.value}),x=!1}function L(t){return t.changeEmail?wt:vt}var C=L(e),D=C(t,e),I={label:$("E-Mail"),help:e.changeEmail?$("account / confirm-email-change"):""},U=new Z({root:t.root,store:t.store,slots:{default:b()},data:I});function Y(t){return t.changePassword?gt:bt}var G=Y(e),J=G(t,e);function B(t){return t.deleteAccount3?kt:t.deleteAccount2?Pt:t.deleteAccount?Nt:yt}var F=B(e),W=F(t,e);return{c:function(){n=_("h2"),r=T(j),a=T("\n\n"),R&&R.c(),o=T("\n\n"),s=_("div"),c=_("div"),q&&q.c(),i=T("\n        "),u=_("input"),d=T("\n            "),D.c(),f=y(),U._fragment.c(),p=T("\n\n        "),J.c(),w=T(" "),W.c(),g=T("\n    "),E=_("div"),S=_("p"),H=T(A),N(u,"input",M),u.disabled=l=!e.changeEmail,k(u,"type","email"),c.className="span6",S.className="help",E.className="span4",s.className="row edit-account",O(s,"margin-top",(e.messages&&e.messages.length?0:20)+"px")},m:function(t,l){h(t,n,l),m(n,r),h(t,a,l),R&&R.m(t,l),h(t,o,l),h(t,s,l),m(s,c),q&&q.m(c,null),m(c,i),m(U._slotted.default,u),u.value=e.email,m(U._slotted.default,d),D.m(U._slotted.default,null),m(U._slotted.default,f),U._mount(c,null),m(c,p),J.m(c,null),m(c,w),W.m(c,null),m(s,g),m(s,E),m(E,S),m(S,H)},p:function(e,n){n.messages&&n.messages.length?R?R.p(e,n):((R=pt(t,n)).c(),R.m(o.parentNode,o)):R&&(R.d(1),R=null),n.changeEmail&&n.errors.length?q?q.p(e,n):((q=ht(t,n)).c(),q.m(c,i)):q&&(q.d(1),q=null),!x&&e.email&&(u.value=n.email),e.changeEmail&&l!==(l=!n.changeEmail)&&(u.disabled=l),C===(C=L(n))&&D?D.p(e,n):(D.d(1),(D=C(t,n)).c(),D.m(f.parentNode,f));var r={};e.changeEmail&&(r.help=n.changeEmail?$("account / confirm-email-change"):""),U._set(r),G===(G=Y(n))&&J?J.p(e,n):(J.d(1),(J=G(t,n)).c(),J.m(c,w)),F===(F=B(n))&&W?W.p(e,n):(W.d(1),(W=F(t,n)).c(),W.m(c,null)),e.messages&&O(s,"margin-top",(n.messages&&n.messages.length?0:20)+"px")},d:function(t){t&&(v(n),v(a)),R&&R.d(t),t&&(v(o),v(s)),q&&q.d(),P(u,"input",M),D.d(),U.destroy(),J.d(),W.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this))}function Ot(t,e,n,r,a){var o={method:e,body:r,mode:"cors",credentials:n};return window.fetch(t,o).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.text()})).then((function(t){try{return JSON.parse(t)}catch(e){return console.warn("malformed json input",t),t}})).then((function(t){return a&&a(t),t})).catch((function(t){if(!a)throw t;console.error(t)}))}function St(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,r){var a=document.createElement("script");a.src=t,a.onload=function(){e&&e(),n()},a.onerror=r,document.body.appendChild(a)}))}function Ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,r){var a=document.createElement("link");a.rel="stylesheet",a.href=t,a.onload=function(){e&&e(),n()},a.onerror=r,document.head.appendChild(a)}))}f(Et.prototype,Y),f(Et.prototype,lt);var jt={activateTab:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.module)return n&&n.preventDefault(),void Promise.all([Ht(t.css),St(t.js||t.src)]).then((function(){require([t.module],(function(n){t.ui=n.App,t.module=null;var r=e.get().groups;e.set({groups:r,activeTab:t})}))}));t.ui&&(n&&n.preventDefault(),this.set({activeTab:t}))},onTabChange:function(t,e){t.onchange&&t.onchange(e,this.refs.currentTabUi)}};function xt(t){var e=this._svelte,n=e.component,r=e.ctx;n.activateTab(r.tab,t)}function At(t,e,n){var r=Object.create(t);return r.tab=e[n],r}function Rt(t,e,n){var r=Object.create(t);return r.group=e[n],r}function qt(t,e){var n,r,a,o,s,c,i,u=e.tab.title;return{c:function(){n=_("li"),r=_("a"),a=_("i"),s=T("   "),c=T(u),a.className=o=e.tab.icon+" svelte-5we305",r._svelte={component:t,ctx:e},N(r,"click",xt),r.href=i=e.tab.url||"/".concat(e.basePath,"/").concat(e.tab.id),r.className="svelte-5we305",n.className="svelte-5we305",j(n,"active",e.activeTab&&e.activeTab.id===e.tab.id)},m:function(t,e){h(t,n,e),m(n,r),m(r,a),m(r,s),m(r,c)},p:function(t,s){e=s,t.groups&&o!==(o=e.tab.icon+" svelte-5we305")&&(a.className=o),t.groups&&u!==(u=e.tab.title)&&E(c,u),r._svelte.ctx=e,(t.groups||t.basePath)&&i!==(i=e.tab.url||"/".concat(e.basePath,"/").concat(e.tab.id))&&(r.href=i),(t.activeTab||t.groups)&&j(n,"active",e.activeTab&&e.activeTab.id===e.tab.id)},d:function(t){t&&v(n),P(r,"click",xt)}}}function Mt(t,e){for(var n,r,a,o,s=e.group.title,c=e.group.tabs,i=[],u=0;u<c.length;u+=1)i[u]=qt(t,At(e,c,u));return{c:function(){n=_("div"),r=T(s),a=T("\n\n        "),o=_("ul");for(var t=0;t<i.length;t+=1)i[t].c();n.className="group svelte-5we305",o.className="nav nav-stacked nav-tabs"},m:function(t,e){h(t,n,e),m(n,r),h(t,a,e),h(t,o,e);for(var s=0;s<i.length;s+=1)i[s].m(o,null)},p:function(e,n){if(e.groups&&s!==(s=n.group.title)&&E(r,s),e.activeTab||e.groups||e.basePath){c=n.group.tabs;for(var a=0;a<c.length;a+=1){var u=At(n,c,a);i[a]?i[a].p(e,u):(i[a]=qt(t,u),i[a].c(),i[a].m(o,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=c.length}},d:function(t){t&&(v(n),v(a),v(o)),g(i,t)}}}function Lt(t,e){var n,r,a,o,s,c,i=t._slotted.aboveContent,u=t._slotted.belowContent,l=[e.activeTab.data],d=e.activeTab.ui;function p(e){for(var n={},r=0;r<l.length;r+=1)n=f(n,l[r]);return{root:t.root,store:t.store,data:n}}if(d)var g=new d(p());function b(n){t.onTabChange(e.activeTab,n)}return g&&g.on("change",b),{c:function(){n=_("div"),a=T("\n        "),g&&g._fragment.c(),o=T("\n        "),n.className=c="span10 account-page-content tab-"+e.activeTab.id+" svelte-5we305"},m:function(e,c){h(e,n,c),i&&(m(n,i),m(n,r||(r=y()))),m(n,a),g&&(g._mount(n,null),t.refs.currentTabUi=g),m(n,o),u&&(m(n,s||(s=y())),m(n,u))},p:function(r,a){e=a;var s=r.activeTab?function(t,e){for(var n={},r={},a={},o=t.length;o--;){var s=t[o],c=e[o];if(c){for(var i in s)i in c||(r[i]=1);for(var i in c)a[i]||(n[i]=c[i],a[i]=1);t[o]=c}else for(var i in s)a[i]=1}for(var i in r)i in n||(n[i]=void 0);return n}(l,[e.activeTab.data]):{};d!==(d=e.activeTab.ui)?(g&&g.destroy(),d?((g=new d(p()))._fragment.c(),g._mount(n,o),g.on("change",b),t.refs.currentTabUi=g):(g=null,t.refs.currentTabUi===g&&(t.refs.currentTabUi=null))):d&&g._set(s),r.activeTab&&c!==(c="span10 account-page-content tab-"+e.activeTab.id+" svelte-5we305")&&(n.className=c)},d:function(t){t&&v(n),i&&function(t,e){for(var n=t.parentNode;n.firstChild!==t;)e.appendChild(n.firstChild)}(r,i),g&&g.destroy(),u&&w(s,u)}}}function Ct(t){D(this,t),this.refs={},this._state=f({groups:[],basePath:"",activeTab:null},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=function(t,e){for(var n,r,a,o,s,c=t._slotted.belowMenu,i=e.groups,u=[],l=0;l<i.length;l+=1)u[l]=Mt(t,Rt(e,i,l));var d=e.activeTab&&Lt(t,e);return{c:function(){n=_("div"),r=_("div");for(var t=0;t<u.length;t+=1)u[t].c();a=T("\n        "),s=T("\n    "),d&&d.c(),r.className="span2 svelte-5we305",n.className="row"},m:function(t,e){h(t,n,e),m(n,r);for(var i=0;i<u.length;i+=1)u[i].m(r,null);m(r,a),c&&(m(r,o||(o=y())),m(r,c)),m(n,s),d&&d.m(n,null)},p:function(e,o){if(e.groups||e.activeTab||e.basePath){i=o.groups;for(var s=0;s<i.length;s+=1){var c=Rt(o,i,s);u[s]?u[s].p(e,c):(u[s]=Mt(t,c),u[s].c(),u[s].m(r,a))}for(;s<u.length;s+=1)u[s].d(1);u.length=i.length}o.activeTab?d?d.p(e,o):((d=Lt(t,o)).c(),d.m(n,null)):d&&(d.d(1),d=null)},d:function(t){t&&v(n),g(u,t),c&&w(o,c),d&&d.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this))}function Dt(t,e,n){var r=Object.create(t);return r.opt=e[n],r}function It(t,e,n){var r=Object.create(t);return r.optgroup=e[n],r}function Ut(t,e,n){var r=Object.create(t);return r.opt=e[n],r}function Yt(t,e){for(var n,r=e.options,a=[],o=0;o<r.length;o+=1)a[o]=Gt(t,Ut(e,r,o));return{c:function(){for(var t=0;t<a.length;t+=1)a[t].c();n=y()},m:function(t,e){for(var r=0;r<a.length;r+=1)a[r].m(t,e);h(t,n,e)},p:function(e,o){if(e.options){r=o.options;for(var s=0;s<r.length;s+=1){var c=Ut(o,r,s);a[s]?a[s].p(e,c):(a[s]=Gt(t,c),a[s].c(),a[s].m(n.parentNode,n))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}},d:function(t){g(a,t),t&&v(n)}}}function Gt(t,e){var n,r,a,o=e.opt.label;return{c:function(){n=_("option"),r=T(o),n.__value=a=e.opt.value,n.value=n.__value},m:function(t,e){h(t,n,e),m(n,r)},p:function(t,e){t.options&&o!==(o=e.opt.label)&&E(r,o),t.options&&a!==(a=e.opt.value)&&(n.__value=a),n.value=n.__value},d:function(t){t&&v(n)}}}function Jt(t,e){for(var n,r=e.optgroups,a=[],o=0;o<r.length;o+=1)a[o]=Bt(t,It(e,r,o));return{c:function(){for(var t=0;t<a.length;t+=1)a[t].c();n=y()},m:function(t,e){for(var r=0;r<a.length;r+=1)a[r].m(t,e);h(t,n,e)},p:function(e,o){if(e.optgroups){r=o.optgroups;for(var s=0;s<r.length;s+=1){var c=It(o,r,s);a[s]?a[s].p(e,c):(a[s]=Bt(t,c),a[s].c(),a[s].m(n.parentNode,n))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}},d:function(t){g(a,t),t&&v(n)}}}function $t(t,e){var n,r,a,o=e.opt.label;return{c:function(){n=_("option"),r=T(o),n.__value=a=e.opt.value,n.value=n.__value},m:function(t,e){h(t,n,e),m(n,r)},p:function(t,e){t.optgroups&&o!==(o=e.opt.label)&&E(r,o),t.optgroups&&a!==(a=e.opt.value)&&(n.__value=a),n.value=n.__value},d:function(t){t&&v(n)}}}function Bt(t,e){for(var n,r,a=e.optgroup.options,o=[],s=0;s<a.length;s+=1)o[s]=$t(0,Dt(e,a,s));return{c:function(){n=_("optgroup");for(var t=0;t<o.length;t+=1)o[t].c();k(n,"label",r=e.optgroup.label)},m:function(t,e){h(t,n,e);for(var r=0;r<o.length;r+=1)o[r].m(n,null)},p:function(t,e){if(t.optgroups){a=e.optgroup.options;for(var s=0;s<a.length;s+=1){var c=Dt(e,a,s);o[s]?o[s].p(t,c):(o[s]=$t(0,c),o[s].c(),o[s].m(n,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=a.length}t.optgroups&&r!==(r=e.optgroup.label)&&k(n,"label",r)},d:function(t){t&&v(n),g(o,t)}}}function Ft(t){D(this,t),this._state=f({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),this._intro=!0,this._fragment=function(t,e){var n,r,a=!1,o=e.options.length&&Yt(t,e),s=e.optgroups.length&&Jt(t,e);function c(){a=!0,t.set({value:H(n)}),a=!1}return{c:function(){n=_("select"),o&&o.c(),r=y(),s&&s.c(),N(n,"change",c),"value"in e||t.root._beforecreate.push(c),n.className="select-css svelte-v0oq4b",n.disabled=e.disabled,O(n,"width",e.width)},m:function(t,a){h(t,n,a),o&&o.m(n,null),m(n,r),s&&s.m(n,null),S(n,e.value)},p:function(e,c){c.options.length?o?o.p(e,c):((o=Yt(t,c)).c(),o.m(n,r)):o&&(o.d(1),o=null),c.optgroups.length?s?s.p(e,c):((s=Jt(t,c)).c(),s.m(n,null)):s&&(s.d(1),s=null),!a&&e.value&&S(n,c.value),e.disabled&&(n.disabled=c.disabled),e.width&&O(n,"width",c.width)},d:function(t){t&&v(n),o&&o.d(),s&&s.d(),P(n,"change",c)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this))}f(Ct.prototype,Y),f(Ct.prototype,jt),f(Ft.prototype,Y);var Wt=null;var zt={createTeam:function(t,e){var n,r,a,o={name:t};this.get().user.isAdmin&&e&&(o.id=String(e).trim().toLowerCase()),this.set({awaitCreateTeam:(n="".concat(window.location.protocol,"//").concat(dw.backend.__api_domain,"/v3/teams"),r=JSON.stringify(o),Ot(n,"POST","include",r,a)).then((function(t){window.location.href="/team/".concat(t.id,"/settings")}))})},leaveTeam:function(t){var e,n,r=this,a=this.get(),o=a.user,s=a.teams;window.confirm($("account / my-teams / leave-team / confirm").replace("%team%",t.name))&&(e="".concat(window.location.protocol,"//").concat(dw.backend.__api_domain,"/v3/teams/").concat(t.id,"/members/").concat(o.id),Ot(e,"DELETE","include",null,n)).then((function(e){window.alert($("account / my-teams / leave-team / done")),s.splice(s.findIndex((function(e){return e.id===t.id})),1),r.set({teams:s})})).catch((function(t){window.alert("There was a problem with your request. Please contact support@datawrapper.de"),console.error(t)}))}};function Kt(t){var e,n,r,a=t.changed,o=t.current;a.currentTeam&&void 0!==o.currentTeam&&(Wt?o.currentTeam!==Wt&&(Wt=o.currentTeam,this.set({awaitActiveTeam:(e="".concat(window.location.protocol,"//").concat(dw.backend.__api_domain,"/v3/me/settings"),n=JSON.stringify({activeTeam:o.currentTeam||null}),Ot(e,"PATCH","include",n,r))})):Wt=o.currentTeam)}function Qt(t){var e=this._svelte,n=e.component,r=e.ctx;n.leaveTeam(r.team)}function Vt(t,e,n){var r=Object.create(t);return r.team=e[n],r}function Xt(t,e){var n,r=$("account / my-teams / no-teams-yet");return{c:function(){n=_("p")},m:function(t,e){h(t,n,e),n.innerHTML=r},p:d,d:function(t){t&&v(n)}}}function Zt(t,e){for(var n,r,a,o,s,c,i,u,l,d,f,p,w,b,y,N,P,k,E,O,S,H,j=$("account / my-teams / your-teams"),x=$("account / my-teams / name"),A=$("account / my-teams / your-role"),R=$("account / my-teams / num-charts"),q=$("account / my-teams / num-members"),M=$("account / my-teams / leave-team"),L=e.user.isAdmin&&te(),C=e.teams,D=[],I=0;I<C.length;I+=1)D[I]=le(t,Vt(e,C,I));return{c:function(){n=_("p"),r=T("\n\n"),a=_("table"),o=_("thead"),s=_("tr"),c=_("th"),i=T(x),u=T("\n            "),L&&L.c(),l=T("\n            "),d=_("th"),f=T(A),p=T("\n            "),w=_("th"),b=T(R),y=T("\n            "),N=_("th"),P=T(q),k=T("\n            "),E=_("th"),O=T(M),S=T("\n    "),H=_("tbody");for(var t=0;t<D.length;t+=1)D[t].c();a.className="table"},m:function(t,e){h(t,n,e),n.innerHTML=j,h(t,r,e),h(t,a,e),m(a,o),m(o,s),m(s,c),m(c,i),m(s,u),L&&L.m(s,null),m(s,l),m(s,d),m(d,f),m(s,p),m(s,w),m(w,b),m(s,y),m(s,N),m(N,P),m(s,k),m(s,E),m(E,O),m(a,S),m(a,H);for(var v=0;v<D.length;v+=1)D[v].m(H,null)},p:function(e,n){if(n.user.isAdmin?L||((L=te()).c(),L.m(s,l)):L&&(L.d(1),L=null),e.teams||e.currentTeam||e.user){C=n.teams;for(var r=0;r<C.length;r+=1){var a=Vt(n,C,r);D[r]?D[r].p(e,a):(D[r]=le(t,a),D[r].c(),D[r].m(H,null))}for(;r<D.length;r+=1)D[r].d(1);D.length=C.length}},d:function(t){t&&(v(n),v(r),v(a)),L&&L.d(),g(D,t)}}}function te(t,e){var n,r,a=$("account / my-teams / id");return{c:function(){n=_("th"),r=T(a)},m:function(t,e){h(t,n,e),m(n,r)},d:function(t){t&&v(n)}}}function ee(t,e){var n,r,a,o=B(e.team.name,20,10);return{c:function(){n=_("a"),r=T(o),n.href=a="/team/"+e.team.id+"/settings"},m:function(t,e){h(t,n,e),m(n,r)},p:function(t,e){t.teams&&o!==(o=B(e.team.name,20,10))&&E(r,o),t.teams&&a!==(a="/team/"+e.team.id+"/settings")&&(n.href=a)},d:function(t){t&&v(n)}}}function ne(t,e){var n,r=B(e.team.name,20,10);return{c:function(){n=T(r)},m:function(t,e){h(t,n,e)},p:function(t,e){t.teams&&r!==(r=B(e.team.name,20,10))&&E(n,r)},d:function(t){t&&v(n)}}}function re(t,e){var n;return{c:function(){(n=_("i")).className="fa fa-check-circle"},m:function(t,e){h(t,n,e)},d:function(t){t&&v(n)}}}function ae(t,e){var n,r,a=e.team.id;return{c:function(){n=_("td"),r=T(a),n.className="slug svelte-t3x94h"},m:function(t,e){h(t,n,e),m(n,r)},p:function(t,e){t.teams&&a!==(a=e.team.id)&&E(r,a)},d:function(t){t&&v(n)}}}function oe(t,e){var n,r,a,o,s,c=e.team.members,i=e.team.invites&&ce(t,e);return{c:function(){n=_("a"),r=T(c),o=T(" "),i&&i.c(),s=y(),n.href=a="/team/"+e.team.id+"/members"},m:function(t,e){h(t,n,e),m(n,r),h(t,o,e),i&&i.m(t,e),h(t,s,e)},p:function(e,o){e.teams&&c!==(c=o.team.members)&&E(r,c),e.teams&&a!==(a="/team/"+o.team.id+"/members")&&(n.href=a),o.team.invites?i?i.p(e,o):((i=ce(t,o)).c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d:function(t){t&&(v(n),v(o)),i&&i.d(t),t&&v(s)}}}function se(t,e){var n,r=e.team.members;return{c:function(){n=T(r)},m:function(t,e){h(t,n,e)},p:function(t,e){t.teams&&r!==(r=e.team.members)&&E(n,r)},d:function(t){t&&v(n)}}}function ce(t,e){var n,r,a,o,s=e.team.invites;return{c:function(){n=_("span"),r=T("(+"),a=T(s),o=T(")"),n.className="invites svelte-t3x94h"},m:function(t,e){h(t,n,e),m(n,r),m(n,a),m(n,o)},p:function(t,e){t.teams&&s!==(s=e.team.invites)&&E(a,s)},d:function(t){t&&v(n)}}}function ie(t,e){var n,r,a,o,s,c=$("account / my-teams / delete-team");return{c:function(){n=_("a"),r=_("i"),a=T(" "),o=T(c),r.className="fa fa-trash",n.href=s="/team/"+e.team.id+"/delete",n.className="btn btn-small btn-danger"},m:function(t,e){h(t,n,e),m(n,r),m(n,a),m(n,o)},p:function(t,e){t.teams&&s!==(s="/team/"+e.team.id+"/delete")&&(n.href=s)},d:function(t){t&&v(n)}}}function ue(t,e){var n,r,a,o,s=$("account / my-teams / leave-team");return{c:function(){n=_("button"),r=_("i"),a=T(" "),o=T(s),r.className="fa fa-sign-out",n._svelte={component:t,ctx:e},N(n,"click",Qt),n.className="btn btn-small"},m:function(t,e){h(t,n,e),m(n,r),m(n,a),m(n,o)},p:function(t,r){e=r,n._svelte.ctx=e},d:function(t){t&&v(n),P(n,"click",Qt)}}}function le(t,e){var n,r,a,o,s,c,i,u,l,d,f,p,w,g,b,y=$("teams / role / "+e.team.role),N=e.team.charts;function P(t){return"member"!==t.team.role||t.user.isAdmin?ee:ne}var k=P(e),O=k(t,e),S=e.team.id===e.currentTeam&&re(),H=e.user.isAdmin&&ae(0,e);function x(t){return"member"===t.team.role?se:oe}var A=x(e),R=A(t,e);function q(t){return"owner"!==t.team.role?ue:ie}var M=q(e),L=M(t,e);return{c:function(){n=_("tr"),r=_("td"),O.c(),a=T(" "),S&&S.c(),o=T("\n            "),H&&H.c(),s=T("\n            "),c=_("td"),i=T("\n            "),u=_("td"),l=_("a"),d=T(N),p=T("\n            "),w=_("td"),R.c(),g=T("\n\n            "),b=_("td"),L.c(),l.href=f="/team/"+e.team.id,j(n,"current",e.team.id===e.currentTeam)},m:function(t,e){h(t,n,e),m(n,r),O.m(r,null),m(r,a),S&&S.m(r,null),m(n,o),H&&H.m(n,null),m(n,s),m(n,c),c.innerHTML=y,m(n,i),m(n,u),m(u,l),m(l,d),m(n,p),m(n,w),R.m(w,null),m(n,g),m(n,b),L.m(b,null)},p:function(e,o){k===(k=P(o))&&O?O.p(e,o):(O.d(1),(O=k(t,o)).c(),O.m(r,a)),o.team.id===o.currentTeam?S||((S=re()).c(),S.m(r,null)):S&&(S.d(1),S=null),o.user.isAdmin?H?H.p(e,o):((H=ae(0,o)).c(),H.m(n,s)):H&&(H.d(1),H=null),e.teams&&y!==(y=$("teams / role / "+o.team.role))&&(c.innerHTML=y),e.teams&&N!==(N=o.team.charts)&&E(d,N),e.teams&&f!==(f="/team/"+o.team.id)&&(l.href=f),A===(A=x(o))&&R?R.p(e,o):(R.d(1),(R=A(t,o)).c(),R.m(w,null)),M===(M=q(o))&&L?L.p(e,o):(L.d(1),(L=M(t,o)).c(),L.m(b,null)),(e.teams||e.currentTeam)&&j(n,"current",o.team.id===o.currentTeam)},d:function(t){t&&v(n),O.d(),S&&S.d(),H&&H.d(),R.d(),L.d()}}}function de(t,e){var n,r,a,o,s,c,i,u,l,d,f,p,w,g=$("team-create / p"),y=!1,E=$("team-create / button"),O=$("team-create / return");function S(){y=!0,t.set({newTeamName:a.value}),y=!1}var H={label:$("team-create / name"),help:$("team-create / help")},j=new Z({root:t.root,store:t.store,slots:{default:b()},data:H}),x=e.user.isAdmin&&pe(t,e);function A(t){return t.awaitCreateTeam?he:me}var R=A(e),q=R(t,e);function M(n){t.createTeam(e.newTeamName,e.newTeamSlug)}function L(e){t.set({createTeam:!1})}return{c:function(){n=_("p"),r=T("\n\n        "),a=_("input"),j._fragment.c(),s=T("\n        "),x&&x.c(),c=T("\n\n        "),i=_("button"),q.c(),u=T("   "),l=T(E),f=T("\n        "),p=_("button"),w=T(O),N(a,"input",S),k(a,"type","text"),a.placeholder=$("team-create / untitled"),a.maxLength=o=e.user.isAdmin?80:50,N(i,"click",M),i.className="btn btn-primary",i.disabled=d=!e.newTeamName.length,N(p,"click",L),p.className="btn"},m:function(t,o){h(t,n,o),n.innerHTML=g,h(t,r,o),m(j._slotted.default,a),a.value=e.newTeamName,j._mount(t,o),h(t,s,o),x&&x.m(t,o),h(t,c,o),h(t,i,o),q.m(i,null),m(i,u),m(i,l),h(t,f,o),h(t,p,o),m(p,w)},p:function(n,r){e=r,!y&&n.newTeamName&&(a.value=e.newTeamName),n.user&&o!==(o=e.user.isAdmin?80:50)&&(a.maxLength=o),e.user.isAdmin?x?x.p(n,e):((x=pe(t,e)).c(),x.m(c.parentNode,c)):x&&(x.d(1),x=null),R===(R=A(e))&&q?q.p(n,e):(q.d(1),(q=R(t,e)).c(),q.m(i,u)),n.newTeamName&&d!==(d=!e.newTeamName.length)&&(i.disabled=d)},d:function(t){t&&(v(n),v(r)),P(a,"input",S),j.destroy(t),t&&v(s),x&&x.d(t),t&&(v(c),v(i)),q.d(),P(i,"click",M),t&&(v(f),v(p)),P(p,"click",L)}}}function fe(t,e){var n,r,a,o,s,c,i,u=$("account / my-teams / why-teams"),l=$("account / my-teams / create-btn");function d(e){t.set({createTeam:!0})}return{c:function(){n=_("div"),r=_("p"),a=T("\n            "),o=_("button"),s=_("i"),c=T(" "),i=_("noscript"),s.className="fa fa-plus fa-fw",N(o,"click",d),o.className="btn btn-large",j(o,"btn-primary",!e.teams.length),n.className="hed svelte-t3x94h"},m:function(t,e){h(t,n,e),m(n,r),r.innerHTML=u,m(n,a),m(n,o),m(o,s),m(o,c),m(o,i),i.insertAdjacentHTML("afterend",l)},p:function(t,e){t.teams&&j(o,"btn-primary",!e.teams.length)},d:function(t){t&&v(n),P(o,"click",d)}}}function pe(t,e){var n,r=!1;function a(){r=!0,t.set({newTeamSlug:n.value}),r=!1}var o={label:$("team-create / slug"),help:$("team-create / slug-help")},s=new Z({root:t.root,store:t.store,slots:{default:b()},data:o});return{c:function(){n=_("input"),s._fragment.c(),N(n,"input",a),k(n,"type","text"),n.placeholder=e.autoslug},m:function(t,r){m(s._slotted.default,n),n.value=e.newTeamSlug,s._mount(t,r)},p:function(t,e){!r&&t.newTeamSlug&&(n.value=e.newTeamSlug),t.autoslug&&(n.placeholder=e.autoslug)},d:function(t){P(n,"input",a),s.destroy(t)}}}function me(t,e){var n;return{c:function(){(n=_("i")).className="fa fa-plus fa-fw"},m:function(t,e){h(t,n,e)},p:d,d:function(t){t&&v(n)}}}function he(t,e){var n,r,a={component:t,ctx:e,current:null,pending:ge,then:we,catch:ve,value:"null",error:"null"};return x(r=e.awaitCreateTeam,a),{c:function(){n=y(),a.block.c()},m:function(t,e){h(t,n,e),a.block.m(t,a.anchor=e),a.mount=function(){return n.parentNode},a.anchor=n},p:function(t,n){e=n,a.ctx=e,"awaitCreateTeam"in t&&r!==(r=e.awaitCreateTeam)&&x(r,a)},d:function(t){t&&v(n),a.block.d(t),a=null}}}function ve(t,e){var n;return{c:function(){(n=_("i")).className="fa fa-exclamation-triangle"},m:function(t,e){h(t,n,e)},d:function(t){t&&v(n)}}}function we(t,e){var n;return{c:function(){(n=_("i")).className="fa fa-check fa-fw"},m:function(t,e){h(t,n,e)},d:function(t){t&&v(n)}}}function ge(t,e){var n,r;return{c:function(){n=T(" "),(r=_("i")).className="fa fa-spinner fa-spin"},m:function(t,e){h(t,n,e),h(t,r,e)},d:function(t){t&&(v(n),v(r))}}}function be(t,e){var n,r,a,o,s,c,i,u=$("account / my-teams / select-active"),l=$("account / my-teams / what-is-active"),d={},f={width:"250px",options:e.teamOptions};void 0!==e.currentTeam&&(f.value=e.currentTeam,d.value=!0);var p=new Ft({root:t.root,store:t.store,data:f,_bind:function(e,n){var r={};!d.value&&e.value&&(r.currentTeam=n.value),t._set(r),d={}}});t.root._beforecreate.push((function(){p._bind({value:1},p.get())}));var w=e.awaitActiveTeam&&_e(t,e),g={width:"350px",help:$("account / my-teams / active-hint")},y=new Z({root:t.root,store:t.store,slots:{default:b()},data:g});return{c:function(){n=_("div"),r=_("h3"),a=T("\n        "),o=_("p"),s=T("\n        "),c=_("div"),p._fragment.c(),i=T("\n                "),w&&w.c(),y._fragment.c(),r.className="svelte-t3x94h",c.className="flex",n.className="span5"},m:function(t,e){h(t,n,e),m(n,r),r.innerHTML=u,m(n,a),m(n,o),o.innerHTML=l,m(n,s),m(y._slotted.default,c),p._mount(c,null),m(c,i),w&&w.m(c,null),y._mount(n,null)},p:function(n,r){e=r;var a={};n.teamOptions&&(a.options=e.teamOptions),!d.value&&n.currentTeam&&(a.value=e.currentTeam,d.value=void 0!==e.currentTeam),p._set(a),d={},e.awaitActiveTeam?w?w.p(n,e):((w=_e(t,e)).c(),w.m(c,null)):w&&(w.d(1),w=null)},d:function(t){t&&v(n),p.destroy(),w&&w.d(),y.destroy()}}}function _e(t,e){var n,r,a={component:t,ctx:e,current:null,pending:Ne,then:ye,catch:Te,value:"null",error:"null"};return x(r=e.awaitActiveTeam,a),{c:function(){n=y(),a.block.c()},m:function(t,e){h(t,n,e),a.block.m(t,a.anchor=e),a.mount=function(){return n.parentNode},a.anchor=n},p:function(t,n){e=n,a.ctx=e,"awaitActiveTeam"in t&&r!==(r=e.awaitActiveTeam)&&x(r,a)},d:function(t){t&&v(n),a.block.d(t),a=null}}}function Te(t,e){var n;return{c:function(){(n=_("i")).className="fa fa-exclamation-triangle"},m:function(t,e){h(t,n,e)},d:function(t){t&&v(n)}}}function ye(t,e){var n;return{c:function(){(n=_("i")).className="fa fa-check fa-fw"},m:function(t,e){h(t,n,e)},d:function(t){t&&v(n)}}}function Ne(t,e){var n,r;return{c:function(){n=T(" "),(r=_("i")).className="fa fa-spinner fa-spin"},m:function(t,e){h(t,n,e),h(t,r,e)},d:function(t){t&&(v(n),v(r))}}}function Pe(t){var e=this;D(this,t),this._state=f({teams:[],awaitActiveTeam:null,awaitCreateTeam:null,currentTeam:"",createTeam:!1,newTeamName:"",newTeamSlug:""},t.data),this._recompute({teams:1,newTeamName:1},this._state),this._intro=!0,this._handlers.state=[Kt],Kt.call(this,{changed:p({},this._state),current:this._state}),this._fragment=function(t,e){var n,r,a,o,s,c,i,u,l=$("account / my-teams"),d=$("account / my-teams / create");function f(t){return t.teams.length?Zt:Xt}var p=f(e),w=p(t,e);function g(t){return t.createTeam?de:fe}var b=g(e),y=b(t,e),N=e.teams.length>0&&be(t,e);return{c:function(){n=_("h2"),r=T("\n\n"),w.c(),a=T("\n\n"),o=_("div"),s=_("div"),c=_("h3"),i=T("\n        "),y.c(),u=T("\n    "),N&&N.c(),c.className="svelte-t3x94h",s.className="span5",o.className="row"},m:function(t,e){h(t,n,e),n.innerHTML=l,h(t,r,e),w.m(t,e),h(t,a,e),h(t,o,e),m(o,s),m(s,c),c.innerHTML=d,m(s,i),y.m(s,null),m(o,u),N&&N.m(o,null)},p:function(e,n){p===(p=f(n))&&w?w.p(e,n):(w.d(1),(w=p(t,n)).c(),w.m(a.parentNode,a)),b===(b=g(n))&&y?y.p(e,n):(y.d(1),(y=b(t,n)).c(),y.m(s,null)),n.teams.length>0?N?N.p(e,n):((N=be(t,n)).c(),N.m(o,null)):N&&(N.d(1),N=null)},d:function(t){t&&(v(n),v(r)),w.d(t),t&&(v(a),v(o)),y.d(),N&&N.d()}}}(this,this._state),this.root._oncreate.push((function(){e.fire("update",{changed:p({},e._state),current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this))}f(Pe.prototype,Y),f(Pe.prototype,zt),Pe.prototype._recompute=function(t,e){t.teams&&this._differs(e.teamOptions,e.teamOptions=e.teams.map((function(t){return{value:t.id,label:t.name}})).concat({value:null,label:$("nav / no-team")}))&&(t.teamOptions=!0),t.newTeamName&&this._differs(e.autoslug,e.autoslug=e.newTeamName.toLowerCase().replace(/\W/g,""))&&(t.autoslug=!0)};var ke={title:$("account / profile"),id:"profile",icon:"im im-user-settings",ui:Et,data:{}},Ee={title:$("account / my-teams"),id:"teams",icon:"im im-users",ui:Pe,data:{}},Oe=!1;var Se={setTab:function(t){var e=this,n=this.get().groups,r=!1;n.forEach((function(n){n.tabs.forEach((function(n){n.id===t&&(e.refs.navTabs.activateTab(n),r=!0)}))})),r||this.set({activeTab:ke})}};function He(){var t=this,e=window.location.pathname.split("/").slice(1)[1]||"profile";dw.backend.__svelteApps.account=this;var n=this.get(),r=n.email,a=n.user,o=n.userId,s=n.groups,c=n.teams,i=n.adminTeams,u=n.pages,l=n.currentTeam;u.length&&(s[0].tabs.push.apply(s[0].tabs,u),this.set({groups:s})),s[0].tabs.splice(1,0,Ee),this.set({groups:s}),i.length&&(s.push({title:$("account / settings / team"),tabs:[]}),i.forEach((function(t){var e=t.Id,n=t.Name;s[1].tabs.push({title:B(n,10,4),url:"/team/".concat(e,"/settings"),icon:"im im-users"})})),this.set({groups:s})),ke.data={email:r,userId:o,user:a},Ee.data={teams:c,currentTeam:l,user:a},this.setTab(e),window.addEventListener("popstate",(function(e){var n=e.state;Oe=!0,setTimeout((function(){return Oe=!1}),100),t.setTab(n.id)}))}function je(t){var e=t.changed,n=t.current;t.previous;e.activeTab&&n.activeTab&&!Oe&&window.history.pushState({id:n.activeTab.id},"","/account/".concat(n.activeTab.id))}function xe(t,e,n){var r=Object.create(t);return r.team=e[n],r}function Ae(t,e){var n,r,a,o,s,c,i,u,l,d,f,p,w,g=$("account / team-invite").replace("%s",B(e.team.name,20,10)),b=$("account / team-invite / accept"),y=$("account / or"),N=$("account / team-invite / reject");return{c:function(){n=_("div"),r=_("noscript"),a=T("\n        \n        "),o=_("a"),s=T(b),i=T("\n        \n          "),u=T(y),l=T("\n        "),d=_("a"),f=T(N),w=T("."),o.href=c="/team/"+e.team.id+"/invite/"+e.team.token+"/accept",o.className="btn btn-primary svelte-dmpd5k",d.href=p="/team/"+e.team.id+"/invite/"+e.team.token+"/reject",d.className="svelte-dmpd5k",n.className="alert alert-info svelte-dmpd5k"},m:function(t,e){h(t,n,e),m(n,r),r.insertAdjacentHTML("beforebegin",g),m(n,a),m(n,o),m(o,s),m(n,i),m(n,u),m(n,l),m(n,d),m(d,f),m(n,w)},p:function(t,e){t.invitations&&g!==(g=$("account / team-invite").replace("%s",B(e.team.name,20,10)))&&(!function(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)}(r),r.insertAdjacentHTML("beforebegin",g)),t.invitations&&c!==(c="/team/"+e.team.id+"/invite/"+e.team.token+"/accept")&&(o.href=c),t.invitations&&p!==(p="/team/"+e.team.id+"/invite/"+e.team.token+"/reject")&&(d.href=p)},d:function(t){t&&v(n)}}}function Re(t){var e=this;D(this,t),this.refs={},this._state=f({hash:"profile",activeTab:null,activeData:{},groups:[{title:$("account / settings / personal"),tabs:[ke]}]},t.data),this._recompute({email:1,user:1,userId:1,teams:1,currentTeam:1,activeTab:1},this._state),this._intro=!0,this._handlers.state=[je],je.call(this,{changed:p({},this._state),current:this._state}),this._fragment=function(t,e){var n,r,a,o,s,c,i,u=$("account / settings"),l={};document.title=n=e.pageTitle+" | "+$("account / settings")+" | Datawrapper";for(var d=e.invitations,f=[],p=0;p<d.length;p+=1)f[p]=Ae(t,xe(e,d,p));var w={basePath:"account",groups:e.groups};void 0!==e.activeTab&&(w.activeTab=e.activeTab,l.activeTab=!0);var b=new Ct({root:t.root,store:t.store,data:w,_bind:function(e,n){var r={};!l.activeTab&&e.activeTab&&(r.activeTab=n.activeTab),t._set(r),l={}}});return t.root._beforecreate.push((function(){b._bind({activeTab:1},b.get())})),t.refs.navTabs=b,{c:function(){r=T("\n\n"),a=_("div"),o=_("h1"),s=T(u),c=T("\n    ");for(var t=0;t<f.length;t+=1)f[t].c();i=T("\n    "),b._fragment.c(),o.className="title",a.className="admin svelte-dmpd5k"},m:function(t,e){h(t,r,e),h(t,a,e),m(a,o),m(o,s),m(a,c);for(var n=0;n<f.length;n+=1)f[n].m(a,null);m(a,i),b._mount(a,null)},p:function(r,o){if(e=o,r.pageTitle&&n!==(n=e.pageTitle+" | "+$("account / settings")+" | Datawrapper")&&(document.title=n),r.invitations){d=e.invitations;for(var s=0;s<d.length;s+=1){var c=xe(e,d,s);f[s]?f[s].p(r,c):(f[s]=Ae(t,c),f[s].c(),f[s].m(a,i))}for(;s<f.length;s+=1)f[s].d(1);f.length=d.length}var u={};r.groups&&(u.groups=e.groups),!l.activeTab&&r.activeTab&&(u.activeTab=e.activeTab,l.activeTab=void 0!==e.activeTab),b._set(u),l={}},d:function(e){e&&(v(r),v(a)),g(f,e),b.destroy(),t.refs.navTabs===b&&(t.refs.navTabs=null)}}}(this,this._state),this.root._oncreate.push((function(){He.call(e),e.fire("update",{changed:p({},e._state),current:e._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),L(this))}function qe(t,e){this._handlers={},this._dependents=[],this._computed=A(),this._sortedComputedProperties=[],this._state=f({},t),this._differs=e&&e.immutable?q:R}f(Re.prototype,Y),f(Re.prototype,Se),Re.prototype._recompute=function(t,e){var n,r,a;(t.email||t.user||t.userId||t.teams||t.currentTeam)&&this._differs(e.data,e.data=(r=(n=e).email,{user:n.user,email:r,userId:n.userId,teams:n.teams,currentTeam:n.currentTeam}))&&(t.data=!0),t.activeTab&&this._differs(e.pageTitle,e.pageTitle=(a=e.activeTab)?a.title:"")&&(t.pageTitle=!0)},f(qe.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n];e["$"+r]=this._state[r]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_set:function(t,e){var n=this,r=this._state;this._state=f(f({},r),t);for(var a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,e);this.fire("state",{changed:e,previous:r,current:this._state}),this._dependents.filter((function(t){for(var r={},a=!1,o=0;o<t.props.length;o+=1){var s=t.props[o];s in e&&(r["$"+s]=n._state[s],a=!0)}if(a)return t.component._stage(r),!0})).forEach((function(t){t.component.set({})})),this.fire("update",{changed:e,previous:r,current:this._state})},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],r=A();function a(o){var s=e[o];s&&(s.deps.forEach((function(e){if(e===t)throw new Error("Cyclical dependency detected between ".concat(e," <-> ").concat(o));a(e)})),r[o]||(r[o]=!0,n.push(s)))}for(var o in this._computed)a(t=o)},compute:function(t,e,n){var r,a=this,o={deps:e,update:function(o,s,c){var i=e.map((function(t){return t in s&&(c=!0),o[t]}));if(c){var u=n.apply(null,i);a._differs(u,r)&&(r=u,s[t]=!0,o[t]=r)}}};this._computed[t]=o,this._sortComputedProperties();var s=f({},this._state),c={};o.update(s,c,!0),this._set(s,c)},fire:M,get:C,on:I,set:function(t){var e=this._state,n=this._changed={},r=!1;for(var a in t){if(this._computed[a])throw new Error("'".concat(a,"' is a read-only computed property"));this._differs(t[a],e[a])&&(n[a]=r=!0)}r&&this._set(t,n)}});return{App:Re,data:{chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0},store:new qe({})}}));
