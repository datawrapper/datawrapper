!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("svelte/account",e):(t=t||self).account=e()}(this,(function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){for(var n in e)t[n]=1;return t}function a(t){t()}function r(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n)}function o(t){t.parentNode.removeChild(t)}function s(t,e){for(;t.nextSibling;)e.appendChild(t.nextSibling)}function c(t,e){for(var n=t.parentNode;n.firstChild!==t;)e.appendChild(n.firstChild)}function u(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function l(){return document.createDocumentFragment()}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function m(){return document.createComment("")}function h(t,e,n,a){t.addEventListener(e,n,a)}function p(t,e,n,a){t.removeEventListener(e,n,a)}function v(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function g(t,e){t.data=""+e}function b(t,e,n){t.style.setProperty(e,n)}function _(t,e){for(var n=0;n<t.options.length;n+=1){var a=t.options[n];if(a.__value===e)return void(a.selected=!0)}}function w(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function T(t,e,n){t.classList[n?"add":"remove"](e)}function y(t){return t}function N(e,n,r,i,o){var s,c,u,l=r.call(e,n,i),d=!1;return{t:o?0:1,running:!1,program:null,pending:null,run:function(t,e){var n=this;"function"==typeof l?x.wait().then((function(){l=l(),n._run(t,e)})):this._run(t,e)},_run:function(e,a){s=l.duration||300,c=l.easing||y;var r={start:window.performance.now()+(l.delay||0),b:e,callback:a||t};o&&!d&&(l.css&&l.delay&&(u=n.style.cssText,n.style.cssText+=l.css(0,1)),l.tick&&l.tick(0,1),d=!0),e||(r.group=k.current,k.current.remaining+=1),l.delay?this.pending=r:this.start(r),this.running||(this.running=!0,x.add(this))},start:function(t){if(e.fire((t.b?"intro":"outro")+".start",{node:n}),t.a=this.t,t.delta=t.b-t.a,t.duration=s*Math.abs(t.b-t.a),t.end=t.start+t.duration,l.css){l.delay&&(n.style.cssText=u);var a=function(t,e,n){for(var a=t.a,r=t.b,i=t.delta,o=16.666/t.duration,s="{\n",c=0;c<=1;c+=o){var u=a+i*e(c);s+=100*c+"%{"+n(u,1-u)+"}\n"}return s+"100% {"+n(r,1-r)+"}\n}"}(t,c,l.css);x.addRule(a,t.name="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)),n.style.animation=(n.style.animation||"").split(", ").filter((function(e){return e&&(t.delta<0||!/__svelte/.test(e))})).concat(t.name+" "+t.duration+"ms linear 1 forwards").join(", ")}this.program=t,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*c(n/e.duration),l.tick&&l.tick(this.t,1-this.t)}},done:function(){var t=this.program;this.t=t.b,l.tick&&l.tick(this.t,1-this.t),e.fire((t.b?"intro":"outro")+".end",{node:n}),t.b||t.invalidated?l.css&&x.deleteRule(n,t.name):(t.group.callbacks.push((function(){t.callback(),l.css&&x.deleteRule(n,t.name)})),0==--t.group.remaining&&t.group.callbacks.forEach(a)),this.running=!!this.pending},abort:function(t){this.program&&(t&&l.tick&&l.tick(1,0),l.css&&x.deleteRule(n,this.program.name),this.program=this.pending=null,this.running=!1)},invalidate:function(){this.program&&(this.program.invalidated=!0)}}}var k={};function P(){k.current={remaining:0,callbacks:[]}}var x={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},promise:null,add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){if(!this.stylesheet){var n=d("style");document.head.appendChild(n),x.stylesheet=n.sheet}this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes "+e+" "+t,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(var a=this.stylesheet.cssRules.length;a--;)this.stylesheet.deleteRule(a);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter((function(t){return t&&-1===t.indexOf(e)})).join(", ")},wait:function(){return x.promise||(x.promise=Promise.resolve(),x.promise.then((function(){x.promise=null}))),x.promise}};function E(t,n){var a,r,i=n.token={};function o(t,a,r,o){var s;if(n.token===i){n.resolved=r&&((s={})[r]=o,s);var c=e(e({},n.ctx),n.resolved),u=t&&(n.current=t)(n.component,c);n.block&&(n.blocks?n.blocks.forEach((function(t,e){e!==a&&t&&(P(),t.o((function(){t.d(1),n.blocks[e]=null})))})):n.block.d(1),u.c(),u[u.i?"i":"m"](n.mount(),n.anchor),n.component.root.set({})),n.block=u,n.blocks&&(n.blocks[a]=u)}}if((r=t)&&"function"==typeof r.then){if(t.then((function(t){o(n.then,1,n.value,t)}),(function(t){o(n.catch,2,n.error,t)})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=((a={})[n.value]=t,a)}}function A(){return Object.create(null)}function C(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function L(t,e){return t!=t?e==e:t!==e}function H(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var a=0;a<n.length;a+=1){var r=n[a];if(!r.__calling)try{r.__calling=!0,r.call(this,e)}finally{r.__calling=!1}}}function M(t){t._lock=!0,j(t._beforecreate),j(t._oncreate),j(t._aftercreate),t._lock=!1}function S(){return this._state}function q(t,e){t._handlers=A(),t._slots=A(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function O(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function j(t){for(;t&&t.length;)t.shift()()}var R={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:S,fire:H,on:O,set:function(t){this._set(e({},t)),this.root._lock||M(this.root)},_recompute:t,_set:function(t){var n=this._state,a={},r=!1;for(var i in t=e(this._staged,t),this._staged={},t)this._differs(t[i],n[i])&&(a[i]=r=!0);r&&(this._state=e(e({},n),t),this._recompute(a,this._state),this._bind&&this._bind(a,this._state),this._fragment&&(this.fire("state",{changed:a,current:this._state,previous:n}),this._fragment.p(a,this._state),this.fire("update",{changed:a,current:this._state,previous:n})))},_stage:function(t){e(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:C},I={};function z(t,e){var n=arguments;if(void 0===e&&(e="core"),t=t.trim(),I[e]||function(t){void 0===t&&(t="core"),"chart"===t?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(I[t]=window.__dw.vis.meta.locale||{}):I[t]="core"===t?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[t])}(e),!I[e][t])return"MISSING:"+t;var a=I[e][t];return"string"==typeof a&&arguments.length>2&&(a=a.replace(/\$(\d)/g,(function(t,e){return e=2+Number(e),void 0===n[e]?t:n[e]}))),a}function F(t,e,n){return void 0===e&&(e=11),void 0===n&&(n=7),"string"!=typeof t?t:t.length<e+n+3?t:t.substr(0,e).trim()+"…"+t.substr(t.length-n).trim()}function J(t,e,n,a,r){var i={method:e,body:a,mode:"cors",credentials:n};return window.fetch(t,i).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.text()})).then((function(t){try{return JSON.parse(t)}catch(e){return console.warn("malformed json input",t),t}})).then((function(t){return r&&r(t),t})).catch((function(t){if(!r)throw t;console.error(t)}))}function D(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e="include"),J(t,"GET",e,null,n)}function Y(t,e,n){return J(t,"PUT","include",e,n)}function B(t,e){return void 0===e&&(e=null),new Promise((function(n,a){var r=document.createElement("script");r.src=t,r.onload=function(){e&&e(),n()},r.onerror=a,document.body.appendChild(r)}))}var W=10;function G(t,e,n){var a;return""===t?a=dw.backend.messages.provideCurPwd:e.length<W?a=dw.backend.messages.pwdTooShort.replace("%num",W):e!==n&&(a=dw.backend.messages.pwdMismatch),a||!1}function $(t,e){var n;return{c:function(){(n=d("label")).className="control-label svelte-4hqcdn"},m:function(t,a){i(t,n,a),n.innerHTML=e.label},p:function(t,e){t.label&&(n.innerHTML=e.label)},d:function(t){t&&o(n)}}}function U(t,e){var n;return{c:function(){(n=d("div")).className="help success svelte-4hqcdn"},m:function(t,a){i(t,n,a),n.innerHTML=e.success},p:function(t,e){t.success&&(n.innerHTML=e.success)},d:function(t){t&&o(n)}}}function K(t,e){var n;return{c:function(){(n=d("div")).className="help error svelte-4hqcdn"},m:function(t,a){i(t,n,a),n.innerHTML=e.error},p:function(t,e){t.error&&(n.innerHTML=e.error)},d:function(t){t&&o(n)}}}function Q(t,e){var n;return{c:function(){(n=d("div")).className="help svelte-4hqcdn"},m:function(t,a){i(t,n,a),n.innerHTML=e.help},p:function(t,e){t.help&&(n.innerHTML=e.help)},d:function(t){t&&o(n)}}}function V(t){var n,a,s,c,u,l,m,h,p,v,g,_,w;q(this,t),this._state=e({label:"",help:"",error:!1,success:!1,width:"auto"},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=(n=this,a=this._state,p=n._slotted.default,v=a.label&&$(0,a),g=a.success&&U(0,a),_=a.error&&K(0,a),w=!a.success&&!a.error&&a.help&&Q(0,a),{c:function(){s=d("div"),v&&v.c(),c=f("\n    "),u=d("div"),l=f("\n    "),g&&g.c(),m=f(" "),_&&_.c(),h=f(" "),w&&w.c(),u.className="form-controls svelte-4hqcdn",s.className="form-block svelte-4hqcdn",b(s,"width",a.width),T(s,"success",a.success),T(s,"error",a.error)},m:function(t,e){i(t,s,e),v&&v.m(s,null),r(s,c),r(s,u),p&&r(u,p),r(s,l),g&&g.m(s,null),r(s,m),_&&_.m(s,null),r(s,h),w&&w.m(s,null)},p:function(t,e){e.label?v?v.p(t,e):((v=$(0,e)).c(),v.m(s,c)):v&&(v.d(1),v=null),e.success?g?g.p(t,e):((g=U(0,e)).c(),g.m(s,m)):g&&(g.d(1),g=null),e.error?_?_.p(t,e):((_=K(0,e)).c(),_.m(s,h)):_&&(_.d(1),_=null),e.success||e.error||!e.help?w&&(w.d(1),w=null):w?w.p(t,e):((w=Q(0,e)).c(),w.m(s,null)),t.width&&b(s,"width",e.width),t.success&&T(s,"success",e.success),t.error&&T(s,"error",e.error)},d:function(t){t&&o(s),v&&v.d(),p&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(u,p),g&&g.d(),_&&_.d(),w&&w.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}e(V.prototype,R);var X={changeEmail:function(){var t=this,e=this.get(),n=e.email,a=e.userId;this.set({savingEmail:!0}),Y("/api/users/"+a,JSON.stringify({email:n}),(function(e){t.set({savingEmail:!1});var a=[],r=[];"error"===e.status&&r.push(e.message),e.data&&e.data.messages&&e.data.messages.forEach((function(t){a.push(t)})),e.data&&e.data.errors&&e.data.errors.forEach((function(t){r.push(t)})),0===r.length?t.set({originalEmail:n,changeEmail:!1,messages:a,errors:[]}):t.set({errors:r})}))},changePassword:function(){var t=this,e=this.get(),n=e.currentPassword,a=e.newPassword1,r=e.newPassword2,i=e.userId,o=G(n,a,r);if(!1===o)this.set({savingPassword:!0}),D("/api/auth/salt",(function(e){if("ok"===e.status){var r=e.data.salt,o={oldpwhash:CryptoJS.HmacSHA256(n,r).toString(),pwd:CryptoJS.HmacSHA256(a,r).toString()};Y("/api/users/"+i,JSON.stringify(o),(function(e){t.set({savingPassword:!1,currentPassword:"",newPassword1:"",newPassword2:""});var n=[],a=[];"error"===e.status&&a.push(e.message),e.data&&e.data.messages&&e.data.messages.forEach((function(t){n.push(t)})),e.data&&e.data.errors&&e.data.errors.forEach((function(t){a.push(t)})),0===a.length?(n.push("Your password was changed sucessfully"),t.set({changePassword:!1,messages:n,errors:[]})):t.set({errors:a})}))}else t.set({errors:["Could not load salt."],savingPassword:!1})}));else{var s=[o];this.set({errors:s})}},deleteAccount:function(){var t=this,e=this.get().confirmPassword;this.set({deletingAccount:!0}),D("/api/auth/salt",(function(n){if("ok"===n.status){var a=CryptoJS.HmacSHA256(e,n.data.salt).toString();J("/api/users/current?pwd="+a,"DELETE","include",JSON.stringify({pwd:a}),(function(e){t.set({deletingAccount:!1});var n=[];"error"===e.status&&n.push(e.message),e.data&&e.data.messages&&e.data.messages.forEach((function(t){})),e.data&&e.data.errors&&e.data.errors.forEach((function(t){n.push(t)})),0===n.length?t.set({deleteAccount2:!1,deleteAccount3:!0}):t.set({errors:n})}))}else t.set({errors:["Could not load salt."],deletingAccount:!1})}))}};function Z(t){var e=t.changed,n=t.current,a=t.previous;e.email&&!a&&this.set({originalEmail:n.email})}function tt(t,e,n){var a=Object.create(t);return a.message=e[n],a}function et(t,e,n){var a=Object.create(t);return a.message=e[n],a}function nt(t,e){for(var n,a,s,c,l=e.messages,f=[],m=0;m<l.length;m+=1)f[m]=at(t,et(e,l,m));return{c:function(){n=d("div"),a=d("div"),s=d("div"),c=d("ul");for(var t=0;t<f.length;t+=1)f[t].c();b(c,"margin-bottom","0"),s.className="alert alert-success",a.className="span6 offset3",n.className="row",b(n,"margin-top","20px")},m:function(t,e){i(t,n,e),r(n,a),r(a,s),r(s,c);for(var o=0;o<f.length;o+=1)f[o].m(c,null)},p:function(e,n){if(e.messages){l=n.messages;for(var a=0;a<l.length;a+=1){var r=et(n,l,a);f[a]?f[a].p(e,r):(f[a]=at(t,r),f[a].c(),f[a].m(c,null))}for(;a<f.length;a+=1)f[a].d(1);f.length=l.length}},d:function(t){t&&o(n),u(f,t)}}}function at(t,e){var n,a=e.message;return{c:function(){n=d("li")},m:function(t,e){i(t,n,e),n.innerHTML=a},p:function(t,e){t.messages&&a!==(a=e.message)&&(n.innerHTML=a)},d:function(t){t&&o(n)}}}function rt(e,n){var a,s,c=z("account / email");function u(t){e.set({changeEmail:!0})}return{c:function(){a=d("button"),s=f(c),h(a,"click",u),a.className="btn btn-save btn-default"},m:function(t,e){i(t,a,e),r(a,s)},p:t,d:function(t){t&&o(a),p(a,"click",u)}}}function it(t,e){var n,a,s,c,u,l,m,v,g=z("Back"),b=z("account / email");function _(e){t.set({changeEmail:!1})}function w(e){t.changeEmail()}return{c:function(){n=d("button"),a=f(g),s=f("\n            "),c=d("button"),u=d("i"),m=f("  "),v=f(b),h(n,"click",_),n.className="btn btn-default",u.className=l="fa "+(e.savingEmail?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q",h(c,"click",w),c.className="btn btn-save btn-primary"},m:function(t,e){i(t,n,e),r(n,a),i(t,s,e),i(t,c,e),r(c,u),r(c,m),r(c,v)},p:function(t,e){t.savingEmail&&l!==(l="fa "+(e.savingEmail?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q")&&(u.className=l)},d:function(t){t&&o(n),p(n,"click",_),t&&(o(s),o(c)),p(c,"click",w)}}}function ot(t,e){var n,a,s,c,u,m,g,b,_,w,T,y,N,k,P,x,E,A,C,L,H=z("account / password"),M=z("Back"),S=!1,q=!1,O=!1,j=z("account / password");function R(e){t.set({changePassword:!1})}var I=e.changePassword&&e.errors&&e.errors.length&&ct(t,e);function F(){S=!0,t.set({currentPassword:b.value}),S=!1}var J={label:z("Current Password"),help:z("account / password / current-password-note")},D=new V({root:t.root,store:t.store,slots:{default:l()},data:J});function Y(){q=!0,t.set({newPassword1:w.value}),q=!1}var B={error:!!e.currentPassword&&G(e.currentPassword,e.newPassword1,e.newPassword2),label:z("New Password"),help:"Your password must have at least 4 characters"},W=new V({root:t.root,store:t.store,slots:{default:l()},data:B});function $(){O=!0,t.set({newPassword2:y.value}),O=!1}var U={error:!!e.currentPassword&&G(e.currentPassword,e.newPassword1,e.newPassword2),label:z("(repeat)"),help:""},K=new V({root:t.root,store:t.store,slots:{default:l()},data:U});function Q(e){t.changePassword()}return{c:function(){n=d("h3"),a=f(H),s=f("\n            "),c=d("button"),u=f(M),m=f("\n        "),I&&I.c(),g=f("\n        "),b=d("input"),D._fragment.c(),_=f("\n        "),w=d("input"),W._fragment.c(),T=f("\n        "),y=d("input"),K._fragment.c(),N=f("\n\n        "),k=d("button"),P=d("i"),E=f("  "),A=f(j),C=f("\n        "),L=d("hr"),h(c,"click",R),c.className="btn btn-save btn-default btn-back",h(b,"input",F),v(b,"type","password"),b.className="input-xlarge",h(w,"input",Y),v(w,"type","password"),w.className="input-xlarge",h(y,"input",$),v(y,"type","password"),y.className="input-xlarge",P.className=x="fa "+(e.savingPassword?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q",h(k,"click",Q),k.className="btn btn-primary"},m:function(t,o){i(t,n,o),r(n,a),r(n,s),r(n,c),r(c,u),i(t,m,o),I&&I.m(t,o),i(t,g,o),r(D._slotted.default,b),b.value=e.currentPassword,D._mount(t,o),i(t,_,o),r(W._slotted.default,w),w.value=e.newPassword1,W._mount(t,o),i(t,T,o),r(K._slotted.default,y),y.value=e.newPassword2,K._mount(t,o),i(t,N,o),i(t,k,o),r(k,P),r(k,E),r(k,A),i(t,C,o),i(t,L,o)},p:function(e,n){n.changePassword&&n.errors&&n.errors.length?I?I.p(e,n):((I=ct(t,n)).c(),I.m(g.parentNode,g)):I&&(I.d(1),I=null),!S&&e.currentPassword&&(b.value=n.currentPassword),!q&&e.newPassword1&&(w.value=n.newPassword1);var a={};(e.currentPassword||e.newPassword1||e.newPassword2)&&(a.error=!!n.currentPassword&&G(n.currentPassword,n.newPassword1,n.newPassword2)),W._set(a),!O&&e.newPassword2&&(y.value=n.newPassword2);var r={};(e.currentPassword||e.newPassword1||e.newPassword2)&&(r.error=!!n.currentPassword&&G(n.currentPassword,n.newPassword1,n.newPassword2)),K._set(r),e.savingPassword&&x!==(x="fa "+(n.savingPassword?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q")&&(P.className=x)},d:function(t){t&&o(n),p(c,"click",R),t&&o(m),I&&I.d(t),t&&o(g),p(b,"input",F),D.destroy(t),t&&o(_),p(w,"input",Y),W.destroy(t),t&&o(T),p(y,"input",$),K.destroy(t),t&&(o(N),o(k)),p(k,"click",Q),t&&(o(C),o(L))}}}function st(e,n){var a,i,o,s,c=z("account / password");function u(t){e.set({changePassword:!0})}var m={label:z("Password"),help:""},g=new V({root:e.root,store:e.store,slots:{default:l()},data:m});return{c:function(){a=d("input"),i=f("\n            "),o=d("button"),s=f(c),g._fragment.c(),a.disabled=!0,a.value="abcdefgh",v(a,"type","password"),h(o,"click",u),o.className="btn btn-save btn-default"},m:function(t,e){r(g._slotted.default,a),r(g._slotted.default,i),r(g._slotted.default,o),r(o,s),g._mount(t,e)},p:t,d:function(t){p(o,"click",u),g.destroy(t)}}}function ct(t,e){for(var n,a,s=e.errors,c=[],l=0;l<s.length;l+=1)c[l]=ut(t,tt(e,s,l));return{c:function(){n=d("div"),a=d("ul");for(var t=0;t<c.length;t+=1)c[t].c();b(a,"margin-bottom","0"),n.className="alert"},m:function(t,e){i(t,n,e),r(n,a);for(var o=0;o<c.length;o+=1)c[o].m(a,null)},p:function(e,n){if(e.errors){s=n.errors;for(var r=0;r<s.length;r+=1){var i=tt(n,s,r);c[r]?c[r].p(e,i):(c[r]=ut(t,i),c[r].c(),c[r].m(a,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=s.length}},d:function(t){t&&o(n),u(c,t)}}}function ut(t,e){var n,a=e.message;return{c:function(){n=d("li")},m:function(t,e){i(t,n,e),n.innerHTML=a},p:function(t,e){t.errors&&a!==(a=e.message)&&(n.innerHTML=a)},d:function(t){t&&o(n)}}}function lt(e,n){var a,i,o=z("account / delete");function s(t){e.set({deleteAccount:!0})}var c=new V({root:e.root,store:e.store,slots:{default:l()},data:{label:"Delete account",help:""}});return{c:function(){a=d("button"),i=f(o),c._fragment.c(),h(a,"click",s),a.className="btn btn-danger",v(a,"href","#")},m:function(t,e){r(c._slotted.default,a),r(a,i),c._mount(t,e)},p:t,d:function(t){p(a,"click",s),c.destroy(t)}}}function dt(e,n){var a,s,c,u,l,m,v,g,b,_,w,T,y,N,k,P,x=z("account / confirm-account-deletion"),E=z("account / confirm-account-deletion / no"),A=z("account / or"),C=z("account / confirm-account-deletion / yes");function L(t){e.set({deleteAccount:!1})}function H(t){e.set({deleteAccount:!1,deleteAccount2:!0})}return{c:function(){a=d("h3"),s=d("i"),c=f(" "),u=f(x),l=f("\n        "),m=d("button"),v=d("i"),g=f("   "),b=f(E),_=f("\n\n        "),w=f(A),T=f("\n\n        "),y=d("button"),N=d("i"),k=f("   "),P=f(C),s.className="fa fa-times svelte-19q3a7q",a.className="svelte-19q3a7q",v.className="fa fa-chevron-left",h(m,"click",L),m.className="btn btn-back btn-primary",N.className="fa fa-times",h(y,"click",H),y.className="btn btn-default"},m:function(t,e){i(t,a,e),r(a,s),r(a,c),r(a,u),i(t,l,e),i(t,m,e),r(m,v),r(m,g),r(m,b),i(t,_,e),i(t,w,e),i(t,T,e),i(t,y,e),r(y,N),r(y,k),r(y,P)},p:t,d:function(t){t&&(o(a),o(l),o(m)),p(m,"click",L),t&&(o(_),o(w),o(T),o(y)),p(y,"click",H)}}}function ft(t,e){var n,a,s,c,u,m,g,_,w,T,y,N,k,P,x,E,A,C,L,H,M,S,q,O,j,R,I,F,J,D,Y,B,W,G,$,U=z("account / delete / hed"),K=z("account / delete / really"),Q=z("account / confirm-account-deletion / free"),X=z("You cannot login and logout anymore."),Z=z("You cannot edit or remove your charts anymore."),tt=z("account / delete / charts-stay-online"),et=!1,nt=z("account / delete / really-really"),at=z("No, I changed my mind.."),rt=z("Yes, delete it!");function it(){et=!0,t.set({confirmPassword:M.value}),et=!1}var ot={label:z("Please enter your password to confirm the deletion request:"),error:!(!e.errors||!e.errors.length)&&e.errors.join(". ")},st=new V({root:t.root,store:t.store,slots:{default:l()},data:ot});function ct(e){t.set({deleteAccount2:!1})}function ut(e){t.deleteAccount()}return{c:function(){n=d("h2"),a=f(U),s=f("\n        "),c=d("div"),u=d("p"),m=f(K),g=f("\n            "),_=d("ul"),w=d("li"),T=f(Q),y=f("\n                "),N=d("li"),k=f(X),P=f("\n                "),x=d("li"),E=f(Z),A=f("\n            "),C=d("p"),L=f(tt),H=f("\n\n            "),M=d("input"),st._fragment.c(),S=f("\n            "),q=d("p"),O=f("\n            "),j=d("div"),R=d("button"),I=d("i"),F=f("  "),J=f(at),D=f("\n                "),Y=d("button"),B=d("i"),G=f("  "),$=f(rt),b(n,"margin-bottom","20px"),h(M,"input",it),v(M,"type","password"),M.placeholder=z("Password"),q.className="lead",I.className="fa fa-chevron-left",h(R,"click",ct),R.className="btn btn-info",B.className=W="fa "+(e.deletingAccount?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q",h(Y,"click",ut),Y.className="btn btn-danger",j.className="control-group",c.className="delete-account"},m:function(t,o){i(t,n,o),r(n,a),i(t,s,o),i(t,c,o),r(c,u),r(u,m),r(c,g),r(c,_),r(_,w),r(w,T),r(_,y),r(_,N),r(N,k),r(_,P),r(_,x),r(x,E),r(c,A),r(c,C),r(C,L),r(c,H),r(st._slotted.default,M),M.value=e.confirmPassword,st._mount(c,null),r(c,S),r(c,q),q.innerHTML=nt,r(c,O),r(c,j),r(j,R),r(R,I),r(R,F),r(R,J),r(j,D),r(j,Y),r(Y,B),r(Y,G),r(Y,$)},p:function(t,e){!et&&t.confirmPassword&&(M.value=e.confirmPassword);var n={};t.errors&&(n.error=!(!e.errors||!e.errors.length)&&e.errors.join(". ")),st._set(n),t.deletingAccount&&W!==(W="fa "+(e.deletingAccount?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q")&&(B.className=W)},d:function(t){t&&(o(n),o(s),o(c)),p(M,"input",it),st.destroy(),p(R,"click",ct),p(Y,"click",ut)}}}function mt(e,n){var a,s,c,u,l,m,h,p,v=z("account / delete / hed"),g=z("Your account has been deleted."),_=z("Goodbye!");return{c:function(){a=d("h2"),s=f(v),c=f("\n        "),u=d("h3"),l=f(g),m=f("\n        "),h=d("a"),p=f(_),b(a,"margin-bottom","20px"),h.href="/",h.className="btn btn-primary btn-large"},m:function(t,e){i(t,a,e),r(a,s),i(t,c,e),i(t,u,e),r(u,l),i(t,m,e),i(t,h,e),r(h,p)},p:t,d:function(t){t&&(o(a),o(c),o(u),o(m),o(h))}}}function ht(t){var a=this;q(this,t),this._state=e({changePassword:!1,changeEmail:!1,deleteAccount:!1,deleteAccount2:!1,deleteAccount3:!1,deletingAccount:!1,showPasswordInPlaintext:!1,messages:[],currentPassword:"",newPassword1:"",newPassword2:"",confirmPassword:"",originalEmail:"",savingEmail:!1,savingPassword:!1,errors:[],groups:[{title:"Account settings",tabs:[{title:"Profile",icon:"fa fa-fw fa-user"}]},{title:"Team settings",tabs:[]}]},t.data),this._intro=!0,this._handlers.state=[Z],Z.call(this,{changed:n({},this._state),current:this._state}),this._fragment=function(t,e){var n,a,s,c,u,h,p,g,_,w,T,y,N,k,P,x,E=z("Edit profile"),A=z("account / change-login"),C=e.messages&&e.messages.length&&nt(t,e);function L(t){return t.changeEmail?it:rt}var H=L(e),M=H(t,e),S={label:z("E-Mail"),help:e.changeEmail?z("account / confirm-email-change"):""},q=new V({root:t.root,store:t.store,slots:{default:l()},data:S});function O(t){return t.changePassword?ot:st}var j=O(e),R=j(t,e);function I(t){return t.deleteAccount3?mt:t.deleteAccount2?ft:t.deleteAccount?dt:lt}var F=I(e),J=F(t,e);return{c:function(){n=d("h2"),a=f(E),s=f("\n\n"),C&&C.c(),c=f("\n\n"),u=d("div"),h=d("div"),p=d("input"),_=f("\n            "),M.c(),w=m(),q._fragment.c(),T=f("\n\n        "),R.c(),y=f(" "),J.c(),N=f("\n    "),k=d("div"),P=d("p"),x=f(A),p.disabled=g=!e.changeEmail,p.value=e.originalEmail,v(p,"type","text"),h.className="span6",P.className="help",k.className="span4",u.className="row edit-account",b(u,"margin-top",(e.messages&&e.messages.length?0:20)+"px")},m:function(t,e){i(t,n,e),r(n,a),i(t,s,e),C&&C.m(t,e),i(t,c,e),i(t,u,e),r(u,h),r(q._slotted.default,p),r(q._slotted.default,_),M.m(q._slotted.default,null),r(q._slotted.default,w),q._mount(h,null),r(h,T),R.m(h,null),r(h,y),J.m(h,null),r(u,N),r(u,k),r(k,P),r(P,x)},p:function(e,n){n.messages&&n.messages.length?C?C.p(e,n):((C=nt(t,n)).c(),C.m(c.parentNode,c)):C&&(C.d(1),C=null),e.changeEmail&&g!==(g=!n.changeEmail)&&(p.disabled=g),e.originalEmail&&(p.value=n.originalEmail),H===(H=L(n))&&M?M.p(e,n):(M.d(1),(M=H(t,n)).c(),M.m(w.parentNode,w));var a={};e.changeEmail&&(a.help=n.changeEmail?z("account / confirm-email-change"):""),q._set(a),j===(j=O(n))&&R?R.p(e,n):(R.d(1),(R=j(t,n)).c(),R.m(h,y)),F===(F=I(n))&&J?J.p(e,n):(J.d(1),(J=F(t,n)).c(),J.m(h,null)),e.messages&&b(u,"margin-top",(n.messages&&n.messages.length?0:20)+"px")},d:function(t){t&&(o(n),o(s)),C&&C.d(t),t&&(o(c),o(u)),M.d(),q.destroy(),R.d(),J.d()}}}(this,this._state),this.root._oncreate.push((function(){a.fire("update",{changed:n({},a._state),current:a._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this))}e(ht.prototype,R),e(ht.prototype,X);var pt={activateTab:function(t,e){var n,a,r=this;if(void 0===e&&(e=null),t.module)return e&&e.preventDefault(),void Promise.all([(n=t.css,void 0===a&&(a=null),new Promise((function(t,e){var r=document.createElement("link");r.rel="stylesheet",r.href=n,r.onload=function(){a&&a(),t()},r.onerror=e,document.head.appendChild(r)}))),B(t.js||t.src)]).then((function(){require([t.module],(function(e){t.ui=e.App,t.module=null;var n=r.get().groups;r.set({groups:n,activeTab:t})}))}));t.ui&&(e&&e.preventDefault(),this.set({activeTab:t}))},onTabChange:function(t,e){t.onchange&&t.onchange(e)}};function vt(t){var e=this._svelte,n=e.component,a=e.ctx;n.activateTab(a.tab,t)}function gt(t,e,n){var a=Object.create(t);return a.tab=e[n],a}function bt(t,e,n){var a=Object.create(t);return a.group=e[n],a}function _t(t,e){var n,a,s,c,u,l,m,v=e.tab.title;return{c:function(){n=d("li"),a=d("a"),s=d("i"),u=f("   "),l=f(v),s.className=c=e.tab.icon+" svelte-5we305",a._svelte={component:t,ctx:e},h(a,"click",vt),a.href=m=e.tab.url||"/"+e.basePath+"/"+e.tab.id,a.className="svelte-5we305",n.className="svelte-5we305",T(n,"active",e.activeTab&&e.activeTab.id===e.tab.id)},m:function(t,e){i(t,n,e),r(n,a),r(a,s),r(a,u),r(a,l)},p:function(t,r){e=r,t.groups&&c!==(c=e.tab.icon+" svelte-5we305")&&(s.className=c),t.groups&&v!==(v=e.tab.title)&&g(l,v),a._svelte.ctx=e,(t.groups||t.basePath)&&m!==(m=e.tab.url||"/"+e.basePath+"/"+e.tab.id)&&(a.href=m),(t.activeTab||t.groups)&&T(n,"active",e.activeTab&&e.activeTab.id===e.tab.id)},d:function(t){t&&o(n),p(a,"click",vt)}}}function wt(t,e){for(var n,a,s,c,l=e.group.title,m=e.group.tabs,h=[],p=0;p<m.length;p+=1)h[p]=_t(t,gt(e,m,p));return{c:function(){n=d("div"),a=f(l),s=f("\n\n        "),c=d("ul");for(var t=0;t<h.length;t+=1)h[t].c();n.className="group svelte-5we305",c.className="nav nav-stacked nav-tabs"},m:function(t,e){i(t,n,e),r(n,a),i(t,s,e),i(t,c,e);for(var o=0;o<h.length;o+=1)h[o].m(c,null)},p:function(e,n){if(e.groups&&l!==(l=n.group.title)&&g(a,l),e.activeTab||e.groups||e.basePath){m=n.group.tabs;for(var r=0;r<m.length;r+=1){var i=gt(n,m,r);h[r]?h[r].p(e,i):(h[r]=_t(t,i),h[r].c(),h[r].m(c,null))}for(;r<h.length;r+=1)h[r].d(1);h.length=m.length}},d:function(t){t&&(o(n),o(s),o(c)),u(h,t)}}}function Tt(t,n){var a,u,l,h,p,v,g=t._slotted.aboveContent,b=t._slotted.belowContent,_=[n.activeTab.data],w=n.activeTab.ui;function T(n){for(var a={},r=0;r<_.length;r+=1)a=e(a,_[r]);return{root:t.root,store:t.store,data:a}}if(w)var y=new w(T());function N(e){t.onTabChange(n.activeTab,e)}return y&&y.on("change",N),{c:function(){a=d("div"),l=f("\n        "),y&&y._fragment.c(),h=f("\n        "),a.className=v="span10 account-page-content tab-"+n.activeTab.id+" svelte-5we305"},m:function(t,e){i(t,a,e),g&&(r(a,g),r(a,u||(u=m()))),r(a,l),y&&y._mount(a,null),r(a,h),b&&(r(a,p||(p=m())),r(a,b))},p:function(t,e){n=e;var r=t.activeTab?function(t,e){for(var n={},a={},r={},i=t.length;i--;){var o=t[i],s=e[i];if(s){for(var c in o)c in s||(a[c]=1);for(var c in s)r[c]||(n[c]=s[c],r[c]=1);t[i]=s}else for(var c in o)r[c]=1}for(var c in a)c in n||(n[c]=void 0);return n}(_,[n.activeTab.data]):{};w!==(w=n.activeTab.ui)?(y&&y.destroy(),w?((y=new w(T()))._fragment.c(),y._mount(a,h),y.on("change",N)):y=null):w&&y._set(r),t.activeTab&&v!==(v="span10 account-page-content tab-"+n.activeTab.id+" svelte-5we305")&&(a.className=v)},d:function(t){t&&o(a),g&&c(u,g),y&&y.destroy(),b&&s(p,b)}}}function yt(t){q(this,t),this._state=e({groups:[],basePath:"",activeTab:null},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=function(t,e){for(var n,a,c,l,h,p=t._slotted.belowMenu,v=e.groups,g=[],b=0;b<v.length;b+=1)g[b]=wt(t,bt(e,v,b));var _=e.activeTab&&Tt(t,e);return{c:function(){n=d("div"),a=d("div");for(var t=0;t<g.length;t+=1)g[t].c();c=f("\n        "),h=f("\n    "),_&&_.c(),a.className="span2 svelte-5we305",n.className="row"},m:function(t,e){i(t,n,e),r(n,a);for(var o=0;o<g.length;o+=1)g[o].m(a,null);r(a,c),p&&(r(a,l||(l=m())),r(a,p)),r(n,h),_&&_.m(n,null)},p:function(e,r){if(e.groups||e.activeTab||e.basePath){v=r.groups;for(var i=0;i<v.length;i+=1){var o=bt(r,v,i);g[i]?g[i].p(e,o):(g[i]=wt(t,o),g[i].c(),g[i].m(a,c))}for(;i<g.length;i+=1)g[i].d(1);g.length=v.length}r.activeTab?_?_.p(e,r):((_=Tt(t,r)).c(),_.m(n,null)):_&&(_.d(1),_=null)},d:function(t){t&&o(n),u(g,t),p&&s(l,p),_&&_.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this))}e(yt.prototype,R),e(yt.prototype,pt);var Nt={width:"100px"};function kt(t,e){var n;return{c:function(){b(n=d("label"),"width",e.width||Nt.width),n.className="control-label svelte-nf911z",T(n,"disabled",e.disabled)},m:function(t,a){i(t,n,a),n.innerHTML=e.label},p:function(t,e){t.label&&(n.innerHTML=e.label),t.width&&b(n,"width",e.width||Nt.width),t.disabled&&T(n,"disabled",e.disabled)},d:function(t){t&&o(n)}}}function Pt(t,e){var n,a;return{c:function(){(n=d("p")).className=a="mini-help "+e.type+" svelte-nf911z"},m:function(t,a){i(t,n,a),n.innerHTML=e.help},p:function(t,e){t.help&&(n.innerHTML=e.help),t.type&&a!==(a="mini-help "+e.type+" svelte-nf911z")&&(n.className=a)},d:function(t){t&&o(n)}}}function xt(t){var n,a,s,u,l,h,p,v,g,_,w;q(this,t),this._state=e({disabled:!1,help:!1,type:"default",valign:"baseline",inline:!1},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=(n=this,a=this._state,g=n._slotted.default,_=a.label&&kt(0,a),w=a.help&&Pt(0,a),{c:function(){s=d("div"),_&&_.c(),u=f("\n    "),l=d("div"),p=f("\n        "),w&&w.c(),l.className="controls svelte-nf911z",b(l,"width","calc(100% - "+(a.width||Nt.width)+" - 32px)"),T(l,"form-inline",a.inline),s.className=v="control-group vis-option-group vis-option-group-"+a.type+" label-"+a.valign+" svelte-nf911z"},m:function(t,e){i(t,s,e),_&&_.m(s,null),r(s,u),r(s,l),g&&(r(l,g),r(l,h||(h=m()))),r(l,p),w&&w.m(l,null)},p:function(t,e){e.label?_?_.p(t,e):((_=kt(0,e)).c(),_.m(s,u)):_&&(_.d(1),_=null),e.help?w?w.p(t,e):((w=Pt(0,e)).c(),w.m(l,null)):w&&(w.d(1),w=null),t.width&&b(l,"width","calc(100% - "+(e.width||Nt.width)+" - 32px)"),t.inline&&T(l,"form-inline",e.inline),(t.type||t.valign)&&v!==(v="control-group vis-option-group vis-option-group-"+e.type+" label-"+e.valign+" svelte-nf911z")&&(s.className=v)},d:function(t){t&&o(s),_&&_.d(),g&&c(h,g),w&&w.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function Et(t){var e=t-1;return e*e*e+1}function At(t,e){var n=e.delay;void 0===n&&(n=0);var a=e.duration;void 0===a&&(a=400);var r=e.easing;void 0===r&&(r=Et);var i=getComputedStyle(t),o=+i.opacity,s=parseFloat(i.height),c=parseFloat(i.paddingTop),u=parseFloat(i.paddingBottom),l=parseFloat(i.marginTop),d=parseFloat(i.marginBottom),f=parseFloat(i.borderTopWidth),m=parseFloat(i.borderBottomWidth);return{delay:n,duration:a,easing:r,css:function(t){return"overflow: hidden;opacity: "+Math.min(20*t,1)*o+";height: "+t*s+"px;padding-top: "+t*c+"px;padding-bottom: "+t*u+"px;margin-top: "+t*l+"px;margin-bottom: "+t*d+"px;border-top-width: "+t*f+"px;border-bottom-width: "+t*m+"px;"}}}function Ct(t,e){var n,a;return{c:function(){n=d("div"),a=f(e.prepend),n.className="prepend"},m:function(t,e){i(t,n,e),r(n,a)},p:function(t,e){t.prepend&&g(a,e.prepend)},d:function(t){t&&o(n)}}}function Lt(t,e){var n,a;return{c:function(){n=d("div"),a=f(e.append),n.className="append"},m:function(t,e){i(t,n,e),r(n,a)},p:function(t,e){t.append&&g(a,e.append)},d:function(t){t&&o(n)}}}function Ht(t,e){var n,a,s,c;return{c:function(){n=d("div"),(a=d("div")).className="disabled-msg svelte-lyrczp"},m:function(t,o){i(t,n,o),r(n,a),a.innerHTML=e.disabled_msg,c=!0},p:function(t,e){c&&!t.disabled_msg||(a.innerHTML=e.disabled_msg)},i:function(e,a){c||(t.root._intro&&(s&&s.invalidate(),t.root._aftercreate.push((function(){s||(s=N(t,n,At,{},!0)),s.run(1)}))),this.m(e,a))},o:function(e){c&&(s||(s=N(t,n,At,{},!1)),s.run(0,(function(){e(),s=null})),c=!1)},d:function(t){t&&(o(n),s&&s.abort())}}}function Mt(t,e,n){var a=Object.create(t);return a.opt=e[n],a}function St(t,e,n){var a=Object.create(t);return a.optgroup=e[n],a}function qt(t,e,n){var a=Object.create(t);return a.opt=e[n],a}function Ot(t,e){for(var n,a=e.options,r=[],s=0;s<a.length;s+=1)r[s]=jt(t,qt(e,a,s));return{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();n=m()},m:function(t,e){for(var a=0;a<r.length;a+=1)r[a].m(t,e);i(t,n,e)},p:function(e,i){if(e.options){a=i.options;for(var o=0;o<a.length;o+=1){var s=qt(i,a,o);r[o]?r[o].p(e,s):(r[o]=jt(t,s),r[o].c(),r[o].m(n.parentNode,n))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}},d:function(t){u(r,t),t&&o(n)}}}function jt(t,e){var n,a,s,c=e.opt.label;return{c:function(){n=d("option"),a=f(c),n.__value=s=e.opt.value,n.value=n.__value},m:function(t,e){i(t,n,e),r(n,a)},p:function(t,e){t.options&&c!==(c=e.opt.label)&&g(a,c),t.options&&s!==(s=e.opt.value)&&(n.__value=s),n.value=n.__value},d:function(t){t&&o(n)}}}function Rt(t,e){for(var n,a=e.optgroups,r=[],s=0;s<a.length;s+=1)r[s]=zt(t,St(e,a,s));return{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();n=m()},m:function(t,e){for(var a=0;a<r.length;a+=1)r[a].m(t,e);i(t,n,e)},p:function(e,i){if(e.optgroups){a=i.optgroups;for(var o=0;o<a.length;o+=1){var s=St(i,a,o);r[o]?r[o].p(e,s):(r[o]=zt(t,s),r[o].c(),r[o].m(n.parentNode,n))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}},d:function(t){u(r,t),t&&o(n)}}}function It(t,e){var n,a,s,c=e.opt.label;return{c:function(){n=d("option"),a=f(c),n.__value=s=e.opt.value,n.value=n.__value},m:function(t,e){i(t,n,e),r(n,a)},p:function(t,e){t.optgroups&&c!==(c=e.opt.label)&&g(a,c),t.optgroups&&s!==(s=e.opt.value)&&(n.__value=s),n.value=n.__value},d:function(t){t&&o(n)}}}function zt(t,e){for(var n,a,r=e.optgroup.options,s=[],c=0;c<r.length;c+=1)s[c]=It(0,Mt(e,r,c));return{c:function(){n=d("optgroup");for(var t=0;t<s.length;t+=1)s[t].c();v(n,"label",a=e.optgroup.label)},m:function(t,e){i(t,n,e);for(var a=0;a<s.length;a+=1)s[a].m(n,null)},p:function(t,e){if(t.optgroups){r=e.optgroup.options;for(var i=0;i<r.length;i+=1){var o=Mt(e,r,i);s[i]?s[i].p(t,o):(s[i]=It(0,o),s[i].c(),s[i].m(n,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}t.optgroups&&a!==(a=e.optgroup.label)&&v(n,"label",a)},d:function(t){t&&o(n),u(s,t)}}}function Ft(t){q(this,t),this._state=e({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),this._intro=!0,this._fragment=function(t,e){var n,a,s=!1,c=e.options.length&&Ot(t,e),u=e.optgroups.length&&Rt(t,e);function l(){s=!0,t.set({value:w(n)}),s=!1}return{c:function(){n=d("select"),c&&c.c(),a=m(),u&&u.c(),h(n,"change",l),"value"in e||t.root._beforecreate.push(l),n.className="select-css svelte-v0oq4b",n.disabled=e.disabled,b(n,"width",e.width)},m:function(t,o){i(t,n,o),c&&c.m(n,null),r(n,a),u&&u.m(n,null),_(n,e.value)},p:function(e,r){r.options.length?c?c.p(e,r):((c=Ot(t,r)).c(),c.m(n,a)):c&&(c.d(1),c=null),r.optgroups.length?u?u.p(e,r):((u=Rt(t,r)).c(),u.m(n,null)):u&&(u.d(1),u=null),!s&&e.value&&_(n,r.value),e.disabled&&(n.disabled=r.disabled),e.width&&b(n,"width",r.width)},d:function(t){t&&o(n),c&&c.d(),u&&u.d(),p(n,"change",l)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this))}e(xt.prototype,R),e(function(t){q(this,t),this._state=e({disabled:!1,disabled_msg:"",width:"100px",help:"",placeholder:"",prepend:"",append:""},t.data),this._intro=!0,this._fragment=function(t,e){var n,a,s,c,u,g,b=!1,_=e.prepend&&Ct(t,e);function w(){b=!0,t.set({value:s.value}),b=!1}var T=e.append&&Lt(t,e),y={disabled:e.disabled,type:"text",width:e.width,label:e.label,help:e.help},N=new xt({root:t.root,store:t.store,slots:{default:l()},data:y}),k=e.disabled&&e.disabled_msg&&Ht(t,e);return{c:function(){n=d("div"),_&&_.c(),a=f("\n        "),s=d("input"),c=f("\n        "),T&&T.c(),N._fragment.c(),u=f("\n\n"),k&&k.c(),g=m(),h(s,"input",w),s.disabled=e.disabled,v(s,"type","text"),s.className="input-large svelte-lyrczp",s.placeholder=e.placeholder,n.className="flex svelte-lyrczp"},m:function(t,o){r(N._slotted.default,n),_&&_.m(n,null),r(n,a),r(n,s),s.value=e.value,r(n,c),T&&T.m(n,null),N._mount(t,o),i(t,u,o),k&&k.i(t,o),i(t,g,o)},p:function(e,r){r.prepend?_?_.p(e,r):((_=Ct(t,r)).c(),_.m(n,a)):_&&(_.d(1),_=null),!b&&e.value&&(s.value=r.value),e.disabled&&(s.disabled=r.disabled),e.placeholder&&(s.placeholder=r.placeholder),r.append?T?T.p(e,r):((T=Lt(t,r)).c(),T.m(n,null)):T&&(T.d(1),T=null);var i={};e.disabled&&(i.disabled=r.disabled),e.width&&(i.width=r.width),e.label&&(i.label=r.label),e.help&&(i.help=r.help),N._set(i),r.disabled&&r.disabled_msg?(k?k.p(e,r):(k=Ht(t,r))&&k.c(),k.i(g.parentNode,g)):k&&(P(),k.o((function(){k.d(1),k=null})))},d:function(t){_&&_.d(),p(s,"input",w),T&&T.d(),N.destroy(t),t&&o(u),k&&k.d(t),t&&o(g)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this))}.prototype,R),e(Ft.prototype,R);var Jt=null;var Dt={createTeam:function(t,e){var n,a,r,i={name:t};this.get().user.isAdmin&&e&&(i.id=String(e).trim().toLowerCase()),this.set({awaitCreateTeam:(n=window.location.protocol+"//"+dw.backend.__api_domain+"/v3/teams",a=JSON.stringify(i),J(n,"POST","include",a,r)).then((function(t){window.location.href="/team/"+t.id+"/settings"}))})},leaveTeam:function(t){var e,n,a=this,r=this.get(),i=r.user,o=r.teams;window.confirm(z("account / my-teams / leave-team / confirm").replace("%team%",t.name))&&(e=window.location.protocol+"//"+dw.backend.__api_domain+"/v3/teams/"+t.id+"/members/"+i.id,J(e,"DELETE","include",null,n)).then((function(e){window.alert(z("account / my-teams / leave-team / done")),o.splice(o.findIndex((function(e){return e.id===t.id})),1),a.set({teams:o})})).catch((function(t){window.alert("There was a problem with your request. Please contact support@datawrapper.de"),console.error(t)}))}};function Yt(t){var e,n,a,r=t.changed,i=t.current;r.currentTeam&&void 0!==i.currentTeam&&(Jt?i.currentTeam!==Jt&&(Jt=i.currentTeam,this.set({awaitActiveTeam:(e=window.location.protocol+"//"+dw.backend.__api_domain+"/v3/me/settings",n=JSON.stringify({activeTeam:i.currentTeam||null}),J(e,"PATCH","include",n,a))})):Jt=i.currentTeam)}function Bt(t){var e=this._svelte,n=e.component,a=e.ctx;n.leaveTeam(a.team)}function Wt(t,e,n){var a=Object.create(t);return a.team=e[n],a}function Gt(e,n){var a,r=z("account / my-teams / no-teams-yet");return{c:function(){a=d("p")},m:function(t,e){i(t,a,e),a.innerHTML=r},p:t,d:function(t){t&&o(a)}}}function $t(t,e){for(var n,a,s,c,l,m,h,p,v,g,b,_,w,T,y,N,k,P,x,E,A,C,L=z("account / my-teams / your-teams"),H=z("account / my-teams / name"),M=z("account / my-teams / your-role"),S=z("account / my-teams / num-charts"),q=z("account / my-teams / num-members"),O=z("account / my-teams / leave-team"),j=e.user.isAdmin&&Ut(),R=e.teams,I=[],F=0;F<R.length;F+=1)I[F]=re(t,Wt(e,R,F));return{c:function(){n=d("p"),a=f("\n\n"),s=d("table"),c=d("thead"),l=d("tr"),m=d("th"),h=f(H),p=f("\n            "),j&&j.c(),v=f("\n            "),g=d("th"),b=f(M),_=f("\n            "),w=d("th"),T=f(S),y=f("\n            "),N=d("th"),k=f(q),P=f("\n            "),x=d("th"),E=f(O),A=f("\n    "),C=d("tbody");for(var t=0;t<I.length;t+=1)I[t].c();s.className="table"},m:function(t,e){i(t,n,e),n.innerHTML=L,i(t,a,e),i(t,s,e),r(s,c),r(c,l),r(l,m),r(m,h),r(l,p),j&&j.m(l,null),r(l,v),r(l,g),r(g,b),r(l,_),r(l,w),r(w,T),r(l,y),r(l,N),r(N,k),r(l,P),r(l,x),r(x,E),r(s,A),r(s,C);for(var o=0;o<I.length;o+=1)I[o].m(C,null)},p:function(e,n){if(n.user.isAdmin?j||((j=Ut()).c(),j.m(l,v)):j&&(j.d(1),j=null),e.teams||e.currentTeam||e.user){R=n.teams;for(var a=0;a<R.length;a+=1){var r=Wt(n,R,a);I[a]?I[a].p(e,r):(I[a]=re(t,r),I[a].c(),I[a].m(C,null))}for(;a<I.length;a+=1)I[a].d(1);I.length=R.length}},d:function(t){t&&(o(n),o(a),o(s)),j&&j.d(),u(I,t)}}}function Ut(t,e){var n,a,s=z("account / my-teams / id");return{c:function(){n=d("th"),a=f(s)},m:function(t,e){i(t,n,e),r(n,a)},d:function(t){t&&o(n)}}}function Kt(t,e){var n,a,s,c=F(e.team.name,20,10);return{c:function(){n=d("a"),a=f(c),n.href=s="/team/"+e.team.id+"/settings"},m:function(t,e){i(t,n,e),r(n,a)},p:function(t,e){t.teams&&c!==(c=F(e.team.name,20,10))&&g(a,c),t.teams&&s!==(s="/team/"+e.team.id+"/settings")&&(n.href=s)},d:function(t){t&&o(n)}}}function Qt(t,e){var n,a=F(e.team.name,20,10);return{c:function(){n=f(a)},m:function(t,e){i(t,n,e)},p:function(t,e){t.teams&&a!==(a=F(e.team.name,20,10))&&g(n,a)},d:function(t){t&&o(n)}}}function Vt(t,e){var n;return{c:function(){(n=d("i")).className="fa fa-check-circle"},m:function(t,e){i(t,n,e)},d:function(t){t&&o(n)}}}function Xt(t,e){var n,a,s=e.team.id;return{c:function(){n=d("td"),a=f(s),n.className="slug svelte-t3x94h"},m:function(t,e){i(t,n,e),r(n,a)},p:function(t,e){t.teams&&s!==(s=e.team.id)&&g(a,s)},d:function(t){t&&o(n)}}}function Zt(t,e){var n,a,s,c,u,l=e.team.members,h=e.team.invites&&ee(t,e);return{c:function(){n=d("a"),a=f(l),c=f(" "),h&&h.c(),u=m(),n.href=s="/team/"+e.team.id+"/settings#members"},m:function(t,e){i(t,n,e),r(n,a),i(t,c,e),h&&h.m(t,e),i(t,u,e)},p:function(e,r){e.teams&&l!==(l=r.team.members)&&g(a,l),e.teams&&s!==(s="/team/"+r.team.id+"/settings#members")&&(n.href=s),r.team.invites?h?h.p(e,r):((h=ee(t,r)).c(),h.m(u.parentNode,u)):h&&(h.d(1),h=null)},d:function(t){t&&(o(n),o(c)),h&&h.d(t),t&&o(u)}}}function te(t,e){var n,a=e.team.members;return{c:function(){n=f(a)},m:function(t,e){i(t,n,e)},p:function(t,e){t.teams&&a!==(a=e.team.members)&&g(n,a)},d:function(t){t&&o(n)}}}function ee(t,e){var n,a,s,c,u=e.team.invites;return{c:function(){n=d("span"),a=f("(+"),s=f(u),c=f(")"),n.className="invites svelte-t3x94h"},m:function(t,e){i(t,n,e),r(n,a),r(n,s),r(n,c)},p:function(t,e){t.teams&&u!==(u=e.team.invites)&&g(s,u)},d:function(t){t&&o(n)}}}function ne(t,e){var n,a,s,c,u,l=z("account / my-teams / delete-team");return{c:function(){n=d("a"),a=d("i"),s=f(" "),c=f(l),a.className="fa fa-trash",n.href=u="/team/"+e.team.id+"/settings#deleteTeam",n.className="btn btn-small btn-danger"},m:function(t,e){i(t,n,e),r(n,a),r(n,s),r(n,c)},p:function(t,e){t.teams&&u!==(u="/team/"+e.team.id+"/settings#deleteTeam")&&(n.href=u)},d:function(t){t&&o(n)}}}function ae(t,e){var n,a,s,c,u=z("account / my-teams / leave-team");return{c:function(){n=d("button"),a=d("i"),s=f(" "),c=f(u),a.className="fa fa-sign-out",n._svelte={component:t,ctx:e},h(n,"click",Bt),n.className="btn btn-small"},m:function(t,e){i(t,n,e),r(n,a),r(n,s),r(n,c)},p:function(t,a){e=a,n._svelte.ctx=e},d:function(t){t&&o(n),p(n,"click",Bt)}}}function re(t,e){var n,a,s,c,u,l,m,h,p,v,b,_,w,y,N,k=z("teams / role / "+e.team.role),P=e.team.charts;function x(t){return"member"===t.team.role?Qt:Kt}var E=x(e),A=E(t,e),C=e.team.id===e.currentTeam&&Vt(),L=e.user.isAdmin&&Xt(0,e);function H(t){return"member"===t.team.role?te:Zt}var M=H(e),S=M(t,e);function q(t){return"owner"!==t.team.role?ae:ne}var O=q(e),j=O(t,e);return{c:function(){n=d("tr"),a=d("td"),A.c(),s=f(" "),C&&C.c(),c=f("\n            "),L&&L.c(),u=f("\n            "),l=d("td"),m=f("\n            "),h=d("td"),p=d("a"),v=f(P),_=f("\n            "),w=d("td"),S.c(),y=f("\n\n            "),N=d("td"),j.c(),p.href=b="/team/"+e.team.id,T(n,"current",e.team.id===e.currentTeam)},m:function(t,e){i(t,n,e),r(n,a),A.m(a,null),r(a,s),C&&C.m(a,null),r(n,c),L&&L.m(n,null),r(n,u),r(n,l),l.innerHTML=k,r(n,m),r(n,h),r(h,p),r(p,v),r(n,_),r(n,w),S.m(w,null),r(n,y),r(n,N),j.m(N,null)},p:function(e,r){E===(E=x(r))&&A?A.p(e,r):(A.d(1),(A=E(t,r)).c(),A.m(a,s)),r.team.id===r.currentTeam?C||((C=Vt()).c(),C.m(a,null)):C&&(C.d(1),C=null),r.user.isAdmin?L?L.p(e,r):((L=Xt(0,r)).c(),L.m(n,u)):L&&(L.d(1),L=null),e.teams&&k!==(k=z("teams / role / "+r.team.role))&&(l.innerHTML=k),e.teams&&P!==(P=r.team.charts)&&g(v,P),e.teams&&b!==(b="/team/"+r.team.id)&&(p.href=b),M===(M=H(r))&&S?S.p(e,r):(S.d(1),(S=M(t,r)).c(),S.m(w,null)),O===(O=q(r))&&j?j.p(e,r):(j.d(1),(j=O(t,r)).c(),j.m(N,null)),(e.teams||e.currentTeam)&&T(n,"current",r.team.id===r.currentTeam)},d:function(t){t&&o(n),A.d(),C&&C.d(),L&&L.d(),S.d(),j.d()}}}function ie(t,e){var n,a,s,c=z("account / my-teams / create");function u(t){return t.createTeam?oe:se}var l=u(e),m=l(t,e);return{c:function(){n=d("div"),a=d("h3"),s=f("\n        "),m.c(),a.className="svelte-t3x94h",n.className="span5"},m:function(t,e){i(t,n,e),r(n,a),a.innerHTML=c,r(n,s),m.m(n,null)},p:function(e,a){l===(l=u(a))&&m?m.p(e,a):(m.d(1),(m=l(t,a)).c(),m.m(n,null))},d:function(t){t&&o(n),m.d()}}}function oe(t,e){var n,a,s,c,u,m,g,b,_,w,T,y,N,k=z("team-create / p"),P=!1,x=z("team-create / button"),E=z("Return");function A(){P=!0,t.set({newTeamName:s.value}),P=!1}var C={label:z("team-create / name"),help:z("team-create / help")},L=new V({root:t.root,store:t.store,slots:{default:l()},data:C}),H=e.user.isAdmin&&ce(t,e);function M(t){return t.awaitCreateTeam?le:ue}var S=M(e),q=S(t,e);function O(n){t.createTeam(e.newTeamName,e.newTeamSlug)}function j(e){t.set({createTeam:!1})}return{c:function(){n=d("p"),a=f("\n\n        "),s=d("input"),L._fragment.c(),u=f("\n        "),H&&H.c(),m=f("\n\n        "),g=d("button"),q.c(),b=f("   "),_=f(x),T=f("\n        "),y=d("button"),N=f(E),h(s,"input",A),v(s,"type","text"),s.placeholder=z("team-create / untitled"),s.maxLength=c=e.user.isAdmin?80:50,h(g,"click",O),g.className="btn btn-primary",g.disabled=w=!e.newTeamName.length,h(y,"click",j),y.className="btn"},m:function(t,o){i(t,n,o),n.innerHTML=k,i(t,a,o),r(L._slotted.default,s),s.value=e.newTeamName,L._mount(t,o),i(t,u,o),H&&H.m(t,o),i(t,m,o),i(t,g,o),q.m(g,null),r(g,b),r(g,_),i(t,T,o),i(t,y,o),r(y,N)},p:function(n,a){e=a,!P&&n.newTeamName&&(s.value=e.newTeamName),n.user&&c!==(c=e.user.isAdmin?80:50)&&(s.maxLength=c),e.user.isAdmin?H?H.p(n,e):((H=ce(t,e)).c(),H.m(m.parentNode,m)):H&&(H.d(1),H=null),S===(S=M(e))&&q?q.p(n,e):(q.d(1),(q=S(t,e)).c(),q.m(g,b)),n.newTeamName&&w!==(w=!e.newTeamName.length)&&(g.disabled=w)},d:function(t){t&&(o(n),o(a)),p(s,"input",A),L.destroy(t),t&&o(u),H&&H.d(t),t&&(o(m),o(g)),q.d(),p(g,"click",O),t&&(o(T),o(y)),p(y,"click",j)}}}function se(t,e){var n,a,s,c,u,l,m,v=z("account / my-teams / why-teams"),g=z("account / my-teams / create-btn");function b(e){t.set({createTeam:!0})}return{c:function(){n=d("div"),a=d("p"),s=f("\n            "),c=d("button"),u=d("i"),l=f(" "),m=d("noscript"),u.className="fa fa-plus fa-fw",h(c,"click",b),c.className="btn btn-large",T(c,"btn-primary",!e.teams.length),n.className="hed svelte-t3x94h"},m:function(t,e){i(t,n,e),r(n,a),a.innerHTML=v,r(n,s),r(n,c),r(c,u),r(c,l),r(c,m),m.insertAdjacentHTML("afterend",g)},p:function(t,e){t.teams&&T(c,"btn-primary",!e.teams.length)},d:function(t){t&&o(n),p(c,"click",b)}}}function ce(t,e){var n,a=!1;function i(){a=!0,t.set({newTeamSlug:n.value}),a=!1}var o={label:z("team-create / slug"),help:z("team-create / slug-help")},s=new V({root:t.root,store:t.store,slots:{default:l()},data:o});return{c:function(){n=d("input"),s._fragment.c(),h(n,"input",i),v(n,"type","text"),n.placeholder=e.autoslug},m:function(t,a){r(s._slotted.default,n),n.value=e.newTeamSlug,s._mount(t,a)},p:function(t,e){!a&&t.newTeamSlug&&(n.value=e.newTeamSlug),t.autoslug&&(n.placeholder=e.autoslug)},d:function(t){p(n,"input",i),s.destroy(t)}}}function ue(e,n){var a;return{c:function(){(a=d("i")).className="fa fa-plus fa-fw"},m:function(t,e){i(t,a,e)},p:t,d:function(t){t&&o(a)}}}function le(t,e){var n,a,r={component:t,ctx:e,current:null,pending:me,then:fe,catch:de,value:"null",error:"null"};return E(a=e.awaitCreateTeam,r),{c:function(){n=m(),r.block.c()},m:function(t,e){i(t,n,e),r.block.m(t,r.anchor=e),r.mount=function(){return n.parentNode},r.anchor=n},p:function(t,n){e=n,r.ctx=e,"awaitCreateTeam"in t&&a!==(a=e.awaitCreateTeam)&&E(a,r)},d:function(t){t&&o(n),r.block.d(t),r=null}}}function de(e,n){return{c:t,m:t,d:t}}function fe(t,e){var n;return{c:function(){(n=d("i")).className="fa fa-check fa-fw"},m:function(t,e){i(t,n,e)},d:function(t){t&&o(n)}}}function me(t,e){var n,a;return{c:function(){n=f(" "),(a=d("i")).className="fa fa-spinner fa-spin"},m:function(t,e){i(t,n,e),i(t,a,e)},d:function(t){t&&(o(n),o(a))}}}function he(t,e){var n,a,s,c,u,m,h,p=z("account / my-teams / select-active"),v=z("account / my-teams / what-is-active"),g={},b={width:"250px",options:e.teamOptions};void 0!==e.currentTeam&&(b.value=e.currentTeam,g.value=!0);var _=new Ft({root:t.root,store:t.store,data:b,_bind:function(e,n){var a={};!g.value&&e.value&&(a.currentTeam=n.value),t._set(a),g={}}});t.root._beforecreate.push((function(){_._bind({value:1},_.get())}));var w=e.awaitActiveTeam&&pe(t,e),T={width:"350px",help:z("account / my-teams / active-hint")},y=new V({root:t.root,store:t.store,slots:{default:l()},data:T});return{c:function(){n=d("div"),a=d("h3"),s=f("\n        "),c=d("p"),u=f("\n        "),m=d("div"),_._fragment.c(),h=f("\n                "),w&&w.c(),y._fragment.c(),a.className="svelte-t3x94h",m.className="flex",n.className="span5"},m:function(t,e){i(t,n,e),r(n,a),a.innerHTML=p,r(n,s),r(n,c),c.innerHTML=v,r(n,u),r(y._slotted.default,m),_._mount(m,null),r(m,h),w&&w.m(m,null),y._mount(n,null)},p:function(n,a){e=a;var r={};n.teamOptions&&(r.options=e.teamOptions),!g.value&&n.currentTeam&&(r.value=e.currentTeam,g.value=void 0!==e.currentTeam),_._set(r),g={},e.awaitActiveTeam?w?w.p(n,e):((w=pe(t,e)).c(),w.m(m,null)):w&&(w.d(1),w=null)},d:function(t){t&&o(n),_.destroy(),w&&w.d(),y.destroy()}}}function pe(t,e){var n,a,r={component:t,ctx:e,current:null,pending:be,then:ge,catch:ve,value:"null",error:"null"};return E(a=e.awaitActiveTeam,r),{c:function(){n=m(),r.block.c()},m:function(t,e){i(t,n,e),r.block.m(t,r.anchor=e),r.mount=function(){return n.parentNode},r.anchor=n},p:function(t,n){e=n,r.ctx=e,"awaitActiveTeam"in t&&a!==(a=e.awaitActiveTeam)&&E(a,r)},d:function(t){t&&o(n),r.block.d(t),r=null}}}function ve(e,n){return{c:t,m:t,d:t}}function ge(e,n){return{c:t,m:t,d:t}}function be(t,e){var n,a;return{c:function(){n=f(" "),(a=d("i")).className="fa fa-spinner fa-spin"},m:function(t,e){i(t,n,e),i(t,a,e)},d:function(t){t&&(o(n),o(a))}}}function _e(t){var a=this;q(this,t),this._state=e({teams:[],awaitActiveTeam:null,awaitCreateTeam:null,currentTeam:"",createTeam:!1,newTeamName:"",newTeamSlug:""},t.data),this._recompute({teams:1,newTeamName:1},this._state),this._intro=!0,this._handlers.state=[Yt],Yt.call(this,{changed:n({},this._state),current:this._state}),this._fragment=function(t,e){var n,a,s,c,u,l=z("account / my-teams");function m(t){return t.teams.length?$t:Gt}var h=m(e),p=h(t,e),v=e.user.isAdmin&&ie(t,e),g=e.teams.length>0&&he(t,e);return{c:function(){n=d("h2"),a=f("\n\n"),p.c(),s=f("\n\n"),c=d("div"),v&&v.c(),u=f(" "),g&&g.c(),c.className="row"},m:function(t,e){i(t,n,e),n.innerHTML=l,i(t,a,e),p.m(t,e),i(t,s,e),i(t,c,e),v&&v.m(c,null),r(c,u),g&&g.m(c,null)},p:function(e,n){h===(h=m(n))&&p?p.p(e,n):(p.d(1),(p=h(t,n)).c(),p.m(s.parentNode,s)),n.user.isAdmin?v?v.p(e,n):((v=ie(t,n)).c(),v.m(c,u)):v&&(v.d(1),v=null),n.teams.length>0?g?g.p(e,n):((g=he(t,n)).c(),g.m(c,null)):g&&(g.d(1),g=null)},d:function(t){t&&(o(n),o(a)),p.d(t),t&&(o(s),o(c)),v&&v.d(),g&&g.d()}}}(this,this._state),this.root._oncreate.push((function(){a.fire("update",{changed:n({},a._state),current:a._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this))}e(_e.prototype,R),e(_e.prototype,Dt),_e.prototype._recompute=function(t,e){t.teams&&this._differs(e.teamOptions,e.teamOptions=e.teams.map((function(t){return{value:t.id,label:t.name}})).concat({value:null,label:z("nav / no-team")}))&&(t.teamOptions=!0),t.newTeamName&&this._differs(e.autoslug,e.autoslug=function(t){return t.newTeamName.toLowerCase().replace(/\W/g,"")}(e))&&(t.autoslug=!0)};var we={title:z("account / profile"),id:"profile",icon:"im im-user-settings",ui:ht,data:{}},Te={title:z("account / my-teams"),id:"teams",icon:"im im-users",ui:_e,data:{}};function ye(){var t=this,e=window.location.pathname.split("/").slice(1)[1]||"profile";dw.backend.__svelteApps.account=this;var n=this.get(),a=n.email,r=n.user,i=n.userId,o=n.groups,s=n.teams,c=n.adminTeams,u=n.pages,l=n.currentTeam;u.length&&(o[0].tabs.push.apply(o[0].tabs,u),this.set({groups:o})),s.length&&(o[0].tabs.splice(1,0,Te),this.set({groups:o})),c.length&&(o.push({title:z("account / settings / team"),tabs:[]}),c.forEach((function(t){var e=t.Id,n=t.Name;o[1].tabs.push({title:F(n,10,4),url:"/team/"+e+"/settings",icon:"im im-users"})})),this.set({groups:o})),we.data={email:a,userId:i,user:r},Te.data={teams:s,currentTeam:l,user:r};var d=!1;o.forEach((function(n){n.tabs.forEach((function(n){n.id===e&&(t.refs.navTabs.activateTab(n),d=!0)}))})),d||this.set({activeTab:we})}function Ne(t){var e=t.changed,n=t.current;e.activeTab&&n.activeTab&&window.history.pushState({id:n.activeTab.id},"","/account/"+n.activeTab.id)}function ke(t,e,n){var a=Object.create(t);return a.team=e[n],a}function Pe(t,e){var n,a,s,c,u,l,m,h,p=F(e.team.name,20,10);return{c:function(){n=d("div"),a=f("You have been invited to join the team "),s=d("b"),c=f(p),u=f(". Click here to\n        "),l=d("a"),m=f("accept the invitation"),l.href=h="/organization-invite/"+e.team.token,l.className="btn btn-primary",n.className="alert alert-info"},m:function(t,e){i(t,n,e),r(n,a),r(n,s),r(s,c),r(n,u),r(n,l),r(l,m)},p:function(t,e){t.invitations&&p!==(p=F(e.team.name,20,10))&&g(c,p),t.invitations&&h!==(h="/organization-invite/"+e.team.token)&&(l.href=h)},d:function(t){t&&o(n)}}}function xe(t){var a=this;q(this,t),this.refs={},this._state=e({hash:"profile",activeTab:null,activeData:{},groups:[{title:z("account / settings / personal"),tabs:[we]}]},t.data),this._recompute({email:1,user:1,userId:1,teams:1,currentTeam:1},this._state),this._intro=!0,this._handlers.state=[Ne],Ne.call(this,{changed:n({},this._state),current:this._state}),this._fragment=function(t,e){for(var n,a,s,c,l,m=z("account / settings"),h={},p=e.invitations,v=[],g=0;g<p.length;g+=1)v[g]=Pe(t,ke(e,p,g));var b={basePath:"account",groups:e.groups};void 0!==e.activeTab&&(b.activeTab=e.activeTab,h.activeTab=!0);var _=new yt({root:t.root,store:t.store,data:b,_bind:function(e,n){var a={};!h.activeTab&&e.activeTab&&(a.activeTab=n.activeTab),t._set(a),h={}}});return t.root._beforecreate.push((function(){_._bind({activeTab:1},_.get())})),t.refs.navTabs=_,{c:function(){n=d("div"),a=d("h1"),s=f(m),c=f("\n    ");for(var t=0;t<v.length;t+=1)v[t].c();l=f("\n    "),_._fragment.c(),a.className="title",n.className="admin svelte-r5gcuw"},m:function(t,e){i(t,n,e),r(n,a),r(a,s),r(n,c);for(var o=0;o<v.length;o+=1)v[o].m(n,null);r(n,l),_._mount(n,null)},p:function(a,r){if(e=r,a.invitations){p=e.invitations;for(var i=0;i<p.length;i+=1){var o=ke(e,p,i);v[i]?v[i].p(a,o):(v[i]=Pe(t,o),v[i].c(),v[i].m(n,l))}for(;i<v.length;i+=1)v[i].d(1);v.length=p.length}var s={};a.groups&&(s.groups=e.groups),!h.activeTab&&a.activeTab&&(s.activeTab=e.activeTab,h.activeTab=void 0!==e.activeTab),_._set(s),h={}},d:function(e){e&&o(n),u(v,e),_.destroy(),t.refs.navTabs===_&&(t.refs.navTabs=null)}}}(this,this._state),this.root._oncreate.push((function(){ye.call(a),a.fire("update",{changed:n({},a._state),current:a._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this))}function Ee(t,n){this._handlers={},this._dependents=[],this._computed=A(),this._sortedComputedProperties=[],this._state=e({},t),this._differs=n&&n.immutable?L:C}e(xe.prototype,R),e(xe.prototype,{}),xe.prototype._recompute=function(t,e){var n,a;(t.email||t.user||t.userId||t.teams||t.currentTeam)&&this._differs(e.data,e.data=(a=(n=e).email,{user:n.user,email:a,userId:n.userId,teams:n.teams,currentTeam:n.currentTeam}))&&(t.data=!0)},e(Ee.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var a=t[n];e["$"+a]=this._state[a]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_set:function(t,n){var a=this,r=this._state;this._state=e(e({},r),t);for(var i=0;i<this._sortedComputedProperties.length;i+=1)this._sortedComputedProperties[i].update(this._state,n);this.fire("state",{changed:n,previous:r,current:this._state}),this._dependents.filter((function(t){for(var e={},r=!1,i=0;i<t.props.length;i+=1){var o=t.props[i];o in n&&(e["$"+o]=a._state[o],r=!0)}if(r)return t.component._stage(e),!0})).forEach((function(t){t.component.set({})})),this.fire("update",{changed:n,previous:r,current:this._state})},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],a=A();function r(i){var o=e[i];o&&(o.deps.forEach((function(e){if(e===t)throw new Error("Cyclical dependency detected between "+e+" <-> "+i);r(e)})),a[i]||(a[i]=!0,n.push(o)))}for(var i in this._computed)r(t=i)},compute:function(t,n,a){var r,i=this,o={deps:n,update:function(e,o,s){var c=n.map((function(t){return t in o&&(s=!0),e[t]}));if(s){var u=a.apply(null,c);i._differs(u,r)&&(r=u,o[t]=!0,e[t]=r)}}};this._computed[t]=o,this._sortComputedProperties();var s=e({},this._state),c={};o.update(s,c,!0),this._set(s,c)},fire:H,get:S,on:O,set:function(t){var e=this._state,n=this._changed={},a=!1;for(var r in t){if(this._computed[r])throw new Error("'"+r+"' is a read-only computed property");this._differs(t[r],e[r])&&(n[r]=a=!0)}a&&this._set(t,n)}});return{App:xe,data:{chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0},store:new Ee({})}}));
