!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("svelte/account",e):(t=t||self).account=e()}(this,(function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){for(var n in e)t[n]=1;return t}function a(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n)}function o(t){t.parentNode.removeChild(t)}function s(t,e){for(;t.nextSibling;)e.appendChild(t.nextSibling)}function i(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function c(){return document.createDocumentFragment()}function u(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function f(){return document.createComment("")}function m(t,e,n,a){t.addEventListener(e,n,a)}function d(t,e,n,a){t.removeEventListener(e,n,a)}function h(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function p(t,e){t.data=""+e}function v(t,e,n){t.style.setProperty(e,n)}function g(t,e){for(var n=0;n<t.options.length;n+=1){var a=t.options[n];if(a.__value===e)return void(a.selected=!0)}}function b(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function w(t,e,n){t.classList[n?"add":"remove"](e)}function _(t,n){var a,r,o=n.token={};function s(t,a,r,s){var i;if(n.token===o){n.resolved=r&&((i={})[r]=s,i);var c=e(e({},n.ctx),n.resolved),u=t&&(n.current=t)(n.component,c);n.block&&(n.blocks?n.blocks.forEach((function(t,e){e!==a&&t&&t.o((function(){t.d(1),n.blocks[e]=null}))})):n.block.d(1),u.c(),u[u.i?"i":"m"](n.mount(),n.anchor),n.component.root.set({})),n.block=u,n.blocks&&(n.blocks[a]=u)}}if((r=t)&&"function"==typeof r.then){if(t.then((function(t){s(n.then,1,n.value,t)}),(function(t){s(n.catch,2,n.error,t)})),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,t),!0;n.resolved=((a={})[n.value]=t,a)}}function T(){return Object.create(null)}function y(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function N(t,e){return t!=t?e==e:t!==e}function P(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var a=0;a<n.length;a+=1){var r=n[a];if(!r.__calling)try{r.__calling=!0,r.call(this,e)}finally{r.__calling=!1}}}function k(t){t._lock=!0,L(t._beforecreate),L(t._oncreate),L(t._aftercreate),t._lock=!1}function E(){return this._state}function A(t,e){t._handlers=T(),t._slots=T(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function x(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function L(t){for(;t&&t.length;)t.shift()()}var C={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:E,fire:P,on:x,set:function(t){this._set(e({},t)),this.root._lock||k(this.root)},_recompute:t,_set:function(t){var n=this._state,a={},r=!1;for(var o in t=e(this._staged,t),this._staged={},t)this._differs(t[o],n[o])&&(a[o]=r=!0);r&&(this._state=e(e({},n),t),this._recompute(a,this._state),this._bind&&this._bind(a,this._state),this._fragment&&(this.fire("state",{changed:a,current:this._state,previous:n}),this._fragment.p(a,this._state),this.fire("update",{changed:a,current:this._state,previous:n})))},_stage:function(t){e(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:y},j={};function H(t){void 0===t&&(t="core"),"chart"===t?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(j[t]=window.__dw.vis.meta.locale||{}):j[t]="core"===t?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[t])}function q(t,e){var n=arguments;if(void 0===e&&(e="core"),t=t.trim(),j[e]||H(e),!j[e][t])return"MISSING:"+t;var a=j[e][t];return"string"==typeof a&&arguments.length>2&&(a=a.replace(/\$(\d)/g,(function(t,e){return e=2+Number(e),void 0===n[e]?t:n[e]}))),a}function M(t,e,n){return void 0===e&&(e=11),void 0===n&&(n=7),"string"!=typeof t?t:t.length<e+n+3?t:t.substr(0,e).trim()+"…"+t.substr(t.length-n).trim()}function O(t,e){void 0===e&&(e={});var n=Object.assign({},{payload:null,raw:!1,method:"GET",baseUrl:"//"+dw.backend.__api_domain,mode:"cors",credentials:"include"},e,{headers:Object.assign({},{"Content-Type":"application/json"},e.headers)}),a=n.payload,r=n.baseUrl,o=n.raw,s=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&-1===e.indexOf(a)&&(n[a]=t[a]);return n}(n,["payload","baseUrl","raw"]),i=r.replace(/\/$/,"")+"/"+t.replace(/^\//,"");return a&&(s.body=JSON.stringify(a)),window.fetch(i,s).then((function(t){if(o)return t;if(!t.ok)throw new I(t);if(204!==t.status){var e=t.headers.get("content-type").split(";")[0];return"application/json"===e?t.json():"image/png"===e||"application/pdf"===e?t.blob():t.text()}}))}O.get=S("GET"),O.patch=S("PATCH"),O.put=S("PUT"),O.post=S("POST"),O.head=S("HEAD");function S(t){return function(e,n){if(n&&n.method)throw new Error("Setting option.method is not allowed in httpReq."+t.toLowerCase()+"()");return O(e,Object.assign({},n,{method:t}))}}O.delete=S("DELETE");var I=function(t){function e(e){t.call(this),this.name="HttpReqError",this.status=e.status,this.statusText=e.statusText,this.message="["+e.status+"] "+e.statusText,this.response=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);function U(t,e,n){var a;return""===t?a=dw.backend.messages.provideCurPwd:e.length<10?a=dw.backend.messages.pwdTooShort.replace("%num",10):e!==n&&(a=dw.backend.messages.pwdMismatch),a||!1}function D(t,e){var n;return{c:function(){(n=u("label")).className="control-label svelte-4hqcdn"},m:function(t,a){r(t,n,a),n.innerHTML=e.label},p:function(t,e){t.label&&(n.innerHTML=e.label)},d:function(t){t&&o(n)}}}function Y(t,e){var n;return{c:function(){(n=u("div")).className="help success svelte-4hqcdn"},m:function(t,a){r(t,n,a),n.innerHTML=e.success},p:function(t,e){t.success&&(n.innerHTML=e.success)},d:function(t){t&&o(n)}}}function R(t,e){var n;return{c:function(){(n=u("div")).className="help error svelte-4hqcdn"},m:function(t,a){r(t,n,a),n.innerHTML=e.error},p:function(t,e){t.error&&(n.innerHTML=e.error)},d:function(t){t&&o(n)}}}function G(t,e){var n;return{c:function(){(n=u("div")).className="help svelte-4hqcdn"},m:function(t,a){r(t,n,a),n.innerHTML=e.help},p:function(t,e){t.help&&(n.innerHTML=e.help)},d:function(t){t&&o(n)}}}function J(t){var n,s,i,c,f,m,d,h,p,g,b,_,T;A(this,t),this._state=e({label:"",help:"",error:!1,success:!1,width:"auto"},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=(n=this,s=this._state,p=n._slotted.default,g=s.label&&D(0,s),b=s.success&&Y(0,s),_=s.error&&R(0,s),T=!s.success&&!s.error&&s.help&&G(0,s),{c:function(){i=u("div"),g&&g.c(),c=l("\n    "),f=u("div"),m=l("\n    "),b&&b.c(),d=l(" "),_&&_.c(),h=l(" "),T&&T.c(),f.className="form-controls svelte-4hqcdn",i.className="form-block svelte-4hqcdn",v(i,"width",s.width),w(i,"success",s.success),w(i,"error",s.error)},m:function(t,e){r(t,i,e),g&&g.m(i,null),a(i,c),a(i,f),p&&a(f,p),a(i,m),b&&b.m(i,null),a(i,d),_&&_.m(i,null),a(i,h),T&&T.m(i,null)},p:function(t,e){e.label?g?g.p(t,e):((g=D(0,e)).c(),g.m(i,c)):g&&(g.d(1),g=null),e.success?b?b.p(t,e):((b=Y(0,e)).c(),b.m(i,d)):b&&(b.d(1),b=null),e.error?_?_.p(t,e):((_=R(0,e)).c(),_.m(i,h)):_&&(_.d(1),_=null),e.success||e.error||!e.help?T&&(T.d(1),T=null):T?T.p(t,e):((T=G(0,e)).c(),T.m(i,null)),t.width&&v(i,"width",e.width),t.success&&w(i,"success",e.success),t.error&&w(i,"error",e.error)},d:function(t){t&&o(i),g&&g.d(),p&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(f,p),b&&b.d(),_&&_.d(),T&&T.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}e(J.prototype,C);var $={changeEmail:async function(){var t=this.get().email;this.set({savingEmail:!0});var e=[],n=[];try{var a=await O.patch("/v3/me",{payload:{email:t}});e.push("Your email has been changed successfully. You will receive an email with a confirmation link."),this.set({email:a.email})}catch(t){if("HttpReqError"===t.name){var r=await t.response.json();"Invalid request payload input"===r.message?n.push(q("account / change-email / error / invalid-email")):n.push(r.message?q("account / change-email / error / "+r.message):t.message)}else n.push("Unknown error: "+t)}this.set({savingEmail:!1}),n.length?this.set({errors:n}):this.set({changeEmail:!1,messages:e,errors:[]})},changePassword:async function(){var t=this.get(),e=t.currentPassword,n=t.newPassword1,a=U(e,n,t.newPassword2);if(!1===a){this.set({savingPassword:!0});var r={password:n,oldPassword:e},o=[],s=[];try{await O.patch("/v3/me",{payload:r}),o.push("Your password has been changed!")}catch(t){if("HttpReqError"===t.name){var i=await t.response.json();s.push(i.message||t.message)}else s.push("Unknown error: "+t)}0===s.length?this.set({changePassword:!1,messages:o,errors:[]}):this.set({errors:s}),this.set({savingPassword:!1,currentPassword:"",newPassword1:"",newPassword2:""})}else{var c=[a];this.set({errors:c})}},deleteAccount:async function(){var t=this.get(),e=t.confirmPassword,n=t.confirmEmail;this.set({deletingAccount:!0});var a=[];try{await O.delete("/v3/me",{payload:{password:e,email:n}})}catch(t){if("HttpReqError"===t.name){var r=await t.response.json();a.push(r.message||t.message)}else a.push("Unknown error: "+t)}this.set({deletingAccount:!1}),a.length?this.set({errors:a}):this.set({deleteAccount2:!1,deleteAccount3:!0})}};function B(t,e,n){var a=Object.create(t);return a.message=e[n],a}function W(t,e,n){var a=Object.create(t);return a.message=e[n],a}function F(t,e){for(var n,s,c,l,f=e.messages,m=[],d=0;d<f.length;d+=1)m[d]=z(t,W(e,f,d));return{c:function(){n=u("div"),s=u("div"),c=u("div"),l=u("ul");for(var t=0;t<m.length;t+=1)m[t].c();v(l,"margin-bottom","0"),c.className="alert alert-success",s.className="span6 offset3",n.className="row",v(n,"margin-top","20px")},m:function(t,e){r(t,n,e),a(n,s),a(s,c),a(c,l);for(var o=0;o<m.length;o+=1)m[o].m(l,null)},p:function(e,n){if(e.messages){f=n.messages;for(var a=0;a<f.length;a+=1){var r=W(n,f,a);m[a]?m[a].p(e,r):(m[a]=z(t,r),m[a].c(),m[a].m(l,null))}for(;a<m.length;a+=1)m[a].d(1);m.length=f.length}},d:function(t){t&&o(n),i(m,t)}}}function z(t,e){var n,a=e.message;return{c:function(){n=u("li")},m:function(t,e){r(t,n,e),n.innerHTML=a},p:function(t,e){t.messages&&a!==(a=e.message)&&(n.innerHTML=a)},d:function(t){t&&o(n)}}}function K(t,e){var n,a=e.errors.join("");return{c:function(){(n=u("div")).className="alert alert-warning"},m:function(t,e){r(t,n,e),n.innerHTML=a},p:function(t,e){t.errors&&a!==(a=e.errors.join(""))&&(n.innerHTML=a)},d:function(t){t&&o(n)}}}function Q(e,n){var s,i,c=q("account / email");function f(t){e.set({changeEmail:!0})}return{c:function(){s=u("button"),i=l(c),m(s,"click",f),s.className="btn btn-save btn-default"},m:function(t,e){r(t,s,e),a(s,i)},p:t,d:function(t){t&&o(s),d(s,"click",f)}}}function V(t,e){var n,s,i,c,f,h,p,v,g=q("Back"),b=q("account / email");function w(e){t.set({changeEmail:!1})}function _(e){t.changeEmail()}return{c:function(){n=u("button"),s=l(g),i=l("\n            "),c=u("button"),f=u("i"),p=l("  "),v=l(b),m(n,"click",w),n.className="btn btn-default",f.className=h="fa "+(e.savingEmail?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q",m(c,"click",_),c.className="btn btn-save btn-primary"},m:function(t,e){r(t,n,e),a(n,s),r(t,i,e),r(t,c,e),a(c,f),a(c,p),a(c,v)},p:function(t,e){t.savingEmail&&h!==(h="fa "+(e.savingEmail?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q")&&(f.className=h)},d:function(t){t&&o(n),d(n,"click",w),t&&(o(i),o(c)),d(c,"click",_)}}}function X(t,e){var n,s,i,f,p,v,g,b,w,_,T,y,N,P,k,E,A,x,L,C,j=q("account / password"),H=q("Back"),M=!1,O=!1,S=!1,I=q("account / password");function D(e){t.set({changePassword:!1})}var Y=e.changePassword&&e.errors&&e.errors.length&&tt(t,e);function R(){M=!0,t.set({currentPassword:b.value}),M=!1}var G={label:q("Current Password"),help:q("account / password / current-password-note")},$=new J({root:t.root,store:t.store,slots:{default:c()},data:G});function B(){O=!0,t.set({newPassword1:_.value}),O=!1}var W={error:!!e.currentPassword&&U(e.currentPassword,e.newPassword1,e.newPassword2),label:q("New Password"),help:"Your password must have at least 4 characters"},F=new J({root:t.root,store:t.store,slots:{default:c()},data:W});function z(){S=!0,t.set({newPassword2:y.value}),S=!1}var K={error:!!e.currentPassword&&U(e.currentPassword,e.newPassword1,e.newPassword2),label:q("(repeat)"),help:""},Q=new J({root:t.root,store:t.store,slots:{default:c()},data:K});function V(e){t.changePassword()}return{c:function(){n=u("h3"),s=l(j),i=l("\n            "),f=u("button"),p=l(H),v=l("\n        "),Y&&Y.c(),g=l("\n        "),b=u("input"),$._fragment.c(),w=l("\n        "),_=u("input"),F._fragment.c(),T=l("\n        "),y=u("input"),Q._fragment.c(),N=l("\n\n        "),P=u("button"),k=u("i"),A=l("  "),x=l(I),L=l("\n        "),C=u("hr"),m(f,"click",D),f.className="btn btn-save btn-default btn-back",m(b,"input",R),h(b,"type","password"),b.className="input-xlarge",m(_,"input",B),h(_,"type","password"),_.className="input-xlarge",m(y,"input",z),h(y,"type","password"),y.className="input-xlarge",k.className=E="fa "+(e.savingPassword?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q",m(P,"click",V),P.className="btn btn-primary"},m:function(t,o){r(t,n,o),a(n,s),a(n,i),a(n,f),a(f,p),r(t,v,o),Y&&Y.m(t,o),r(t,g,o),a($._slotted.default,b),b.value=e.currentPassword,$._mount(t,o),r(t,w,o),a(F._slotted.default,_),_.value=e.newPassword1,F._mount(t,o),r(t,T,o),a(Q._slotted.default,y),y.value=e.newPassword2,Q._mount(t,o),r(t,N,o),r(t,P,o),a(P,k),a(P,A),a(P,x),r(t,L,o),r(t,C,o)},p:function(e,n){n.changePassword&&n.errors&&n.errors.length?Y?Y.p(e,n):((Y=tt(t,n)).c(),Y.m(g.parentNode,g)):Y&&(Y.d(1),Y=null),!M&&e.currentPassword&&(b.value=n.currentPassword),!O&&e.newPassword1&&(_.value=n.newPassword1);var a={};(e.currentPassword||e.newPassword1||e.newPassword2)&&(a.error=!!n.currentPassword&&U(n.currentPassword,n.newPassword1,n.newPassword2)),F._set(a),!S&&e.newPassword2&&(y.value=n.newPassword2);var r={};(e.currentPassword||e.newPassword1||e.newPassword2)&&(r.error=!!n.currentPassword&&U(n.currentPassword,n.newPassword1,n.newPassword2)),Q._set(r),e.savingPassword&&E!==(E="fa "+(n.savingPassword?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q")&&(k.className=E)},d:function(t){t&&o(n),d(f,"click",D),t&&o(v),Y&&Y.d(t),t&&o(g),d(b,"input",R),$.destroy(t),t&&o(w),d(_,"input",B),F.destroy(t),t&&o(T),d(y,"input",z),Q.destroy(t),t&&(o(N),o(P)),d(P,"click",V),t&&(o(L),o(C))}}}function Z(e,n){var r,o,s,i,f=q("account / password");function p(t){e.set({changePassword:!0})}var v={label:q("Password"),help:""},g=new J({root:e.root,store:e.store,slots:{default:c()},data:v});return{c:function(){r=u("input"),o=l("\n            "),s=u("button"),i=l(f),g._fragment.c(),r.disabled=!0,r.value="abcdefgh",h(r,"type","password"),m(s,"click",p),s.className="btn btn-save btn-default"},m:function(t,e){a(g._slotted.default,r),a(g._slotted.default,o),a(g._slotted.default,s),a(s,i),g._mount(t,e)},p:t,d:function(t){d(s,"click",p),g.destroy(t)}}}function tt(t,e){for(var n,s,c=e.errors,l=[],f=0;f<c.length;f+=1)l[f]=et(t,B(e,c,f));return{c:function(){n=u("div"),s=u("ul");for(var t=0;t<l.length;t+=1)l[t].c();v(s,"margin-bottom","0"),n.className="alert"},m:function(t,e){r(t,n,e),a(n,s);for(var o=0;o<l.length;o+=1)l[o].m(s,null)},p:function(e,n){if(e.errors){c=n.errors;for(var a=0;a<c.length;a+=1){var r=B(n,c,a);l[a]?l[a].p(e,r):(l[a]=et(t,r),l[a].c(),l[a].m(s,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=c.length}},d:function(t){t&&o(n),i(l,t)}}}function et(t,e){var n,a=e.message;return{c:function(){n=u("li")},m:function(t,e){r(t,n,e),n.innerHTML=a},p:function(t,e){t.errors&&a!==(a=e.message)&&(n.innerHTML=a)},d:function(t){t&&o(n)}}}function nt(e,n){var r,o,s=q("account / delete");function i(t){e.set({deleteAccount:!0})}var f=new J({root:e.root,store:e.store,slots:{default:c()},data:{label:"Delete account",help:""}});return{c:function(){r=u("button"),o=l(s),f._fragment.c(),m(r,"click",i),r.className="btn btn-danger",h(r,"href","#")},m:function(t,e){a(f._slotted.default,r),a(r,o),f._mount(t,e)},p:t,d:function(t){d(r,"click",i),f.destroy(t)}}}function at(e,n){var s,i,c,f,h,p,v,g,b,w,_,T,y,N,P,k,E=q("account / confirm-account-deletion"),A=q("account / confirm-account-deletion / no"),x=q("account / or"),L=q("account / confirm-account-deletion / yes");function C(t){e.set({deleteAccount:!1})}function j(t){e.set({deleteAccount:!1,deleteAccount2:!0})}return{c:function(){s=u("h3"),i=u("i"),c=l(" "),f=l(E),h=l("\n        "),p=u("button"),v=u("i"),g=l("   "),b=l(A),w=l("\n\n        "),_=l(x),T=l("\n\n        "),y=u("button"),N=u("i"),P=l("   "),k=l(L),i.className="fa fa-times svelte-19q3a7q",s.className="svelte-19q3a7q",v.className="fa fa-chevron-left",m(p,"click",C),p.className="btn btn-back btn-primary",N.className="fa fa-times",m(y,"click",j),y.className="btn btn-default"},m:function(t,e){r(t,s,e),a(s,i),a(s,c),a(s,f),r(t,h,e),r(t,p,e),a(p,v),a(p,g),a(p,b),r(t,w,e),r(t,_,e),r(t,T,e),r(t,y,e),a(y,N),a(y,P),a(y,k)},p:t,d:function(t){t&&(o(s),o(h),o(p)),d(p,"click",C),t&&(o(w),o(_),o(T),o(y)),d(y,"click",j)}}}function rt(t,e){var n,s,i,f,p,g,b,w,_,T,y,N,P,k,E,A,x,L,C,j,H,M,O,S,I,U,D,Y,R,G,$,B,W,F,z,K,Q,V=q("account / delete / hed"),X=q("account / delete / really"),Z=q("account / confirm-account-deletion / free"),tt=q("You cannot login and logout anymore."),et=q("You cannot edit or remove your charts anymore."),nt=q("account / delete / charts-stay-online"),at=!1,rt=!1,ot=q("account / delete / really-really"),st=q("No, I changed my mind.."),it=q("Yes, delete it!");function ct(){at=!0,t.set({confirmEmail:H.value}),at=!1}function ut(){rt=!0,t.set({confirmPassword:O.value}),rt=!1}var lt={label:q("Please enter your password to confirm the deletion request:"),error:!(!e.errors||!e.errors.length)&&e.errors.join(". ")},ft=new J({root:t.root,store:t.store,slots:{default:c()},data:lt});function mt(e){t.set({deleteAccount2:!1})}function dt(e){t.deleteAccount()}return{c:function(){n=u("h2"),s=l(V),i=l("\n        "),f=u("div"),p=u("p"),g=l(X),b=l("\n            "),w=u("ul"),_=u("li"),T=l(Z),y=l("\n                "),N=u("li"),P=l(tt),k=l("\n                "),E=u("li"),A=l(et),x=l("\n            "),L=u("p"),C=l(nt),j=l("\n\n            "),H=u("input"),M=l("\n                "),O=u("input"),ft._fragment.c(),S=l("\n            "),I=u("p"),U=l("\n            "),D=u("div"),Y=u("button"),R=u("i"),G=l("  "),$=l(st),B=l("\n                "),W=u("button"),F=u("i"),K=l("  "),Q=l(it),v(n,"margin-bottom","20px"),m(H,"input",ct),h(H,"type","email"),H.placeholder=q("Email"),m(O,"input",ut),h(O,"type","password"),O.placeholder=q("Password"),I.className="lead",R.className="fa fa-chevron-left",m(Y,"click",mt),Y.className="btn btn-info",F.className=z="fa "+(e.deletingAccount?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q",m(W,"click",dt),W.className="btn btn-danger",D.className="control-group",f.className="delete-account"},m:function(t,o){r(t,n,o),a(n,s),r(t,i,o),r(t,f,o),a(f,p),a(p,g),a(f,b),a(f,w),a(w,_),a(_,T),a(w,y),a(w,N),a(N,P),a(w,k),a(w,E),a(E,A),a(f,x),a(f,L),a(L,C),a(f,j),a(ft._slotted.default,H),H.value=e.confirmEmail,a(ft._slotted.default,M),a(ft._slotted.default,O),O.value=e.confirmPassword,ft._mount(f,null),a(f,S),a(f,I),I.innerHTML=ot,a(f,U),a(f,D),a(D,Y),a(Y,R),a(Y,G),a(Y,$),a(D,B),a(D,W),a(W,F),a(W,K),a(W,Q)},p:function(t,e){!at&&t.confirmEmail&&(H.value=e.confirmEmail),!rt&&t.confirmPassword&&(O.value=e.confirmPassword);var n={};t.errors&&(n.error=!(!e.errors||!e.errors.length)&&e.errors.join(". ")),ft._set(n),t.deletingAccount&&z!==(z="fa "+(e.deletingAccount?"fa-spin fa-spinner":"fa-check")+" svelte-19q3a7q")&&(F.className=z)},d:function(t){t&&(o(n),o(i),o(f)),d(H,"input",ct),d(O,"input",ut),ft.destroy(),d(Y,"click",mt),d(W,"click",dt)}}}function ot(e,n){var s,i,c,f,m,d,h,p,g=q("account / delete / hed"),b=q("Your account has been deleted."),w=q("Goodbye!");return{c:function(){s=u("h2"),i=l(g),c=l("\n        "),f=u("h3"),m=l(b),d=l("\n        "),h=u("a"),p=l(w),v(s,"margin-bottom","20px"),h.href="/",h.className="btn btn-primary btn-large"},m:function(t,e){r(t,s,e),a(s,i),r(t,c,e),r(t,f,e),a(f,m),r(t,d,e),r(t,h,e),a(h,p)},p:t,d:function(t){t&&(o(s),o(c),o(f),o(d),o(h))}}}function st(t){A(this,t),this._state=e({changePassword:!1,changeEmail:!1,deleteAccount:!1,deleteAccount2:!1,deleteAccount3:!1,deletingAccount:!1,showPasswordInPlaintext:!1,messages:[],currentPassword:"",newPassword1:"",newPassword2:"",confirmEmail:"",confirmPassword:"",email:"",savingEmail:!1,savingPassword:!1,errors:[],groups:[{title:"Account settings",tabs:[{title:"Profile",icon:"fa fa-fw fa-user"}]},{title:"Team settings",tabs:[]}]},t.data),this._intro=!0,this._fragment=function(t,e){var n,s,i,p,g,b,w,_,T,y,N,P,k,E,A,x,L,C=q("Edit profile"),j=!1,H=q("account / change-login"),M=e.messages&&e.messages.length&&F(t,e),O=e.changeEmail&&e.errors.length&&K(t,e);function S(){j=!0,t.set({email:_.value}),j=!1}function I(t){return t.changeEmail?V:Q}var U=I(e),D=U(t,e),Y={label:q("E-Mail"),help:e.changeEmail?q("account / confirm-email-change"):""},R=new J({root:t.root,store:t.store,slots:{default:c()},data:Y});function G(t){return t.changePassword?X:Z}var $=G(e),B=$(t,e);function W(t){return t.deleteAccount3?ot:t.deleteAccount2?rt:t.deleteAccount?at:nt}var z=W(e),tt=z(t,e);return{c:function(){n=u("h2"),s=l(C),i=l("\n\n"),M&&M.c(),p=l("\n\n"),g=u("div"),b=u("div"),O&&O.c(),w=l("\n        "),_=u("input"),y=l("\n            "),D.c(),N=f(),R._fragment.c(),P=l("\n\n        "),B.c(),k=l(" "),tt.c(),E=l("\n    "),A=u("div"),x=u("p"),L=l(H),m(_,"input",S),_.disabled=T=!e.changeEmail,h(_,"type","email"),b.className="span6",x.className="help",A.className="span4",g.className="row edit-account",v(g,"margin-top",(e.messages&&e.messages.length?0:20)+"px")},m:function(t,o){r(t,n,o),a(n,s),r(t,i,o),M&&M.m(t,o),r(t,p,o),r(t,g,o),a(g,b),O&&O.m(b,null),a(b,w),a(R._slotted.default,_),_.value=e.email,a(R._slotted.default,y),D.m(R._slotted.default,null),a(R._slotted.default,N),R._mount(b,null),a(b,P),B.m(b,null),a(b,k),tt.m(b,null),a(g,E),a(g,A),a(A,x),a(x,L)},p:function(e,n){n.messages&&n.messages.length?M?M.p(e,n):((M=F(t,n)).c(),M.m(p.parentNode,p)):M&&(M.d(1),M=null),n.changeEmail&&n.errors.length?O?O.p(e,n):((O=K(t,n)).c(),O.m(b,w)):O&&(O.d(1),O=null),!j&&e.email&&(_.value=n.email),e.changeEmail&&T!==(T=!n.changeEmail)&&(_.disabled=T),U===(U=I(n))&&D?D.p(e,n):(D.d(1),(D=U(t,n)).c(),D.m(N.parentNode,N));var a={};e.changeEmail&&(a.help=n.changeEmail?q("account / confirm-email-change"):""),R._set(a),$===($=G(n))&&B?B.p(e,n):(B.d(1),(B=$(t,n)).c(),B.m(b,k)),z===(z=W(n))&&tt?tt.p(e,n):(tt.d(1),(tt=z(t,n)).c(),tt.m(b,null)),e.messages&&v(g,"margin-top",(n.messages&&n.messages.length?0:20)+"px")},d:function(t){t&&(o(n),o(i)),M&&M.d(t),t&&(o(p),o(g)),O&&O.d(),d(_,"input",S),D.d(),R.destroy(),B.d(),tt.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),k(this))}function it(t,e,n,a,r){var o={method:e,body:a,mode:"cors",credentials:n};return window.fetch(t,o).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.text()})).then((function(t){try{return JSON.parse(t)}catch(e){return console.warn("malformed json input",t),t}})).then((function(t){return r&&r(t),t})).catch((function(t){if(!r)throw t;console.error(t)}))}function ct(t,e){return void 0===e&&(e=null),new Promise((function(n,a){var r=document.createElement("script");r.src=t,r.onload=function(){e&&e(),n()},r.onerror=a,document.body.appendChild(r)}))}e(st.prototype,C),e(st.prototype,$);var ut={activateTab:function(t,e){var n,a,r=this;if(void 0===e&&(e=null),t.module)return e&&e.preventDefault(),void Promise.all([(n=t.css,void 0===a&&(a=null),new Promise((function(t,e){var r=document.createElement("link");r.rel="stylesheet",r.href=n,r.onload=function(){a&&a(),t()},r.onerror=e,document.head.appendChild(r)}))),ct(t.js||t.src)]).then((function(){require([t.module],(function(e){t.ui=e.App,t.module=null;var n=r.get().groups;r.set({groups:n,activeTab:t})}))}));t.ui&&(e&&e.preventDefault(),this.set({activeTab:t}))},onTabChange:function(t,e){t.onchange&&t.onchange(e,this.refs.currentTabUi)}};function lt(t){var e=this._svelte,n=e.component,a=e.ctx;n.activateTab(a.tab,t)}function ft(t,e,n){var a=Object.create(t);return a.tab=e[n],a}function mt(t,e,n){var a=Object.create(t);return a.group=e[n],a}function dt(t,e){var n,s,i,c,f,h,v,g=e.tab.title;return{c:function(){n=u("li"),s=u("a"),i=u("i"),f=l("   "),h=l(g),i.className=c=e.tab.icon+" svelte-5we305",s._svelte={component:t,ctx:e},m(s,"click",lt),s.href=v=e.tab.url||"/"+e.basePath+"/"+e.tab.id,s.className="svelte-5we305",n.className="svelte-5we305",w(n,"active",e.activeTab&&e.activeTab.id===e.tab.id)},m:function(t,e){r(t,n,e),a(n,s),a(s,i),a(s,f),a(s,h)},p:function(t,a){e=a,t.groups&&c!==(c=e.tab.icon+" svelte-5we305")&&(i.className=c),t.groups&&g!==(g=e.tab.title)&&p(h,g),s._svelte.ctx=e,(t.groups||t.basePath)&&v!==(v=e.tab.url||"/"+e.basePath+"/"+e.tab.id)&&(s.href=v),(t.activeTab||t.groups)&&w(n,"active",e.activeTab&&e.activeTab.id===e.tab.id)},d:function(t){t&&o(n),d(s,"click",lt)}}}function ht(t,e){for(var n,s,c,f,m=e.group.title,d=e.group.tabs,h=[],v=0;v<d.length;v+=1)h[v]=dt(t,ft(e,d,v));return{c:function(){n=u("div"),s=l(m),c=l("\n\n        "),f=u("ul");for(var t=0;t<h.length;t+=1)h[t].c();n.className="group svelte-5we305",f.className="nav nav-stacked nav-tabs"},m:function(t,e){r(t,n,e),a(n,s),r(t,c,e),r(t,f,e);for(var o=0;o<h.length;o+=1)h[o].m(f,null)},p:function(e,n){if(e.groups&&m!==(m=n.group.title)&&p(s,m),e.activeTab||e.groups||e.basePath){d=n.group.tabs;for(var a=0;a<d.length;a+=1){var r=ft(n,d,a);h[a]?h[a].p(e,r):(h[a]=dt(t,r),h[a].c(),h[a].m(f,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d:function(t){t&&(o(n),o(c),o(f)),i(h,t)}}}function pt(t,n){var i,c,m,d,h,p,v=t._slotted.aboveContent,g=t._slotted.belowContent,b=[n.activeTab.data],w=n.activeTab.ui;function _(n){for(var a={},r=0;r<b.length;r+=1)a=e(a,b[r]);return{root:t.root,store:t.store,data:a}}if(w)var T=new w(_());function y(e){t.onTabChange(n.activeTab,e)}return T&&T.on("change",y),{c:function(){i=u("div"),m=l("\n        "),T&&T._fragment.c(),d=l("\n        "),i.className=p="span10 account-page-content tab-"+n.activeTab.id+" svelte-5we305"},m:function(e,n){r(e,i,n),v&&(a(i,v),a(i,c||(c=f()))),a(i,m),T&&(T._mount(i,null),t.refs.currentTabUi=T),a(i,d),g&&(a(i,h||(h=f())),a(i,g))},p:function(e,a){n=a;var r=e.activeTab?function(t,e){for(var n={},a={},r={},o=t.length;o--;){var s=t[o],i=e[o];if(i){for(var c in s)c in i||(a[c]=1);for(var c in i)r[c]||(n[c]=i[c],r[c]=1);t[o]=i}else for(var c in s)r[c]=1}for(var c in a)c in n||(n[c]=void 0);return n}(b,[n.activeTab.data]):{};w!==(w=n.activeTab.ui)?(T&&T.destroy(),w?((T=new w(_()))._fragment.c(),T._mount(i,d),T.on("change",y),t.refs.currentTabUi=T):(T=null,t.refs.currentTabUi===T&&(t.refs.currentTabUi=null))):w&&T._set(r),e.activeTab&&p!==(p="span10 account-page-content tab-"+n.activeTab.id+" svelte-5we305")&&(i.className=p)},d:function(t){t&&o(i),v&&function(t,e){for(var n=t.parentNode;n.firstChild!==t;)e.appendChild(n.firstChild)}(c,v),T&&T.destroy(),g&&s(h,g)}}}function vt(t){A(this,t),this.refs={},this._state=e({groups:[],basePath:"",activeTab:null},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=function(t,e){for(var n,c,m,d,h,p=t._slotted.belowMenu,v=e.groups,g=[],b=0;b<v.length;b+=1)g[b]=ht(t,mt(e,v,b));var w=e.activeTab&&pt(t,e);return{c:function(){n=u("div"),c=u("div");for(var t=0;t<g.length;t+=1)g[t].c();m=l("\n        "),h=l("\n    "),w&&w.c(),c.className="span2 svelte-5we305",n.className="row"},m:function(t,e){r(t,n,e),a(n,c);for(var o=0;o<g.length;o+=1)g[o].m(c,null);a(c,m),p&&(a(c,d||(d=f())),a(c,p)),a(n,h),w&&w.m(n,null)},p:function(e,a){if(e.groups||e.activeTab||e.basePath){v=a.groups;for(var r=0;r<v.length;r+=1){var o=mt(a,v,r);g[r]?g[r].p(e,o):(g[r]=ht(t,o),g[r].c(),g[r].m(c,m))}for(;r<g.length;r+=1)g[r].d(1);g.length=v.length}a.activeTab?w?w.p(e,a):((w=pt(t,a)).c(),w.m(n,null)):w&&(w.d(1),w=null)},d:function(t){t&&o(n),i(g,t),p&&s(d,p),w&&w.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),k(this))}function gt(t,e,n){var a=Object.create(t);return a.opt=e[n],a}function bt(t,e,n){var a=Object.create(t);return a.optgroup=e[n],a}function wt(t,e,n){var a=Object.create(t);return a.opt=e[n],a}function _t(t,e){for(var n,a=e.options,s=[],c=0;c<a.length;c+=1)s[c]=Tt(t,wt(e,a,c));return{c:function(){for(var t=0;t<s.length;t+=1)s[t].c();n=f()},m:function(t,e){for(var a=0;a<s.length;a+=1)s[a].m(t,e);r(t,n,e)},p:function(e,r){if(e.options){a=r.options;for(var o=0;o<a.length;o+=1){var i=wt(r,a,o);s[o]?s[o].p(e,i):(s[o]=Tt(t,i),s[o].c(),s[o].m(n.parentNode,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=a.length}},d:function(t){i(s,t),t&&o(n)}}}function Tt(t,e){var n,s,i,c=e.opt.label;return{c:function(){n=u("option"),s=l(c),n.__value=i=e.opt.value,n.value=n.__value},m:function(t,e){r(t,n,e),a(n,s)},p:function(t,e){t.options&&c!==(c=e.opt.label)&&p(s,c),t.options&&i!==(i=e.opt.value)&&(n.__value=i),n.value=n.__value},d:function(t){t&&o(n)}}}function yt(t,e){for(var n,a=e.optgroups,s=[],c=0;c<a.length;c+=1)s[c]=Pt(t,bt(e,a,c));return{c:function(){for(var t=0;t<s.length;t+=1)s[t].c();n=f()},m:function(t,e){for(var a=0;a<s.length;a+=1)s[a].m(t,e);r(t,n,e)},p:function(e,r){if(e.optgroups){a=r.optgroups;for(var o=0;o<a.length;o+=1){var i=bt(r,a,o);s[o]?s[o].p(e,i):(s[o]=Pt(t,i),s[o].c(),s[o].m(n.parentNode,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=a.length}},d:function(t){i(s,t),t&&o(n)}}}function Nt(t,e){var n,s,i,c=e.opt.label;return{c:function(){n=u("option"),s=l(c),n.__value=i=e.opt.value,n.value=n.__value},m:function(t,e){r(t,n,e),a(n,s)},p:function(t,e){t.optgroups&&c!==(c=e.opt.label)&&p(s,c),t.optgroups&&i!==(i=e.opt.value)&&(n.__value=i),n.value=n.__value},d:function(t){t&&o(n)}}}function Pt(t,e){for(var n,a,s=e.optgroup.options,c=[],l=0;l<s.length;l+=1)c[l]=Nt(0,gt(e,s,l));return{c:function(){n=u("optgroup");for(var t=0;t<c.length;t+=1)c[t].c();h(n,"label",a=e.optgroup.label)},m:function(t,e){r(t,n,e);for(var a=0;a<c.length;a+=1)c[a].m(n,null)},p:function(t,e){if(t.optgroups){s=e.optgroup.options;for(var r=0;r<s.length;r+=1){var o=gt(e,s,r);c[r]?c[r].p(t,o):(c[r]=Nt(0,o),c[r].c(),c[r].m(n,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=s.length}t.optgroups&&a!==(a=e.optgroup.label)&&h(n,"label",a)},d:function(t){t&&o(n),i(c,t)}}}function kt(t){A(this,t),this._state=e({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),this._intro=!0,this._fragment=function(t,e){var n,s,i=!1,c=e.options.length&&_t(t,e),l=e.optgroups.length&&yt(t,e);function h(){i=!0,t.set({value:b(n)}),i=!1}return{c:function(){n=u("select"),c&&c.c(),s=f(),l&&l.c(),m(n,"change",h),"value"in e||t.root._beforecreate.push(h),n.className="select-css svelte-v0oq4b",n.disabled=e.disabled,v(n,"width",e.width)},m:function(t,o){r(t,n,o),c&&c.m(n,null),a(n,s),l&&l.m(n,null),g(n,e.value)},p:function(e,a){a.options.length?c?c.p(e,a):((c=_t(t,a)).c(),c.m(n,s)):c&&(c.d(1),c=null),a.optgroups.length?l?l.p(e,a):((l=yt(t,a)).c(),l.m(n,null)):l&&(l.d(1),l=null),!i&&e.value&&g(n,a.value),e.disabled&&(n.disabled=a.disabled),e.width&&v(n,"width",a.width)},d:function(t){t&&o(n),c&&c.d(),l&&l.d(),d(n,"change",h)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),k(this))}e(vt.prototype,C),e(vt.prototype,ut),e(kt.prototype,C);var Et=null;var At={createTeam:function(t,e){var n,a,r,o={name:t};this.get().user.isAdmin&&e&&(o.id=String(e).trim().toLowerCase()),this.set({awaitCreateTeam:(n=window.location.protocol+"//"+dw.backend.__api_domain+"/v3/teams",a=JSON.stringify(o),it(n,"POST","include",a,r)).then((function(t){window.location.href="/team/"+t.id+"/settings"}))})},leaveTeam:function(t){var e,n,a=this,r=this.get(),o=r.user,s=r.teams;window.confirm(q("account / my-teams / leave-team / confirm").replace("%team%",t.name))&&(e=window.location.protocol+"//"+dw.backend.__api_domain+"/v3/teams/"+t.id+"/members/"+o.id,it(e,"DELETE","include",null,n)).then((function(e){window.alert(q("account / my-teams / leave-team / done")),s.splice(s.findIndex((function(e){return e.id===t.id})),1),a.set({teams:s})})).catch((function(t){window.alert("There was a problem with your request. Please contact support@datawrapper.de"),console.error(t)}))}};function xt(t){var e,n,a,r=t.changed,o=t.current;r.currentTeam&&void 0!==o.currentTeam&&(Et?o.currentTeam!==Et&&(Et=o.currentTeam,this.set({awaitActiveTeam:(e=window.location.protocol+"//"+dw.backend.__api_domain+"/v3/me/settings",n=JSON.stringify({activeTeam:o.currentTeam||null}),it(e,"PATCH","include",n,a))})):Et=o.currentTeam)}function Lt(t){var e=this._svelte,n=e.component,a=e.ctx;n.leaveTeam(a.team)}function Ct(t,e,n){var a=Object.create(t);return a.team=e[n],a}function jt(e,n){var a,s=q("account / my-teams / no-teams-yet");return{c:function(){a=u("p")},m:function(t,e){r(t,a,e),a.innerHTML=s},p:t,d:function(t){t&&o(a)}}}function Ht(t,e){for(var n,s,c,f,m,d,h,p,v,g,b,w,_,T,y,N,P,k,E,A,x,L,C=q("account / my-teams / your-teams"),j=q("account / my-teams / name"),H=q("account / my-teams / your-role"),M=q("account / my-teams / num-charts"),O=q("account / my-teams / num-members"),S=q("account / my-teams / leave-team"),I=e.user.isAdmin&&qt(),U=e.teams,D=[],Y=0;Y<U.length;Y+=1)D[Y]=Jt(t,Ct(e,U,Y));return{c:function(){n=u("p"),s=l("\n\n"),c=u("table"),f=u("thead"),m=u("tr"),d=u("th"),h=l(j),p=l("\n            "),I&&I.c(),v=l("\n            "),g=u("th"),b=l(H),w=l("\n            "),_=u("th"),T=l(M),y=l("\n            "),N=u("th"),P=l(O),k=l("\n            "),E=u("th"),A=l(S),x=l("\n    "),L=u("tbody");for(var t=0;t<D.length;t+=1)D[t].c();c.className="table"},m:function(t,e){r(t,n,e),n.innerHTML=C,r(t,s,e),r(t,c,e),a(c,f),a(f,m),a(m,d),a(d,h),a(m,p),I&&I.m(m,null),a(m,v),a(m,g),a(g,b),a(m,w),a(m,_),a(_,T),a(m,y),a(m,N),a(N,P),a(m,k),a(m,E),a(E,A),a(c,x),a(c,L);for(var o=0;o<D.length;o+=1)D[o].m(L,null)},p:function(e,n){if(n.user.isAdmin?I||((I=qt()).c(),I.m(m,v)):I&&(I.d(1),I=null),e.teams||e.currentTeam||e.user){U=n.teams;for(var a=0;a<U.length;a+=1){var r=Ct(n,U,a);D[a]?D[a].p(e,r):(D[a]=Jt(t,r),D[a].c(),D[a].m(L,null))}for(;a<D.length;a+=1)D[a].d(1);D.length=U.length}},d:function(t){t&&(o(n),o(s),o(c)),I&&I.d(),i(D,t)}}}function qt(t,e){var n,s,i=q("account / my-teams / id");return{c:function(){n=u("th"),s=l(i)},m:function(t,e){r(t,n,e),a(n,s)},d:function(t){t&&o(n)}}}function Mt(t,e){var n,s,i,c=M(e.team.name,20,10);return{c:function(){n=u("a"),s=l(c),n.href=i="/team/"+e.team.id+"/settings"},m:function(t,e){r(t,n,e),a(n,s)},p:function(t,e){t.teams&&c!==(c=M(e.team.name,20,10))&&p(s,c),t.teams&&i!==(i="/team/"+e.team.id+"/settings")&&(n.href=i)},d:function(t){t&&o(n)}}}function Ot(t,e){var n,a=M(e.team.name,20,10);return{c:function(){n=l(a)},m:function(t,e){r(t,n,e)},p:function(t,e){t.teams&&a!==(a=M(e.team.name,20,10))&&p(n,a)},d:function(t){t&&o(n)}}}function St(t,e){var n;return{c:function(){(n=u("i")).className="fa fa-check-circle"},m:function(t,e){r(t,n,e)},d:function(t){t&&o(n)}}}function It(t,e){var n,s,i=e.team.id;return{c:function(){n=u("td"),s=l(i),n.className="slug svelte-t3x94h"},m:function(t,e){r(t,n,e),a(n,s)},p:function(t,e){t.teams&&i!==(i=e.team.id)&&p(s,i)},d:function(t){t&&o(n)}}}function Ut(t,e){var n,s,i,c,m,d=e.team.members,h=e.team.invites&&Yt(t,e);return{c:function(){n=u("a"),s=l(d),c=l(" "),h&&h.c(),m=f(),n.href=i="/team/"+e.team.id+"/members"},m:function(t,e){r(t,n,e),a(n,s),r(t,c,e),h&&h.m(t,e),r(t,m,e)},p:function(e,a){e.teams&&d!==(d=a.team.members)&&p(s,d),e.teams&&i!==(i="/team/"+a.team.id+"/members")&&(n.href=i),a.team.invites?h?h.p(e,a):((h=Yt(t,a)).c(),h.m(m.parentNode,m)):h&&(h.d(1),h=null)},d:function(t){t&&(o(n),o(c)),h&&h.d(t),t&&o(m)}}}function Dt(t,e){var n,a=e.team.members;return{c:function(){n=l(a)},m:function(t,e){r(t,n,e)},p:function(t,e){t.teams&&a!==(a=e.team.members)&&p(n,a)},d:function(t){t&&o(n)}}}function Yt(t,e){var n,s,i,c,f=e.team.invites;return{c:function(){n=u("span"),s=l("(+"),i=l(f),c=l(")"),n.className="invites svelte-t3x94h"},m:function(t,e){r(t,n,e),a(n,s),a(n,i),a(n,c)},p:function(t,e){t.teams&&f!==(f=e.team.invites)&&p(i,f)},d:function(t){t&&o(n)}}}function Rt(t,e){var n,s,i,c,f,m=q("account / my-teams / delete-team");return{c:function(){n=u("a"),s=u("i"),i=l(" "),c=l(m),s.className="fa fa-trash",n.href=f="/team/"+e.team.id+"/delete",n.className="btn btn-small btn-danger"},m:function(t,e){r(t,n,e),a(n,s),a(n,i),a(n,c)},p:function(t,e){t.teams&&f!==(f="/team/"+e.team.id+"/delete")&&(n.href=f)},d:function(t){t&&o(n)}}}function Gt(t,e){var n,s,i,c,f=q("account / my-teams / leave-team");return{c:function(){n=u("button"),s=u("i"),i=l(" "),c=l(f),s.className="fa fa-sign-out",n._svelte={component:t,ctx:e},m(n,"click",Lt),n.className="btn btn-small"},m:function(t,e){r(t,n,e),a(n,s),a(n,i),a(n,c)},p:function(t,a){e=a,n._svelte.ctx=e},d:function(t){t&&o(n),d(n,"click",Lt)}}}function Jt(t,e){var n,s,i,c,f,m,d,h,v,g,b,_,T,y,N,P=q("teams / role / "+e.team.role),k=e.team.charts;function E(t){return"member"!==t.team.role||t.user.isAdmin?Mt:Ot}var A=E(e),x=A(t,e),L=e.team.id===e.currentTeam&&St(),C=e.user.isAdmin&&It(0,e);function j(t){return"member"===t.team.role?Dt:Ut}var H=j(e),M=H(t,e);function O(t){return"owner"!==t.team.role?Gt:Rt}var S=O(e),I=S(t,e);return{c:function(){n=u("tr"),s=u("td"),x.c(),i=l(" "),L&&L.c(),c=l("\n            "),C&&C.c(),f=l("\n            "),m=u("td"),d=l("\n            "),h=u("td"),v=u("a"),g=l(k),_=l("\n            "),T=u("td"),M.c(),y=l("\n\n            "),N=u("td"),I.c(),v.href=b="/team/"+e.team.id,w(n,"current",e.team.id===e.currentTeam)},m:function(t,e){r(t,n,e),a(n,s),x.m(s,null),a(s,i),L&&L.m(s,null),a(n,c),C&&C.m(n,null),a(n,f),a(n,m),m.innerHTML=P,a(n,d),a(n,h),a(h,v),a(v,g),a(n,_),a(n,T),M.m(T,null),a(n,y),a(n,N),I.m(N,null)},p:function(e,a){A===(A=E(a))&&x?x.p(e,a):(x.d(1),(x=A(t,a)).c(),x.m(s,i)),a.team.id===a.currentTeam?L||((L=St()).c(),L.m(s,null)):L&&(L.d(1),L=null),a.user.isAdmin?C?C.p(e,a):((C=It(0,a)).c(),C.m(n,f)):C&&(C.d(1),C=null),e.teams&&P!==(P=q("teams / role / "+a.team.role))&&(m.innerHTML=P),e.teams&&k!==(k=a.team.charts)&&p(g,k),e.teams&&b!==(b="/team/"+a.team.id)&&(v.href=b),H===(H=j(a))&&M?M.p(e,a):(M.d(1),(M=H(t,a)).c(),M.m(T,null)),S===(S=O(a))&&I?I.p(e,a):(I.d(1),(I=S(t,a)).c(),I.m(N,null)),(e.teams||e.currentTeam)&&w(n,"current",a.team.id===a.currentTeam)},d:function(t){t&&o(n),x.d(),L&&L.d(),C&&C.d(),M.d(),I.d()}}}function $t(t,e){var n,s,i,f,p,v,g,b,w,_,T,y,N,P=q("team-create / p"),k=!1,E=q("team-create / button"),A=q("team-create / return");function x(){k=!0,t.set({newTeamName:i.value}),k=!1}var L={label:q("team-create / name"),help:q("team-create / help")},C=new J({root:t.root,store:t.store,slots:{default:c()},data:L}),j=e.user.isAdmin&&Wt(t,e);function H(t){return t.awaitCreateTeam?zt:Ft}var M=H(e),O=M(t,e);function S(n){t.createTeam(e.newTeamName,e.newTeamSlug)}function I(e){t.set({createTeam:!1})}return{c:function(){n=u("p"),s=l("\n\n        "),i=u("input"),C._fragment.c(),p=l("\n        "),j&&j.c(),v=l("\n\n        "),g=u("button"),O.c(),b=l("   "),w=l(E),T=l("\n        "),y=u("button"),N=l(A),m(i,"input",x),h(i,"type","text"),i.placeholder=q("team-create / untitled"),i.maxLength=f=e.user.isAdmin?80:50,m(g,"click",S),g.className="btn btn-primary",g.disabled=_=!e.newTeamName.length,m(y,"click",I),y.className="btn"},m:function(t,o){r(t,n,o),n.innerHTML=P,r(t,s,o),a(C._slotted.default,i),i.value=e.newTeamName,C._mount(t,o),r(t,p,o),j&&j.m(t,o),r(t,v,o),r(t,g,o),O.m(g,null),a(g,b),a(g,w),r(t,T,o),r(t,y,o),a(y,N)},p:function(n,a){e=a,!k&&n.newTeamName&&(i.value=e.newTeamName),n.user&&f!==(f=e.user.isAdmin?80:50)&&(i.maxLength=f),e.user.isAdmin?j?j.p(n,e):((j=Wt(t,e)).c(),j.m(v.parentNode,v)):j&&(j.d(1),j=null),M===(M=H(e))&&O?O.p(n,e):(O.d(1),(O=M(t,e)).c(),O.m(g,b)),n.newTeamName&&_!==(_=!e.newTeamName.length)&&(g.disabled=_)},d:function(t){t&&(o(n),o(s)),d(i,"input",x),C.destroy(t),t&&o(p),j&&j.d(t),t&&(o(v),o(g)),O.d(),d(g,"click",S),t&&(o(T),o(y)),d(y,"click",I)}}}function Bt(t,e){var n,s,i,c,f,h,p,v=q("account / my-teams / why-teams"),g=q("account / my-teams / create-btn");function b(e){t.set({createTeam:!0})}return{c:function(){n=u("div"),s=u("p"),i=l("\n            "),c=u("button"),f=u("i"),h=l(" "),p=u("noscript"),f.className="fa fa-plus fa-fw",m(c,"click",b),c.className="btn btn-large",w(c,"btn-primary",!e.teams.length),n.className="hed svelte-t3x94h"},m:function(t,e){r(t,n,e),a(n,s),s.innerHTML=v,a(n,i),a(n,c),a(c,f),a(c,h),a(c,p),p.insertAdjacentHTML("afterend",g)},p:function(t,e){t.teams&&w(c,"btn-primary",!e.teams.length)},d:function(t){t&&o(n),d(c,"click",b)}}}function Wt(t,e){var n,r=!1;function o(){r=!0,t.set({newTeamSlug:n.value}),r=!1}var s={label:q("team-create / slug"),help:q("team-create / slug-help")},i=new J({root:t.root,store:t.store,slots:{default:c()},data:s});return{c:function(){n=u("input"),i._fragment.c(),m(n,"input",o),h(n,"type","text"),n.placeholder=e.autoslug},m:function(t,r){a(i._slotted.default,n),n.value=e.newTeamSlug,i._mount(t,r)},p:function(t,e){!r&&t.newTeamSlug&&(n.value=e.newTeamSlug),t.autoslug&&(n.placeholder=e.autoslug)},d:function(t){d(n,"input",o),i.destroy(t)}}}function Ft(e,n){var a;return{c:function(){(a=u("i")).className="fa fa-plus fa-fw"},m:function(t,e){r(t,a,e)},p:t,d:function(t){t&&o(a)}}}function zt(t,e){var n,a,s={component:t,ctx:e,current:null,pending:Vt,then:Qt,catch:Kt,value:"null",error:"null"};return _(a=e.awaitCreateTeam,s),{c:function(){n=f(),s.block.c()},m:function(t,e){r(t,n,e),s.block.m(t,s.anchor=e),s.mount=function(){return n.parentNode},s.anchor=n},p:function(t,n){e=n,s.ctx=e,"awaitCreateTeam"in t&&a!==(a=e.awaitCreateTeam)&&_(a,s)},d:function(t){t&&o(n),s.block.d(t),s=null}}}function Kt(t,e){var n;return{c:function(){(n=u("i")).className="fa fa-exclamation-triangle"},m:function(t,e){r(t,n,e)},d:function(t){t&&o(n)}}}function Qt(t,e){var n;return{c:function(){(n=u("i")).className="fa fa-check fa-fw"},m:function(t,e){r(t,n,e)},d:function(t){t&&o(n)}}}function Vt(t,e){var n,a;return{c:function(){n=l(" "),(a=u("i")).className="fa fa-spinner fa-spin"},m:function(t,e){r(t,n,e),r(t,a,e)},d:function(t){t&&(o(n),o(a))}}}function Xt(t,e){var n,s,i,f,m,d,h,p=q("account / my-teams / select-active"),v=q("account / my-teams / what-is-active"),g={},b={width:"250px",options:e.teamOptions};void 0!==e.currentTeam&&(b.value=e.currentTeam,g.value=!0);var w=new kt({root:t.root,store:t.store,data:b,_bind:function(e,n){var a={};!g.value&&e.value&&(a.currentTeam=n.value),t._set(a),g={}}});t.root._beforecreate.push((function(){w._bind({value:1},w.get())}));var _=e.awaitActiveTeam&&Zt(t,e),T={width:"350px",help:q("account / my-teams / active-hint")},y=new J({root:t.root,store:t.store,slots:{default:c()},data:T});return{c:function(){n=u("div"),s=u("h3"),i=l("\n        "),f=u("p"),m=l("\n        "),d=u("div"),w._fragment.c(),h=l("\n                "),_&&_.c(),y._fragment.c(),s.className="svelte-t3x94h",d.className="flex",n.className="span5"},m:function(t,e){r(t,n,e),a(n,s),s.innerHTML=p,a(n,i),a(n,f),f.innerHTML=v,a(n,m),a(y._slotted.default,d),w._mount(d,null),a(d,h),_&&_.m(d,null),y._mount(n,null)},p:function(n,a){e=a;var r={};n.teamOptions&&(r.options=e.teamOptions),!g.value&&n.currentTeam&&(r.value=e.currentTeam,g.value=void 0!==e.currentTeam),w._set(r),g={},e.awaitActiveTeam?_?_.p(n,e):((_=Zt(t,e)).c(),_.m(d,null)):_&&(_.d(1),_=null)},d:function(t){t&&o(n),w.destroy(),_&&_.d(),y.destroy()}}}function Zt(t,e){var n,a,s={component:t,ctx:e,current:null,pending:ne,then:ee,catch:te,value:"null",error:"null"};return _(a=e.awaitActiveTeam,s),{c:function(){n=f(),s.block.c()},m:function(t,e){r(t,n,e),s.block.m(t,s.anchor=e),s.mount=function(){return n.parentNode},s.anchor=n},p:function(t,n){e=n,s.ctx=e,"awaitActiveTeam"in t&&a!==(a=e.awaitActiveTeam)&&_(a,s)},d:function(t){t&&o(n),s.block.d(t),s=null}}}function te(t,e){var n;return{c:function(){(n=u("i")).className="fa fa-exclamation-triangle"},m:function(t,e){r(t,n,e)},d:function(t){t&&o(n)}}}function ee(t,e){var n;return{c:function(){(n=u("i")).className="fa fa-check fa-fw"},m:function(t,e){r(t,n,e)},d:function(t){t&&o(n)}}}function ne(t,e){var n,a;return{c:function(){n=l(" "),(a=u("i")).className="fa fa-spinner fa-spin"},m:function(t,e){r(t,n,e),r(t,a,e)},d:function(t){t&&(o(n),o(a))}}}function ae(t){var s=this;A(this,t),this._state=e({teams:[],awaitActiveTeam:null,awaitCreateTeam:null,currentTeam:"",createTeam:!1,newTeamName:"",newTeamSlug:""},t.data),this._recompute({teams:1,newTeamName:1},this._state),this._intro=!0,this._handlers.state=[xt],xt.call(this,{changed:n({},this._state),current:this._state}),this._fragment=function(t,e){var n,s,i,c,f,m,d,h,p=q("account / my-teams"),v=q("account / my-teams / create");function g(t){return t.teams.length?Ht:jt}var b=g(e),w=b(t,e);function _(t){return t.createTeam?$t:Bt}var T=_(e),y=T(t,e),N=e.teams.length>0&&Xt(t,e);return{c:function(){n=u("h2"),s=l("\n\n"),w.c(),i=l("\n\n"),c=u("div"),f=u("div"),m=u("h3"),d=l("\n        "),y.c(),h=l("\n    "),N&&N.c(),m.className="svelte-t3x94h",f.className="span5",c.className="row"},m:function(t,e){r(t,n,e),n.innerHTML=p,r(t,s,e),w.m(t,e),r(t,i,e),r(t,c,e),a(c,f),a(f,m),m.innerHTML=v,a(f,d),y.m(f,null),a(c,h),N&&N.m(c,null)},p:function(e,n){b===(b=g(n))&&w?w.p(e,n):(w.d(1),(w=b(t,n)).c(),w.m(i.parentNode,i)),T===(T=_(n))&&y?y.p(e,n):(y.d(1),(y=T(t,n)).c(),y.m(f,null)),n.teams.length>0?N?N.p(e,n):((N=Xt(t,n)).c(),N.m(c,null)):N&&(N.d(1),N=null)},d:function(t){t&&(o(n),o(s)),w.d(t),t&&(o(i),o(c)),y.d(),N&&N.d()}}}(this,this._state),this.root._oncreate.push((function(){s.fire("update",{changed:n({},s._state),current:s._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),k(this))}e(ae.prototype,C),e(ae.prototype,At),ae.prototype._recompute=function(t,e){t.teams&&this._differs(e.teamOptions,e.teamOptions=e.teams.map((function(t){return{value:t.id,label:t.name}})).concat({value:null,label:q("nav / no-team")}))&&(t.teamOptions=!0),t.newTeamName&&this._differs(e.autoslug,e.autoslug=function(t){return t.newTeamName.toLowerCase().replace(/\W/g,"")}(e))&&(t.autoslug=!0)};var re={title:q("account / profile"),id:"profile",icon:"im im-user-settings",ui:st,data:{}},oe={title:q("account / my-teams"),id:"teams",icon:"im im-users",ui:ae,data:{}},se=!1;var ie={setTab:function(t){var e=this,n=this.get().groups,a=!1;n.forEach((function(n){n.tabs.forEach((function(n){n.id===t&&(e.refs.navTabs.activateTab(n),a=!0)}))})),a||this.set({activeTab:re})}};function ce(){var t=this,e=window.location.pathname.split("/").slice(1)[1]||"profile";dw.backend.__svelteApps.account=this;var n=this.get(),a=n.email,r=n.user,o=n.userId,s=n.groups,i=n.teams,c=n.adminTeams,u=n.pages,l=n.currentTeam;u.length&&(s[0].tabs.push.apply(s[0].tabs,u),this.set({groups:s})),s[0].tabs.splice(1,0,oe),this.set({groups:s}),c.length&&(s.push({title:q("account / settings / team"),tabs:[]}),c.forEach((function(t){var e=t.Id,n=t.Name;s[1].tabs.push({title:M(n,10,4),url:"/team/"+e+"/settings",icon:"im im-users"})})),this.set({groups:s})),re.data={email:a,userId:o,user:r},oe.data={teams:i,currentTeam:l,user:r},this.setTab(e),window.addEventListener("popstate",(function(e){var n=e.state;se=!0,setTimeout((function(){return se=!1}),100),t.setTab(n.id)}))}function ue(t){var e=t.changed,n=t.current;t.previous;e.activeTab&&n.activeTab&&!se&&window.history.pushState({id:n.activeTab.id},"","/account/"+n.activeTab.id)}function le(t,e,n){var a=Object.create(t);return a.team=e[n],a}function fe(t,e){var n,s,i,c,f,m,d,h,p,v,g,b,w,_=q("account / team-invite").replace("%s",M(e.team.name,20,10)),T=q("account / team-invite / accept"),y=q("account / or"),N=q("account / team-invite / reject");return{c:function(){n=u("div"),s=u("noscript"),i=l("\n        \n        "),c=u("a"),f=l(T),d=l("\n        \n          "),h=l(y),p=l("\n        "),v=u("a"),g=l(N),w=l("."),c.href=m="/team/"+e.team.id+"/invite/"+e.team.token+"/accept",c.className="btn btn-primary svelte-dmpd5k",v.href=b="/team/"+e.team.id+"/invite/"+e.team.token+"/reject",v.className="svelte-dmpd5k",n.className="alert alert-info svelte-dmpd5k"},m:function(t,e){r(t,n,e),a(n,s),s.insertAdjacentHTML("beforebegin",_),a(n,i),a(n,c),a(c,f),a(n,d),a(n,h),a(n,p),a(n,v),a(v,g),a(n,w)},p:function(t,e){t.invitations&&_!==(_=q("account / team-invite").replace("%s",M(e.team.name,20,10)))&&(!function(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)}(s),s.insertAdjacentHTML("beforebegin",_)),t.invitations&&m!==(m="/team/"+e.team.id+"/invite/"+e.team.token+"/accept")&&(c.href=m),t.invitations&&b!==(b="/team/"+e.team.id+"/invite/"+e.team.token+"/reject")&&(v.href=b)},d:function(t){t&&o(n)}}}function me(t){var s=this;A(this,t),this.refs={},this._state=e({hash:"profile",activeTab:null,activeData:{},groups:[{title:q("account / settings / personal"),tabs:[re]}]},t.data),this._recompute({email:1,user:1,userId:1,teams:1,currentTeam:1,activeTab:1},this._state),this._intro=!0,this._handlers.state=[ue],ue.call(this,{changed:n({},this._state),current:this._state}),this._fragment=function(t,e){var n,s,c,f,m,d,h,p=q("account / settings"),v={};document.title=n=e.pageTitle+" | "+q("account / settings")+" | Datawrapper";for(var g=e.invitations,b=[],w=0;w<g.length;w+=1)b[w]=fe(t,le(e,g,w));var _={basePath:"account",groups:e.groups};void 0!==e.activeTab&&(_.activeTab=e.activeTab,v.activeTab=!0);var T=new vt({root:t.root,store:t.store,data:_,_bind:function(e,n){var a={};!v.activeTab&&e.activeTab&&(a.activeTab=n.activeTab),t._set(a),v={}}});return t.root._beforecreate.push((function(){T._bind({activeTab:1},T.get())})),t.refs.navTabs=T,{c:function(){s=l("\n\n"),c=u("div"),f=u("h1"),m=l(p),d=l("\n    ");for(var t=0;t<b.length;t+=1)b[t].c();h=l("\n    "),T._fragment.c(),f.className="title",c.className="admin svelte-dmpd5k"},m:function(t,e){r(t,s,e),r(t,c,e),a(c,f),a(f,m),a(c,d);for(var n=0;n<b.length;n+=1)b[n].m(c,null);a(c,h),T._mount(c,null)},p:function(a,r){if(e=r,a.pageTitle&&n!==(n=e.pageTitle+" | "+q("account / settings")+" | Datawrapper")&&(document.title=n),a.invitations){g=e.invitations;for(var o=0;o<g.length;o+=1){var s=le(e,g,o);b[o]?b[o].p(a,s):(b[o]=fe(t,s),b[o].c(),b[o].m(c,h))}for(;o<b.length;o+=1)b[o].d(1);b.length=g.length}var i={};a.groups&&(i.groups=e.groups),!v.activeTab&&a.activeTab&&(i.activeTab=e.activeTab,v.activeTab=void 0!==e.activeTab),T._set(i),v={}},d:function(e){e&&(o(s),o(c)),i(b,e),T.destroy(),t.refs.navTabs===T&&(t.refs.navTabs=null)}}}(this,this._state),this.root._oncreate.push((function(){ce.call(s),s.fire("update",{changed:n({},s._state),current:s._state})})),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),k(this))}function de(t,n){this._handlers={},this._dependents=[],this._computed=T(),this._sortedComputedProperties=[],this._state=e({},t),this._differs=n&&n.immutable?N:y}e(me.prototype,C),e(me.prototype,ie),me.prototype._recompute=function(t,e){var n,a;(t.email||t.user||t.userId||t.teams||t.currentTeam)&&this._differs(e.data,e.data=(a=(n=e).email,{user:n.user,email:a,userId:n.userId,teams:n.teams,currentTeam:n.currentTeam}))&&(t.data=!0),t.activeTab&&this._differs(e.pageTitle,e.pageTitle=function(t){var e=t.activeTab;return e?e.title:""}(e))&&(t.pageTitle=!0)},e(de.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var a=t[n];e["$"+a]=this._state[a]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_set:function(t,n){var a=this,r=this._state;this._state=e(e({},r),t);for(var o=0;o<this._sortedComputedProperties.length;o+=1)this._sortedComputedProperties[o].update(this._state,n);this.fire("state",{changed:n,previous:r,current:this._state}),this._dependents.filter((function(t){for(var e={},r=!1,o=0;o<t.props.length;o+=1){var s=t.props[o];s in n&&(e["$"+s]=a._state[s],r=!0)}if(r)return t.component._stage(e),!0})).forEach((function(t){t.component.set({})})),this.fire("update",{changed:n,previous:r,current:this._state})},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],a=T();function r(o){var s=e[o];s&&(s.deps.forEach((function(e){if(e===t)throw new Error("Cyclical dependency detected between "+e+" <-> "+o);r(e)})),a[o]||(a[o]=!0,n.push(s)))}for(var o in this._computed)r(t=o)},compute:function(t,n,a){var r,o=this,s={deps:n,update:function(e,s,i){var c=n.map((function(t){return t in s&&(i=!0),e[t]}));if(i){var u=a.apply(null,c);o._differs(u,r)&&(r=u,s[t]=!0,e[t]=r)}}};this._computed[t]=s,this._sortComputedProperties();var i=e({},this._state),c={};s.update(i,c,!0),this._set(i,c)},fire:P,get:E,on:x,set:function(t){var e=this._state,n=this._changed={},a=!1;for(var r in t){if(this._computed[r])throw new Error("'"+r+"' is a read-only computed property");this._differs(t[r],e[r])&&(n[r]=a=!0)}a&&this._set(t,n)}});return{App:me,data:{chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0},store:new de({})}}));
