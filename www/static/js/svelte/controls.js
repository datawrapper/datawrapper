!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chroma")):"function"==typeof define&&define.amd?define(["chroma"],e):t.controls=e(t.chroma)}(this,function(t){"use strict";function e(){}function n(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){e.appendChild(t)}function o(t,e,n){e.insertBefore(t,n)}function a(t){t.parentNode.removeChild(t)}function s(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}function l(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)}function r(t){for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling)}function c(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}function u(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function d(){return document.createDocumentFragment()}function h(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return document.createComment("")}function v(t,e,n){t.addEventListener(e,n,!1)}function m(t,e,n){t.removeEventListener(e,n,!1)}function g(t,e,n){t.setAttribute(e,n)}function b(t){return""===t?void 0:+t}function x(t,e,n){t.style.setProperty(e,n)}function y(t,e){for(var n=0;n<t.options.length;n+=1){var i=t.options[n];if(i.__value===e)return void(i.selected=!0)}}function k(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function w(t){return t}function N(t,e,n,i,o,a){var s,l=n(e,i),r=l.duration||300,c=l.easing||w;if(l.css&&!C.stylesheet){var u=h("style");document.head.appendChild(u),C.stylesheet=u.sheet}return o&&(l.css&&l.delay&&(s=e.style.cssText,e.style.cssText+=l.css(0)),l.tick&&l.tick(0)),{t:o?0:1,running:!1,program:null,pending:null,run:function(t,e){var n={start:window.performance.now()+(l.delay||0),intro:t,callback:e};l.delay?this.pending=n:this.start(n),this.running||(this.running=!0,C.add(this))},start:function(n){t.fire(n.intro?"intro.start":"outro.start",{node:e}),n.a=this.t,n.b=n.intro?1:0,n.delta=n.b-n.a,n.duration=r*Math.abs(n.b-n.a),n.end=n.start+n.duration,l.css&&(l.delay&&(e.style.cssText=s),n.rule=function(t,e,n,i,o,a){for(var s="{\n",l=0;l<=1;l+=16.666/i)s+=100*l+"%{"+a(t+n*o(l))+"}\n";return s+"100% {"+a(e)+"}\n}"}(n.a,n.b,n.delta,n.duration,c,l.css),C.addRule(n.rule,n.name="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(n.rule)),e.style.animation=(e.style.animation||"").split(", ").filter(function(t){return t&&(n.delta<0||!/__svelte/.test(t))}).concat(n.name+" "+n.duration+"ms linear 1 forwards").join(", ")),this.program=n,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*c(n/e.duration),l.tick&&l.tick(this.t)}},done:function(){var t=this.program;this.t=t.b,l.tick&&l.tick(this.t),l.css&&C.deleteRule(e,t.name),t.callback(),t=null,this.running=!!this.pending},abort:function(){l.tick&&l.tick(1),l.css&&C.deleteRule(e,this.program.name),this.program=this.pending=null,this.running=!1}}}t=t&&t.hasOwnProperty("default")?t.default:t;var C={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes "+e+" "+t,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(e=this.stylesheet.cssRules.length;e--;)this.stylesheet.deleteRule(e);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter(function(t){return-1===t.indexOf(e)}).join(", ")}};function M(t){this.destroy=e,this.fire("destroy"),this.set=this.get=e,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function L(t,e){t._handlers=Object.create(null),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function T(t){for(;t&&t.length;)t.shift()()}function H(){this.store._remove(this)}var j={destroy:M,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var i=0;i<n.length;i+=1){var o=n[i];o.__calling||(o.__calling=!0,o.call(this,e),o.__calling=!1)}},observe:function(t,e,n){var i=e.bind(this);return n&&!1===n.init||i(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",function(e){e.changed[t]&&i(e.current[t],e.previous&&e.previous[t])})},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||(this.root._lock=!0,T(this.root._beforecreate),T(this.root._oncreate),T(this.root._aftercreate),this.root._lock=!1)},teardown:M,_recompute:e,_set:function(t){var e=this._state,i={},o=!1;for(var a in t)this._differs(t[a],e[a])&&(i[a]=o=!0);o&&(this._state=n(n({},e),t),this._recompute(i,this._state),this._bind&&this._bind(i,this._state),this._fragment&&(this.fire("state",{changed:i,current:this._state,previous:e}),this._fragment.p(i,this._state),this.fire("update",{changed:i,current:this._state,previous:e})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function S(t){L(this,t),this._state=n({disabled:!1,faded:!1},t.data),this._fragment=function(t,e){var n,s,l,r,c,u;function d(){t.set({value:l.checked})}return{c:function(){n=h("div"),s=h("label"),l=h("input"),r=f(" "),c=f(e.label),this.h()},h:function(){v(l,"change",d),g(l,"type","checkbox"),l.disabled=e.disabled,l.className="svelte-c3c81a",s.className=u="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-c3c81a",n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(t,a){o(n,t,a),i(s,n),i(l,s),l.checked=e.value,i(r,s),i(c,s)},p:function(t,e){l.checked=e.value,t.disabled&&(l.disabled=e.disabled),t.label&&(c.data=e.label),(t.disabled||t.faded)&&u!==(u="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-c3c81a")&&(s.className=u)},u:function(){a(n)},d:function(){m(l,"change",d)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(S.prototype,j);var $=Array.prototype,I=Object.prototype,A=$.slice,O=I.toString,z=I.hasOwnProperty,E=Array.isArray,D=Object.keys;function q(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function F(t,e){return null!=t&&z.call(t,e)}function Y(t){if(!q(t))return[];if(D)return D(t);var e=[];for(var n in t)F(t,n)&&e.push(n);return et&&it(t,e),e}var R=E||function(t){return"[object Array]"===O.call(t)};var K=("function"!=typeof/./&&"object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(t){return"function"==typeof t||!1}:null)||function(t){return"[object Function]"===O.call(t)};!function(){O.call(arguments)}();function P(t){return function(t){return"[object Number]"===O.call(t)}(t)&&isNaN(t)}var B=J;function Q(t){return t}var G=ot(Y);function W(t){return t=G({},t),function(e){return function(t,e){var n=Y(e),i=n.length;if(null==t)return!i;for(var o=Object(t),a=0;a<i;a++){var s=n[a];if(e[s]!==o[s]||!(s in o))return!1}return!0}(e,t)}}function J(t,e){return U(t,e,1/0)}function U(t,e,n){return B!==J?B(t,e):null==t?Q:K(t)?function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,a){return t.call(e,n,i,o,a)}}return function(){return t.apply(e,arguments)}}(t,e,n):q(t)?W(t):V(t)}function V(t){return function(e){return null==e?void 0:e[t]}}var X=Math.pow(2,53)-1,Z=V("length"),tt=function(t){var e=Z(t);return"number"==typeof e&&e>=0&&e<=X};var et=!{toString:null}.propertyIsEnumerable("toString"),nt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function it(t,e){var n=nt.length,i=t.constructor,o=K(i)&&i.prototype||I,a="constructor";for(F(t,a)&&!rt(e,a)&&e.push(a);n--;)(a=nt[n])in t&&t[a]!==o[a]&&!rt(e,a)&&e.push(a)}function ot(t,e){return function(n){var i=arguments,o=arguments.length;if(e&&(n=Object(n)),o<2||null==n)return n;for(var a=1;a<o;a++)for(var s=i[a],l=t(s),r=l.length,c=0;c<r;c++){var u=l[c];!q(n)||e&&void 0!==n[u]||(n[u]=s[u])}return n}}!function(t){for(var e={},n=Y(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i]}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"});var at,st=(at=1,function(t,e,n){e=U(e,n);for(var i=Z(t),o=at>0?0:i-1;o>=0&&o<i;o+=at)if(e(t[o],o,t))return o;return-1});var lt=function(t,e,n){return function(i,o,a){var s=0,l=Z(i);if("number"==typeof a)t>0?s=a>=0?a:Math.max(a+l,s):l=a>=0?Math.min(a+1,l):a+l+1;else if(n&&a&&l)return i[a=n(i,o)]===o?a:-1;if(o!=o)return(a=e(A.call(i,s,l),P))>=0?a+s:-1;for(a=t>0?s:l-1;a>=0&&a<l;a+=t)if(i[a]===o)return a;return-1}}(1,st,function(t,e,n,i){for(var o=(n=U(n,i,1))(e),a=0,s=Z(t);a<s;){var l=Math.floor((a+s)/2);n(t[l])<o?a=l+1:s=l}return a});function rt(t,e,n,i){return tt(t)||(t=function(t){for(var e=Y(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i}(t)),("number"!=typeof n||i)&&(n=0),lt(t,e,n)>=0}function ct(t,e,n,i){var o;!0!==(o=e)&&!1!==o&&"[object Boolean]"!==O.call(o)&&(i=n,n=e,e=!1),null!=n&&(n=U(n,i));for(var a=[],s=[],l=0,r=Z(t);l<r;l++){var c=t[l],u=n?n(c,l,t):c;e?(l&&s===u||a.push(c),s=u):n?rt(s,u)||(s.push(u),a.push(c)):rt(a,c)||a.push(c)}return a}function ut(t,n){var i,s,l,r=t._slotted.content;return{c:function(){r||(l=f("Content"))},m:function(t,e){r?(o(i||(i=p()),t,e),o(r,t,e),o(s||(s=p()),t,e)):o(l,t,e)},u:function(){r?(!function(t,e,n){for(;t.nextSibling&&t.nextSibling!==e;)n.appendChild(t.parentNode.removeChild(t.nextSibling))}(i,s,r),a(i),a(s)):a(l)},d:e}}function dt(t){L(this,t),this.refs={},this._state=n({visible:!1},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=function(t,e){var n,s,l,r,u=t._slotted.button;function d(e){t.windowClick(e)}function p(e){t.toggle()}window.addEventListener("click",d);var _=e.visible&&ut(t);return{c:function(){n=h("div"),s=h("div"),u||(l=f("Button")),r=f("\n    "),_&&_.c(),this.h()},h:function(){v(s,"click",p),s.className="base-drop-btn svelte-1e7v6nx",x(n,"position","relative"),x(n,"display","inline-block")},m:function(e,a){o(n,e,a),i(s,n),i(u||l,s),t.refs.button=s,i(r,n),_&&_.m(n,null)},p:function(e,i){i.visible?_||((_=ut(t)).c(),_.m(n,null)):_&&(_.u(),_.d(),_=null)},u:function(){a(n),u&&c(s,u),_&&_.u()},d:function(){window.removeEventListener("click",d),m(s,"click",p),t.refs.button===s&&(t.refs.button=null),_&&_.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function ht(e){return"#ffffff"==t(e).hex("rgb")?"#eeeeee":e}function ft(e){return t(e).alpha()}n(dt.prototype,j),n(dt.prototype,{toggle:function(){var t=this.get().visible;this.set({visible:!t})},windowClick:function(t){t.target&&t.target!=this.refs.button&&(t.target.classList.contains("hex")||this.set({visible:!1}))}});function pt(e){var n=this,i=e.changed,o=e.current,a=e.previous;if(i.color)try{var s=t(o.color).hex();this.refs.dropdown.get().visible&&s!=a.color&&this.fire("change",o.validColor),o.validColor!=o.color&&setTimeout(function(){n.set({color:o.validColor})},100)}catch(t){}}function vt(e,n){var i=-1,o=999999;return e[0]==e[1]?"-":(e.forEach(function(e,a){var s=t.distance(e,n,"lab");s<o&&(o=s,i=a)}),e[i])}function _t(t,e,n,i,o){var a=[t],s=e/n,l=0;for(i=void 0===i?n:i,o=o||1;n-- >0;)l+=s,a.unshift(t-l),i-- >0&&a.push(t+l);return a}function mt(t,e){var n,s,l,r=e.c;e.each_value,e.c_index;return{c:function(){n=h("div"),s=h("div"),this.h()},h:function(){s.className="transparency svelte-1ol53cr",x(s,"opacity",1-ft(r)),v(n,"click",kt),v(n,"dblclick",wt),n.className="color svelte-1ol53cr",n.dataset.color=l=r,x(n,"background",r),x(n,"border-color",ht(r)),n._svelte={component:t,each_value:e.each_value,c_index:e.c_index}},m:function(t,e){o(n,t,e),i(s,n)},p:function(t,e){r=e.c,e.each_value,e.c_index,t.palette&&x(s,"opacity",1-ft(r)),t.palette&&l!==(l=r)&&(n.dataset.color=l),t.palette&&(x(n,"background",r),x(n,"border-color",ht(r))),n._svelte.each_value=e.each_value,n._svelte.c_index=e.c_index},u:function(){a(n)},d:function(){m(n,"click",kt),m(n,"dblclick",wt)}}}function gt(t,e){var n,i,s,l=e.c;e.each_value_1,e.c_index_1;return{c:function(){n=h("div"),this.h()},h:function(){v(n,"click",Nt),n.className=i="color "+(l==e.nearest_l?"selected":"")+" svelte-1ol53cr",n.dataset.color=s=l,x(n,"background",l),n._svelte={component:t,each_value_1:e.each_value_1,c_index_1:e.c_index_1}},m:function(t,e){o(n,t,e)},p:function(t,e){l=e.c,e.each_value_1,e.c_index_1,(t.gradient_l||t.nearest_l)&&i!==(i="color "+(l==e.nearest_l?"selected":"")+" svelte-1ol53cr")&&(n.className=i),t.gradient_l&&s!==(s=l)&&(n.dataset.color=s),t.gradient_l&&x(n,"background",l),n._svelte.each_value_1=e.each_value_1,n._svelte.c_index_1=e.c_index_1},u:function(){a(n)},d:function(){m(n,"click",Nt)}}}function bt(t,e){var n,i,s,l=e.c;e.each_value_2,e.c_index_2;return{c:function(){n=h("div"),this.h()},h:function(){v(n,"click",Ct),n.className=i="color "+(l==e.nearest_c?"selected":"")+" svelte-1ol53cr",n.dataset.color=s=l,x(n,"background",l),n._svelte={component:t,each_value_2:e.each_value_2,c_index_2:e.c_index_2}},m:function(t,e){o(n,t,e)},p:function(t,e){l=e.c,e.each_value_2,e.c_index_2,(t.gradient_c||t.nearest_c)&&i!==(i="color "+(l==e.nearest_c?"selected":"")+" svelte-1ol53cr")&&(n.className=i),t.gradient_c&&s!==(s=l)&&(n.dataset.color=s),t.gradient_c&&x(n,"background",l),n._svelte.each_value_2=e.each_value_2,n._svelte.c_index_2=e.c_index_2},u:function(){a(n)},d:function(){m(n,"click",Ct)}}}function xt(t,e){var n,i,s,l=e.c;e.each_value_3,e.c_index_3;return{c:function(){n=h("div"),this.h()},h:function(){v(n,"click",Mt),n.className=i="color "+(l==e.nearest_h?"selected":"")+" svelte-1ol53cr",n.dataset.color=s=l,x(n,"background",l),n._svelte={component:t,each_value_3:e.each_value_3,c_index_3:e.c_index_3}},m:function(t,e){o(n,t,e)},p:function(t,e){l=e.c,e.each_value_3,e.c_index_3,(t.gradient_h||t.nearest_h)&&i!==(i="color "+(l==e.nearest_h?"selected":"")+" svelte-1ol53cr")&&(n.className=i),t.gradient_h&&s!==(s=l)&&(n.dataset.color=s),t.gradient_h&&x(n,"background",l),n._svelte.each_value_3=e.each_value_3,n._svelte.c_index_3=e.c_index_3},u:function(){a(n)},d:function(){m(n,"click",Mt)}}}function yt(t,e){for(var s,l,r,c,d,p,_,b,y,k,w,N,C,M,L,T,H=!1,j=e.palette,S=[],$=0;$<j.length;$+=1)S[$]=mt(t,n(n({},e),{each_value:j,c:j[$],c_index:$}));var I=e.gradient_l,A=[];for($=0;$<I.length;$+=1)A[$]=gt(t,n(n({},e),{each_value_1:I,c:I[$],c_index_1:$}));var O=e.gradient_c,z=[];for($=0;$<O.length;$+=1)z[$]=bt(t,n(n({},e),{each_value_2:O,c:O[$],c_index_2:$}));var E=e.gradient_h,D=[];for($=0;$<E.length;$+=1)D[$]=xt(t,n(n({},e),{each_value_3:E,c:E[$],c_index_3:$}));function q(){H=!0,t.set({color:w.value}),H=!1}function F(e){var n=t.get();t.setColor(n.color,!0)}function Y(t){t.stopPropagation()}return{c:function(){s=h("div"),l=h("div");for(var t=0;t<S.length;t+=1)S[t].c();r=f("\n\n                "),c=h("div");for(t=0;t<A.length;t+=1)A[t].c();d=f("\n                "),p=h("div");for(t=0;t<z.length;t+=1)z[t].c();_=f("\n                "),b=h("div");for(t=0;t<D.length;t+=1)D[t].c();y=f("\n\n                "),k=h("div"),w=h("input"),N=f("\n                    "),(C=h("button")).innerHTML='<i class="icon-ok"></i>',M=f("\n                    "),L=h("div"),T=h("div"),this.h()},h:function(){l.className="palette svelte-1ol53cr",c.className="color-axis lightness",p.className="color-axis saturation",b.className="color-axis hue",v(w,"input",q),g(w,"type","text"),x(w,"background",e.color),x(w,"border-color",ht),x(w,"color",e.textColor),w.className="hex svelte-1ol53cr",v(C,"click",F),C.className="btn btn-small ok",T.className="transparency svelte-1ol53cr",x(T,"opacity",1-ft(e.color)),L.className="color selected",x(L,"background",e.color),k.className="footer svelte-1ol53cr",v(s,"click",Y),s.className="color-selector svelte-1ol53cr"},m:function(t,n){o(s,t,n),i(l,s);for(var a=0;a<S.length;a+=1)S[a].m(l,null);i(r,s),i(c,s);for(a=0;a<A.length;a+=1)A[a].m(c,null);i(d,s),i(p,s);for(a=0;a<z.length;a+=1)z[a].m(p,null);i(_,s),i(b,s);for(a=0;a<D.length;a+=1)D[a].m(b,null);i(y,s),i(k,s),i(w,k),w.value=e.color,i(N,k),i(C,k),i(M,k),i(L,k),i(T,L)},p:function(e,i){var o=i.palette;if(e.palette){for(var a=0;a<o.length;a+=1){var s=n(n({},i),{each_value:o,c:o[a],c_index:a});S[a]?S[a].p(e,s):(S[a]=mt(t,s),S[a].c(),S[a].m(l,null))}for(;a<S.length;a+=1)S[a].u(),S[a].d();S.length=o.length}var r=i.gradient_l;if(e.gradient_l||e.nearest_l){for(a=0;a<r.length;a+=1){var u=n(n({},i),{each_value_1:r,c:r[a],c_index_1:a});A[a]?A[a].p(e,u):(A[a]=gt(t,u),A[a].c(),A[a].m(c,null))}for(;a<A.length;a+=1)A[a].u(),A[a].d();A.length=r.length}var d=i.gradient_c;if(e.gradient_c||e.nearest_c){for(a=0;a<d.length;a+=1){var h=n(n({},i),{each_value_2:d,c:d[a],c_index_2:a});z[a]?z[a].p(e,h):(z[a]=bt(t,h),z[a].c(),z[a].m(p,null))}for(;a<z.length;a+=1)z[a].u(),z[a].d();z.length=d.length}var f=i.gradient_h;if(e.gradient_h||e.nearest_h){for(a=0;a<f.length;a+=1){var v=n(n({},i),{each_value_3:f,c:f[a],c_index_3:a});D[a]?D[a].p(e,v):(D[a]=xt(t,v),D[a].c(),D[a].m(b,null))}for(;a<D.length;a+=1)D[a].u(),D[a].d();D.length=f.length}H||(w.value=i.color),e.color&&x(w,"background",i.color),e.textColor&&x(w,"color",i.textColor),e.color&&(x(T,"opacity",1-ft(i.color)),x(L,"background",i.color))},u:function(){a(s);for(var t=0;t<S.length;t+=1)S[t].u();for(t=0;t<A.length;t+=1)A[t].u();for(t=0;t<z.length;t+=1)z[t].u();for(t=0;t<D.length;t+=1)D[t].u()},d:function(){u(S),u(A),u(z),u(D),m(w,"input",q),m(C,"click",F),m(s,"click",Y)}}}function kt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.c_index];e.setColor(n,!1)}function wt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.c_index];e.setColor(n,!0)}function Nt(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.c_index_1];e.setColor(n,!1)}function Ct(t){var e=this._svelte.component,n=this._svelte.each_value_2[this._svelte.c_index_2];e.setColor(n,!1)}function Mt(t){var e=this._svelte.component,n=this._svelte.each_value_3[this._svelte.c_index_3];e.setColor(n,!1)}function Lt(t){L(this,t),this.refs={},this._state=n(n(this.store._init(["themeData"]),{palette:[],prepend:[],append:[],color:"#63c0de"}),t.data),this.store._add(this,["themeData"]),this._recompute({$themeData:1,prepend:1,append:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1},this._state),this._handlers.state=[pt],this._handlers.destroy=[H],this._slotted=t.slots||{};var e,s,l,r,u,p,v,_,m,b,y,k,w,N,C,M,j=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this.slots={},this._fragment=(e=this,s=this._state,N=e._slotted.default,C=s.color&&yt(e,s),M=new dt({root:e.root,slots:{default:d(),button:d(),content:d()}}),e.refs.dropdown=M,{c:function(){l=h("div"),r=f("\n        "),u=h("span"),N||(p=h("div"),v=h("div"),_=h("div"),m=f("\n                    "),b=h("span")),y=f("\n        "),k=h("span"),C&&C.c(),w=f("\n    "),M._fragment.c(),this.h()},h:function(){N||(_.className="transparency svelte-1ol53cr",x(_,"opacity",1-ft(s.validColor)),x(v,"background",s.validColor+" none repeat scroll 0% 0%"),v.className="the-color svelte-1ol53cr",b.className="caret svelte-1ol53cr",p.className="base-color-picker color-picker svelte-1ol53cr"),g(u,"slot","button"),g(k,"slot","content"),l.className="color-picker-cont svelte-1ol53cr"},m:function(t,e){o(l,t,e),i(r,M._slotted.default),i(u,M._slotted.button),N?i(N,u):(i(p,u),i(v,p),i(_,v),i(m,p),i(b,p)),i(y,M._slotted.default),i(k,M._slotted.content),C&&C.m(k,null),i(w,M._slotted.default),M._mount(l,null)},p:function(t,n){N||t.validColor&&(x(_,"opacity",1-ft(n.validColor)),x(v,"background",n.validColor+" none repeat scroll 0% 0%")),n.color?C?C.p(t,n):((C=yt(e,n)).c(),C.m(k,null)):C&&(C.u(),C.d(),C=null)},u:function(){a(l),N&&c(u,N),C&&C.u()},d:function(){C&&C.d(),M.destroy(!1),e.refs.dropdown===M&&(e.refs.dropdown=null)}}),this.root._oncreate.push(function(){var t={$themeData:1,prepend:1,append:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1,validColor:1,nearest_l:1,nearest_c:1,nearest_h:1,textColor:1};pt.call(j,{changed:t,current:j._state}),j.fire("update",{changed:t,current:j._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,T(this._beforecreate),T(this._oncreate),T(this._aftercreate),this._lock=!1)}n(Lt.prototype,j),n(Lt.prototype,{setColor:function(t,e){this.set({color:t}),e&&this.refs.dropdown.set({visible:!1})}}),Lt.prototype._recompute=function(e,n){var i,o,a,s;(e.$themeData||e.prepend||e.append)&&this._differs(n.palette,n.palette=(o=(i=n).$themeData,a=i.prepend,s=i.append,ct(a.concat(o.colors.palette).concat(s))))&&(e.palette=!0),e.color&&(this._differs(n.validColor,n.validColor=function(e){var n=e.color;try{return t(n).hex()}catch(t){return"#000000"}}(n))&&(e.validColor=!0),this._differs(n.gradient_l,n.gradient_l=function(e){var n=e.color,i=t(n).lch(),o=_t(70,55,7,6).map(function(e){return t.lch(e,i[1],i[2]).hex()});return t.scale(["#000000"].concat(o).concat("#ffffff")).mode("lch").gamma(.8).padding(.1).colors(14)}(n))&&(e.gradient_l=!0)),(e.color||e.palette)&&this._differs(n.gradient_c,n.gradient_c=function(e){var n=e.color,i=e.palette,o=t(n).set("lch.c",120);isNaN(o.get("lch.h"))&&(o=t.lch(o.get("lch.l"),50,t(i[0]||"#d00").get("lch.h")));var a=t(n).set("lch.c",3);return t.scale([a,o]).mode("lch").gamma(1.2).colors(14)}(n))&&(e.gradient_c=!0),e.color&&this._differs(n.gradient_h,n.gradient_h=function(e){var n=e.color,i=t(n).lch(),o=_t(i[2],75,7,6).map(function(e){return t.lch(i[0],i[1],e).hex()});return t.scale(o).mode("lch").colors(14)}(n))&&(e.gradient_h=!0),(e.color||e.gradient_l)&&this._differs(n.nearest_l,n.nearest_l=function(t){var e=t.color;return vt(t.gradient_l,e)}(n))&&(e.nearest_l=!0),(e.color||e.gradient_c)&&this._differs(n.nearest_c,n.nearest_c=function(t){var e=t.color;return vt(t.gradient_c,e)}(n))&&(e.nearest_c=!0),(e.color||e.gradient_h)&&this._differs(n.nearest_h,n.nearest_h=function(t){var e=t.color;return vt(t.gradient_h,e)}(n))&&(e.nearest_h=!0),e.color&&(this._differs(n.textColor,n.textColor=function(e){var n=e.color;return t(n).get("lab.l")>60?"black":"white"}(n))&&(e.textColor=!0),this._differs(n.borderColor,n.borderColor=function(e){var n=e.color;return t(n).darker().hex()}(n))&&(e.borderColor=!0))};var Tt=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,Ht=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,jt="<a><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function St(t,e){if(null===t)return null;if(void 0!==t){if((t=String(t)).indexOf("<")<0||t.indexOf(">")<0)return t;if(t=function(t,e){e=(((void 0!==e?e||"":jt)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=t,i=t;for(;;)if(i=(n=i).replace(Ht,"").replace(Tt,function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""}),n===i)return i}(t,e),"undefined"==typeof document)return t;var n=document.createElement("div");n.innerHTML=t;for(var i=n.querySelectorAll("*"),o=0;o<i.length;o++)for(var a=0;a<i[o].attributes.length;a++){var s=i[o].attributes[a];s.specified&&"on"==s.name.substr(0,2)&&i[o].removeAttribute(s.name)}return n.innerHTML}}function $t(t){var e=t.$vis,n=t.customizable,i=t.axis,o=t.custom,a=t.palette;return e&&n?(i?_.unique(e.axes(!0)[i].values()):e.colorKeys?e.colorKeys():e.keys()).map(function(t){return{key:t=St(t,""),defined:void 0!==o[t],color:void 0!==o[t]?Ot(o[t],a):"#cccccc"}}):[]}var It={update:function(t){var e=this.get().palette;this.set({value:At(t,e)})},updateCustom:function(t){var e=this.get(),n=e.selected,i=e.palette,o=e.custom;n.forEach(function(e){return o[e]=At(t,i)}),this.set({custom:o})},toggle:function(t){t.preventDefault();var e=this.get().expanded;this.set({expanded:!e})},toggleSelect:function(t,e){e.preventDefault();var n=this.get().selected,i=n.indexOf(t);e.shiftKey?i>-1?n.splice(i,1):n.push(t):(n.length=1,n[0]=t),this.set({selected:n})},getColor:function(t){return Ot(t,this.get().palette)},reset:function(){var t=this.get(),e=t.selected,n=t.custom;e.forEach(function(t){return delete n[t]}),this.set({custom:n})},resetAll:function(){var t=this.get().custom;Object.keys(t).forEach(function(e){return delete t[e]}),this.set({custom:t})},selectAll:function(t){t.preventDefault();var e=this.get(),n=e.selected;e.colorKeys.forEach(function(t){n.indexOf(t.key)<0&&n.push(t.key)}),this.set({selected:n})},selectNone:function(t){t.preventDefault();var e=this.get().selected;e.length=0,this.set({selected:e})},selectInvert:function(t){t.preventDefault();var e=this.get(),n=e.selected,i=e.colorKeys;console.log(n),i.forEach(function(t){var e=n.indexOf(t.key);e<0?n.push(t.key):n.splice(e,1)}),console.log(n),this.set({selected:n})}};function At(t,e){var n=e.indexOf(t);return n>-1?n:t}function Ot(t,e){return"number"==typeof t?e[t%e.length]:t}function zt(t,e){var n={},i={color:e.hexColor,palette:e.palette};"open"in e&&(i.visible=e.open,n.visible=!0);var o=new Lt({root:t.root,data:i,_bind:function(e,i){t.get();var o={};!n.visible&&e.visible&&(o.open=i.visible),t._set(o),n={}}});return t.root._beforecreate.push(function(){o._bind({visible:1},o.get())}),o.on("change",function(e){t.update(e)}),{c:function(){o._fragment.c()},m:function(t,e){o._mount(t,e)},p:function(t,e){var i={};t.hexColor&&(i.color=e.hexColor),t.palette&&(i.palette=e.palette),!n.visible&&t.open&&(i.visible=e.open,n.visible=!0),o._set(i),n={}},u:function(){o._unmount()},d:function(){o.destroy(!1)}}}function Et(t,e){var n,s,l;function r(e){t.toggle(e)}return{c:function(){n=h("span"),(s=h("a")).textContent="customize colors...",this.h()},h:function(){v(s,"click",r),s.href="#customize",s.className=l="btn btn-small custom "+(e.expanded?"btn-primary":""),g(s,"role","button"),n.className="custom-color-selector-head"},m:function(t,e){o(n,t,e),i(s,n)},p:function(t,e){t.expanded&&l!==(l="btn btn-small custom "+(e.expanded?"btn-primary":""))&&(s.className=l)},u:function(){a(n)},d:function(){m(s,"click",r)}}}function Dt(t,e){var n,s,l,r,c,u,d,p,_=e.k,g=(e.each_value,e.k_index,_.defined?"":"×"),b=_.key;return{c:function(){n=h("li"),s=h("div"),l=f(g),r=f("\n                    "),c=h("label"),u=f(b),this.h()},h:function(){s.className="color",x(s,"background",_.color),v(n,"click",Rt),n.className=d=e.selected.indexOf(_.key)>-1?"selected":"",n.dataset.series=p=_.key,n._svelte={component:t,each_value:e.each_value,k_index:e.k_index}},m:function(t,e){o(n,t,e),i(s,n),i(l,s),i(r,n),i(c,n),i(u,c)},p:function(t,e){_=e.k,e.each_value,e.k_index,t.colorKeys&&g!==(g=_.defined?"":"×")&&(l.data=g),t.colorKeys&&x(s,"background",_.color),t.colorKeys&&b!==(b=_.key)&&(u.data=b),(t.selected||t.colorKeys)&&d!==(d=e.selected.indexOf(_.key)>-1?"selected":"")&&(n.className=d),t.colorKeys&&p!==(p=_.key)&&(n.dataset.series=p),n._svelte.each_value=e.each_value,n._svelte.k_index=e.k_index},u:function(){a(n)},d:function(){m(n,"click",Rt)}}}function qt(t,e){var n,s,l,r={},c={color:e.customColor,palette:e.palette};"openCustom"in e&&(c.visible=e.openCustom,r.visible=!0);var u=new Lt({root:t.root,data:c,_bind:function(e,n){t.get();var i={};!r.visible&&e.visible&&(i.openCustom=n.visible),t._set(i),r={}}});function d(e){t.reset()}return t.root._beforecreate.push(function(){u._bind({visible:1},u.get())}),u.on("change",function(e){t.updateCustom(e)}),{c:function(){n=h("div"),u._fragment.c(),s=f("\n                "),(l=h("button")).textContent="Reset",this.h()},h:function(){v(l,"click",d),l.className="btn",n.className="select"},m:function(t,e){o(n,t,e),u._mount(n,null),i(s,n),i(l,n)},p:function(t,e){var n={};t.customColor&&(n.color=e.customColor),t.palette&&(n.palette=e.palette),!r.visible&&t.openCustom&&(n.visible=e.openCustom,r.visible=!0),u._set(n),r={}},u:function(){a(n)},d:function(){u.destroy(!1),m(l,"click",d)}}}function Ft(t,n){var i;return{c:function(){(i=h("div")).textContent="Please select an element on the left to change colors for individual elements...",this.h()},h:function(){i.className="info"},m:function(t,e){o(i,t,e)},p:e,u:function(){a(i)},d:e}}function Yt(t,e){for(var s,l,r,c,d,p,_,g,b,y,k,w,N,C,M,L,T,H,j,S,$=e.colorKeys,I=[],A=0;A<$.length;A+=1)I[A]=Dt(t,n(n({},e),{each_value:$,k:$[A],k_index:A}));function O(e){t.selectAll(e)}function z(e){t.selectNone(e)}function E(e){t.selectInvert(e)}function D(t){return t.selected.length?qt:Ft}var q=D(e),F=q(t,e);function Y(e){t.resetAll()}return{c:function(){s=h("div"),l=h("div"),r=h("div"),(c=h("h4")).textContent="Select element(s):",d=f("\n            "),p=h("ul");for(var t=0;t<I.length;t+=1)I[t].c();_=f("\n            "),g=h("div"),b=f("Select:  \n                "),(y=h("a")).textContent="all",k=f("  \n                "),(w=h("a")).textContent="none",N=f("  \n                "),(C=h("a")).textContent="invert",M=f("\n        "),L=h("div"),(T=h("h4")).textContent="Choose a color:",H=f("\n            "),F.c(),j=f("\n            "),(S=h("button")).textContent="Reset all colors",this.h()},h:function(){p.className="dataseries unstyled",v(y,"click",O),y.href="#/select-all",v(w,"click",z),w.href="#/select-none",v(C,"click",E),C.href="#/select-invert",x(g,"font-size","12px"),x(g,"text-align","center"),x(g,"margin-bottom","10px"),r.className="span2",x(r,"width","43%"),v(S,"click",Y),x(S,"margin-top","20px"),S.className="btn",L.className="span2",x(L,"width","42%"),l.className="row",s.className="custom-color-selector-body",x(s,"display","block")},m:function(t,e){o(s,t,e),i(l,s),i(r,l),i(c,r),i(d,r),i(p,r);for(var n=0;n<I.length;n+=1)I[n].m(p,null);i(_,r),i(g,r),i(b,g),i(y,g),i(k,g),i(w,g),i(N,g),i(C,g),i(M,l),i(L,l),i(T,L),i(H,L),F.m(L,null),i(j,L),i(S,L)},p:function(e,i){var o=i.colorKeys;if(e.colorKeys||e.selected){for(var a=0;a<o.length;a+=1){var s=n(n({},i),{each_value:o,k:o[a],k_index:a});I[a]?I[a].p(e,s):(I[a]=Dt(t,s),I[a].c(),I[a].m(p,null))}for(;a<I.length;a+=1)I[a].u(),I[a].d();I.length=o.length}q===(q=D(i))&&F?F.p(e,i):(F.u(),F.d(),(F=q(t,i)).c(),F.m(L,j))},u:function(){a(s);for(var t=0;t<I.length;t+=1)I[t].u();F.u()},d:function(){u(I),m(y,"click",O),m(w,"click",z),m(C,"click",E),F.d(),m(S,"click",Y)}}}function Rt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.k_index];e.toggleSelect(n.key,t)}function Kt(t){L(this,t),this._state=n(n(this.store._init(["vis","themeData"]),{open:!1,openCustom:!1,customizable:!1,expanded:!1,selected:[],custom:{}}),t.data),this.store._add(this,["vis","themeData"]),this._recompute({$themeData:1,$vis:1,customizable:1,axis:1,custom:1,palette:1,value:1,selected:1},this._state),this._handlers.destroy=[H];var e,s,l,r,c,u,d,v,_,m,g,b,y=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(e=this,s=this._state,m=s.hexColor&&zt(e,s),g=s.customizable&&Et(e,s),b=s.customizable&&s.expanded&&Yt(e,s),{c:function(){l=h("div"),r=h("label"),c=f("\n    "),u=h("div"),m&&m.c(),d=f("\n\n        "),g&&g.c(),v=f("\n\n"),b&&b.c(),_=p(),this.h()},h:function(){r.className="control-label",x(r,"width","100px"),u.className="controls",l.className="control-group vis-option-type-color"},m:function(t,e){o(l,t,e),i(r,l),r.innerHTML=s.label,i(c,l),i(u,l),m&&m.m(u,null),i(d,u),g&&g.m(u,null),o(v,t,e),b&&b.m(t,e),o(_,t,e)},p:function(t,n){t.label&&(r.innerHTML=n.label),n.hexColor?m?m.p(t,n):((m=zt(e,n)).c(),m.m(u,d)):m&&(m.u(),m.d(),m=null),n.customizable?g?g.p(t,n):((g=Et(e,n)).c(),g.m(u,null)):g&&(g.u(),g.d(),g=null),n.customizable&&n.expanded?b?b.p(t,n):((b=Yt(e,n)).c(),b.m(_.parentNode,_)):b&&(b.u(),b.d(),b=null)},u:function(){r.innerHTML="",a(l),m&&m.u(),g&&g.u(),a(v),b&&b.u(),a(_)},d:function(){m&&m.d(),g&&g.d(),b&&b.d()}}),this.root._oncreate.push(function(){(function(){var t=this;this.observe("custom",function(e){e&&0===e.length&&(e={}),t.set({custom:e})})}).call(y),y.fire("update",{changed:{$vis:1,customizable:1,axis:1,custom:1,palette:1,$themeData:1,value:1,selected:1,label:1,hexColor:1,open:1,expanded:1,colorKeys:1,customColor:1,openCustom:1},current:y._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,T(this._beforecreate),T(this._oncreate),T(this._aftercreate),this._lock=!1)}function Pt(t,n){var l,r,c,u,d;return{c:function(){l=h("div"),r=f("For help on custom formats, check the "),c=h("noscript"),u=h("noscript"),d=f("."),this.h()},h:function(){l.className="small svelte-thnbg1"},m:function(t,e){o(l,t,e),i(r,l),i(c,l),c.insertAdjacentHTML("afterend",n.customFormatHelp),i(u,l),i(d,l)},p:function(t,e){t.customFormatHelp&&(s(c,u),c.insertAdjacentHTML("afterend",e.customFormatHelp))},u:function(){s(c,u),a(l)},d:e}}function Bt(t,n){var s,l,r,c=n.opt,u=(n.each_value,n.opt_index,c.l);return{c:function(){s=h("option"),l=f(u),this.h()},h:function(){s.__value=r=c.f,s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){c=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=c.l)&&(l.data=u),t.options&&r!==(r=c.f)&&(s.__value=r),s.value=s.__value},u:function(){a(s)},d:e}}function Qt(t,e){var n,i=!1;function s(){i=!0,t.set({custom:n.value}),i=!1}return{c:function(){n=h("input"),this.h()},h:function(){v(n,"input",s),g(n,"type","text"),n.disabled=e.disabled,n.className="svelte-thnbg1"},m:function(t,i){o(n,t,i),n.value=e.custom},p:function(t,e){i||(n.value=e.custom),t.disabled&&(n.disabled=e.disabled)},u:function(){a(n)},d:function(){m(n,"input",s)}}}function Gt(t){L(this,t),this._state=n(n(this.store._init(["vis","dataset"]),{axis:!1,value:"",custom:"",selected:null,disabled:!1}),t.data),this.store._add(this,["vis","dataset"]),this._recompute({$vis:1,$dataset:1,axis:1,axisCol:1,disabled:1},this._state),this._handlers.destroy=[H];var e=this;t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){for(var s,l,r,c,d,p,_,g,b,x,w=!1,N="custom"==e.selected&&Pt(0,e),C=e.options,M=[],L=0;L<C.length;L+=1)M[L]=Bt(0,n(n({},e),{each_value:C,opt:C[L],opt_index:L}));function T(){w=!0,t.set({selected:k(p)}),w=!1}var H="custom"==e.selected&&Qt(t,e);return{c:function(){s=h("div"),l=h("label"),r=f("\n\n    "),c=h("div"),N&&N.c(),d=f("\n\n        "),p=h("select");for(var t=0;t<M.length;t+=1)M[t].c();_=h("option"),g=f("(custom)"),b=f("\n        "),H&&H.c(),this.h()},h:function(){l.className="control-label svelte-thnbg1",_.__value="custom",_.value=_.__value,v(p,"change",T),"selected"in e||t.root._beforecreate.push(T),p.disabled=e.disabled,p.className="svelte-thnbg1",c.className="controls form-inline",s.className=x="control-group vis-option-custom-format "+(e.disabled?"disabled":"")+" svelte-thnbg1"},m:function(t,n){o(s,t,n),i(l,s),l.innerHTML=e.label,i(r,s),i(c,s),N&&N.m(c,null),i(d,c),i(p,c);for(var a=0;a<M.length;a+=1)M[a].m(p,null);i(_,p),i(g,_),y(p,e.selected),i(b,c),H&&H.m(c,null)},p:function(e,i){e.label&&(l.innerHTML=i.label),"custom"==i.selected?N?N.p(e,i):((N=Pt(0,i)).c(),N.m(c,d)):N&&(N.u(),N.d(),N=null);var o=i.options;if(e.options){for(var a=0;a<o.length;a+=1){var r=n(n({},i),{each_value:o,opt:o[a],opt_index:a});M[a]?M[a].p(e,r):(M[a]=Bt(0,r),M[a].c(),M[a].m(p,_))}for(;a<M.length;a+=1)M[a].u(),M[a].d();M.length=o.length}w||y(p,i.selected),e.disabled&&(p.disabled=i.disabled),"custom"==i.selected?H?H.p(e,i):((H=Qt(t,i)).c(),H.m(c,null)):H&&(H.u(),H.d(),H=null),e.disabled&&x!==(x="control-group vis-option-custom-format "+(i.disabled?"disabled":"")+" svelte-thnbg1")&&(s.className=x)},u:function(){l.innerHTML="",a(s),N&&N.u();for(var t=0;t<M.length;t+=1)M[t].u();H&&H.u()},d:function(){N&&N.d(),u(M),m(p,"change",T),H&&H.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this;this.observe("selected",function(e,n){if(e!=n){var i=t.get().custom;t.set({value:"custom"!=e?e:i+" "})}}),this.observe("value",function(e,n){if(e!=n){for(var i=0,o=t.get().options;i<o.length;i+=1)if(o[i].f==e)return t.set({selected:e});t.set({selected:"custom",custom:e})}}),this.observe("custom",function(e,n){e!=n&&"custom"==t.get().selected&&t.set({value:e})})}).call(e),e.fire("update",{changed:{axisCol:1,disabled:1,$vis:1,$dataset:1,axis:1,label:1,selected:1,customFormatHelp:1,options:1,custom:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this._beforecreate),T(this._oncreate))}n(Kt.prototype,j),n(Kt.prototype,It),Kt.prototype._recompute=function(e,n){e.$themeData&&this._differs(n.palette,n.palette=n.$themeData.colors.palette)&&(e.palette=!0),(e.$vis||e.customizable||e.axis||e.custom||e.palette)&&this._differs(n.colorKeys,n.colorKeys=$t(n))&&(e.colorKeys=!0),(e.value||e.palette)&&this._differs(n.hexColor,n.hexColor=function(t){return Ot(t.value,t.palette)}(n))&&(e.hexColor=!0),(e.selected||e.palette||e.custom)&&this._differs(n.customColor,n.customColor=function(e){var n=e.selected,i=e.palette,o=e.custom;if(void 0===o[n[0]])return"#ccc";var a=n.filter(function(t){return void 0!==o[t]}).map(function(t){return Ot(o[t],i)});return a.length?t.average(a,"lab"):"#ccc"}(n))&&(e.customColor=!0)},n(Gt.prototype,j),Gt.prototype._recompute=function(t,e){(t.$vis||t.$dataset||t.axis)&&this._differs(e.axisCol,e.axisCol=function(t){var e=t.$vis,n=t.$dataset,i=t.axis;if(!e||!i)return null;var o=e.axes()[i];return n.column("object"==typeof o?o[0]:o)}(e))&&(t.axisCol=!0),(t.axisCol||t.disabled)&&this._differs(e.customFormatHelp,e.customFormatHelp=function(t){var e=t.axisCol,n=t.disabled;if(e)return"date"==e.type()?(n?"":'<a href="http://momentjs.com/docs/#/displaying/format/" target="_blank">')+"moment.js documentation"+(n?"":"</a>"):"number"==e.type()?(n?"":'<a href="http://numeraljs.com/#format" target="_blank">')+"numeral.js documentation"+(n?"":"</a>"):""}(e))&&(t.customFormatHelp=!0),t.axisCol&&this._differs(e.options,e.options=function(t){var e=t.axisCol;return e?"number"==e.type()?[{l:"1,000[.00]",f:"0,0.[00]"},{l:"0",f:"0"},{l:"0.0",f:"0.0"},{l:"0.00",f:"0.00"},{l:"0.000",f:"0.000"},{l:"0.[0]",f:"0.[0]"},{l:"0.[00]",f:"0.[00]"},{l:"0%",f:"0%"},{l:"0.0%",f:"0.0%"},{l:"0.00%",f:"0.00%"},{l:"0.[0]%",f:"0.[0]%"},{l:"0.[00]%",f:"0.[00]%"},{l:"10,000",f:"0,0"},{l:"1st",f:"0o"},{l:"123k",f:"0a"},{l:"123.4k",f:"0.[0]a"},{l:"123.45k",f:"0.[00]a"}]:"date"==e.type()?[{l:"2015, 2016",f:"YYYY"},{l:"2015 Q1, 2015 Q2",f:"YYYY [Q]Q"},{l:"2015, Q2, Q3",f:"YYYY|\\QQ"},{l:"2015, Feb, Mar",f:"YYYY|MMM"},{l:"’15, ’16",f:"’YY"},{l:"April, May",f:"MMMM"},{l:"Apr, May",f:"MMM"},{l:"Apr ’15, May ’15",f:"MMM ’YY"},{l:"April, 2, 3",f:"MMM|DD"}]:void 0:[]}(e))&&(t.options=!0)};var Wt={update:function(){var t=this.get(),e=t.value2,n=t.multiply_,i=t.step_,o=+e.toFixed(-Math.round(Math.log(i*n)/Math.LN10))/n;this.set({value:o})}};function Jt(t){var e=t.changed,n=t.current,i=t.previous;if(e.value||!i){var o=+(n.value*n.multiply_).toFixed(-Math.round(Math.log(n.step_*n.multiply_)/Math.LN10));this.set({value2:o})}}function Ut(t,e){var n,i,s,l,r;function c(){t.set({value2:b(n.value)})}function u(){t.set({value2:b(n.value)})}function d(e){t.update()}return{c:function(){n=h("input"),r=f("  "),this.h()},h:function(){v(n,"input",c),v(n,"change",u),v(n,"input",d),g(n,"type","range"),n.min=i=e.min_*e.multiply_,n.max=s=e.max_*e.multiply_,n.step=l=e.step_*e.multiply_,n.className="svelte-pewt8g"},m:function(t,i){o(n,t,i),n.value=e.value2,o(r,t,i)},p:function(t,e){n.value=e.value2,n.value=e.value2,(t.min_||t.multiply_)&&i!==(i=e.min_*e.multiply_)&&(n.min=i),(t.max_||t.multiply_)&&s!==(s=e.max_*e.multiply_)&&(n.max=s),(t.step_||t.multiply_)&&l!==(l=e.step_*e.multiply_)&&(n.step=l)},u:function(){a(n),a(r)},d:function(){m(n,"input",c),m(n,"change",u),m(n,"input",d)}}}function Vt(t,n){var s,l;return{c:function(){s=h("span"),l=f(n.unit_),this.h()},h:function(){s.className="unit svelte-pewt8g"},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){t.unit_&&(l.data=e.unit_)},u:function(){a(s)},d:e}}function Xt(t){L(this,t),this._state=n({},t.data),this._recompute({step:1,min:1,max:1,unit:1,slider:1,multiply:1},this._state),this._handlers.state=[Jt];var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){var n,i,s,l,r,c,u,d=!1,_=e.slider_&&Ut(t,e);function x(){d=!0,t.set({value2:b(n.value)}),d=!1}function y(e){t.update()}var k=e.unit_&&Vt(0,e);return{c:function(){_&&_.c(),n=h("input"),c=f(" "),k&&k.c(),u=p(),this.h()},h:function(){v(n,"input",x),v(n,"input",y),g(n,"type","number"),n.min=i=e.min_*e.multiply_,n.max=s=e.max_*e.multiply_,n.step=l=e.step_*e.multiply_,n.style.cssText=r=e.slider_?"margin-left:10px":"",n.className="svelte-pewt8g"},m:function(t,i){_&&_.m(t,i),o(n,t,i),n.value=e.value2,o(c,t,i),k&&k.m(t,i),o(u,t,i)},p:function(e,o){o.slider_?_?_.p(e,o):((_=Ut(t,o)).c(),_.m(n.parentNode,n)):_&&(_.u(),_.d(),_=null),d||(n.value=o.value2),(e.min_||e.multiply_)&&i!==(i=o.min_*o.multiply_)&&(n.min=i),(e.max_||e.multiply_)&&s!==(s=o.max_*o.multiply_)&&(n.max=s),(e.step_||e.multiply_)&&l!==(l=o.step_*o.multiply_)&&(n.step=l),e.slider_&&r!==(r=o.slider_?"margin-left:10px":"")&&(n.style.cssText=r),o.unit_?k?k.p(e,o):((k=Vt(0,o)).c(),k.m(u.parentNode,u)):k&&(k.u(),k.d(),k=null)},u:function(){_&&_.u(),a(n),a(c),k&&k.u(),a(u)},d:function(){_&&_.d(),m(n,"input",x),m(n,"input",y),k&&k.d()}}}(this,this._state),this.root._oncreate.push(function(){var t={step:1,min:1,max:1,unit:1,slider:1,multiply:1,slider_:1,min_:1,multiply_:1,max_:1,step_:1,value2:1,unit_:1};Jt.call(e,{changed:t,current:e._state}),e.fire("update",{changed:t,current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this._oncreate))}n(Xt.prototype,j),n(Xt.prototype,Wt),Xt.prototype._recompute=function(t,e){t.step&&this._differs(e.step_,e.step_=e.step||1)&&(t.step_=!0),t.min&&this._differs(e.min_,e.min_=function(t){var e=t.min;return void 0!==e?e:0}(e))&&(t.min_=!0),t.max&&this._differs(e.max_,e.max_=function(t){var e=t.max;return void 0!==e?e:100}(e))&&(t.max_=!0),t.unit&&this._differs(e.unit_,e.unit_=function(t){var e=t.unit;return void 0!==e?e:""}(e))&&(t.unit_=!0),t.slider&&this._differs(e.slider_,e.slider_=function(t){var e=t.slider;return void 0===e||e}(e))&&(t.slider_=!0),t.multiply&&this._differs(e.multiply_,e.multiply_=function(t){return t.multiply||1}(e))&&(t.multiply_=!0)};var Zt={width:"100px"};function te(t){var s,l,r,u,d,p,v;L(this,t),this._state=n({},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=(s=this,l=this._state,v=s._slotted.default,{c:function(){r=h("div"),u=h("label"),d=f("\n    "),p=h("div"),this.h()},h:function(){x(u,"width",l.width||Zt.width),u.className="control-label",p.className="controls",x(p,"width","calc(100% - "+(l.width||Zt.width)+" - 20px)"),r.className="control-group vis-option-group vis-option-type-number"},m:function(t,e){o(r,t,e),i(u,r),u.innerHTML=l.label,i(d,r),i(p,r),v&&i(v,p)},p:function(t,e){t.label&&(u.innerHTML=e.label),t.width&&(x(u,"width",e.width||Zt.width),x(p,"width","calc(100% - "+(e.width||Zt.width)+" - 20px)"))},u:function(){u.innerHTML="",a(r),v&&c(p,v)},d:e}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function ee(t){L(this,t),this.refs={},this._state=n({},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,o,a={},s={},l={unit:e.unit,multiply:e.multiply,step:e.step,min:e.min,max:e.max,slider:e.slider};"value"in e&&(l.value=e.value,a.value=!0);var r=new Xt({root:t.root,data:l,_bind:function(e,n){t.get();var i={};!a.value&&e.value&&(i.value=n.value),t._set(i),a={}}});t.root._beforecreate.push(function(){r._bind({value:1},r.get())}),t.refs.baseNumber=r;var c={label:e.label};"width"in e&&(c.width=e.width,s.width=!0);var u=new te({root:t.root,slots:{default:d()},data:c,_bind:function(e,n){t.get();var i={};!s.width&&e.width&&(i.width=n.width),t._set(i),s={}}});return t.root._beforecreate.push(function(){u._bind({width:1},u.get())}),{c:function(){n=f("\n    "),r._fragment.c(),o=f("\n"),u._fragment.c()},m:function(t,e){i(n,u._slotted.default),r._mount(u._slotted.default,null),i(o,u._slotted.default),u._mount(t,e)},p:function(t,e){var n={};t.unit&&(n.unit=e.unit),t.multiply&&(n.multiply=e.multiply),t.step&&(n.step=e.step),t.min&&(n.min=e.min),t.max&&(n.max=e.max),t.slider&&(n.slider=e.slider),!a.value&&t.value&&(n.value=e.value,a.value=!0),r._set(n),a={};var i={};t.label&&(i.label=e.label),!s.width&&t.width&&(i.width=e.width,s.width=!0),u._set(i),s={}},u:function(){u._unmount()},d:function(){r.destroy(!1),t.refs.baseNumber===r&&(t.refs.baseNumber=null),u.destroy(!1)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,T(this._beforecreate),T(this._oncreate),T(this._aftercreate),this._lock=!1)}function ne(t,e){var n,s,l,r,c,u,d,p,_,b=e.opt,x=(e.each_value,e.opt_index,b.label);function y(){t.set({value:s.__value})}var k=b.help&&ie(t,e);return{c:function(){n=h("label"),s=h("input"),r=f(" "),c=h("span"),u=f(x),d=f("\n            "),k&&k.c(),this.h()},h:function(){t._bindingGroups[0].push(s),v(s,"change",y),g(s,"type","radio"),s.__value=l=b.value,s.value=s.__value,s.disabled=e.disabled,s.className="svelte-16mkoh8",c.className="svelte-16mkoh8",n.title=p=b.tooltip||"",n.className=_="radio "+(e.disabled?"disabled":"")+" "+(b.help?"has-help":"")+" svelte-16mkoh8"},m:function(t,a){o(n,t,a),i(s,n),s.checked=s.__value===e.value,i(r,n),i(c,n),i(u,c),i(d,n),k&&k.m(n,null)},p:function(e,i){b=i.opt,i.each_value,i.opt_index,s.checked=s.__value===i.value,e.options&&l!==(l=b.value)&&(s.__value=l),s.value=s.__value,e.disabled&&(s.disabled=i.disabled),e.options&&x!==(x=b.label)&&(u.data=x),b.help?k?k.p(e,i):((k=ie(t,i)).c(),k.m(n,null)):k&&(k.u(),k.d(),k=null),e.options&&p!==(p=b.tooltip||"")&&(n.title=p),(e.disabled||e.options)&&_!==(_="radio "+(i.disabled?"disabled":"")+" "+(b.help?"has-help":"")+" svelte-16mkoh8")&&(n.className=_)},u:function(){a(n),k&&k.u()},d:function(){t._bindingGroups[0].splice(t._bindingGroups[0].indexOf(s),1),m(s,"change",y),k&&k.d()}}}function ie(t,n){var i,s=n.opt,l=(n.each_value,n.opt_index,s.help);return{c:function(){i=h("div"),this.h()},h:function(){i.className="help svelte-16mkoh8"},m:function(t,e){o(i,t,e),i.innerHTML=l},p:function(t,e){s=e.opt,e.each_value,e.opt_index,t.options&&l!==(l=s.help)&&(i.innerHTML=l)},u:function(){i.innerHTML="",a(i)},d:e}}function oe(t){L(this,t),this._state=n({disabled:!1,width:"auto"},t.data),this._bindingGroups=[[]],this._fragment=function(t,e){for(var s,l,r,c,d,p=e.options,v=[],_=0;_<p.length;_+=1)v[_]=ne(t,n(n({},e),{each_value:p,opt:p[_],opt_index:_}));return{c:function(){s=h("div"),l=h("label"),r=f("\n\n    "),c=h("div");for(var t=0;t<v.length;t+=1)v[t].c();this.h()},h:function(){x(l,"width",e.width),l.className="control-label svelte-16mkoh8",c.className="controls form-inline svelte-16mkoh8",s.className=d="control-group vis-option-group vis-option-type-radio "+(e.inline?"inline":"")+" svelte-16mkoh8"},m:function(t,n){o(s,t,n),i(l,s),l.innerHTML=e.label,i(r,s),i(c,s);for(var a=0;a<v.length;a+=1)v[a].m(c,null)},p:function(e,i){e.label&&(l.innerHTML=i.label),e.width&&x(l,"width",i.width);var o=i.options;if(e.options||e.disabled||e.value){for(var a=0;a<o.length;a+=1){var r=n(n({},i),{each_value:o,opt:o[a],opt_index:a});v[a]?v[a].p(e,r):(v[a]=ne(t,r),v[a].c(),v[a].m(c,null))}for(;a<v.length;a+=1)v[a].u(),v[a].d();v.length=o.length}e.inline&&d!==(d="control-group vis-option-group vis-option-type-radio "+(i.inline?"inline":"")+" svelte-16mkoh8")&&(s.className=d)},u:function(){l.innerHTML="",a(s);for(var t=0;t<v.length;t+=1)v[t].u()},d:function(){u(v)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function ae(t,n){var s,l,r,c=n.opt,u=(n.each_value,n.opt_index,c.label);return{c:function(){s=h("option"),l=f(u),this.h()},h:function(){s.__value=r=c.value,s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){c=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=c.label)&&(l.data=u),t.options&&r!==(r=c.value)&&(s.__value=r),s.value=s.__value},u:function(){a(s)},d:e}}function se(t,e){for(var i,s=e.options,l=[],r=0;r<s.length;r+=1)l[r]=ae(0,n(n({},e),{each_value:s,opt:s[r],opt_index:r}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();i=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(i,t,e)},p:function(t,e){var o=e.options;if(t.options){for(var a=0;a<o.length;a+=1){var s=n(n({},e),{each_value:o,opt:o[a],opt_index:a});l[a]?l[a].p(t,s):(l[a]=ae(0,s),l[a].c(),l[a].m(i.parentNode,i))}for(;a<l.length;a+=1)l[a].u(),l[a].d();l.length=o.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(i)},d:function(){u(l)}}}function le(t,e){for(var i,s,l=e.optgroup,r=(e.each_value_1,e.optgroup_index,l.options),c=[],d=0;d<r.length;d+=1)c[d]=re(t,n(n({},e),{each_value_2:r,opt:r[d],opt_index_1:d}));return{c:function(){i=h("optgroup");for(var t=0;t<c.length;t+=1)c[t].c();this.h()},h:function(){g(i,"label",s=l.label)},m:function(t,e){o(i,t,e);for(var n=0;n<c.length;n+=1)c[n].m(i,null)},p:function(e,o){l=o.optgroup,o.each_value_1,o.optgroup_index;var a=l.options;if(e.optgroups){for(var r=0;r<a.length;r+=1){var u=n(n({},o),{each_value_2:a,opt:a[r],opt_index_1:r});c[r]?c[r].p(e,u):(c[r]=re(t,u),c[r].c(),c[r].m(i,null))}for(;r<c.length;r+=1)c[r].u(),c[r].d();c.length=a.length}e.optgroups&&s!==(s=l.label)&&g(i,"label",s)},u:function(){a(i);for(var t=0;t<c.length;t+=1)c[t].u()},d:function(){u(c)}}}function re(t,n){n.optgroup,n.each_value_1,n.optgroup_index;var s,l,r,c=n.opt,u=(n.each_value_2,n.opt_index_1,c.label);return{c:function(){s=h("option"),l=f(u),this.h()},h:function(){s.__value=r=c.value,s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){e.optgroup,e.each_value_1,e.optgroup_index,c=e.opt,e.each_value_2,e.opt_index_1,t.optgroups&&u!==(u=c.label)&&(l.data=u),t.optgroups&&r!==(r=c.value)&&(s.__value=r),s.value=s.__value},u:function(){a(s)},d:e}}function ce(t,e){for(var i,s=e.optgroups,l=[],r=0;r<s.length;r+=1)l[r]=le(t,n(n({},e),{each_value_1:s,optgroup:s[r],optgroup_index:r}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();i=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(i,t,e)},p:function(e,o){var a=o.optgroups;if(e.optgroups){for(var s=0;s<a.length;s+=1){var r=n(n({},o),{each_value_1:a,optgroup:a[s],optgroup_index:s});l[s]?l[s].p(e,r):(l[s]=le(t,r),l[s].c(),l[s].m(i.parentNode,i))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(i)},d:function(){u(l)}}}function ue(t){L(this,t),this._state=n({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){var n,s,l,r,c,u,d,_=!1,g=e.options.length&&se(0,e),b=e.optgroups.length&&ce(t,e);function w(){_=!0,t.set({value:k(c)}),_=!1}return{c:function(){n=h("div"),s=h("label"),l=f("\n\n    "),r=h("div"),c=h("select"),g&&g.c(),u=p(),b&&b.c(),this.h()},h:function(){x(s,"width",e.labelWidth),s.className="control-label",v(c,"change",w),"value"in e||t.root._beforecreate.push(w),c.disabled=e.disabled,x(c,"width",e.width),r.className=d="controls form-inline "+(e.disabled?"disabled":""),n.className="control-group vis-option-type-select"},m:function(t,a){o(n,t,a),i(s,n),s.innerHTML=e.label,i(l,n),i(r,n),i(c,r),g&&g.m(c,null),i(u,c),b&&b.m(c,null),y(c,e.value)},p:function(e,n){e.label&&(s.innerHTML=n.label),e.labelWidth&&x(s,"width",n.labelWidth),n.options.length?g?g.p(e,n):((g=se(0,n)).c(),g.m(c,u)):g&&(g.u(),g.d(),g=null),n.optgroups.length?b?b.p(e,n):((b=ce(t,n)).c(),b.m(c,null)):b&&(b.u(),b.d(),b=null),_||y(c,n.value),e.disabled&&(c.disabled=n.disabled),e.width&&x(c,"width",n.width),e.disabled&&d!==(d="controls form-inline "+(n.disabled?"disabled":""))&&(r.className=d)},u:function(){s.innerHTML="",a(n),g&&g.u(),b&&b.u()},d:function(){g&&g.d(),b&&b.d(),m(c,"change",w)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this._beforecreate))}n(te.prototype,j),n(ee.prototype,j),n(oe.prototype,j),n(ue.prototype,j);function de(t,e){var n,s,l,r,c=e.opt,u=(e.each_value,e.opt_index,c.label);return{c:function(){n=h("li"),s=h("a"),this.h()},h:function(){v(s,"click",fe),s.href=l="#/"+c.value,s._svelte={component:t,each_value:e.each_value,opt_index:e.opt_index},n.className=r=(e.value==c.value?"selected":"")+" svelte-154oatd"},m:function(t,e){o(n,t,e),i(s,n),s.innerHTML=u},p:function(t,e){c=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=c.label)&&(s.innerHTML=u),t.options&&l!==(l="#/"+c.value)&&(s.href=l),s._svelte.each_value=e.each_value,s._svelte.opt_index=e.opt_index,(t.value||t.options)&&r!==(r=(e.value==c.value?"selected":"")+" svelte-154oatd")&&(n.className=r)},u:function(){s.innerHTML="",a(n)},d:function(){m(s,"click",fe)}}}function he(t,e){for(var i,s=e.options,l=[],r=0;r<s.length;r+=1)l[r]=de(t,n(n({},e),{each_value:s,opt:s[r],opt_index:r}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();i=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(i,t,e)},p:function(e,o){var a=o.options;if(e.value||e.options){for(var s=0;s<a.length;s+=1){var r=n(n({},o),{each_value:a,opt:a[s],opt_index:s});l[s]?l[s].p(e,r):(l[s]=de(t,r),l[s].c(),l[s].m(i.parentNode,i))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(i)},d:function(){u(l)}}}function fe(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.opt_index];e.select(t,n)}function pe(t){var e,s,r,c,u,p,v,_,m,b,y,k,w,N,C,M,H,j,S,$;L(this,t),this._state=n({forcePlaceholder:!1,disabled:!1,width:"auto",options:[],optgroups:[],placeholder:"(select an item)"},t.data),this._recompute({value:1,options:1,placeholder:1,forcePlaceholder:1},this._state),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(e=this,s=this._state,S=s.options.length&&he(e,s),$=new dt({root:e.root,slots:{default:d(),button:d(),content:d()}}),{c:function(){r=h("div"),c=h("label"),u=f("\n\n    "),p=h("div"),v=f("\n            "),_=h("span"),m=h("div"),b=h("button"),y=h("noscript"),k=f("\n                        "),w=h("span"),N=f("\n            "),C=h("span"),M=h("ul"),S&&S.c(),H=f("\n        "),$._fragment.c(),this.h()},h:function(){c.className="control-label",w.className="caret svelte-154oatd",b.className="btn dropdown-toggle svelte-154oatd",m.className="btn-group",g(_,"slot","button"),M.className="dropdown-menu svelte-154oatd",x(M,"display","block"),g(C,"slot","content"),p.className=j="controls form-inline "+(s.disabled?"disabled":"")+" svelte-154oatd",r.className="control-group vis-option-type-select"},m:function(t,e){o(r,t,e),i(c,r),c.innerHTML=s.label,i(u,r),i(p,r),i(v,$._slotted.default),i(_,$._slotted.button),i(m,_),i(b,m),i(y,b),y.insertAdjacentHTML("beforebegin",s.currentLabel),i(k,b),i(w,b),i(N,$._slotted.default),i(C,$._slotted.content),i(M,C),S&&S.m(M,null),i(H,$._slotted.default),$._mount(p,null)},p:function(t,n){t.label&&(c.innerHTML=n.label),t.currentLabel&&(l(y),y.insertAdjacentHTML("beforebegin",n.currentLabel)),n.options.length?S?S.p(t,n):((S=he(e,n)).c(),S.m(M,null)):S&&(S.u(),S.d(),S=null),t.disabled&&j!==(j="controls form-inline "+(n.disabled?"disabled":"")+" svelte-154oatd")&&(p.className=j)},u:function(){c.innerHTML="",l(y),a(r),S&&S.u()},d:function(){S&&S.d(),$.destroy(!1)}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,T(this._beforecreate),T(this._oncreate),T(this._aftercreate),this._lock=!1)}function ve(t){var e=t-1;return e*e*e+1}function _e(t,e){var n=e.delay;void 0===n&&(n=0);var i=e.duration;void 0===i&&(i=400);var o=e.easing;void 0===o&&(o=ve);var a=getComputedStyle(t),s=+a.opacity,l=parseFloat(a.height),r=parseFloat(a.paddingTop),c=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),d=parseFloat(a.marginBottom),h=parseFloat(a.borderTopWidth),f=parseFloat(a.borderBottomWidth);return{delay:n,duration:i,easing:o,css:function(t){return"overflow: hidden;opacity: "+Math.min(20*t,1)*s+";height: "+t*l+"px;padding-top: "+t*r+"px;padding-bottom: "+t*c+"px;margin-top: "+t*u+"px;margin-bottom: "+t*d+"px;border-top-width: "+t*h+"px;border-bottom-width: "+t*f+"px;"}}}n(pe.prototype,j),n(pe.prototype,{select:function(t,e){t.preventDefault(),this.set({value:e.value}),this.fire("change",e.value)}}),pe.prototype._recompute=function(t,e){(t.value||t.options||t.placeholder||t.forcePlaceholder)&&this._differs(e.currentLabel,e.currentLabel=function(t){var e=t.value,n=t.options,i=t.placeholder;if(!t.forcePlaceholder)for(var o=0;o<n.length;o++)if(n[o].value==e)return n[o].label;return'<span style="color:#999;font-size:12px;">'+i+"</span>"}(e))&&(t.currentLabel=!0)};var me={show:function(){var t=this,e=setTimeout(function(){t.set({visible:!0})},400);this.set({t:e})},hide:function(){var t=this.get().t;clearTimeout(t),this.set({visible:!1})}};function ge(t,n){var i;return{c:function(){i=h("i"),this.h()},h:function(){i.className="im im-graduation-hat svelte-1mkn8ur"},m:function(t,e){o(i,t,e)},u:function(){a(i)},d:e}}function be(t,n){var i;return{c:function(){i=f("?")},m:function(t,e){o(i,t,e)},u:function(){a(i)},d:e}}function xe(t,n){var s,l=t._slotted.default;return{c:function(){s=h("div"),this.h()},h:function(){s.className="content svelte-1mkn8ur"},m:function(t,e){o(s,t,e),l&&i(l,s)},u:function(){a(s),l&&c(s,l)},d:e}}function ye(t){L(this,t),this._state=n({visible:!1},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=function(t,e){var n,s,l;function r(t){return t.visible?ge:be}var c=r(e),u=c(t,e),d=e.visible&&xe(t);function p(e){t.show()}function _(e){t.hide()}return{c:function(){n=h("div"),s=h("span"),u.c(),l=f("\n    "),d&&d.c(),this.h()},h:function(){s.className="svelte-1mkn8ur",v(n,"mouseenter",p),v(n,"mouseleave",_),n.className="help svelte-1mkn8ur"},m:function(t,e){o(n,t,e),i(s,n),u.m(s,null),i(l,n),d&&d.m(n,null)},p:function(e,i){c!==(c=r(i))&&(u.u(),u.d(),(u=c(t,i)).c(),u.m(s,null)),i.visible?d||((d=xe(t)).c(),d.m(n,null)):d&&(d.u(),d.d(),d=null)},u:function(){a(n),u.u(),d&&d.u()},d:function(){u.d(),d&&d.d(),m(n,"mouseenter",p),m(n,"mouseleave",_)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function ke(t){var e=this,n=t.changed,i=t.current;n.value&&i.value&&(this.set({highlight:!0}),setTimeout(function(){e.set({highlight:!1})},300))}function we(t,e){var n,o,a=t._slotted.help,s=new ye({root:t.root,slots:{default:d()}});return{c:function(){n=f("\n        "),o=f("\n    "),s._fragment.c()},m:function(t,e){i(n,s._slotted.default),a&&i(a,s._slotted.default),i(o,s._slotted.default),s._mount(t,e)},u:function(){a&&c(s._slotted.default,a),s._unmount()},d:function(){s.destroy(!1)}}}function Ne(t,n){var s,l,r,c,u;return{c:function(){s=h("div"),l=h("div"),this.h()},h:function(){l.className="disabled-msg svelte-ejkf4x",s.className="svelte-ejkf4x"},m:function(t,e){o(s,t,e),i(l,s),l.innerHTML=n.disabled_msg},p:function(t,e){(u||t.disabled_msg)&&(l.innerHTML=e.disabled_msg)},i:function(e,n){c||(c=!0,u=!1,t.root._aftercreate.push(function(){r||(r=N(t,s,_e,{},!0)),r.run(!0,function(){t.fire("intro.end",{node:s})})}),this.m(e,n))},o:function(e){if(!u){u=!0,c=!1;var n=1;r.run(!1,function(){t.fire("outro.end",{node:s}),0==--n&&e(),r=null})}},u:function(){l.innerHTML="",a(s)},d:e}}function Ce(t,n){var s,l,r,u,d,f=t._slotted.default;return{c:function(){s=h("div"),l=h("div"),this.h()},h:function(){l.className="switch-content svelte-ejkf4x",s.className="svelte-ejkf4x"},m:function(t,e){o(s,t,e),i(l,s),f&&i(f,l)},p:e,i:function(e,n){u||(u=!0,d=!1,t.root._aftercreate.push(function(){r||(r=N(t,s,_e,{},!0)),r.run(!0,function(){t.fire("intro.end",{node:s})})}),this.m(e,n))},o:function(e){if(!d){d=!0,u=!1;var n=1;r.run(!1,function(){t.fire("outro.end",{node:s}),0==--n&&e(),r=null})}},u:function(){a(s),f&&c(l,f)},d:e}}function Me(t){L(this,t),this._state=n({hasHelp:!1,disabled_msg:"",disabled_state:"auto",disabled:!1,highlight:!1},t.data),this._handlers.state=[ke],this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,c,u,d,p,_,b,y,k,w,N,C,M=e.hasHelp&&we(t);function L(){t.set({value:u.checked})}var T=[Ne,Ce],H=[];function j(t){return t.disabled&&t.disabled_msg?0:t.disabled&&"on"!=t.disabled_state||!t.value?-1:1}return~(w=j(e))&&(N=H[w]=T[w](t,e)),{c:function(){n=h("div"),M&&M.c(),s=f("\n    "),l=h("label"),c=h("label"),u=h("input"),p=h("span"),_=f("\n        "),b=h("noscript"),k=f("\n    "),N&&N.c(),this.h()},h:function(){v(u,"change",L),u.className=d=(e.disabled&&"on"==e.disabled_state?"disabled-force-checked":e.disabled&&"off"==e.disabled_state?"disabled-force-unchecked":"")+" svelte-ejkf4x",u.disabled=e.disabled,g(u,"type","checkbox"),p.className="slider round svelte-ejkf4x",c.className="switch svelte-ejkf4x",l.className=y="switch-outer "+(e.disabled?"disabled":"")+" svelte-ejkf4x",x(l,"padding-left","40px"),n.className=C="control-group vis-option-group vis-option-type-switch "+(e.highlight?"highlight":"")+" svelte-ejkf4x"},m:function(t,a){o(n,t,a),M&&M.m(n,null),i(s,n),i(l,n),i(c,l),i(u,c),u.checked=e.value,i(p,c),i(_,l),i(b,l),b.insertAdjacentHTML("afterend",e.label),i(k,n),~w&&H[w].i(n,null)},p:function(e,i){i.hasHelp?M||((M=we(t)).c(),M.m(n,s)):M&&(M.u(),M.d(),M=null),u.checked=i.value,(e.disabled||e.disabled_state)&&d!==(d=(i.disabled&&"on"==i.disabled_state?"disabled-force-checked":i.disabled&&"off"==i.disabled_state?"disabled-force-unchecked":"")+" svelte-ejkf4x")&&(u.className=d),e.disabled&&(u.disabled=i.disabled),e.label&&(r(b),b.insertAdjacentHTML("afterend",i.label)),e.disabled&&y!==(y="switch-outer "+(i.disabled?"disabled":"")+" svelte-ejkf4x")&&(l.className=y);var o=w;(w=j(i))===o?~w&&H[w].p(e,i):(N&&N.o(function(){H[o].u(),H[o].d(),H[o]=null}),~w?((N=H[w])||(N=H[w]=T[w](t,i)).c(),N.i(n,null)):N=null),e.highlight&&C!==(C="control-group vis-option-group vis-option-type-switch "+(i.highlight?"highlight":"")+" svelte-ejkf4x")&&(n.className=C)},u:function(){r(b),a(n),M&&M.u()},d:function(){M&&M.d(),m(u,"change",L),~w&&(H[w].u(),H[w].d())}}}(this,this._state),this.root._oncreate.push(function(){var t={highlight:1,hasHelp:1,disabled:1,disabled_state:1,value:1,label:1,disabled_msg:1};ke.call(e,{changed:t,current:e._state}),function(){this.set({hasHelp:!(!this.options||!this.options.slots||!this.options.slots.help)})}.call(e),e.fire("update",{changed:t,current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,T(this._beforecreate),T(this._oncreate),T(this._aftercreate),this._lock=!1)}function Le(t){L(this,t),this._state=n({placeholder:""},t.data),this._fragment=function(t,e){var n,s,l,r,c,u,d=!1;function p(){d=!0,t.set({value:u.value}),d=!1}return{c:function(){n=h("div"),s=h("label"),l=f(e.label),r=f("\n    "),c=h("div"),u=h("textarea"),this.h()},h:function(){s.className="control-label",v(u,"input",p),u.placeholder=e.placeholder,x(u,"width",e.width||"auto"),c.className="controls",n.className="control-group vis-option-group vis-option-type-textarea"},m:function(t,a){o(n,t,a),i(s,n),i(l,s),i(r,n),i(c,n),i(u,c),u.value=e.value},p:function(t,e){t.label&&(l.data=e.label),d||(u.value=e.value),t.placeholder&&(u.placeholder=e.placeholder),t.width&&x(u,"width",e.width||"auto")},u:function(){a(n)},d:function(){m(u,"input",p)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(ye.prototype,j),n(ye.prototype,me),n(Me.prototype,j),n(Le.prototype,j);var Te=ot(function(t){if(!q(t))return[];var e=[];for(var n in t)e.push(n);return et&&it(t,e),e});function He(t){var e,n=t.changed,i=t.current;if(n.selected&&i.selected){var o=this.get().axis,a=q(e=this.store.getMetadata("axes",{}))?R(e)?e.slice():Te({},e):e;"-"==i.selected?delete a[o]:a[o]=i.selected,this.store.setMetadata("axes",a)}}function je(t,n){var s,l,r=n.axis["na-label"]||"--";return{c:function(){s=h("option"),l=f(r),this.h()},h:function(){s.__value="-",s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){t.axis&&r!==(r=e.axis["na-label"]||"--")&&(l.data=r)},u:function(){a(s)},d:e}}function Se(t,n){var s,l,r,c=n.column,u=(n.each_value,n.column_index,c.name);return{c:function(){s=h("option"),l=f(u),this.h()},h:function(){s.__value=r=c.name,s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){c=e.column,e.each_value,e.column_index,t.columns&&u!==(u=c.name)&&(l.data=u),t.columns&&r!==(r=c.name)&&(s.__value=r),s.value=s.__value},u:function(){a(s)},d:e}}function $e(t){L(this,t),this._state=n(n(this.store._init(["visualization","dataset"]),{selected:!1}),t.data),this.store._add(this,["visualization","dataset"]),this._recompute({axis:1,$visualization:1,$dataset:1},this._state),this._handlers.state=[He],this._handlers.destroy=[H];var e=this;t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){for(var s,l,r,c,d,_,g=!1,b=e.$visualization&&e.$visualization.axes[e.axis].optional&&je(0,e),x=e.columns,w=[],N=0;N<x.length;N+=1)w[N]=Se(0,n(n({},e),{each_value:x,column:x[N],column_index:N}));function C(){g=!0,t.set({selected:k(d)}),g=!1}return{c:function(){s=h("div"),l=h("label"),r=f("\n\n    "),c=h("div"),d=h("select"),b&&b.c(),_=p();for(var t=0;t<w.length;t+=1)w[t].c();this.h()},h:function(){l.className="control-label svelte-7khi8i",v(d,"change",C),"selected"in e||t.root._beforecreate.push(C),d.className="svelte-7khi8i",c.className="controls form-inline",s.className="control-group vis-option-group"},m:function(t,n){o(s,t,n),i(l,s),l.innerHTML=e.label,i(r,s),i(c,s),i(d,c),b&&b.m(d,null),i(_,d);for(var a=0;a<w.length;a+=1)w[a].m(d,null);y(d,e.selected)},p:function(t,e){t.label&&(l.innerHTML=e.label),e.$visualization&&e.$visualization.axes[e.axis].optional?b?b.p(t,e):((b=je(0,e)).c(),b.m(d,_)):b&&(b.u(),b.d(),b=null);var i=e.columns;if(t.columns){for(var o=0;o<i.length;o+=1){var a=n(n({},e),{each_value:i,column:i[o],column_index:o});w[o]?w[o].p(t,a):(w[o]=Se(0,a),w[o].c(),w[o].m(d,null))}for(;o<w.length;o+=1)w[o].u(),w[o].d();w.length=i.length}g||y(d,e.selected)},u:function(){l.innerHTML="",a(s),b&&b.u();for(var t=0;t<w.length;t+=1)w[t].u()},d:function(){b&&b.d(),u(w),m(d,"change",C)}}}(this,this._state),this.root._oncreate.push(function(){var t={axis:1,$visualization:1,$dataset:1,label:1,selected:1,columns:1};He.call(e,{changed:t,current:e._state}),function(){var t=this;this.store.observe("visualization",function(e){if(!t.get().selected&&e){var n=t.store.getMetadata("axes")[t.get().axis];console.log("initialize",t.get().axis,n),t.set({selected:n})}})}.call(e),e.fire("update",{changed:t,current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this._beforecreate),T(this._oncreate))}function Ie(t,n){var i;return{c:function(){i=h("p"),this.h()},h:function(){i.className="mini-help svelte-15atk4f"},m:function(t,e){o(i,t,e),i.innerHTML=n.help},p:function(t,e){t.help&&(i.innerHTML=e.help)},u:function(){i.innerHTML="",a(i)},d:e}}function Ae(t){L(this,t),this._state=n({unit:"",width:"100px",help:"",placeholder:""},t.data),this._fragment=function(t,e){var n,s,l,r,c,u,d=!1;function p(){d=!0,t.set({value:c.value}),d=!1}var _=e.help&&Ie(0,e);return{c:function(){n=h("div"),s=h("label"),l=f("\n    "),r=h("div"),c=h("input"),u=f("\n        "),_&&_.c(),this.h()},h:function(){x(s,"width",e.width),s.className="control-label svelte-15atk4f",v(c,"input",p),g(c,"type","text"),c.className="input-large",c.placeholder=e.placeholder,r.className="controls",n.className="control-group vis-option-group vis-option-type-text"},m:function(t,a){o(n,t,a),i(s,n),s.innerHTML=e.label,i(l,n),i(r,n),i(c,r),c.value=e.value,i(u,r),_&&_.m(r,null)},p:function(t,e){t.label&&(s.innerHTML=e.label),t.width&&x(s,"width",e.width),d||(c.value=e.value),t.placeholder&&(c.placeholder=e.placeholder),e.help?_?_.p(t,e):((_=Ie(0,e)).c(),_.m(r,null)):_&&(_.u(),_.d(),_=null)},u:function(){s.innerHTML="",a(n),_&&_.u()},d:function(){m(c,"input",p),_&&_.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n($e.prototype,j),$e.prototype._recompute=function(t,e){(t.axis||t.$visualization||t.$dataset)&&this._differs(e.columns,e.columns=function(t){var e=t.axis,n=t.$visualization,i=t.$dataset,o=[];return i&&n&&e?(i.eachColumn(function(t){lt(n.axes[e].accepts,t.type())>-1&&o.push({name:t.name()})}),o):[]}(e))&&(t.columns=!0)},n(Ae.prototype,j);var Oe={focus:function(){this.refs.searchInput.focus()},blur:function(){this.refs.searchInput.blur()},onClick:function(t){this.set({open:!0}),this.fire("focus",t)},search:function(t){this.set({open:!0}),this.fire("search",{query:t})},select:function(t,e){this.set({selectedItem:t,query:t.title,open:!1}),e&&e.stopPropagation(),this.fire("select",{item:t})},keyup:function(t){if(t){if(13===t.keyCode){var e=this.get().selectedItem;this.select(e)}if(38==t.keyCode||40==t.keyCode){var n=this.get(),i=n.selectedIndex,o=n.matches;isNaN(i)&&(i=-1);var a=o.length||0;38==t.keyCode&&(i=(i-1+a)%a),40==t.keyCode&&(i=(i+1)%a),this.set({selectedIndex:i,selectedItem:o[i]})}27==t.keyCode&&(this.set({open:!1}),this.blur())}}};function ze(t){var e=t.changed,n=t.current;if(e.selectedIndex&&this.refs.dropdown){var i=this.refs.dropdown,o=n.selectedIndex,a=i.children[o].getBoundingClientRect(),s=i.getBoundingClientRect();a.y+a.height-s.y>s.height?i.scrollBy(0,a.y+a.height-s.y-s.height+5):a.y-s.y<0&&i.scrollBy(0,a.y-s.y-5)}}function Ee(t,n){var i,s;return{c:function(){i=h("i"),this.h()},h:function(){i.className=s="icon "+n.icon+" svelte-kljjr2"},m:function(t,e){o(i,t,e)},p:function(t,e){t.icon&&s!==(s="icon "+e.icon+" svelte-kljjr2")&&(i.className=s)},u:function(){a(i)},d:e}}function De(t,e){var n,i,s,l=e.item,r=(e.each_value,e.i),c=l.display||l.title;return{c:function(){n=h("li"),this.h()},h:function(){v(n,"click",Fe),n.className=i=(r==e.selectedIndex?"selected":"")+" svelte-kljjr2",n.style.cssText=s=l.style||"",n._svelte={component:t,each_value:e.each_value,i:e.i}},m:function(t,e){o(n,t,e),n.innerHTML=c},p:function(t,e){l=e.item,e.each_value,r=e.i,t.matches&&c!==(c=l.display||l.title)&&(n.innerHTML=c),t.selectedIndex&&i!==(i=(r==e.selectedIndex?"selected":"")+" svelte-kljjr2")&&(n.className=i),t.matches&&s!==(s=l.style||"")&&(n.style.cssText=s),n._svelte.each_value=e.each_value,n._svelte.i=e.i},u:function(){n.innerHTML="",a(n)},d:function(){m(n,"click",Fe)}}}function qe(t,e){for(var i,s=e.matches,l=[],r=0;r<s.length;r+=1)l[r]=De(t,n(n({},e),{each_value:s,item:s[r],i:r}));return{c:function(){i=h("ul");for(var t=0;t<l.length;t+=1)l[t].c();this.h()},h:function(){i.className="dropdown-results svelte-kljjr2"},m:function(e,n){o(i,e,n);for(var a=0;a<l.length;a+=1)l[a].m(i,null);t.refs.dropdown=i},p:function(e,o){var a=o.matches;if(e.selectedIndex||e.matches){for(var s=0;s<a.length;s+=1){var r=n(n({},o),{each_value:a,item:a[s],i:s});l[s]?l[s].p(e,r):(l[s]=De(t,r),l[s].c(),l[s].m(i,null))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){a(i);for(var t=0;t<l.length;t+=1)l[t].u()},d:function(){u(l),t.refs.dropdown===i&&(t.refs.dropdown=null)}}}function Fe(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.i];e.select(n,t)}function Ye(t){L(this,t),this.refs={},this._state=n({selection:"",query:"",icon:!1,placeholder:"",filter:"indexOf",selectedItem:void 0,selectedIndex:void 0,searching:!1,open:!1,items:[]},t.data),this._recompute({query:1,items:1,filter:1},this._state),this._handlers.update=[ze],this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,r,u,d,p,_,b,x,y=!1,k=t._slotted.button;function w(e){t.set({open:!1})}function N(){y=!0,t.set({query:l.value}),y=!1}function C(e){t.keyup(e)}function M(e){var n=t.get();t.search(n.query)}window.addEventListener("click",w);var L=e.icon&&Ee(0,e);function T(e){t.set({open:!0})}var H=e.open&&e.matches.length&&qe(t,e);function j(e){t.onClick(e)}function S(t){t.stopPropagation()}return{c:function(){n=h("div"),s=h("div"),l=h("input"),u=f("\n\n        "),L&&L.c(),d=f("\n\n        "),p=h("div"),k||((_=h("button")).innerHTML='<span class="caret"></span>'),b=f("\n\n        "),H&&H.c(),this.h()},h:function(){v(l,"input",N),v(l,"keypress",C),v(l,"input",M),g(l,"type","search"),l.placeholder=r=e.open?e.placeholder:e.selection||e.placeholder,l.className="svelte-kljjr2",k||(v(_,"click",T),_.className="btn btn-small btn-primary svelte-kljjr2"),p.className="btn-wrap svelte-kljjr2",v(s,"click",j),s.className=x="dropdown "+(e.icon?"icon":"")+" "+(!e.open&&e.selection?"selection":"")+" svelte-kljjr2",v(n,"click",S),n.className="control-group vis-option-group vis-option-type-select"},m:function(a,r){o(n,a,r),i(s,n),i(l,s),t.refs.searchInput=l,l.value=e.query,i(u,s),L&&L.m(s,null),i(d,s),i(p,s),i(k||_,p),i(b,s),H&&H.m(s,null)},p:function(e,n){y||(l.value=n.query),(e.open||e.placeholder||e.selection)&&r!==(r=n.open?n.placeholder:n.selection||n.placeholder)&&(l.placeholder=r),n.icon?L?L.p(e,n):((L=Ee(0,n)).c(),L.m(s,d)):L&&(L.u(),L.d(),L=null),n.open&&n.matches.length?H?H.p(e,n):((H=qe(t,n)).c(),H.m(s,null)):H&&(H.u(),H.d(),H=null),(e.icon||e.open||e.selection)&&x!==(x="dropdown "+(n.icon?"icon":"")+" "+(!n.open&&n.selection?"selection":"")+" svelte-kljjr2")&&(s.className=x)},u:function(){a(n),L&&L.u(),k&&c(p,k),H&&H.u()},d:function(){window.removeEventListener("click",w),m(l,"input",N),m(l,"keypress",C),m(l,"input",M),t.refs.searchInput===l&&(t.refs.searchInput=null),L&&L.d(),k||m(_,"click",T),H&&H.d(),m(s,"click",j),m(n,"click",S)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:{query:1,items:1,filter:1,icon:1,open:1,selection:1,placeholder:1,matches:1,selectedIndex:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this._oncreate))}function Re(t,n){var s,l,r,u,d=t._slotted.default;return{c:function(){s=h("div"),l=h("fieldset"),r=h("div"),this.h()},h:function(){r.className="control-group vis-option-group",l.id="visOptions",s.className=u="section "+n.id},m:function(t,e){o(s,t,e),i(l,s),i(r,l),d&&i(d,r)},p:function(t,e){t.id&&u!==(u="section "+e.id)&&(s.className=u)},u:function(){a(s),d&&c(r,d)},d:e}}function Ke(t){var e,i,s,l;L(this,t),this._state=n({},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=(e=this,i=this._state,l=i.id==i.active&&Re(e,i),{c:function(){l&&l.c(),s=p()},m:function(t,e){l&&l.m(t,e),o(s,t,e)},p:function(t,n){n.id==n.active?l?l.p(t,n):((l=Re(e,n)).c(),l.m(s.parentNode,s)):l&&(l.u(),l.d(),l=null)},u:function(){l&&l.u(),a(s)},d:function(){l&&l.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(Ye.prototype,j),n(Ye.prototype,Oe),Ye.prototype._recompute=function(t,e){var n,i,o;(t.query||t.items||t.filter)&&this._differs(e.matches,e.matches=(i=(n=e).query,o=n.items,n.filter&&i?o&&o.filter?o.filter(function(t){return(t.search||t.title).toLowerCase().indexOf(i.toLowerCase())>-1}):[]:o))&&(t.matches=!0)},n(Ke.prototype,j);var Pe={toggle:function(){if(!this.get().notoggle){var t=this.get(),e=t.open,n=t.id;if(n){var i=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};i["locator-map"]||(i["locator-map"]={}),i["locator-map"][n]="open"==i["locator-map"][n]?"closed":"open",window.localStorage.setItem("dw-vis-groups",JSON.stringify(i))}this.set({open:!e})}}};function Be(t,n){var i,s,l;return{c:function(){i=h("i"),s=f("\n        "),l=h("i"),this.h()},h:function(){i.className="fa fa-chevron-up expand-group pull-right",l.className="fa fa-chevron-down collapse-group pull-right"},m:function(t,e){o(i,t,e),o(s,t,e),o(l,t,e)},u:function(){a(i),a(s),a(l)},d:e}}function Qe(t,n){var s,l=t._slotted.default;return{c:function(){s=h("div"),this.h()},h:function(){s.className="option-group-content vis-option-type-chart-description"},m:function(t,e){o(s,t,e),l&&i(l,s)},u:function(){a(s),l&&c(s,l)},d:e}}function Ge(t){L(this,t),this._state=n({notoggle:!1,id:!1,open:!0},t.data),this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,c,u,d,p=!e.notoggle&&Be();function _(e){t.toggle()}var g=e.open&&Qe(t);return{c:function(){n=h("div"),s=h("label"),p&&p.c(),l=f("\n        "),c=h("noscript"),u=f("\n\n    "),g&&g.c(),this.h()},h:function(){v(s,"click",_),s.className="group-title svelte-ww03ir",n.className=d="vis-option-type-group "+(e.open?"group-open":"")+" "+(e.notoggle?"notoggle":"")+" svelte-ww03ir"},m:function(t,a){o(n,t,a),i(s,n),p&&p.m(s,null),i(l,s),i(c,s),c.insertAdjacentHTML("afterend",e.label),i(u,n),g&&g.m(n,null)},p:function(e,i){i.notoggle?p&&(p.u(),p.d(),p=null):p||((p=Be()).c(),p.m(s,l)),e.label&&(r(c),c.insertAdjacentHTML("afterend",i.label)),i.open?g||((g=Qe(t)).c(),g.m(n,null)):g&&(g.u(),g.d(),g=null),(e.open||e.notoggle)&&d!==(d="vis-option-type-group "+(i.open?"group-open":"")+" "+(i.notoggle?"notoggle":"")+" svelte-ww03ir")&&(n.className=d)},u:function(){r(c),a(n),p&&p.u(),g&&g.u()},d:function(){p&&p.d(),m(s,"click",_),g&&g.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get()||{},e=t.id;if(!t.notoggle&&e){var n=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};n["locator-map"]&&n["locator-map"][e]&&this.set({open:"closed"!=n["locator-map"][e]})}}).call(e),e.fire("update",{changed:{open:1,notoggle:1,label:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this._oncreate))}function We(t,e,n){e=U(e,n);for(var i,o=Y(t),a=0,s=o.length;a<s;a++)if(e(t[i=o[a]],i,t))return i}function Je(t,e){return function(t,e,n){var i=(tt(t)?st:We)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}(t,W(e))}n(Ge.prototype,j),n(Ge.prototype,Pe);var Ue,Ve={select:function(t,e){if(!e.redirect&&(t.preventDefault(),!e.readonly&&(this.fire("select",e),"/edit/"==location.pathname.substr(0,6)))){var n=this.store.get().id;window.history.pushState({step:e,id:n},"","/edit/"+n+"/"+e.id)}}};function Xe(t){var e=t.changed,n=t.current;if(e.active_i){var i=n.steps[n.active_i];if(i){var o=this.store.get(),a=o.id,s=o.title;window.document.title=s+" - "+a+" - "+i.title+" | Datawrapper"}}}function Ze(t,n){var i;return{c:function(){i=h("i"),this.h()},h:function(){i.className="fa fa-check"},m:function(t,e){o(i,t,e)},u:function(){a(i)},d:e}}function tn(t){L(this,t),this._state=n(n(this.store._init(["lastEditStep"]),{step:{title:"",index:1},maxStep:1,active:1}),t.data),this.store._add(this,["lastEditStep"]),this._recompute({active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1},this._state),this._handlers.update=[Xe],this._handlers.destroy=[H];var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){var n,s,l,r,c,u,d,p,_,g=e.step.title,b=e.passed&&Ze();function y(e){var n=t.get();t.select(e,n.step)}return{c:function(){n=h("a"),s=h("span"),l=f(e.index),r=f("\n    "),c=h("span"),u=f("\n    "),b&&b.c(),d=f("\n    "),p=h("div"),this.h()},h:function(){s.className="step",c.className="title",p.className="corner",v(n,"click",y),x(n,"width",95/e.steps.length+"%"),n.href=_=e.step.redirect?e.step.redirect:"#"+e.step.id,n.className=e.class_},m:function(t,e){o(n,t,e),i(s,n),i(l,s),i(r,n),i(c,n),c.innerHTML=g,i(u,n),b&&b.m(n,null),i(d,n),i(p,n)},p:function(t,e){t.index&&(l.data=e.index),t.step&&g!==(g=e.step.title)&&(c.innerHTML=g),e.passed?b||((b=Ze()).c(),b.m(n,d)):b&&(b.u(),b.d(),b=null),t.steps&&x(n,"width",95/e.steps.length+"%"),t.step&&_!==(_=e.step.redirect?e.step.redirect:"#"+e.step.id)&&(n.href=_),t.class_&&(n.className=e.class_)},u:function(){c.innerHTML="",a(n),b&&b.u()},d:function(){b&&b.d(),m(n,"click",y)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:{active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1,class_:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this._oncreate))}function en(t){void 0===t&&(t=0),window._paq&&(Ue&&window._paq.push(["setReferrerUrl",Ue]),window._paq.push(["setGenerationTimeMs",t]),window._paq.push(["setCustomUrl",window.location.pathname]),window._paq.push(["setDocumentTitle",window.document.title]),window._paq.push(["trackPageView"]),Ue=window.location.pathname)}n(tn.prototype,j),n(tn.prototype,Ve),tn.prototype._recompute=function(t,e){var n,i,o;(t.active||t.steps)&&this._differs(e.active_i,e.active_i=(i=(n=e).active,(o=n.steps).indexOf(Je(o,{id:i}))))&&(t.active_i=!0),(t.index||t.active_i||t.maxStep)&&this._differs(e.passed,e.passed=function(t){var e=t.index,n=t.active_i;return e<t.maxStep&&e!=n}(e))&&(t.passed=!0),(t.step||t.index||t.active||t.passed||t.$lastEditStep)&&this._differs(e.class_,e.class_=function(t){var e=t.step,n=t.index,i=t.active,o=t.passed,a=t.$lastEditStep,s=[];return e.readonly&&s.push("readonly"),i==e.id?s.push("active"):(n>a+1&&s.push("unseen"),o&&s.push("passed")),s.join(" ")}(e))&&(t.class_=!0)};var nn={select:function(t,e){this.set({active:t.id});var n=this.store.get().lastEditStep;this.store.set({lastEditStep:Math.max(n,e+1)}),en()},popstate:function(t){if(t.state&&t.state.id&&t.state.step){var e=t.state,n=e.id,i=e.step;n==this.store.get().id?(this.set({active:i.id}),en()):window.location.href="/edit/"+n+"/"+i.id}}};function on(t,e){var n=e.step,i=e.each_value,o=e.i,a={},s={index:o+1};o in e.each_value&&(s.step=n,a.step=!0),"steps"in e&&(s.steps=e.steps,a.steps=!0),"active"in e&&(s.active=e.active,a.active=!0);var l=new tn({root:t.root,data:s,_bind:function(e,n){var s=t.get(),l={};!a.step&&e.step&&(i[o]=n.step,l.steps=s.steps),!a.steps&&e.steps&&(l.steps=n.steps),!a.active&&e.active&&(l.active=n.active),t._set(l),a={}}});return t.root._beforecreate.push(function(){l._bind({step:1,steps:1,active:1},l.get())}),l.on("select",function(e){t.select(n,o)}),{c:function(){l._fragment.c()},m:function(t,e){l._mount(t,e)},p:function(t,e){n=e.step,i=e.each_value,o=e.i;var s={};s.index=o+1,!a.step&&t.steps&&(s.step=n,a.step=!0),!a.steps&&t.steps&&(s.steps=e.steps,a.steps=!0),!a.active&&t.active&&(s.active=e.active,a.active=!0),l._set(s),a={}},u:function(){l._unmount()},d:function(){l.destroy(!1)}}}function an(t,n){var s,l,r,c,u,d,p;return{c:function(){s=h("div"),l=f("This chart belongs to "),r=h("a"),c=f("User "),u=f(n.$authorId),p=f(". Great power comes with great responsibility, so be careful with what you're doing!"),this.h()},h:function(){r.target="_blank",r.href=d="/admin/chart/by/"+n.$authorId,s.className="alert alert-warning",x(s,"text-align","center"),x(s,"margin-top","10px")},m:function(t,e){o(s,t,e),i(l,s),i(r,s),i(c,r),i(u,r),i(p,s)},p:function(t,e){t.$authorId&&(u.data=e.$authorId),t.$authorId&&d!==(d="/admin/chart/by/"+e.$authorId)&&(r.href=d)},u:function(){a(s)},d:e}}function sn(t){L(this,t),this._state=n(n(this.store._init(["user","authorId"]),{steps:[]}),t.data),this.store._add(this,["user","authorId"]),this._handlers.destroy=[H];var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var i,s,l;function r(e){t.popstate(e)}window.addEventListener("popstate",r);for(var c=e.steps,d=[],v=0;v<c.length;v+=1)d[v]=on(t,n(n({},e),{each_value:c,step:c[v],i:v}));var _=e.$user.id!=e.$authorId&&e.$user.isAdmin&&an(0,e);return{c:function(){i=h("div");for(var t=0;t<d.length;t+=1)d[t].c();s=f("\n\n"),_&&_.c(),l=p(),this.h()},h:function(){i.className="create-nav svelte-nols97"},m:function(t,e){o(i,t,e);for(var n=0;n<d.length;n+=1)d[n].m(i,null);o(s,t,e),_&&_.m(t,e),o(l,t,e)},p:function(e,o){var a=o.steps;if(e.steps||e.active){for(var s=0;s<a.length;s+=1){var r=n(n({},o),{each_value:a,step:a[s],i:s});d[s]?d[s].p(e,r):(d[s]=on(t,r),d[s].c(),d[s].m(i,null))}for(;s<d.length;s+=1)d[s].u(),d[s].d();d.length=a.length}o.$user.id!=o.$authorId&&o.$user.isAdmin?_?_.p(e,o):((_=an(0,o)).c(),_.m(l.parentNode,l)):_&&(_.u(),_.d(),_=null)},u:function(){a(i);for(var t=0;t<d.length;t+=1)d[t].u();a(s),_&&_.u(),a(l)},d:function(){window.removeEventListener("popstate",r),u(d),_&&_.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get(),e=t.active,n=t.steps,i=this.store.get(),o=i.lastEditStep,a=i.id,s=Je(n,{id:e});this.store.set({lastEditStep:Math.max(o,n.indexOf(s)+1)}),window.history.replaceState({step:s,id:a},s.title)}).call(e),e.fire("update",{changed:{steps:1,active:1,$user:1,$authorId:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,T(this._beforecreate),T(this._oncreate),T(this._aftercreate),this._lock=!1)}return n(sn.prototype,j),n(sn.prototype,nn),{Checkbox:S,Color:Kt,ColorPicker:Lt,Group:Ge,NumberInput:ee,Switch:Me,Dropdown:pe,Radio:oe,Select:ue,SelectAxisColumn:$e,CustomFormat:Gt,Section:Ke,TextArea:Le,Help:ye,Text:Ae,TypeAhead:Ye,EditorNav:sn,BaseNumber:Xt}});
