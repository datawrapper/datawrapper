!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chroma")):"function"==typeof define&&define.amd?define(["chroma"],e):t.controls=e(t.chroma)}(this,function(t){"use strict";function e(){}function n(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){for(var n in e)t[n]=1;return t}function o(t){t()}function s(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n)}function r(t){t.parentNode.removeChild(t)}function l(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)}function c(t){for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling)}function u(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}function d(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(){return document.createDocumentFragment()}function h(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function v(){return document.createComment("")}function m(t,e,n,i){t.addEventListener(e,n,i)}function g(t,e,n,i){t.removeEventListener(e,n,i)}function _(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function b(t){return""===t?void 0:+t}function y(t,e){t.data=""+e}function x(t,e,n){t.style.setProperty(e,n)}function w(t,e){for(var n=0;n<t.options.length;n+=1){var i=t.options[n];if(i.__value===e)return void(i.selected=!0)}}function k(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function N(t){return t}function C(t,n,i,s,a){var r,l,c,u=i.call(t,n,s),d=!1;return{t:a?0:1,running:!1,program:null,pending:null,run:function(t,e){var n=this;"function"==typeof u?z.wait().then(function(){u=u(),n._run(t,e)}):this._run(t,e)},_run:function(t,i){r=u.duration||300,l=u.easing||N;var o={start:window.performance.now()+(u.delay||0),b:t,callback:i||e};a&&!d&&(u.css&&u.delay&&(c=n.style.cssText,n.style.cssText+=u.css(0,1)),u.tick&&u.tick(0,1),d=!0),t||(o.group=j.current,j.current.remaining+=1),u.delay?this.pending=o:this.start(o),this.running||(this.running=!0,z.add(this))},start:function(e){if(t.fire((e.b?"intro":"outro")+".start",{node:n}),e.a=this.t,e.delta=e.b-e.a,e.duration=r*Math.abs(e.b-e.a),e.end=e.start+e.duration,u.css){u.delay&&(n.style.cssText=c);var i=function(t,e,n){for(var i=t.a,o=t.b,s=t.delta,a=16.666/t.duration,r="{\n",l=0;l<=1;l+=a){var c=i+s*e(l);r+=100*l+"%{"+n(c,1-c)+"}\n"}return r+"100% {"+n(o,1-o)+"}\n}"}(e,l,u.css);z.addRule(i,e.name="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(i)),n.style.animation=(n.style.animation||"").split(", ").filter(function(t){return t&&(e.delta<0||!/__svelte/.test(t))}).concat(e.name+" "+e.duration+"ms linear 1 forwards").join(", ")}this.program=e,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*l(n/e.duration),u.tick&&u.tick(this.t,1-this.t)}},done:function(){var e=this.program;this.t=e.b,u.tick&&u.tick(this.t,1-this.t),t.fire((e.b?"intro":"outro")+".end",{node:n}),e.b||e.invalidated?u.css&&z.deleteRule(n,e.name):(e.group.callbacks.push(function(){e.callback(),u.css&&z.deleteRule(n,e.name)}),0==--e.group.remaining&&e.group.callbacks.forEach(o)),this.running=!!this.pending},abort:function(t){this.program&&(t&&u.tick&&u.tick(1,0),u.css&&z.deleteRule(n,this.program.name),this.program=this.pending=null,this.running=!1)},invalidate:function(){this.program&&(this.program.invalidated=!0)}}}t=t&&t.hasOwnProperty("default")?t.default:t;var j={};function M(){j.current={remaining:0,callbacks:[]}}var z={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},promise:null,add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){if(!this.stylesheet){var n=h("style");document.head.appendChild(n),z.stylesheet=n.sheet}this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes "+e+" "+t,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(var i=this.stylesheet.cssRules.length;i--;)this.stylesheet.deleteRule(i);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter(function(t){return t&&-1===t.indexOf(e)}).join(", ")},wait:function(){return z.promise||(z.promise=Promise.resolve(),z.promise.then(function(){z.promise=null})),z.promise}};function L(){return Object.create(null)}function T(t){t._lock=!0,q(t._beforecreate),q(t._oncreate),q(t._aftercreate),t._lock=!1}function S(t,e){t._handlers=L(),t._slots=L(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function q(t){for(;t&&t.length;)t.shift()()}function H(){this.store._remove(this)}var I={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var i=0;i<n.length;i+=1){var o=n[i];if(!o.__calling)try{o.__calling=!0,o.call(this,e)}finally{o.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||T(this.root)},_recompute:e,_set:function(t){var e=this._state,i={},o=!1;for(var s in t=n(this._staged,t),this._staged={},t)this._differs(t[s],e[s])&&(i[s]=o=!0);o&&(this._state=n(n({},e),t),this._recompute(i,this._state),this._bind&&this._bind(i,this._state),this._fragment&&(this.fire("state",{changed:i,current:this._state,previous:e}),this._fragment.p(i,this._state),this.fire("update",{changed:i,current:this._state,previous:e})))},_stage:function(t){n(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function O(t){S(this,t),this._state=n({disabled:!1,faded:!1},t.data),this._intro=!0,this._fragment=function(t,e){var n,i,o,l,c,u,d;function f(){t.set({value:o.checked})}return{c:function(){n=h("div"),i=h("label"),o=h("input"),l=h("span"),c=p("\n         "),u=p(e.label),m(o,"change",f),_(o,"type","checkbox"),o.disabled=e.disabled,o.className="svelte-vnsjtu",l.className="css-ui svelte-vnsjtu",i.className=d="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-vnsjtu",n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(t,r){a(t,n,r),s(n,i),s(i,o),o.checked=e.value,s(i,l),s(i,c),s(i,u)},p:function(t,e){t.value&&(o.checked=e.value),t.disabled&&(o.disabled=e.disabled),t.label&&y(u,e.label),(t.disabled||t.faded)&&d!==(d="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-vnsjtu")&&(i.className=d)},d:function(t){t&&r(n),g(o,"change",f)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(O.prototype,I);var $=Array.prototype,A=Object.prototype,E=$.slice,D=A.toString,F=A.hasOwnProperty,R=Array.isArray,Y=Object.keys;function K(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function P(t,e){return null!=t&&F.call(t,e)}function B(t){if(!K(t))return[];if(Y)return Y(t);var e=[];for(var n in t)P(t,n)&&e.push(n);return st&&rt(t,e),e}var G=R||function(t){return"[object Array]"===D.call(t)};var Q=("function"!=typeof/./&&"object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(t){return"function"==typeof t||!1}:null)||function(t){return"[object Function]"===D.call(t)};!function(){D.call(arguments)}();function W(t){return function(t){return"[object Number]"===D.call(t)}(t)&&isNaN(t)}var J=Z;function U(t){return t}var V=lt(B);function X(t){return t=V({},t),function(e){return function(t,e){var n=B(e),i=n.length;if(null==t)return!i;for(var o=Object(t),s=0;s<i;s++){var a=n[s];if(e[a]!==o[a]||!(a in o))return!1}return!0}(e,t)}}function Z(t,e){return tt(t,e,1/0)}function tt(t,e,n){return J!==Z?J(t,e):null==t?U:Q(t)?function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,s){return t.call(e,n,i,o,s)}}return function(){return t.apply(e,arguments)}}(t,e,n):K(t)?X(t):et(t)}function et(t){return function(e){return null==e?void 0:e[t]}}var nt=Math.pow(2,53)-1,it=et("length"),ot=function(t){var e=it(t);return"number"==typeof e&&e>=0&&e<=nt};var st=!{toString:null}.propertyIsEnumerable("toString"),at=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function rt(t,e){var n=at.length,i=t.constructor,o=Q(i)&&i.prototype||A,s="constructor";for(P(t,s)&&!ft(e,s)&&e.push(s);n--;)(s=at[n])in t&&t[s]!==o[s]&&!ft(e,s)&&e.push(s)}function lt(t,e){return function(n){var i=arguments,o=arguments.length;if(e&&(n=Object(n)),o<2||null==n)return n;for(var s=1;s<o;s++)for(var a=i[s],r=t(a),l=r.length,c=0;c<l;c++){var u=r[c];!K(n)||e&&void 0!==n[u]||(n[u]=a[u])}return n}}!function(t){for(var e={},n=B(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i]}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"});var ct,ut=(ct=1,function(t,e,n){e=tt(e,n);for(var i=it(t),o=ct>0?0:i-1;o>=0&&o<i;o+=ct)if(e(t[o],o,t))return o;return-1});var dt=function(t,e,n){return function(i,o,s){var a=0,r=it(i);if("number"==typeof s)t>0?a=s>=0?s:Math.max(s+r,a):r=s>=0?Math.min(s+1,r):s+r+1;else if(n&&s&&r)return i[s=n(i,o)]===o?s:-1;if(o!=o)return(s=e(E.call(i,a,r),W))>=0?s+a:-1;for(s=t>0?a:r-1;s>=0&&s<r;s+=t)if(i[s]===o)return s;return-1}}(1,ut,function(t,e,n,i){for(var o=(n=tt(n,i,1))(e),s=0,a=it(t);s<a;){var r=Math.floor((s+a)/2);n(t[r])<o?s=r+1:a=r}return s});function ft(t,e,n,i){return ot(t)||(t=function(t){for(var e=B(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i}(t)),("number"!=typeof n||i)&&(n=0),dt(t,e,n)>=0}function ht(t,e,n,i){var o;!0!==(o=e)&&!1!==o&&"[object Boolean]"!==D.call(o)&&(i=n,n=e,e=!1),null!=n&&(n=tt(n,i));for(var s=[],a=[],r=0,l=it(t);r<l;r++){var c=t[r],u=n?n(c,r,t):c;e?(r&&a===u||s.push(c),a=u):n?ft(a,u)||(a.push(u),s.push(c)):ft(s,c)||s.push(c)}return s}function pt(t,e){var n,i,o,s=t._slotted.content;return{c:function(){s||(o=p("Content"))},m:function(t,e){s?(a(t,n||(n=v()),e),a(t,s,e),a(t,i||(i=v()),e)):a(t,o,e)},d:function(t){s?(!function(t,e,n){for(;t.nextSibling&&t.nextSibling!==e;)n.appendChild(t.parentNode.removeChild(t.nextSibling))}(n,i,s),r(n),r(i)):t&&r(o)}}}function vt(t){S(this,t),this.refs={},this._state=n({visible:!1},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=function(t,e){var n,i,o,l,c=t._slotted.button;function d(e){t.windowClick(e)}function f(e){t.toggle()}window.addEventListener("click",d);var v=e.visible&&pt(t);return{c:function(){n=h("div"),i=h("div"),c||(o=p("Button")),l=p("\n    "),v&&v.c(),m(i,"click",f),i.className="base-drop-btn svelte-1e7v6nx",x(n,"position","relative"),x(n,"display","inline-block")},m:function(e,r){a(e,n,r),s(n,i),s(i,c||o),t.refs.button=i,s(n,l),v&&v.m(n,null)},p:function(e,i){i.visible?v||((v=pt(t)).c(),v.m(n,null)):v&&(v.d(1),v=null)},d:function(e){window.removeEventListener("click",d),e&&r(n),c&&u(i,c),g(i,"click",f),t.refs.button===i&&(t.refs.button=null),v&&v.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function mt(e){return"#ffffff"===t(e).hex("rgb")?"#eeeeee":e}function gt(e){return t(e).alpha()}n(vt.prototype,I),n(vt.prototype,{toggle:function(){var t=this.get().visible;this.set({visible:!t})},windowClick:function(t){t.target&&t.target!==this.refs.button&&(t.target.classList.contains("hex")||this.set({visible:!1}))}});function _t(e){var n=this,i=e.changed,o=e.current,s=e.previous;if(i.color)try{var a=t(o.color).hex();this.refs.dropdown.get().visible&&a!==s.color&&this.fire("change",o.validColor),o.validColor!==o.color&&setTimeout(function(){n.set({color:o.validColor})},100)}catch(t){}}function bt(e,n){var i=-1,o=999999;return e[0]===e[1]?"-":(e.forEach(function(e,s){var a=t.distance(e,n,"lab");a<o&&(o=a,i=s)}),e[i])}function yt(t,e,n,i,o){var s=[t],a=e/n,r=0;for(i=void 0===i?n:i,o=o||1;n-- >0;)r+=a,s.unshift(t-r),i-- >0&&s.push(t+r);return s}function xt(t){var e=this._svelte,n=e.component,i=e.ctx;n.setColor(i.c,!1)}function wt(t,e,n){var i=Object.create(t);return i.c=e[n],i}function kt(t){var e=this._svelte,n=e.component,i=e.ctx;n.setColor(i.c,!1)}function Nt(t,e,n){var i=Object.create(t);return i.c=e[n],i}function Ct(t){var e=this._svelte,n=e.component,i=e.ctx;n.setColor(i.c,!1)}function jt(t,e,n){var i=Object.create(t);return i.c=e[n],i}function Mt(t){var e=this._svelte,n=e.component,i=e.ctx;n.setColor(i.c,!0)}function zt(t){var e=this._svelte,n=e.component,i=e.ctx;n.setColor(i.c,!1)}function Lt(t,e,n){var i=Object.create(t);return i.c=e[n],i}function Tt(t,e){for(var n,i,o,l,c,u,f,v,b,y,w,k,N,C,j,M,z=!1,L=e.palette,T=[],S=0;S<L.length;S+=1)T[S]=St(t,Lt(e,L,S));var q=e.gradient_l,H=[];for(S=0;S<q.length;S+=1)H[S]=qt(t,jt(e,q,S));var I=e.gradient_c,O=[];for(S=0;S<I.length;S+=1)O[S]=Ht(t,Nt(e,I,S));var $=e.gradient_h,A=[];for(S=0;S<$.length;S+=1)A[S]=It(t,wt(e,$,S));function E(){z=!0,t.set({color:w.value}),z=!1}function D(n){t.setColor(e.color,!0)}function F(t){t.stopPropagation()}return{c:function(){n=h("div"),i=h("div");for(var t=0;t<T.length;t+=1)T[t].c();o=p("\n\n                "),l=h("div");for(t=0;t<H.length;t+=1)H[t].c();c=p("\n                "),u=h("div");for(t=0;t<O.length;t+=1)O[t].c();f=p("\n                "),v=h("div");for(t=0;t<A.length;t+=1)A[t].c();b=p("\n\n                "),y=h("div"),w=h("input"),k=p("\n                    "),(N=h("button")).innerHTML='<i class="icon-ok"></i>',C=p("\n                    "),j=h("div"),M=h("div"),i.className="palette svelte-g14qzo",l.className="color-axis lightness",u.className="color-axis saturation",v.className="color-axis hue",m(w,"input",E),_(w,"type","text"),x(w,"background",e.color),x(w,"border-color",mt),x(w,"color",e.textColor),w.className="hex svelte-g14qzo",m(N,"click",D),N.className="btn btn-small ok",M.className="transparency svelte-g14qzo",x(M,"opacity",1-gt(e.color)),j.className="color selected",x(j,"background",e.color),y.className="footer svelte-g14qzo",m(n,"click",F),n.className="color-selector svelte-g14qzo"},m:function(t,r){a(t,n,r),s(n,i);for(var d=0;d<T.length;d+=1)T[d].m(i,null);s(n,o),s(n,l);for(d=0;d<H.length;d+=1)H[d].m(l,null);s(n,c),s(n,u);for(d=0;d<O.length;d+=1)O[d].m(u,null);s(n,f),s(n,v);for(d=0;d<A.length;d+=1)A[d].m(v,null);s(n,b),s(n,y),s(y,w),w.value=e.color,s(y,k),s(y,N),s(y,C),s(y,j),s(j,M)},p:function(n,o){if(e=o,n.palette){L=e.palette;for(var s=0;s<L.length;s+=1){var a=Lt(e,L,s);T[s]?T[s].p(n,a):(T[s]=St(t,a),T[s].c(),T[s].m(i,null))}for(;s<T.length;s+=1)T[s].d(1);T.length=L.length}if(n.gradient_l||n.nearest_l){q=e.gradient_l;for(s=0;s<q.length;s+=1){var r=jt(e,q,s);H[s]?H[s].p(n,r):(H[s]=qt(t,r),H[s].c(),H[s].m(l,null))}for(;s<H.length;s+=1)H[s].d(1);H.length=q.length}if(n.gradient_c||n.nearest_c){I=e.gradient_c;for(s=0;s<I.length;s+=1){var c=Nt(e,I,s);O[s]?O[s].p(n,c):(O[s]=Ht(t,c),O[s].c(),O[s].m(u,null))}for(;s<O.length;s+=1)O[s].d(1);O.length=I.length}if(n.gradient_h||n.nearest_h){$=e.gradient_h;for(s=0;s<$.length;s+=1){var d=wt(e,$,s);A[s]?A[s].p(n,d):(A[s]=It(t,d),A[s].c(),A[s].m(v,null))}for(;s<A.length;s+=1)A[s].d(1);A.length=$.length}!z&&n.color&&(w.value=e.color),n.color&&x(w,"background",e.color),n.textColor&&x(w,"color",e.textColor),n.color&&(x(M,"opacity",1-gt(e.color)),x(j,"background",e.color))},d:function(t){t&&r(n),d(T,t),d(H,t),d(O,t),d(A,t),g(w,"input",E),g(N,"click",D),g(n,"click",F)}}}function St(t,e){var n,i,o;return{c:function(){n=h("div"),(i=h("div")).className="transparency svelte-g14qzo",x(i,"opacity",1-gt(e.c)),n._svelte={component:t,ctx:e},m(n,"click",zt),m(n,"dblclick",Mt),n.className="color svelte-g14qzo",n.dataset.color=o=e.c,x(n,"background",e.c),x(n,"border-color",mt(e.c))},m:function(t,e){a(t,n,e),s(n,i)},p:function(t,s){e=s,t.palette&&x(i,"opacity",1-gt(e.c)),n._svelte.ctx=e,t.palette&&o!==(o=e.c)&&(n.dataset.color=o),t.palette&&(x(n,"background",e.c),x(n,"border-color",mt(e.c)))},d:function(t){t&&r(n),g(n,"click",zt),g(n,"dblclick",Mt)}}}function qt(t,e){var n,i,o;return{c:function(){(n=h("div"))._svelte={component:t,ctx:e},m(n,"click",Ct),n.className=i="color "+(e.c==e.nearest_l?"selected":"")+" svelte-g14qzo",n.dataset.color=o=e.c,x(n,"background",e.c)},m:function(t,e){a(t,n,e)},p:function(t,s){e=s,n._svelte.ctx=e,(t.gradient_l||t.nearest_l)&&i!==(i="color "+(e.c==e.nearest_l?"selected":"")+" svelte-g14qzo")&&(n.className=i),t.gradient_l&&o!==(o=e.c)&&(n.dataset.color=o),t.gradient_l&&x(n,"background",e.c)},d:function(t){t&&r(n),g(n,"click",Ct)}}}function Ht(t,e){var n,i,o;return{c:function(){(n=h("div"))._svelte={component:t,ctx:e},m(n,"click",kt),n.className=i="color "+(e.c==e.nearest_c?"selected":"")+" svelte-g14qzo",n.dataset.color=o=e.c,x(n,"background",e.c)},m:function(t,e){a(t,n,e)},p:function(t,s){e=s,n._svelte.ctx=e,(t.gradient_c||t.nearest_c)&&i!==(i="color "+(e.c==e.nearest_c?"selected":"")+" svelte-g14qzo")&&(n.className=i),t.gradient_c&&o!==(o=e.c)&&(n.dataset.color=o),t.gradient_c&&x(n,"background",e.c)},d:function(t){t&&r(n),g(n,"click",kt)}}}function It(t,e){var n,i,o;return{c:function(){(n=h("div"))._svelte={component:t,ctx:e},m(n,"click",xt),n.className=i="color "+(e.c==e.nearest_h?"selected":"")+" svelte-g14qzo",n.dataset.color=o=e.c,x(n,"background",e.c)},m:function(t,e){a(t,n,e)},p:function(t,s){e=s,n._svelte.ctx=e,(t.gradient_h||t.nearest_h)&&i!==(i="color "+(e.c==e.nearest_h?"selected":"")+" svelte-g14qzo")&&(n.className=i),t.gradient_h&&o!==(o=e.c)&&(n.dataset.color=o),t.gradient_h&&x(n,"background",e.c)},d:function(t){t&&r(n),g(n,"click",xt)}}}function Ot(t){var e,o,l,c,d,v,m,g,b,y,w,k,N,C,j=this;S(this,t),this.refs={},this._state=n(n(this.store._init(["themeData"]),{palette:[],prepend:[],append:[],color:"#63c0de"}),t.data),this.store._add(this,["themeData"]),this._recompute({$themeData:1,prepend:1,append:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1},this._state),this._intro=!0,this._handlers.state=[_t],this._handlers.destroy=[H],this._slotted=t.slots||{},_t.call(this,{changed:i({},this._state),current:this._state}),this._fragment=(e=this,o=this._state,k=e._slotted.default,N=o.color&&Tt(e,o),C=new vt({root:e.root,store:e.store,slots:{default:f(),content:f(),button:f()}}),e.refs.dropdown=C,{c:function(){l=h("div"),c=h("span"),k||(d=h("div"),v=h("div"),m=h("div"),g=p("\n                    "),b=h("span")),y=p("\n        "),w=h("span"),N&&N.c(),C._fragment.c(),k||(m.className="transparency svelte-g14qzo",x(m,"opacity",1-gt(o.validColor)),x(v,"background",o.validColor+" none repeat scroll 0% 0%"),v.className="the-color svelte-g14qzo",b.className="caret svelte-g14qzo",d.className="base-color-picker color-picker svelte-g14qzo"),_(c,"slot","button"),_(w,"slot","content"),l.className="color-picker-cont svelte-g14qzo"},m:function(t,e){a(t,l,e),s(C._slotted.button,c),k?s(c,k):(s(c,d),s(d,v),s(v,m),s(d,g),s(d,b)),s(C._slotted.default,y),s(C._slotted.content,w),N&&N.m(w,null),C._mount(l,null)},p:function(t,n){k||t.validColor&&(x(m,"opacity",1-gt(n.validColor)),x(v,"background",n.validColor+" none repeat scroll 0% 0%")),n.color?N?N.p(t,n):((N=Tt(e,n)).c(),N.m(w,null)):N&&(N.d(1),N=null)},d:function(t){t&&r(l),k&&u(c,k),N&&N.d(),C.destroy(),e.refs.dropdown===C&&(e.refs.dropdown=null)}}),this.root._oncreate.push(function(){j.fire("update",{changed:i({},j._state),current:j._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}n(Ot.prototype,I),n(Ot.prototype,{setColor:function(t,e){this.set({color:t}),e&&this.refs.dropdown.set({visible:!1})}}),Ot.prototype._recompute=function(e,n){var i,o,s,a;(e.$themeData||e.prepend||e.append)&&this._differs(n.palette,n.palette=(o=(i=n).$themeData,s=i.prepend,a=i.append,ht(s.concat(o.colors.palette).concat(a))))&&(e.palette=!0),e.color&&(this._differs(n.validColor,n.validColor=function(e){var n=e.color;try{return t(n).hex()}catch(t){return"#000000"}}(n))&&(e.validColor=!0),this._differs(n.gradient_l,n.gradient_l=function(e){var n=e.color,i=t(n).lch(),o=yt(70,55,7,6).map(function(e){return t.lch(e,i[1],i[2]).hex()});return t.scale(["#000000"].concat(o).concat("#ffffff")).mode("lch").gamma(.8).padding(.1).colors(14)}(n))&&(e.gradient_l=!0)),(e.color||e.palette)&&this._differs(n.gradient_c,n.gradient_c=function(e){var n=e.color,i=e.palette,o=t(n).set("lch.c",120);isNaN(o.get("lch.h"))&&(o=t.lch(o.get("lch.l"),50,t(i[0]||"#d00").get("lch.h")));var s=t(n).set("lch.c",3);return t.scale([s,o]).mode("lch").gamma(1.2).colors(14)}(n))&&(e.gradient_c=!0),e.color&&this._differs(n.gradient_h,n.gradient_h=function(e){var n=e.color,i=t(n).lch(),o=yt(i[2],75,7,6).map(function(e){return t.lch(i[0],i[1],e).hex()});return t.scale(o).mode("lch").colors(14)}(n))&&(e.gradient_h=!0),(e.color||e.gradient_l)&&this._differs(n.nearest_l,n.nearest_l=function(t){var e=t.color;return bt(t.gradient_l,e)}(n))&&(e.nearest_l=!0),(e.color||e.gradient_c)&&this._differs(n.nearest_c,n.nearest_c=function(t){var e=t.color;return bt(t.gradient_c,e)}(n))&&(e.nearest_c=!0),(e.color||e.gradient_h)&&this._differs(n.nearest_h,n.nearest_h=function(t){var e=t.color;return bt(t.gradient_h,e)}(n))&&(e.nearest_h=!0),e.color&&(this._differs(n.textColor,n.textColor=function(e){var n=e.color;return t(n).get("lab.l")>60?"black":"white"}(n))&&(e.textColor=!0),this._differs(n.borderColor,n.borderColor=function(e){var n=e.color;return t(n).darker().hex()}(n))&&(e.borderColor=!0))};var $t={width:"100px",valign:"baseline"};function At(t,e){var n,i;return{c:function(){x(n=h("label"),"width",e.width||$t.width),n.className=i="control-label "+(e.disabled?"disabled":"")+" svelte-1c2jnzb"},m:function(t,i){a(t,n,i),n.innerHTML=e.label},p:function(t,e){t.label&&(n.innerHTML=e.label),t.width&&x(n,"width",e.width||$t.width),t.disabled&&i!==(i="control-label "+(e.disabled?"disabled":"")+" svelte-1c2jnzb")&&(n.className=i)},d:function(t){t&&r(n)}}}function Et(t,e){var n;return{c:function(){(n=h("p")).className="mini-help svelte-1c2jnzb"},m:function(t,i){a(t,n,i),n.innerHTML=e.help},p:function(t,e){t.help&&(n.innerHTML=e.help)},d:function(t){t&&r(n)}}}function Dt(t){var e,i,o,l,c,u,d,f,m,g,_;S(this,t),this._state=n({},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=(e=this,i=this._state,m=e._slotted.default,g=i.label&&At(0,i),_=i.help&&Et(0,i),{c:function(){o=h("div"),g&&g.c(),l=p("\n    "),c=h("div"),d=p("\n        "),_&&_.c(),c.className="controls",x(c,"width","calc(100% - "+(i.width||$t.width)+" - 40px)"),o.className=f="control-group vis-option-group vis-option-type-number label-"+(i.valign||$t.valign)+" svelte-1c2jnzb"},m:function(t,e){a(t,o,e),g&&g.m(o,null),s(o,l),s(o,c),m&&(s(c,m),s(c,u||(u=v()))),s(c,d),_&&_.m(c,null)},p:function(t,e){e.label?g?g.p(t,e):((g=At(0,e)).c(),g.m(o,l)):g&&(g.d(1),g=null),e.help?_?_.p(t,e):((_=Et(0,e)).c(),_.m(c,null)):_&&(_.d(1),_=null),t.width&&x(c,"width","calc(100% - "+(e.width||$t.width)+" - 40px)"),t.valign&&f!==(f="control-group vis-option-group vis-option-type-number label-"+(e.valign||$t.valign)+" svelte-1c2jnzb")&&(o.className=f)},d:function(t){t&&r(o),g&&g.d(),m&&function(t,e){for(var n=t.parentNode;n.firstChild!==t;)e.appendChild(n.firstChild)}(u,m),_&&_.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(Dt.prototype,I);var Ft=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,Rt=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,Yt="<a><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function Kt(t,e){if(null===t)return null;if(void 0!==t){if((t=String(t)).indexOf("<")<0||t.indexOf(">")<0)return t;if(t=function(t,e){e=(((void 0!==e?e||"":Yt)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=t,i=t;for(;;)if(i=(n=i).replace(Rt,"").replace(Ft,function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""}),n===i)return i}(t,e),"undefined"==typeof document)return t;var n=document.createElement("div");n.innerHTML=t;for(var i=n.querySelectorAll("*"),o=0;o<i.length;o++)for(var s=0;s<i[o].attributes.length;s++){var a=i[o].attributes[s];a.specified&&"on"===a.name.substr(0,2)&&i[o].removeAttribute(a.name)}return n.innerHTML}}function Pt(t){var e=t.$vis,n=t.customizable,i=t.axis,o=t.custom,s=t.palette;return e&&n?(i?ht("date"===e.axes(!0)[i].type()?e.axes(!0)[i].raw():e.axes(!0)[i].values()):e.colorKeys?e.colorKeys():e.keys()).map(function(t){return{key:t=Kt(t,""),defined:void 0!==o[t],color:void 0!==o[t]?Qt(o[t],s):"#cccccc"}}):[]}var Bt={update:function(t){var e=this.get().palette;this.set({value:Gt(t,e)})},updateCustom:function(t){var e=this.get(),n=e.selected,i=e.palette,o=e.custom;n.forEach(function(e){return o[e]=Gt(t,i)}),this.set({custom:o})},toggle:function(t){t.preventDefault();var e=this.get().expanded;this.set({expanded:!e})},toggleSelect:function(t,e){e.preventDefault();var n=this.get().selected,i=n.indexOf(t);e.shiftKey?i>-1?n.splice(i,1):n.push(t):(n.length=1,n[0]=t),this.set({selected:n})},getColor:function(t){return Qt(t,this.get().palette)},reset:function(){var t=this.get(),e=t.selected,n=t.custom;e.forEach(function(t){return delete n[t]}),this.set({custom:n})},resetAll:function(){var t=this.get().custom;Object.keys(t).forEach(function(e){return delete t[e]}),this.set({custom:t})},selectAll:function(t){t.preventDefault();var e=this.get(),n=e.selected;e.colorKeys.forEach(function(t){n.indexOf(t.key)<0&&n.push(t.key)}),this.set({selected:n})},selectNone:function(t){t.preventDefault();var e=this.get().selected;e.length=0,this.set({selected:e})},selectInvert:function(t){t.preventDefault();var e=this.get(),n=e.selected;e.colorKeys.forEach(function(t){var e=n.indexOf(t.key);e<0?n.push(t.key):n.splice(e,1)}),this.set({selected:n})}};function Gt(t,e){var n=e.indexOf(t);return n>-1?n:t}function Qt(t,e){return"number"==typeof t?e[t%e.length]:t}function Wt(t){var e=this._svelte,n=e.component,i=e.ctx;n.toggleSelect(i.k.key,t)}function Jt(t,e,n){var i=Object.create(t);return i.k=e[n],i}function Ut(t,e){var n={},i={color:e.hexColor,palette:e.palette};void 0!==e.open&&(i.visible=e.open,n.visible=!0);var o=new Ot({root:t.root,store:t.store,data:i,_bind:function(e,i){var o={};!n.visible&&e.visible&&(o.open=i.visible),t._set(o),n={}}});return t.root._beforecreate.push(function(){o._bind({visible:1},o.get())}),o.on("change",function(e){t.update(e)}),{c:function(){o._fragment.c()},m:function(t,e){o._mount(t,e)},p:function(t,i){e=i;var s={};t.hexColor&&(s.color=e.hexColor),t.palette&&(s.palette=e.palette),!n.visible&&t.open&&(s.visible=e.open,n.visible=void 0!==e.open),o._set(s),n={}},d:function(t){o.destroy(t)}}}function Vt(t,e){var n,i,o,l;function c(e){t.toggle(e)}return{c:function(){n=h("span"),i=h("a"),o=p("customize colors..."),m(i,"click",c),i.href="#customize",i.className=l="btn btn-small custom "+(e.expanded?"btn-primary":""),_(i,"role","button"),n.className="custom-color-selector-head"},m:function(t,e){a(t,n,e),s(n,i),s(i,o)},p:function(t,e){t.expanded&&l!==(l="btn btn-small custom "+(e.expanded?"btn-primary":""))&&(i.className=l)},d:function(t){t&&r(n),g(i,"click",c)}}}function Xt(t,e){for(var n,i,o,l,c,u,f,v,_,b,y,w,k,N,C,j,M,z,L,T,S=e.colorKeys,q=[],H=0;H<S.length;H+=1)q[H]=Zt(t,Jt(e,S,H));function I(e){t.selectAll(e)}function O(e){t.selectNone(e)}function $(e){t.selectInvert(e)}function A(t){return t.selected.length?ee:te}var E=A(e),D=E(t,e);function F(e){t.resetAll()}return{c:function(){n=h("div"),i=h("div"),o=h("div"),(l=h("h4")).textContent="Select element(s):",c=p("\n            "),u=h("ul");for(var t=0;t<q.length;t+=1)q[t].c();f=p("\n            "),v=h("div"),_=p("Select:  \n                "),(b=h("a")).textContent="all",y=p("   "),(w=h("a")).textContent="none",k=p("  \n                "),(N=h("a")).textContent="invert",C=p("\n        "),j=h("div"),(M=h("h4")).textContent="Choose a color:",z=p("\n            "),D.c(),L=p("\n            "),(T=h("button")).textContent="Reset all colors",u.className="dataseries unstyled",m(b,"click",I),b.href="#/select-all",m(w,"click",O),w.href="#/select-none",m(N,"click",$),N.href="#/select-invert",x(v,"font-size","12px"),x(v,"text-align","center"),x(v,"margin-bottom","10px"),o.className="span2",x(o,"width","43%"),m(T,"click",F),x(T,"margin-top","20px"),T.className="btn",j.className="span2",x(j,"width","42%"),i.className="row",n.className="custom-color-selector-body",x(n,"display","block")},m:function(t,e){a(t,n,e),s(n,i),s(i,o),s(o,l),s(o,c),s(o,u);for(var r=0;r<q.length;r+=1)q[r].m(u,null);s(o,f),s(o,v),s(v,_),s(v,b),s(v,y),s(v,w),s(v,k),s(v,N),s(i,C),s(i,j),s(j,M),s(j,z),D.m(j,null),s(j,L),s(j,T)},p:function(e,n){if(e.selected||e.colorKeys){S=n.colorKeys;for(var i=0;i<S.length;i+=1){var o=Jt(n,S,i);q[i]?q[i].p(e,o):(q[i]=Zt(t,o),q[i].c(),q[i].m(u,null))}for(;i<q.length;i+=1)q[i].d(1);q.length=S.length}E===(E=A(n))&&D?D.p(e,n):(D.d(1),(D=E(t,n)).c(),D.m(j,L))},d:function(t){t&&r(n),d(q,t),g(b,"click",I),g(w,"click",O),g(N,"click",$),D.d(),g(T,"click",F)}}}function Zt(t,e){var n,i,o,l,c,u,d,f,v=e.k.defined?"":"×",_=e.k.key;return{c:function(){n=h("li"),i=h("div"),o=p(v),l=p("\n                    "),c=h("label"),u=p(_),i.className="color",x(i,"background",e.k.color),n._svelte={component:t,ctx:e},m(n,"click",Wt),n.className=d=e.selected.indexOf(e.k.key)>-1?"selected":"",n.dataset.series=f=e.k.key},m:function(t,e){a(t,n,e),s(n,i),s(i,o),s(n,l),s(n,c),s(c,u)},p:function(t,s){e=s,t.colorKeys&&v!==(v=e.k.defined?"":"×")&&y(o,v),t.colorKeys&&x(i,"background",e.k.color),t.colorKeys&&_!==(_=e.k.key)&&y(u,_),n._svelte.ctx=e,(t.selected||t.colorKeys)&&d!==(d=e.selected.indexOf(e.k.key)>-1?"selected":"")&&(n.className=d),t.colorKeys&&f!==(f=e.k.key)&&(n.dataset.series=f)},d:function(t){t&&r(n),g(n,"click",Wt)}}}function te(t,n){var i;return{c:function(){(i=h("div")).textContent="Please select an element on the left to change colors for individual elements...",i.className="info"},m:function(t,e){a(t,i,e)},p:e,d:function(t){t&&r(i)}}}function ee(t,e){var n,i,o,l={},c={color:e.customColor,palette:e.palette};void 0!==e.openCustom&&(c.visible=e.openCustom,l.visible=!0);var u=new Ot({root:t.root,store:t.store,data:c,_bind:function(e,n){var i={};!l.visible&&e.visible&&(i.openCustom=n.visible),t._set(i),l={}}});function d(e){t.reset()}return t.root._beforecreate.push(function(){u._bind({visible:1},u.get())}),u.on("change",function(e){t.updateCustom(e)}),{c:function(){n=h("div"),u._fragment.c(),i=p("\n                "),(o=h("button")).textContent="Reset",m(o,"click",d),o.className="btn",n.className="select"},m:function(t,e){a(t,n,e),u._mount(n,null),s(n,i),s(n,o)},p:function(t,n){e=n;var i={};t.customColor&&(i.color=e.customColor),t.palette&&(i.palette=e.palette),!l.visible&&t.openCustom&&(i.visible=e.openCustom,l.visible=void 0!==e.openCustom),u._set(i),l={}},d:function(t){t&&r(n),u.destroy(),g(o,"click",d)}}}function ne(t){var e,o,l,c,u,d,h,m,g,_,b,y=this;S(this,t),this._state=n(n(this.store._init(["vis","themeData"]),{open:!1,openCustom:!1,customizable:!1,expanded:!1,selected:[],custom:{}}),t.data),this.store._add(this,["vis","themeData"]),this._recompute({$themeData:1,$vis:1,customizable:1,axis:1,custom:1,palette:1,value:1,selected:1},this._state),this._intro=!0,this._handlers.destroy=[H],this._fragment=(e=this,o=this._state,h=o.hexColor&&Ut(e,o),m=o.customizable&&Vt(e,o),g={label:o.label,width:o.width||"100px"},_=new Dt({root:e.root,store:e.store,slots:{default:f()},data:g}),b=o.customizable&&o.expanded&&Xt(e,o),{c:function(){h&&h.c(),l=p(" "),m&&m.c(),c=v(),_._fragment.c(),u=p("\n\n"),b&&b.c(),d=v()},m:function(t,e){h&&h.m(_._slotted.default,null),s(_._slotted.default,l),m&&m.m(_._slotted.default,null),s(_._slotted.default,c),_._mount(t,e),a(t,u,e),b&&b.m(t,e),a(t,d,e)},p:function(t,n){n.hexColor?h?h.p(t,n):((h=Ut(e,n)).c(),h.m(l.parentNode,l)):h&&(h.d(1),h=null),n.customizable?m?m.p(t,n):((m=Vt(e,n)).c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null);var i={};t.label&&(i.label=n.label),t.width&&(i.width=n.width||"100px"),_._set(i),n.customizable&&n.expanded?b?b.p(t,n):((b=Xt(e,n)).c(),b.m(d.parentNode,d)):b&&(b.d(1),b=null)},d:function(t){h&&h.d(),m&&m.d(),_.destroy(t),t&&r(u),b&&b.d(t),t&&r(d)}}),this.root._oncreate.push(function(){(function(){var t=this;this.observe("custom",function(e){e&&0===e.length&&(e={}),t.set({custom:e})})}).call(y),y.fire("update",{changed:i({},y._state),current:y._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function ie(t,e,n){var i=Object.create(t);return i.opt=e[n],i}function oe(t,e){var n,i,o,l,c;return{c:function(){n=h("div"),i=p("For help on custom formats, check the "),o=h("noscript"),l=h("noscript"),c=p("."),n.className="small svelte-1e8rja6"},m:function(t,r){a(t,n,r),s(n,i),s(n,o),o.insertAdjacentHTML("afterend",e.customFormatHelp),s(n,l),s(n,c)},p:function(t,e){t.customFormatHelp&&(!function(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}(o,l),o.insertAdjacentHTML("afterend",e.customFormatHelp))},d:function(t){t&&r(n)}}}function se(t,e){var n,i,o,l=e.opt.l;return{c:function(){n=h("option"),i=p(l),n.__value=o=e.opt.f,n.value=n.__value},m:function(t,e){a(t,n,e),s(n,i)},p:function(t,e){t.options&&l!==(l=e.opt.l)&&y(i,l),t.options&&o!==(o=e.opt.f)&&(n.__value=o),n.value=n.__value},d:function(t){t&&r(n)}}}function ae(t,e){var n,i=!1;function o(){i=!0,t.set({custom:n.value}),i=!1}return{c:function(){m(n=h("input"),"input",o),_(n,"type","text"),n.disabled=e.disabled,n.className="svelte-1e8rja6"},m:function(t,i){a(t,n,i),n.value=e.custom},p:function(t,e){!i&&t.custom&&(n.value=e.custom),t.disabled&&(n.disabled=e.disabled)},d:function(t){t&&r(n),g(n,"input",o)}}}function re(t){var e=this;S(this,t),this._state=n(n(this.store._init(["vis","dataset"]),{axis:!1,value:"",custom:"",selected:null,disabled:!1}),t.data),this.store._add(this,["vis","dataset"]),this._recompute({$vis:1,$dataset:1,axis:1,axisCol:1,disabled:1},this._state),this._intro=!0,this._handlers.destroy=[H],this._fragment=function(t,e){for(var n,i,o,l,c,u,f,v,_,b=!1,y="custom"==e.selected&&oe(0,e),x=e.options,N=[],C=0;C<x.length;C+=1)N[C]=se(0,ie(e,x,C));function j(){b=!0,t.set({selected:k(u)}),b=!1}var M="custom"==e.selected&&ae(t,e);return{c:function(){n=h("div"),i=h("label"),o=p("\n\n    "),l=h("div"),y&&y.c(),c=p("\n\n        "),u=h("select");for(var s=0;s<N.length;s+=1)N[s].c();(f=h("option")).textContent="(custom)",v=p("\n        "),M&&M.c(),i.className="control-label svelte-1e8rja6",f.__value="custom",f.value=f.__value,m(u,"change",j),"selected"in e||t.root._beforecreate.push(j),u.disabled=e.disabled,u.className="svelte-1e8rja6",l.className="controls form-inline",n.className=_="control-group vis-option-custom-format "+(e.disabled?"disabled":"")+" svelte-1e8rja6"},m:function(t,r){a(t,n,r),s(n,i),i.innerHTML=e.label,s(n,o),s(n,l),y&&y.m(l,null),s(l,c),s(l,u);for(var d=0;d<N.length;d+=1)N[d].m(u,null);s(u,f),w(u,e.selected),s(l,v),M&&M.m(l,null)},p:function(e,o){if(e.label&&(i.innerHTML=o.label),"custom"==o.selected?y?y.p(e,o):((y=oe(0,o)).c(),y.m(l,c)):y&&(y.d(1),y=null),e.options){x=o.options;for(var s=0;s<x.length;s+=1){var a=ie(o,x,s);N[s]?N[s].p(e,a):(N[s]=se(0,a),N[s].c(),N[s].m(u,f))}for(;s<N.length;s+=1)N[s].d(1);N.length=x.length}!b&&e.selected&&w(u,o.selected),e.disabled&&(u.disabled=o.disabled),"custom"==o.selected?M?M.p(e,o):((M=ae(t,o)).c(),M.m(l,null)):M&&(M.d(1),M=null),e.disabled&&_!==(_="control-group vis-option-custom-format "+(o.disabled?"disabled":"")+" svelte-1e8rja6")&&(n.className=_)},d:function(t){t&&r(n),y&&y.d(),d(N,t),g(u,"change",j),M&&M.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this;this.observe("selected",function(e,n){if(e!==n){var i=t.get().custom;t.set({value:"custom"!==e?e:i+" "})}}),this.observe("value",function(e,n){if(e!==n){for(var i=0,o=t.get().options;i<o.length;i+=1)if(o[i].f===e)return t.set({selected:e});t.set({selected:"custom",custom:e})}}),this.observe("custom",function(e,n){e!==n&&"custom"===t.get().selected&&t.set({value:e})})}).call(e),e.fire("update",{changed:i({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}n(ne.prototype,I),n(ne.prototype,Bt),ne.prototype._recompute=function(e,n){e.$themeData&&this._differs(n.palette,n.palette=n.$themeData.colors.palette)&&(e.palette=!0),(e.$vis||e.customizable||e.axis||e.custom||e.palette)&&this._differs(n.colorKeys,n.colorKeys=Pt(n))&&(e.colorKeys=!0),(e.value||e.palette)&&this._differs(n.hexColor,n.hexColor=function(t){return Qt(t.value,t.palette)}(n))&&(e.hexColor=!0),(e.selected||e.palette||e.custom)&&this._differs(n.customColor,n.customColor=function(e){var n=e.selected,i=e.palette,o=e.custom;if(void 0===o[n[0]])return"#ccc";var s=n.filter(function(t){return void 0!==o[t]}).map(function(t){return Qt(o[t],i)});return s.length?t.average(s,"lab"):"#ccc"}(n))&&(e.customColor=!0)},n(re.prototype,I),re.prototype._recompute=function(t,e){(t.$vis||t.$dataset||t.axis)&&this._differs(e.axisCol,e.axisCol=function(t){var e=t.$vis,n=t.$dataset,i=t.axis;if(!e||!i)return null;var o=e.axes()[i];return n.column("object"==typeof o?o[0]:o)}(e))&&(t.axisCol=!0),(t.axisCol||t.disabled)&&this._differs(e.customFormatHelp,e.customFormatHelp=function(t){var e=t.axisCol,n=t.disabled;if(e)return"date"===e.type()?(n?"":'<a href="http://momentjs.com/docs/#/displaying/format/" target="_blank">')+"moment.js documentation"+(n?"":"</a>"):"number"===e.type()?(n?"":'<a href="http://numeraljs.com/#format" target="_blank">')+"numeral.js documentation"+(n?"":"</a>"):""}(e))&&(t.customFormatHelp=!0),t.axisCol&&this._differs(e.options,e.options=function(t){var e=t.axisCol;return e?"number"===e.type()?[{l:"1,000[.00]",f:"0,0.[00]"},{l:"0",f:"0"},{l:"0.0",f:"0.0"},{l:"0.00",f:"0.00"},{l:"0.000",f:"0.000"},{l:"0.[0]",f:"0.[0]"},{l:"0.[00]",f:"0.[00]"},{l:"0%",f:"0%"},{l:"0.0%",f:"0.0%"},{l:"0.00%",f:"0.00%"},{l:"0.[0]%",f:"0.[0]%"},{l:"0.[00]%",f:"0.[00]%"},{l:"10,000",f:"0,0"},{l:"1st",f:"0o"},{l:"123k",f:"0a"},{l:"123.4k",f:"0.[0]a"},{l:"123.45k",f:"0.[00]a"}]:"date"===e.type()?[{l:"2015, 2016",f:"YYYY"},{l:"2015 Q1, 2015 Q2",f:"YYYY [Q]Q"},{l:"2015, Q2, Q3",f:"YYYY|\\QQ"},{l:"2015, Feb, Mar",f:"YYYY|MMM"},{l:"’15, ’16",f:"’YY"},{l:"April, May",f:"MMMM"},{l:"Apr, May",f:"MMM"},{l:"Apr ’15, May ’15",f:"MMM ’YY"},{l:"April, 2, 3",f:"MMM|DD"}]:void 0:[]}(e))&&(t.options=!0)};var le={update:function(){var t=this.get(),e=t.value2,n=t.multiply_,i=t.step_,o=+e.toFixed(-Math.round(Math.log(i*n)/Math.LN10))/n;this.set({value:o})}};function ce(t){var e=t.changed,n=t.current,i=t.previous;if(e.value||!i){var o=+(n.value*n.multiply_).toFixed(-Math.round(Math.log(n.step_*n.multiply_)/Math.LN10));this.set({value2:o})}}function ue(t,e){var n,i,o,s,l;function c(){t.set({value2:b(n.value)})}function u(e){t.update()}return{c:function(){n=h("input"),l=p("  "),m(n,"change",c),m(n,"input",c),m(n,"input",u),_(n,"type","range"),n.min=i=e.min_*e.multiply_,n.max=o=e.max_*e.multiply_,n.step=s=e.step_*e.multiply_,n.className="svelte-r8qnxy"},m:function(t,i){a(t,n,i),n.value=e.value2,a(t,l,i)},p:function(t,e){t.value2&&(n.value=e.value2),(t.min_||t.multiply_)&&i!==(i=e.min_*e.multiply_)&&(n.min=i),(t.max_||t.multiply_)&&o!==(o=e.max_*e.multiply_)&&(n.max=o),(t.step_||t.multiply_)&&s!==(s=e.step_*e.multiply_)&&(n.step=s)},d:function(t){t&&r(n),g(n,"change",c),g(n,"input",c),g(n,"input",u),t&&r(l)}}}function de(t,e){var n,i;return{c:function(){n=h("span"),i=p(e.unit_),n.className="unit svelte-r8qnxy"},m:function(t,e){a(t,n,e),s(n,i)},p:function(t,e){t.unit_&&y(i,e.unit_)},d:function(t){t&&r(n)}}}function fe(t){var e=this;S(this,t),this._state=n({},t.data),this._recompute({step:1,min:1,max:1,unit:1,slider:1,multiply:1},this._state),this._intro=!0,this._handlers.state=[ce],ce.call(this,{changed:i({},this._state),current:this._state}),this._fragment=function(t,e){var n,i,o,s,l,c,u,d=!1,f=e.slider_&&ue(t,e);function y(){d=!0,t.set({value2:b(n.value)}),d=!1}function x(e){t.update()}var w=e.unit_&&de(0,e);return{c:function(){f&&f.c(),n=h("input"),c=p("\n"),w&&w.c(),u=v(),m(n,"input",y),m(n,"input",x),_(n,"type","number"),n.min=i=e.min_*e.multiply_,n.max=o=e.max_*e.multiply_,n.step=s=e.step_*e.multiply_,n.style.cssText=l=e.slider_?"margin-left:10px":"",n.className="svelte-r8qnxy"},m:function(t,i){f&&f.m(t,i),a(t,n,i),n.value=e.value2,a(t,c,i),w&&w.m(t,i),a(t,u,i)},p:function(e,a){a.slider_?f?f.p(e,a):((f=ue(t,a)).c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),!d&&e.value2&&(n.value=a.value2),(e.min_||e.multiply_)&&i!==(i=a.min_*a.multiply_)&&(n.min=i),(e.max_||e.multiply_)&&o!==(o=a.max_*a.multiply_)&&(n.max=o),(e.step_||e.multiply_)&&s!==(s=a.step_*a.multiply_)&&(n.step=s),e.slider_&&l!==(l=a.slider_?"margin-left:10px":"")&&(n.style.cssText=l),a.unit_?w?w.p(e,a):((w=de(0,a)).c(),w.m(u.parentNode,u)):w&&(w.d(1),w=null)},d:function(t){f&&f.d(t),t&&r(n),g(n,"input",y),g(n,"input",x),t&&r(c),w&&w.d(t),t&&r(u)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:i({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function he(t){S(this,t),this.refs={},this._state=n({},t.data),this._intro=!0,this._fragment=function(t,e){var n={},i={},o={unit:e.unit,multiply:e.multiply,step:e.step,min:e.min,max:e.max,slider:e.slider};void 0!==e.value&&(o.value=e.value,n.value=!0);var s=new fe({root:t.root,store:t.store,data:o,_bind:function(e,i){var o={};!n.value&&e.value&&(o.value=i.value),t._set(o),n={}}});t.root._beforecreate.push(function(){s._bind({value:1},s.get())}),t.refs.baseNumber=s;var a={label:e.label};void 0!==e.width&&(a.width=e.width,i.width=!0),void 0!==e.valign&&(a.valign=e.valign,i.valign=!0);var r=new Dt({root:t.root,store:t.store,slots:{default:f()},data:a,_bind:function(e,n){var o={};!i.width&&e.width&&(o.width=n.width),!i.valign&&e.valign&&(o.valign=n.valign),t._set(o),i={}}});return t.root._beforecreate.push(function(){r._bind({width:1,valign:1},r.get())}),{c:function(){s._fragment.c(),r._fragment.c()},m:function(t,e){s._mount(r._slotted.default,null),r._mount(t,e)},p:function(t,o){e=o;var a={};t.unit&&(a.unit=e.unit),t.multiply&&(a.multiply=e.multiply),t.step&&(a.step=e.step),t.min&&(a.min=e.min),t.max&&(a.max=e.max),t.slider&&(a.slider=e.slider),!n.value&&t.value&&(a.value=e.value,n.value=void 0!==e.value),s._set(a),n={};var l={};t.label&&(l.label=e.label),!i.width&&t.width&&(l.width=e.width,i.width=void 0!==e.width),!i.valign&&t.valign&&(l.valign=e.valign,i.valign=void 0!==e.valign),r._set(l),i={}},d:function(e){s.destroy(),t.refs.baseNumber===s&&(t.refs.baseNumber=null),r.destroy(e)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function pe(t,e,n){var i=Object.create(t);return i.opt=e[n],i}function ve(t,e){var n,i=e.opt.help;return{c:function(){(n=h("div")).className="help svelte-udgzmt"},m:function(t,e){a(t,n,e),n.innerHTML=i},p:function(t,e){t.options&&i!==(i=e.opt.help)&&(n.innerHTML=i)},d:function(t){t&&r(n)}}}function me(t,e){var n,i,o,l,c,u,d,f,v,b,x,w=e.opt.label;function k(){t.set({value:i.__value})}var N=e.opt.help&&ve(0,e);return{c:function(){n=h("label"),i=h("input"),l=h("span"),c=p(" "),u=h("span"),d=p(w),f=p("\n            "),N&&N.c(),v=p("\n        "),t._bindingGroups[0].push(i),m(i,"change",k),_(i,"type","radio"),i.__value=o=e.opt.value,i.value=i.__value,i.disabled=e.disabled,i.className="svelte-udgzmt",l.className="css-ui svelte-udgzmt",u.className="svelte-udgzmt",n.title=b=e.opt.tooltip||"",n.className=x=(e.disabled?"disabled":"")+" "+(e.opt.help?"has-help":"")+" svelte-udgzmt"},m:function(t,o){a(t,n,o),s(n,i),i.checked=i.__value===e.value,s(n,l),s(n,c),s(n,u),s(u,d),s(n,f),N&&N.m(n,null),s(n,v)},p:function(t,e){t.value&&(i.checked=i.__value===e.value),t.options&&o!==(o=e.opt.value)&&(i.__value=o),i.value=i.__value,t.disabled&&(i.disabled=e.disabled),t.options&&w!==(w=e.opt.label)&&y(d,w),e.opt.help?N?N.p(t,e):((N=ve(0,e)).c(),N.m(n,v)):N&&(N.d(1),N=null),t.options&&b!==(b=e.opt.tooltip||"")&&(n.title=b),(t.disabled||t.options)&&x!==(x=(e.disabled?"disabled":"")+" "+(e.opt.help?"has-help":"")+" svelte-udgzmt")&&(n.className=x)},d:function(e){e&&r(n),t._bindingGroups[0].splice(t._bindingGroups[0].indexOf(i),1),g(i,"change",k),N&&N.d()}}}function ge(t){S(this,t),this._state=n({disabled:!1,width:"auto",valign:"top",inline:!0},t.data),this._bindingGroups=[[]],this._intro=!0,this._fragment=function(t,e){for(var n,i,o=e.options,a=[],r=0;r<o.length;r+=1)a[r]=me(t,pe(e,o,r));var l={width:e.width,valign:e.valign,label:e.label},c=new Dt({root:t.root,store:t.store,slots:{default:f()},data:l});return{c:function(){n=h("div");for(var t=0;t<a.length;t+=1)a[t].c();c._fragment.c(),n.className=i=(e.inline?"inline":"")+" svelte-udgzmt"},m:function(t,e){s(c._slotted.default,n);for(var i=0;i<a.length;i+=1)a[i].m(n,null);c._mount(t,e)},p:function(e,s){if(e.options||e.disabled||e.value){o=s.options;for(var r=0;r<o.length;r+=1){var l=pe(s,o,r);a[r]?a[r].p(e,l):(a[r]=me(t,l),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}e.inline&&i!==(i=(s.inline?"inline":"")+" svelte-udgzmt")&&(n.className=i);var u={};e.width&&(u.width=s.width),e.valign&&(u.valign=s.valign),e.label&&(u.label=s.label),c._set(u)},d:function(t){d(a,t),c.destroy(t)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function _e(t,e,n){var i=Object.create(t);return i.opt=e[n],i}function be(t,e,n){var i=Object.create(t);return i.optgroup=e[n],i}function ye(t,e,n){var i=Object.create(t);return i.opt=e[n],i}function xe(t,e){for(var n,i=e.options,o=[],s=0;s<i.length;s+=1)o[s]=we(t,ye(e,i,s));return{c:function(){for(var t=0;t<o.length;t+=1)o[t].c();n=v()},m:function(t,e){for(var i=0;i<o.length;i+=1)o[i].m(t,e);a(t,n,e)},p:function(e,s){if(e.options){i=s.options;for(var a=0;a<i.length;a+=1){var r=ye(s,i,a);o[a]?o[a].p(e,r):(o[a]=we(t,r),o[a].c(),o[a].m(n.parentNode,n))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},d:function(t){d(o,t),t&&r(n)}}}function we(t,e){var n,i,o,l=e.opt.label;return{c:function(){n=h("option"),i=p(l),n.__value=o=e.opt.value,n.value=n.__value},m:function(t,e){a(t,n,e),s(n,i)},p:function(t,e){t.options&&l!==(l=e.opt.label)&&y(i,l),t.options&&o!==(o=e.opt.value)&&(n.__value=o),n.value=n.__value},d:function(t){t&&r(n)}}}function ke(t,e){for(var n,i=e.optgroups,o=[],s=0;s<i.length;s+=1)o[s]=Ce(t,be(e,i,s));return{c:function(){for(var t=0;t<o.length;t+=1)o[t].c();n=v()},m:function(t,e){for(var i=0;i<o.length;i+=1)o[i].m(t,e);a(t,n,e)},p:function(e,s){if(e.optgroups){i=s.optgroups;for(var a=0;a<i.length;a+=1){var r=be(s,i,a);o[a]?o[a].p(e,r):(o[a]=Ce(t,r),o[a].c(),o[a].m(n.parentNode,n))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},d:function(t){d(o,t),t&&r(n)}}}function Ne(t,e){var n,i,o,l=e.opt.label;return{c:function(){n=h("option"),i=p(l),n.__value=o=e.opt.value,n.value=n.__value},m:function(t,e){a(t,n,e),s(n,i)},p:function(t,e){t.optgroups&&l!==(l=e.opt.label)&&y(i,l),t.optgroups&&o!==(o=e.opt.value)&&(n.__value=o),n.value=n.__value},d:function(t){t&&r(n)}}}function Ce(t,e){for(var n,i,o=e.optgroup.options,s=[],l=0;l<o.length;l+=1)s[l]=Ne(0,_e(e,o,l));return{c:function(){n=h("optgroup");for(var t=0;t<s.length;t+=1)s[t].c();_(n,"label",i=e.optgroup.label)},m:function(t,e){a(t,n,e);for(var i=0;i<s.length;i+=1)s[i].m(n,null)},p:function(t,e){if(t.optgroups){o=e.optgroup.options;for(var a=0;a<o.length;a+=1){var r=_e(e,o,a);s[a]?s[a].p(t,r):(s[a]=Ne(0,r),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}t.optgroups&&i!==(i=e.optgroup.label)&&_(n,"label",i)},d:function(t){t&&r(n),d(s,t)}}}function je(t){S(this,t),this._state=n({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),this._intro=!0,this._fragment=function(t,e){var n,i,o,l,c,u,d,f,_=!1,b=e.options.length&&xe(t,e),y=e.optgroups.length&&ke(t,e);function N(){_=!0,t.set({value:k(u)}),_=!1}return{c:function(){n=h("div"),i=h("label"),l=p("\n\n    "),c=h("div"),u=h("select"),b&&b.c(),d=v(),y&&y.c(),x(i,"width",e.labelWidth),i.className=o="control-label "+(e.disabled?"disabled":"")+" svelte-jp3jqj",m(u,"change",N),"value"in e||t.root._beforecreate.push(N),u.disabled=e.disabled,x(u,"width",e.width),c.className=f="controls form-inline "+(e.disabled?"disabled":""),n.className="control-group vis-option-type-select"},m:function(t,o){a(t,n,o),s(n,i),i.innerHTML=e.label,s(n,l),s(n,c),s(c,u),b&&b.m(u,null),s(u,d),y&&y.m(u,null),w(u,e.value)},p:function(e,n){e.label&&(i.innerHTML=n.label),e.labelWidth&&x(i,"width",n.labelWidth),e.disabled&&o!==(o="control-label "+(n.disabled?"disabled":"")+" svelte-jp3jqj")&&(i.className=o),n.options.length?b?b.p(e,n):((b=xe(t,n)).c(),b.m(u,d)):b&&(b.d(1),b=null),n.optgroups.length?y?y.p(e,n):((y=ke(t,n)).c(),y.m(u,null)):y&&(y.d(1),y=null),!_&&e.value&&w(u,n.value),e.disabled&&(u.disabled=n.disabled),e.width&&x(u,"width",n.width),e.disabled&&f!==(f="controls form-inline "+(n.disabled?"disabled":""))&&(c.className=f)},d:function(t){t&&r(n),b&&b.d(),y&&y.d(),g(u,"change",N)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}n(fe.prototype,I),n(fe.prototype,le),fe.prototype._recompute=function(t,e){t.step&&this._differs(e.step_,e.step_=e.step||1)&&(t.step_=!0),t.min&&this._differs(e.min_,e.min_=function(t){var e=t.min;return void 0!==e?e:0}(e))&&(t.min_=!0),t.max&&this._differs(e.max_,e.max_=function(t){var e=t.max;return void 0!==e?e:100}(e))&&(t.max_=!0),t.unit&&this._differs(e.unit_,e.unit_=function(t){var e=t.unit;return void 0!==e?e:""}(e))&&(t.unit_=!0),t.slider&&this._differs(e.slider_,e.slider_=function(t){var e=t.slider;return void 0===e||e}(e))&&(t.slider_=!0),t.multiply&&this._differs(e.multiply_,e.multiply_=function(t){return t.multiply||1}(e))&&(t.multiply_=!0)},n(he.prototype,I),n(ge.prototype,I),n(je.prototype,I);function Me(t){var e=this._svelte,n=e.component,i=e.ctx;n.select(t,i.opt)}function ze(t,e,n){var i=Object.create(t);return i.opt=e[n],i}function Le(t,e){for(var n,i=e.options,o=[],s=0;s<i.length;s+=1)o[s]=Te(t,ze(e,i,s));return{c:function(){for(var t=0;t<o.length;t+=1)o[t].c();n=v()},m:function(t,e){for(var i=0;i<o.length;i+=1)o[i].m(t,e);a(t,n,e)},p:function(e,s){if(e.value||e.options){i=s.options;for(var a=0;a<i.length;a+=1){var r=ze(s,i,a);o[a]?o[a].p(e,r):(o[a]=Te(t,r),o[a].c(),o[a].m(n.parentNode,n))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},d:function(t){d(o,t),t&&r(n)}}}function Te(t,e){var n,i,o,l,c,u=e.opt.label;return{c:function(){n=h("li"),i=h("a"),l=p("\n                    "),i._svelte={component:t,ctx:e},m(i,"click",Me),i.href=o="#/"+e.opt.value,n.className=c=(e.value==e.opt.value?"selected":"")+" svelte-c4b0rh"},m:function(t,e){a(t,n,e),s(n,i),i.innerHTML=u,s(n,l)},p:function(t,s){e=s,t.options&&u!==(u=e.opt.label)&&(i.innerHTML=u),i._svelte.ctx=e,t.options&&o!==(o="#/"+e.opt.value)&&(i.href=o),(t.value||t.options)&&c!==(c=(e.value==e.opt.value?"selected":"")+" svelte-c4b0rh")&&(n.className=c)},d:function(t){t&&r(n),g(i,"click",Me)}}}function Se(t){var e,i,o,c,u,d,v,m,g,b,y,w,k,N,C,j,M,z;S(this,t),this._state=n({forcePlaceholder:!1,disabled:!1,width:"auto",options:[],optgroups:[],placeholder:"(select an item)"},t.data),this._recompute({value:1,options:1,placeholder:1,forcePlaceholder:1},this._state),this._intro=!0,this._fragment=(e=this,i=this._state,M=i.options.length&&Le(e,i),z=new vt({root:e.root,store:e.store,slots:{default:f(),content:f(),button:f()}}),{c:function(){o=h("div"),c=h("label"),u=p("\n\n    "),d=h("div"),v=h("span"),m=h("div"),g=h("button"),b=h("noscript"),y=p("\n                        "),w=h("span"),k=p("\n            "),N=h("span"),C=h("ul"),M&&M.c(),z._fragment.c(),c.className="control-label",w.className="caret svelte-c4b0rh",g.className="btn dropdown-toggle svelte-c4b0rh",m.className="btn-group",_(v,"slot","button"),C.className="dropdown-menu svelte-c4b0rh",x(C,"display","block"),_(N,"slot","content"),d.className=j="controls form-inline "+(i.disabled?"disabled":"")+" svelte-c4b0rh",o.className="control-group vis-option-type-select"},m:function(t,e){a(t,o,e),s(o,c),c.innerHTML=i.label,s(o,u),s(o,d),s(z._slotted.button,v),s(v,m),s(m,g),s(g,b),b.insertAdjacentHTML("beforebegin",i.currentLabel),s(g,y),s(g,w),s(z._slotted.default,k),s(z._slotted.content,N),s(N,C),M&&M.m(C,null),z._mount(d,null)},p:function(t,n){t.label&&(c.innerHTML=n.label),t.currentLabel&&(l(b),b.insertAdjacentHTML("beforebegin",n.currentLabel)),n.options.length?M?M.p(t,n):((M=Le(e,n)).c(),M.m(C,null)):M&&(M.d(1),M=null),t.disabled&&j!==(j="controls form-inline "+(n.disabled?"disabled":"")+" svelte-c4b0rh")&&(d.className=j)},d:function(t){t&&r(o),M&&M.d(),z.destroy()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function qe(t){var e=t-1;return e*e*e+1}function He(t,e){var n=e.delay;void 0===n&&(n=0);var i=e.duration;void 0===i&&(i=400);var o=e.easing;void 0===o&&(o=qe);var s=getComputedStyle(t),a=+s.opacity,r=parseFloat(s.height),l=parseFloat(s.paddingTop),c=parseFloat(s.paddingBottom),u=parseFloat(s.marginTop),d=parseFloat(s.marginBottom),f=parseFloat(s.borderTopWidth),h=parseFloat(s.borderBottomWidth);return{delay:n,duration:i,easing:o,css:function(t){return"overflow: hidden;opacity: "+Math.min(20*t,1)*a+";height: "+t*r+"px;padding-top: "+t*l+"px;padding-bottom: "+t*c+"px;margin-top: "+t*u+"px;margin-bottom: "+t*d+"px;border-top-width: "+t*f+"px;border-bottom-width: "+t*h+"px;"}}}n(Se.prototype,I),n(Se.prototype,{select:function(t,e){t.preventDefault(),this.set({value:e.value}),this.fire("change",e.value)}}),Se.prototype._recompute=function(t,e){(t.value||t.options||t.placeholder||t.forcePlaceholder)&&this._differs(e.currentLabel,e.currentLabel=function(t){var e=t.value,n=t.options,i=t.placeholder;if(!t.forcePlaceholder)for(var o=0;o<n.length;o++)if(n[o].value===e)return n[o].label;return'<span style="color:#999;font-size:12px;">'+i+"</span>"}(e))&&(t.currentLabel=!0)};var Ie={show:function(){var t=this,e=setTimeout(function(){t.set({visible:!0})},400);this.set({t:e})},hide:function(){var t=this.get().t;clearTimeout(t),this.set({visible:!1})}};function Oe(t,e){var n;return{c:function(){n=p("?")},m:function(t,e){a(t,n,e)},d:function(t){t&&r(n)}}}function $e(t,e){var n;return{c:function(){(n=h("i")).className="im im-graduation-hat svelte-1mkn8ur"},m:function(t,e){a(t,n,e)},d:function(t){t&&r(n)}}}function Ae(t,e){var n,i=t._slotted.default;return{c:function(){(n=h("div")).className="content svelte-1mkn8ur"},m:function(t,e){a(t,n,e),i&&s(n,i)},d:function(t){t&&r(n),i&&u(n,i)}}}function Ee(t){S(this,t),this._state=n({visible:!1},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=function(t,e){var n,i,o;function l(t){return t.visible?$e:Oe}var c=l(e),u=c(t,e),d=e.visible&&Ae(t);function f(e){t.show()}function v(e){t.hide()}return{c:function(){n=h("div"),i=h("span"),u.c(),o=p("\n    "),d&&d.c(),i.className="svelte-1mkn8ur",m(n,"mouseenter",f),m(n,"mouseleave",v),n.className="help svelte-1mkn8ur"},m:function(t,e){a(t,n,e),s(n,i),u.m(i,null),s(n,o),d&&d.m(n,null)},p:function(e,o){c!==(c=l(o))&&(u.d(1),(u=c(t,o)).c(),u.m(i,null)),o.visible?d||((d=Ae(t)).c(),d.m(n,null)):d&&(d.d(1),d=null)},d:function(t){t&&r(n),u.d(),d&&d.d(),g(n,"mouseenter",f),g(n,"mouseleave",v)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function De(t){var e=this,n=t.changed,i=t.current;n.value&&i.value&&(this.set({highlight:!0}),setTimeout(function(){e.set({highlight:!1})},300))}function Fe(t,e){var n=t._slotted.help,i=new Ee({root:t.root,store:t.store,slots:{default:f()}});return{c:function(){i._fragment.c()},m:function(t,e){n&&s(i._slotted.default,n),i._mount(t,e)},d:function(t){n&&u(i._slotted.default,n),i.destroy(t)}}}function Re(t,n){var i,o,l,c,d=t._slotted.default;return{c:function(){i=h("div"),(o=h("div")).className="switch-content svelte-bp6vvu",i.className="svelte-bp6vvu"},m:function(t,e){a(t,i,e),s(i,o),d&&s(o,d),c=!0},p:e,i:function(e,n){c||(t.root._intro&&(l&&l.invalidate(),t.root._aftercreate.push(function(){l||(l=C(t,i,He,{},!0)),l.run(1)})),this.m(e,n))},o:function(e){c&&(l||(l=C(t,i,He,{},!1)),l.run(0,function(){e(),l=null}),c=!1)},d:function(t){t&&r(i),d&&u(o,d),t&&l&&l.abort()}}}function Ye(t,e){var n,i,o,l;return{c:function(){n=h("div"),(i=h("div")).className="disabled-msg svelte-bp6vvu",n.className="svelte-bp6vvu"},m:function(t,o){a(t,n,o),s(n,i),i.innerHTML=e.disabled_msg,l=!0},p:function(t,e){l&&!t.disabled_msg||(i.innerHTML=e.disabled_msg)},i:function(e,i){l||(t.root._intro&&(o&&o.invalidate(),t.root._aftercreate.push(function(){o||(o=C(t,n,He,{},!0)),o.run(1)})),this.m(e,i))},o:function(e){l&&(o||(o=C(t,n,He,{},!1)),o.run(0,function(){e(),o=null}),l=!1)},d:function(t){t&&(r(n),o&&o.abort())}}}function Ke(t){var e=this;S(this,t),this._state=n({hasHelp:!1,disabled_msg:"",disabled_state:"auto",disabled:!1,highlight:!1},t.data),this._intro=!0,this._handlers.state=[De],this._slotted=t.slots||{},De.call(this,{changed:i({},this._state),current:this._state}),this._fragment=function(t,e){var n,i,o,l,u,d,f,v,b,y,w,k,N,C,j=e.hasHelp&&Fe(t);function z(){t.set({value:u.checked})}var L=[Ye,Re],T=[];function S(t){return t.disabled&&t.disabled_msg?0:t.disabled&&"on"!=t.disabled_state||!t.value?-1:1}return~(k=S(e))&&(N=T[k]=L[k](t,e)),{c:function(){n=h("div"),j&&j.c(),i=p("\n    "),o=h("label"),l=h("label"),u=h("input"),f=h("span"),v=p("\n        "),b=h("noscript"),w=p("\n    "),N&&N.c(),m(u,"change",z),u.className=d=(e.disabled&&"on"==e.disabled_state?"disabled-force-checked":e.disabled&&"off"==e.disabled_state?"disabled-force-unchecked":"")+" svelte-bp6vvu",u.disabled=e.disabled,_(u,"type","checkbox"),f.className="slider round svelte-bp6vvu",l.className="switch svelte-bp6vvu",o.className=y="switch-outer "+(e.disabled?"disabled":"")+" svelte-bp6vvu",x(o,"padding-left","40px"),n.className=C="control-group vis-option-group vis-option-type-switch "+(e.highlight?"highlight":"")+" svelte-bp6vvu"},m:function(t,r){a(t,n,r),j&&j.m(n,null),s(n,i),s(n,o),s(o,l),s(l,u),u.checked=e.value,s(l,f),s(o,v),s(o,b),b.insertAdjacentHTML("afterend",e.label),s(n,w),~k&&T[k].i(n,null)},p:function(e,s){s.hasHelp?j||((j=Fe(t)).c(),j.m(n,i)):j&&(j.d(1),j=null),e.value&&(u.checked=s.value),(e.disabled||e.disabled_state)&&d!==(d=(s.disabled&&"on"==s.disabled_state?"disabled-force-checked":s.disabled&&"off"==s.disabled_state?"disabled-force-unchecked":"")+" svelte-bp6vvu")&&(u.className=d),e.disabled&&(u.disabled=s.disabled),e.label&&(c(b),b.insertAdjacentHTML("afterend",s.label)),e.disabled&&y!==(y="switch-outer "+(s.disabled?"disabled":"")+" svelte-bp6vvu")&&(o.className=y);var a=k;(k=S(s))===a?~k&&T[k].p(e,s):(N&&(M(),N.o(function(){T[a].d(1),T[a]=null})),~k?((N=T[k])||(N=T[k]=L[k](t,s)).c(),N.i(n,null)):N=null),e.highlight&&C!==(C="control-group vis-option-group vis-option-type-switch "+(s.highlight?"highlight":"")+" svelte-bp6vvu")&&(n.className=C)},d:function(t){t&&r(n),j&&j.d(),g(u,"change",z),~k&&T[k].d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){this.set({hasHelp:!(!this.options||!this.options.slots||!this.options.slots.help)})}).call(e),e.fire("update",{changed:i({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function Pe(t){S(this,t),this._state=n({placeholder:""},t.data),this._intro=!0,this._fragment=function(t,e){var n,i,o,l,c,u,d=!1;function f(){d=!0,t.set({value:u.value}),d=!1}return{c:function(){n=h("div"),i=h("label"),o=p(e.label),l=p("\n    "),c=h("div"),u=h("textarea"),i.className="control-label",m(u,"input",f),u.placeholder=e.placeholder,x(u,"width",e.width||"auto"),c.className="controls",n.className="control-group vis-option-group vis-option-type-textarea"},m:function(t,r){a(t,n,r),s(n,i),s(i,o),s(n,l),s(n,c),s(c,u),u.value=e.value},p:function(t,e){t.label&&y(o,e.label),!d&&t.value&&(u.value=e.value),t.placeholder&&(u.placeholder=e.placeholder),t.width&&x(u,"width",e.width||"auto")},d:function(t){t&&r(n),g(u,"input",f)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(Ee.prototype,I),n(Ee.prototype,Ie),n(Ke.prototype,I),n(Pe.prototype,I);var Be=lt(function(t){if(!K(t))return[];var e=[];for(var n in t)e.push(n);return st&&rt(t,e),e});function Ge(t){var e,n=t.changed,i=t.current;if(n.selected&&i.selected){var o=this.get().axis,s=K(e=this.store.getMetadata("axes",{}))?G(e)?e.slice():Be({},e):e;"-"===i.selected?delete s[o]:s[o]=i.selected,this.store.setMetadata("axes",s)}}function Qe(t,e,n){var i=Object.create(t);return i.column=e[n],i}function We(t,e){var n,i,o=e.axis["na-label"]||"--";return{c:function(){n=h("option"),i=p(o),n.__value="-",n.value=n.__value},m:function(t,e){a(t,n,e),s(n,i)},p:function(t,e){t.axis&&o!==(o=e.axis["na-label"]||"--")&&y(i,o)},d:function(t){t&&r(n)}}}function Je(t,e){var n,i,o,l=e.column.name;return{c:function(){n=h("option"),i=p(l),n.__value=o=e.column.name,n.value=n.__value},m:function(t,e){a(t,n,e),s(n,i)},p:function(t,e){t.columns&&l!==(l=e.column.name)&&y(i,l),t.columns&&o!==(o=e.column.name)&&(n.__value=o),n.value=n.__value},d:function(t){t&&r(n)}}}function Ue(t){var e=this;S(this,t),this._state=n(n(this.store._init(["visualization","dataset"]),{selected:!1,width:"200px",valign:"baseline"}),t.data),this.store._add(this,["visualization","dataset"]),this._recompute({axis:1,$visualization:1,$dataset:1},this._state),this._intro=!0,this._handlers.state=[Ge],this._handlers.destroy=[H],Ge.call(this,{changed:i({},this._state),current:this._state}),this._fragment=function(t,e){for(var n,i,o=!1,a=e.$visualization&&e.$visualization.axes[e.axis].optional&&We(0,e),r=e.columns,l=[],c=0;c<r.length;c+=1)l[c]=Je(0,Qe(e,r,c));function u(){o=!0,t.set({selected:k(n)}),o=!1}var p={width:e.width,valign:e.valign,label:e.label},_=new Dt({root:t.root,store:t.store,slots:{default:f()},data:p});return{c:function(){n=h("select"),a&&a.c(),i=v();for(var o=0;o<l.length;o+=1)l[o].c();_._fragment.c(),m(n,"change",u),"selected"in e||t.root._beforecreate.push(u),x(n,"width","calc(100% - 50px)")},m:function(t,o){s(_._slotted.default,n),a&&a.m(n,null),s(n,i);for(var r=0;r<l.length;r+=1)l[r].m(n,null);w(n,e.selected),_._mount(t,o)},p:function(t,e){if(e.$visualization&&e.$visualization.axes[e.axis].optional?a?a.p(t,e):((a=We(0,e)).c(),a.m(n,i)):a&&(a.d(1),a=null),t.columns){r=e.columns;for(var s=0;s<r.length;s+=1){var c=Qe(e,r,s);l[s]?l[s].p(t,c):(l[s]=Je(0,c),l[s].c(),l[s].m(n,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}!o&&t.selected&&w(n,e.selected);var u={};t.width&&(u.width=e.width),t.valign&&(u.valign=e.valign),t.label&&(u.label=e.label),_._set(u)},d:function(t){a&&a.d(),d(l,t),g(n,"change",u),_.destroy(t)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this;this.store.observe("visualization",function(e){if(t.get){var n=t.get();if(n&&!n.selected&&e){var i=t.store.getMetadata("axes",{})[t.get().axis];t.set({selected:i})}}})}).call(e),e.fire("update",{changed:i({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function Ve(t,e){var n,i,o,l;return{c:function(){n=h("div"),(i=h("div")).className="disabled-msg svelte-rcpckl"},m:function(t,o){a(t,n,o),s(n,i),i.innerHTML=e.disabled_msg,l=!0},p:function(t,e){l&&!t.disabled_msg||(i.innerHTML=e.disabled_msg)},i:function(e,i){l||(t.root._intro&&(o&&o.invalidate(),t.root._aftercreate.push(function(){o||(o=C(t,n,He,{},!0)),o.run(1)})),this.m(e,i))},o:function(e){l&&(o||(o=C(t,n,He,{},!1)),o.run(0,function(){e(),o=null}),l=!1)},d:function(t){t&&(r(n),o&&o.abort())}}}function Xe(t){S(this,t),this._state=n({disabled:!1,disabled_msg:"",unit:"",width:"100px",help:"",placeholder:""},t.data),this._intro=!0,this._fragment=function(t,e){var n,i,o,l=!1;function c(){l=!0,t.set({value:n.value}),l=!1}var u={disabled:e.disabled,width:e.width,label:e.label,help:e.help},d=new Dt({root:t.root,store:t.store,slots:{default:f()},data:u}),b=e.disabled&&e.disabled_msg&&Ve(t,e);return{c:function(){n=h("input"),d._fragment.c(),i=p("\n\n"),b&&b.c(),o=v(),m(n,"input",c),n.disabled=e.disabled,_(n,"type","text"),n.className="input-large",n.placeholder=e.placeholder},m:function(t,r){s(d._slotted.default,n),n.value=e.value,d._mount(t,r),a(t,i,r),b&&b.i(t,r),a(t,o,r)},p:function(e,i){!l&&e.value&&(n.value=i.value),e.disabled&&(n.disabled=i.disabled),e.placeholder&&(n.placeholder=i.placeholder);var s={};e.disabled&&(s.disabled=i.disabled),e.width&&(s.width=i.width),e.label&&(s.label=i.label),e.help&&(s.help=i.help),d._set(s),i.disabled&&i.disabled_msg?(b?b.p(e,i):(b=Ve(t,i))&&b.c(),b.i(o.parentNode,o)):b&&(M(),b.o(function(){b.d(1),b=null}))},d:function(t){g(n,"input",c),d.destroy(t),t&&r(i),b&&b.d(t),t&&r(o)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}n(Ue.prototype,I),Ue.prototype._recompute=function(t,e){(t.axis||t.$visualization||t.$dataset)&&this._differs(e.columns,e.columns=function(t){var e=t.axis,n=t.$visualization,i=t.$dataset,o=[];return i&&n&&e?(i.eachColumn(function(t){dt(n.axes[e].accepts,t.type())>-1&&o.push({name:t.name()})}),o):[]}(e))&&(t.columns=!0)},n(Xe.prototype,I);var Ze={focus:function(){this.refs.searchInput.focus()},blur:function(){this.refs.searchInput.blur()},onClick:function(t){this.set({open:!0}),this.fire("focus",t)},search:function(t){this.set({open:!0}),this.fire("search",{query:t})},select:function(t,e){this.set({selectedItem:t,query:t.title,open:!1}),e&&e.stopPropagation(),this.fire("select",{item:t})},keyup:function(t){if(t){if(13===t.keyCode){var e=this.get().selectedItem;this.select(e)}if(38===t.keyCode||40===t.keyCode){var n=this.get(),i=n.selectedIndex,o=n.matches;isNaN(i)&&(i=-1);var s=o.length||0;38===t.keyCode&&(i=(i-1+s)%s),40===t.keyCode&&(i=(i+1)%s),this.set({selectedIndex:i,selectedItem:o[i]})}27===t.keyCode&&(this.set({open:!1}),this.blur())}}};function tn(t){var e=t.changed,n=t.current;if(e.selectedIndex&&this.refs.dropdown){var i=this.refs.dropdown,o=n.selectedIndex,s=i.children[o].getBoundingClientRect(),a=i.getBoundingClientRect();s.y+s.height-a.y>a.height?i.scrollBy(0,s.y+s.height-a.y-a.height+5):s.y-a.y<0&&i.scrollBy(0,s.y-a.y-5)}}function en(t){var e=this._svelte,n=e.component,i=e.ctx;n.select(i.item,t)}function nn(t,e,n){var i=Object.create(t);return i.item=e[n],i.i=n,i}function on(t,e){var n,i;return{c:function(){(n=h("i")).className=i="icon "+e.icon+" svelte-kljjr2"},m:function(t,e){a(t,n,e)},p:function(t,e){t.icon&&i!==(i="icon "+e.icon+" svelte-kljjr2")&&(n.className=i)},d:function(t){t&&r(n)}}}function sn(t,e){for(var n,i=e.matches,o=[],s=0;s<i.length;s+=1)o[s]=an(t,nn(e,i,s));return{c:function(){n=h("ul");for(var t=0;t<o.length;t+=1)o[t].c();n.className="dropdown-results svelte-kljjr2"},m:function(e,i){a(e,n,i);for(var s=0;s<o.length;s+=1)o[s].m(n,null);t.refs.dropdown=n},p:function(e,s){if(e.selectedIndex||e.matches){i=s.matches;for(var a=0;a<i.length;a+=1){var r=nn(s,i,a);o[a]?o[a].p(e,r):(o[a]=an(t,r),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},d:function(e){e&&r(n),d(o,e),t.refs.dropdown===n&&(t.refs.dropdown=null)}}}function an(t,e){var n,i,o,c,u,d=e.item.display||e.item.title;return{c:function(){n=h("li"),i=h("noscript"),o=p("\n            "),n._svelte={component:t,ctx:e},m(n,"click",en),n.className=c=(e.i==e.selectedIndex?"selected":"")+" svelte-kljjr2",n.style.cssText=u=e.item.style||""},m:function(t,e){a(t,n,e),s(n,i),i.insertAdjacentHTML("beforebegin",d),s(n,o)},p:function(t,o){e=o,t.matches&&d!==(d=e.item.display||e.item.title)&&(l(i),i.insertAdjacentHTML("beforebegin",d)),n._svelte.ctx=e,t.selectedIndex&&c!==(c=(e.i==e.selectedIndex?"selected":"")+" svelte-kljjr2")&&(n.className=c),t.matches&&u!==(u=e.item.style||"")&&(n.style.cssText=u)},d:function(t){t&&r(n),g(n,"click",en)}}}function rn(t){var e=this;S(this,t),this.refs={},this._state=n({selection:"",query:"",icon:!1,placeholder:"",filter:"indexOf",selectedItem:void 0,selectedIndex:void 0,searching:!1,open:!1,items:[]},t.data),this._recompute({query:1,items:1,filter:1},this._state),this._intro=!0,this._handlers.update=[tn],this._slotted=t.slots||{},this._fragment=function(t,e){var n,i,o,l,c,d,f,v,b,y,x=!1,w=t._slotted.button;function k(e){t.set({open:!1})}function N(){x=!0,t.set({query:o.value}),x=!1}function C(e){t.keyup(e)}function j(n){t.search(e.query)}window.addEventListener("click",k);var M=e.icon&&on(0,e);function z(e){t.set({open:!0})}var L=e.open&&e.matches.length&&sn(t,e);function T(e){t.onClick(e)}function S(t){t.stopPropagation()}return{c:function(){n=h("div"),i=h("div"),o=h("input"),c=p("\n\n        "),M&&M.c(),d=p("\n\n        "),f=h("div"),w||((v=h("button")).innerHTML='<span class="caret"></span>'),b=p("\n\n        "),L&&L.c(),m(o,"input",N),m(o,"keypress",C),m(o,"input",j),_(o,"type","search"),o.placeholder=l=e.open?e.placeholder:e.selection||e.placeholder,o.className="svelte-kljjr2",w||(m(v,"click",z),v.className="btn btn-small btn-primary svelte-kljjr2"),f.className="btn-wrap svelte-kljjr2",m(i,"click",T),i.className=y="dropdown "+(e.icon?"icon":"")+" "+(!e.open&&e.selection?"selection":"")+" svelte-kljjr2",m(n,"click",S),n.className="control-group vis-option-group vis-option-type-select"},m:function(r,l){a(r,n,l),s(n,i),s(i,o),t.refs.searchInput=o,o.value=e.query,s(i,c),M&&M.m(i,null),s(i,d),s(i,f),s(f,w||v),s(i,b),L&&L.m(i,null)},p:function(n,s){e=s,!x&&n.query&&(o.value=e.query),(n.open||n.placeholder||n.selection)&&l!==(l=e.open?e.placeholder:e.selection||e.placeholder)&&(o.placeholder=l),e.icon?M?M.p(n,e):((M=on(0,e)).c(),M.m(i,d)):M&&(M.d(1),M=null),e.open&&e.matches.length?L?L.p(n,e):((L=sn(t,e)).c(),L.m(i,null)):L&&(L.d(1),L=null),(n.icon||n.open||n.selection)&&y!==(y="dropdown "+(e.icon?"icon":"")+" "+(!e.open&&e.selection?"selection":"")+" svelte-kljjr2")&&(i.className=y)},d:function(e){window.removeEventListener("click",k),e&&r(n),g(o,"input",N),g(o,"keypress",C),g(o,"input",j),t.refs.searchInput===o&&(t.refs.searchInput=null),M&&M.d(),w?u(f,w):g(v,"click",z),L&&L.d(),g(i,"click",T),g(n,"click",S)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:i({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function ln(t,e){var n,i,o,l,c=t._slotted.default;return{c:function(){n=h("div"),i=h("fieldset"),(o=h("div")).className="control-group vis-option-group",i.id="visOptions",n.className=l="section "+e.id},m:function(t,e){a(t,n,e),s(n,i),s(i,o),c&&s(o,c)},p:function(t,e){t.id&&l!==(l="section "+e.id)&&(n.className=l)},d:function(t){t&&r(n),c&&u(o,c)}}}function cn(t){var e,i,o,s;S(this,t),this._state=n({},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=(e=this,i=this._state,s=i.id==i.active&&ln(e,i),{c:function(){s&&s.c(),o=v()},m:function(t,e){s&&s.m(t,e),a(t,o,e)},p:function(t,n){n.id==n.active?s?s.p(t,n):((s=ln(e,n)).c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d:function(t){s&&s.d(t),t&&r(o)}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(rn.prototype,I),n(rn.prototype,Ze),rn.prototype._recompute=function(t,e){var n,i,o;(t.query||t.items||t.filter)&&this._differs(e.matches,e.matches=(i=(n=e).query,o=n.items,n.filter&&i?o&&o.filter?o.filter(function(t){return(t.search||t.title).toLowerCase().indexOf(i.toLowerCase())>-1}):[]:o))&&(t.matches=!0)},n(cn.prototype,I);var un={toggle:function(){if(!this.get().notoggle){var t=this.get(),e=t.open,n=t.id;if(n){var i=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};i["locator-map"]||(i["locator-map"]={}),i["locator-map"][n]="open"===i["locator-map"][n]?"closed":"open",window.localStorage.setItem("dw-vis-groups",JSON.stringify(i))}this.set({open:!e})}}};function dn(t,e){var n,i,o;return{c:function(){n=h("i"),i=p("\n        "),o=h("i"),n.className="fa fa-chevron-up expand-group pull-right",o.className="fa fa-chevron-down collapse-group pull-right"},m:function(t,e){a(t,n,e),a(t,i,e),a(t,o,e)},d:function(t){t&&(r(n),r(i),r(o))}}}function fn(t,e){var n,i=t._slotted.default;return{c:function(){(n=h("div")).className="option-group-content vis-option-type-chart-description"},m:function(t,e){a(t,n,e),i&&s(n,i)},d:function(t){t&&r(n),i&&u(n,i)}}}function hn(t){var e=this;S(this,t),this._state=n({notoggle:!1,id:!1,open:!0},t.data),this._intro=!0,this._slotted=t.slots||{},this._fragment=function(t,e){var n,i,o,l,u,d,f=!e.notoggle&&dn();function v(e){t.toggle()}var _=e.open&&fn(t);return{c:function(){n=h("div"),i=h("label"),f&&f.c(),o=p(" "),l=h("noscript"),u=p("\n\n    "),_&&_.c(),m(i,"click",v),i.className="group-title svelte-1jbn84t",n.className=d="vis-option-type-group "+(e.open?"group-open":"")+" "+(e.notoggle?"notoggle":"")+" svelte-1jbn84t"},m:function(t,r){a(t,n,r),s(n,i),f&&f.m(i,null),s(i,o),s(i,l),l.insertAdjacentHTML("afterend",e.label),s(n,u),_&&_.m(n,null)},p:function(e,s){s.notoggle?f&&(f.d(1),f=null):f||((f=dn()).c(),f.m(i,o)),e.label&&(c(l),l.insertAdjacentHTML("afterend",s.label)),s.open?_||((_=fn(t)).c(),_.m(n,null)):_&&(_.d(1),_=null),(e.open||e.notoggle)&&d!==(d="vis-option-type-group "+(s.open?"group-open":"")+" "+(s.notoggle?"notoggle":"")+" svelte-1jbn84t")&&(n.className=d)},d:function(t){t&&r(n),f&&f.d(),g(i,"click",v),_&&_.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get()||{},e=t.id;if(!t.notoggle&&e){var n=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};n["locator-map"]&&n["locator-map"][e]&&this.set({open:"closed"!==n["locator-map"][e]})}}).call(e),e.fire("update",{changed:i({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function pn(t,e,n){e=tt(e,n);for(var i,o=B(t),s=0,a=o.length;s<a;s++)if(e(t[i=o[s]],i,t))return i}function vn(t,e){return function(t,e,n){var i=(ot(t)?ut:pn)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}(t,X(e))}n(hn.prototype,I),n(hn.prototype,un);var mn,gn={select:function(t,e){if(!e.redirect&&(t.preventDefault(),!e.readonly&&(this.fire("select",e),"/edit/"===window.location.pathname.substr(0,6)))){var n=this.store.get().id;window.history.pushState({step:e,id:n},"","/edit/"+n+"/"+e.id)}}};function _n(t){var e=t.changed,n=t.current;if(e.activeIndex){var i=n.steps[n.activeIndex];if(i){var o=this.store.get(),s=o.id,a=o.title;window.document.title=a+" - "+s+" - "+i.title+" | Datawrapper"}}}function bn(t,e){var n;return{c:function(){(n=h("i")).className="fa fa-check"},m:function(t,e){a(t,n,e)},d:function(t){t&&r(n)}}}function yn(t){var e=this;S(this,t),this._state=n(n(this.store._init(["lastEditStep"]),{step:{title:"",index:1},maxStep:1,active:1}),t.data),this.store._add(this,["lastEditStep"]),this._recompute({active:1,steps:1,index:1,activeIndex:1,maxStep:1,step:1,passed:1,$lastEditStep:1},this._state),this._intro=!0,this._handlers.update=[_n],this._handlers.destroy=[H],this._fragment=function(t,e){var n,i,o,l,c,u,d,f,v,_=e.step.title,b=e.passed&&bn();function w(n){t.select(n,e.step)}return{c:function(){n=h("a"),i=h("span"),o=p(e.index),l=p("\n    "),c=h("span"),u=p("\n    "),b&&b.c(),d=p("\n    "),f=h("div"),i.className="step",c.className="title",f.className="corner",m(n,"click",w),x(n,"width",95/e.steps.length+"%"),n.href=v=e.step.redirect?e.step.redirect:"#"+e.step.id,n.className=e.class_},m:function(t,e){a(t,n,e),s(n,i),s(i,o),s(n,l),s(n,c),c.innerHTML=_,s(n,u),b&&b.m(n,null),s(n,d),s(n,f)},p:function(t,i){e=i,t.index&&y(o,e.index),t.step&&_!==(_=e.step.title)&&(c.innerHTML=_),e.passed?b||((b=bn()).c(),b.m(n,d)):b&&(b.d(1),b=null),t.steps&&x(n,"width",95/e.steps.length+"%"),t.step&&v!==(v=e.step.redirect?e.step.redirect:"#"+e.step.id)&&(n.href=v),t.class_&&(n.className=e.class_)},d:function(t){t&&r(n),b&&b.d(),g(n,"click",w)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:i({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}function xn(t){void 0===t&&(t=0),window._paq&&(mn&&window._paq.push(["setReferrerUrl",mn]),window._paq.push(["setGenerationTimeMs",t]),window._paq.push(["setCustomUrl",window.location.pathname]),window._paq.push(["setDocumentTitle",window.document.title]),window._paq.push(["trackPageView"]),mn=window.location.pathname)}n(yn.prototype,I),n(yn.prototype,gn),yn.prototype._recompute=function(t,e){var n,i,o;(t.active||t.steps)&&this._differs(e.activeIndex,e.activeIndex=(i=(n=e).active,(o=n.steps).indexOf(vn(o,{id:i}))))&&(t.activeIndex=!0),(t.index||t.activeIndex||t.maxStep)&&this._differs(e.passed,e.passed=function(t){var e=t.index,n=t.activeIndex;return e<t.maxStep&&e!==n}(e))&&(t.passed=!0),(t.step||t.index||t.active||t.passed||t.$lastEditStep)&&this._differs(e.class_,e.class_=function(t){var e=t.step,n=t.index,i=t.active,o=t.passed,s=t.$lastEditStep,a=[];return e.readonly&&a.push("readonly"),i===e.id?a.push("active"):(n>s+1&&a.push("unseen"),o&&a.push("passed")),a.join(" ")}(e))&&(t.class_=!0)};var wn={select:function(t,e){this.set({active:t.id});var n=this.store.get().lastEditStep;this.store.set({lastEditStep:Math.max(n,e+1)}),xn()},popstate:function(t){if(t.state&&t.state.id&&t.state.step){var e=t.state,n=e.id,i=e.step;n===this.store.get().id?(this.set({active:i.id}),xn()):window.location.href="/edit/"+n+"/"+i.id}}};function kn(t,e,n){var i=Object.create(t);return i.step=e[n],i.each_value=e,i.i=n,i}function Nn(t,e){var n={},i={index:e.i+1};void 0!==e.step&&(i.step=e.step,n.step=!0),void 0!==e.steps&&(i.steps=e.steps,n.steps=!0),void 0!==e.active&&(i.active=e.active,n.active=!0);var o=new yn({root:t.root,store:t.store,data:i,_bind:function(i,o){var s={};!n.step&&i.step&&(e.each_value[e.i]=o.step=o.step,s.steps=e.steps),!n.steps&&i.steps&&(s.steps=o.steps),!n.active&&i.active&&(s.active=o.active),t._set(s),n={}}});return t.root._beforecreate.push(function(){o._bind({step:1,steps:1,active:1},o.get())}),o.on("select",function(n){t.select(e.step,e.i)}),{c:function(){o._fragment.c()},m:function(t,e){o._mount(t,e)},p:function(t,i){e=i;var s={};!n.step&&t.steps&&(s.step=e.step,n.step=void 0!==e.step),!n.steps&&t.steps&&(s.steps=e.steps,n.steps=void 0!==e.steps),!n.active&&t.active&&(s.active=e.active,n.active=void 0!==e.active),o._set(s),n={}},d:function(t){o.destroy(t)}}}function Cn(t,e){var n,i,o,l,c,u,d;return{c:function(){n=h("div"),i=p("This chart belongs to\n    "),o=h("a"),l=p("User "),c=p(e.$authorId),d=p(". Great power comes with great responsibility, so be careful with what\n    you're doing!"),o.target="_blank",o.href=u="/admin/chart/by/"+e.$authorId,n.className="alert alert-warning",x(n,"text-align","center"),x(n,"margin-top","10px")},m:function(t,e){a(t,n,e),s(n,i),s(n,o),s(o,l),s(o,c),s(n,d)},p:function(t,e){t.$authorId&&y(c,e.$authorId),t.$authorId&&u!==(u="/admin/chart/by/"+e.$authorId)&&(o.href=u)},d:function(t){t&&r(n)}}}function jn(t){var e=this;S(this,t),this._state=n(n(this.store._init(["user","authorId"]),{steps:[]}),t.data),this.store._add(this,["user","authorId"]),this._intro=!0,this._handlers.destroy=[H],this._fragment=function(t,e){var n,i,o;function s(e){t.popstate(e)}window.addEventListener("popstate",s);for(var l=e.steps,c=[],u=0;u<l.length;u+=1)c[u]=Nn(t,kn(e,l,u));var f=e.$user.id!=e.$authorId&&e.$user.isAdmin&&Cn(0,e);return{c:function(){n=h("div");for(var t=0;t<c.length;t+=1)c[t].c();i=p("\n\n"),f&&f.c(),o=v(),n.className="create-nav svelte-nols97"},m:function(t,e){a(t,n,e);for(var s=0;s<c.length;s+=1)c[s].m(n,null);a(t,i,e),f&&f.m(t,e),a(t,o,e)},p:function(e,i){if(e.steps||e.active){l=i.steps;for(var s=0;s<l.length;s+=1){var a=kn(i,l,s);c[s]?c[s].p(e,a):(c[s]=Nn(t,a),c[s].c(),c[s].m(n,null))}for(;s<c.length;s+=1)c[s].d(1);c.length=l.length}i.$user.id!=i.$authorId&&i.$user.isAdmin?f?f.p(e,i):((f=Cn(0,i)).c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},d:function(t){window.removeEventListener("popstate",s),t&&r(n),d(c,t),t&&r(i),f&&f.d(t),t&&r(o)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get(),e=t.active,n=t.steps,i=this.store.get(),o=i.lastEditStep,s=i.id,a=vn(n,{id:e});this.store.set({lastEditStep:Math.max(o,n.indexOf(a)+1)}),window.history.replaceState({step:a,id:s},a.title)}).call(e),e.fire("update",{changed:i({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),T(this))}return n(jn.prototype,I),n(jn.prototype,wn),{Checkbox:O,Color:ne,ColorPicker:Ot,Group:hn,NumberInput:he,Switch:Ke,Dropdown:Se,Radio:ge,Select:je,SelectAxisColumn:Ue,CustomFormat:re,Section:cn,TextArea:Pe,Help:Ee,Text:Xe,TypeAhead:rn,EditorNav:jn,BaseNumber:fe,ControlGroup:Dt}});
