!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chroma")):"function"==typeof define&&define.amd?define(["chroma"],e):t.controls=e(t.chroma)}(this,function(t){"use strict";function e(){}function n(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){e.appendChild(t)}function o(t,e,n){e.insertBefore(t,n)}function a(t){t.parentNode.removeChild(t)}function s(t,e){for(;t.nextSibling&&t.nextSibling!==e;)t.parentNode.removeChild(t.nextSibling)}function l(t){for(;t.previousSibling;)t.parentNode.removeChild(t.previousSibling)}function r(t){for(;t.nextSibling;)t.parentNode.removeChild(t.nextSibling)}function c(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}function u(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function d(){return document.createDocumentFragment()}function h(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return document.createComment("")}function v(t,e,n){t.addEventListener(e,n,!1)}function _(t,e,n){t.removeEventListener(e,n,!1)}function m(t,e,n){t.setAttribute(e,n)}function g(t){return""===t?void 0:+t}function b(t,e,n){t.style.setProperty(e,n)}function x(t,e){for(var n=0;n<t.options.length;n+=1){var i=t.options[n];if(i.__value===e)return void(i.selected=!0)}}function y(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function k(t){return t}function w(t,e,n,i,o,a){var s,l=n(e,i),r=l.duration||300,c=l.easing||k;if(l.css&&!N.stylesheet){var u=h("style");document.head.appendChild(u),N.stylesheet=u.sheet}return o&&(l.css&&l.delay&&(s=e.style.cssText,e.style.cssText+=l.css(0)),l.tick&&l.tick(0)),{t:o?0:1,running:!1,program:null,pending:null,run:function(t,e){var n={start:window.performance.now()+(l.delay||0),intro:t,callback:e};l.delay?this.pending=n:this.start(n),this.running||(this.running=!0,N.add(this))},start:function(n){t.fire(n.intro?"intro.start":"outro.start",{node:e}),n.a=this.t,n.b=n.intro?1:0,n.delta=n.b-n.a,n.duration=r*Math.abs(n.b-n.a),n.end=n.start+n.duration,l.css&&(l.delay&&(e.style.cssText=s),n.rule=function(t,e,n,i,o,a){for(var s="{\n",l=0;l<=1;l+=16.666/i)s+=100*l+"%{"+a(t+n*o(l))+"}\n";return s+"100% {"+a(e)+"}\n}"}(n.a,n.b,n.delta,n.duration,c,l.css),N.addRule(n.rule,n.name="__svelte_"+function(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(n.rule)),e.style.animation=(e.style.animation||"").split(", ").filter(function(t){return t&&(n.delta<0||!/__svelte/.test(t))}).concat(n.name+" "+n.duration+"ms linear 1 forwards").join(", ")),this.program=n,this.pending=null},update:function(t){var e=this.program;if(e){var n=t-e.start;this.t=e.a+e.delta*c(n/e.duration),l.tick&&l.tick(this.t)}},done:function(){var t=this.program;this.t=t.b,l.tick&&l.tick(this.t),l.css&&N.deleteRule(e,t.name),t.callback(),t=null,this.running=!!this.pending},abort:function(){l.tick&&l.tick(1),l.css&&N.deleteRule(e,this.program.name),this.program=this.pending=null,this.running=!1}}}t=t&&t.hasOwnProperty("default")?t.default:t;var N={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},add:function(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(t,e){this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule("@keyframes "+e+" "+t,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var t=window.performance.now(),e=this.transitions.length;e--;){var n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(e=this.stylesheet.cssRules.length;e--;)this.stylesheet.deleteRule(e);this.activeRules={}}},deleteRule:function(t,e){t.style.animation=t.style.animation.split(", ").filter(function(t){return-1===t.indexOf(e)}).join(", ")}};function C(t){this.destroy=e,this.fire("destroy"),this.set=this.get=e,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function j(t,e){t._handlers=Object.create(null),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function M(t){for(;t&&t.length;)t.shift()()}function L(){this.store._remove(this)}var T={destroy:C,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var i=0;i<n.length;i+=1){var o=n[i];o.__calling||(o.__calling=!0,o.call(this,e),o.__calling=!1)}},observe:function(t,e,n){var i=e.bind(this);return n&&!1===n.init||i(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",function(e){e.changed[t]&&i(e.current[t],e.previous&&e.previous[t])})},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||(this.root._lock=!0,M(this.root._beforecreate),M(this.root._oncreate),M(this.root._aftercreate),this.root._lock=!1)},teardown:C,_recompute:e,_set:function(t){var e=this._state,i={},o=!1;for(var a in t)this._differs(t[a],e[a])&&(i[a]=o=!0);o&&(this._state=n(n({},e),t),this._recompute(i,this._state),this._bind&&this._bind(i,this._state),this._fragment&&(this.fire("state",{changed:i,current:this._state,previous:e}),this._fragment.p(i,this._state),this.fire("update",{changed:i,current:this._state,previous:e})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function H(t){j(this,t),this._state=n({disabled:!1,faded:!1},t.data),this._fragment=function(t,e){var n,s,l,r,c,u,d;function p(){t.set({value:l.checked})}return{c:function(){n=h("div"),s=h("label"),l=h("input"),r=h("span"),c=f("  "),u=f(e.label),this.h()},h:function(){v(l,"change",p),m(l,"type","checkbox"),l.disabled=e.disabled,l.className="svelte-1cqoaak",r.className="css-ui svelte-1cqoaak",s.className=d="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-1cqoaak",n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(t,a){o(n,t,a),i(s,n),i(l,s),l.checked=e.value,i(r,s),i(c,s),i(u,s)},p:function(t,e){l.checked=e.value,t.disabled&&(l.disabled=e.disabled),t.label&&(u.data=e.label),(t.disabled||t.faded)&&d!==(d="checkbox "+(e.disabled?"disabled":"")+" "+(e.faded?"faded":"")+" svelte-1cqoaak")&&(s.className=d)},u:function(){a(n)},d:function(){_(l,"change",p)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(H.prototype,T);var S=Array.prototype,$=Object.prototype,I=S.slice,z=$.toString,A=$.hasOwnProperty,O=Array.isArray,q=Object.keys;function E(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function D(t,e){return null!=t&&A.call(t,e)}function F(t){if(!E(t))return[];if(q)return q(t);var e=[];for(var n in t)D(t,n)&&e.push(n);return tt&&nt(t,e),e}var Y=O||function(t){return"[object Array]"===z.call(t)};var R=("function"!=typeof/./&&"object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(t){return"function"==typeof t||!1}:null)||function(t){return"[object Function]"===z.call(t)};!function(){z.call(arguments)}();function K(t){return function(t){return"[object Number]"===z.call(t)}(t)&&isNaN(t)}var P=W;function B(t){return t}var G=it(F);function Q(t){return t=G({},t),function(e){return function(t,e){var n=F(e),i=n.length;if(null==t)return!i;for(var o=Object(t),a=0;a<i;a++){var s=n[a];if(e[s]!==o[s]||!(s in o))return!1}return!0}(e,t)}}function W(t,e){return J(t,e,1/0)}function J(t,e,n){return P!==W?P(t,e):null==t?B:R(t)?function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,a){return t.call(e,n,i,o,a)}}return function(){return t.apply(e,arguments)}}(t,e,n):E(t)?Q(t):U(t)}function U(t){return function(e){return null==e?void 0:e[t]}}var V=Math.pow(2,53)-1,X=U("length"),Z=function(t){var e=X(t);return"number"==typeof e&&e>=0&&e<=V};var tt=!{toString:null}.propertyIsEnumerable("toString"),et=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function nt(t,e){var n=et.length,i=t.constructor,o=R(i)&&i.prototype||$,a="constructor";for(D(t,a)&&!lt(e,a)&&e.push(a);n--;)(a=et[n])in t&&t[a]!==o[a]&&!lt(e,a)&&e.push(a)}function it(t,e){return function(n){var i=arguments,o=arguments.length;if(e&&(n=Object(n)),o<2||null==n)return n;for(var a=1;a<o;a++)for(var s=i[a],l=t(s),r=l.length,c=0;c<r;c++){var u=l[c];!E(n)||e&&void 0!==n[u]||(n[u]=s[u])}return n}}!function(t){for(var e={},n=F(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i]}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"});var ot,at=(ot=1,function(t,e,n){e=J(e,n);for(var i=X(t),o=ot>0?0:i-1;o>=0&&o<i;o+=ot)if(e(t[o],o,t))return o;return-1});var st=function(t,e,n){return function(i,o,a){var s=0,l=X(i);if("number"==typeof a)t>0?s=a>=0?a:Math.max(a+l,s):l=a>=0?Math.min(a+1,l):a+l+1;else if(n&&a&&l)return i[a=n(i,o)]===o?a:-1;if(o!=o)return(a=e(I.call(i,s,l),K))>=0?a+s:-1;for(a=t>0?s:l-1;a>=0&&a<l;a+=t)if(i[a]===o)return a;return-1}}(1,at,function(t,e,n,i){for(var o=(n=J(n,i,1))(e),a=0,s=X(t);a<s;){var l=Math.floor((a+s)/2);n(t[l])<o?a=l+1:s=l}return a});function lt(t,e,n,i){return Z(t)||(t=function(t){for(var e=F(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i}(t)),("number"!=typeof n||i)&&(n=0),st(t,e,n)>=0}function rt(t,e,n,i){var o;!0!==(o=e)&&!1!==o&&"[object Boolean]"!==z.call(o)&&(i=n,n=e,e=!1),null!=n&&(n=J(n,i));for(var a=[],s=[],l=0,r=X(t);l<r;l++){var c=t[l],u=n?n(c,l,t):c;e?(l&&s===u||a.push(c),s=u):n?lt(s,u)||(s.push(u),a.push(c)):lt(a,c)||a.push(c)}return a}function ct(t,n){var i,s,l,r=t._slotted.content;return{c:function(){r||(l=f("Content"))},m:function(t,e){r?(o(i||(i=p()),t,e),o(r,t,e),o(s||(s=p()),t,e)):o(l,t,e)},u:function(){r?(!function(t,e,n){for(;t.nextSibling&&t.nextSibling!==e;)n.appendChild(t.parentNode.removeChild(t.nextSibling))}(i,s,r),a(i),a(s)):a(l)},d:e}}function ut(t){j(this,t),this.refs={},this._state=n({visible:!1},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=function(t,e){var n,s,l,r,u=t._slotted.button;function d(e){t.windowClick(e)}function p(e){t.toggle()}window.addEventListener("click",d);var m=e.visible&&ct(t);return{c:function(){n=h("div"),s=h("div"),u||(l=f("Button")),r=f("\n    "),m&&m.c(),this.h()},h:function(){v(s,"click",p),s.className="base-drop-btn svelte-1e7v6nx",b(n,"position","relative"),b(n,"display","inline-block")},m:function(e,a){o(n,e,a),i(s,n),i(u||l,s),t.refs.button=s,i(r,n),m&&m.m(n,null)},p:function(e,i){i.visible?m||((m=ct(t)).c(),m.m(n,null)):m&&(m.u(),m.d(),m=null)},u:function(){a(n),u&&c(s,u),m&&m.u()},d:function(){window.removeEventListener("click",d),_(s,"click",p),t.refs.button===s&&(t.refs.button=null),m&&m.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function dt(e){return"#ffffff"==t(e).hex("rgb")?"#eeeeee":e}function ht(e){return t(e).alpha()}n(ut.prototype,T),n(ut.prototype,{toggle:function(){var t=this.get().visible;this.set({visible:!t})},windowClick:function(t){t.target&&t.target!=this.refs.button&&(t.target.classList.contains("hex")||this.set({visible:!1}))}});function ft(e){var n=this,i=e.changed,o=e.current,a=e.previous;if(i.color)try{var s=t(o.color).hex();this.refs.dropdown.get().visible&&s!=a.color&&this.fire("change",o.validColor),o.validColor!=o.color&&setTimeout(function(){n.set({color:o.validColor})},100)}catch(t){}}function pt(e,n){var i=-1,o=999999;return e[0]==e[1]?"-":(e.forEach(function(e,a){var s=t.distance(e,n,"lab");s<o&&(o=s,i=a)}),e[i])}function vt(t,e,n,i,o){var a=[t],s=e/n,l=0;for(i=void 0===i?n:i,o=o||1;n-- >0;)l+=s,a.unshift(t-l),i-- >0&&a.push(t+l);return a}function _t(t,e){var n,s,l,r=e.c;e.each_value,e.c_index;return{c:function(){n=h("div"),s=h("div"),this.h()},h:function(){s.className="transparency svelte-15xh906",b(s,"opacity",1-ht(r)),v(n,"click",yt),v(n,"dblclick",kt),n.className="color svelte-15xh906",n.dataset.color=l=r,b(n,"background",r),b(n,"border-color",dt(r)),n._svelte={component:t,each_value:e.each_value,c_index:e.c_index}},m:function(t,e){o(n,t,e),i(s,n)},p:function(t,e){r=e.c,e.each_value,e.c_index,t.palette&&b(s,"opacity",1-ht(r)),t.palette&&l!==(l=r)&&(n.dataset.color=l),t.palette&&(b(n,"background",r),b(n,"border-color",dt(r))),n._svelte.each_value=e.each_value,n._svelte.c_index=e.c_index},u:function(){a(n)},d:function(){_(n,"click",yt),_(n,"dblclick",kt)}}}function mt(t,e){var n,i,s,l=e.c;e.each_value_1,e.c_index_1;return{c:function(){n=h("div"),this.h()},h:function(){v(n,"click",wt),n.className=i="color "+(l==e.nearest_l?"selected":"")+" svelte-15xh906",n.dataset.color=s=l,b(n,"background",l),n._svelte={component:t,each_value_1:e.each_value_1,c_index_1:e.c_index_1}},m:function(t,e){o(n,t,e)},p:function(t,e){l=e.c,e.each_value_1,e.c_index_1,(t.gradient_l||t.nearest_l)&&i!==(i="color "+(l==e.nearest_l?"selected":"")+" svelte-15xh906")&&(n.className=i),t.gradient_l&&s!==(s=l)&&(n.dataset.color=s),t.gradient_l&&b(n,"background",l),n._svelte.each_value_1=e.each_value_1,n._svelte.c_index_1=e.c_index_1},u:function(){a(n)},d:function(){_(n,"click",wt)}}}function gt(t,e){var n,i,s,l=e.c;e.each_value_2,e.c_index_2;return{c:function(){n=h("div"),this.h()},h:function(){v(n,"click",Nt),n.className=i="color "+(l==e.nearest_c?"selected":"")+" svelte-15xh906",n.dataset.color=s=l,b(n,"background",l),n._svelte={component:t,each_value_2:e.each_value_2,c_index_2:e.c_index_2}},m:function(t,e){o(n,t,e)},p:function(t,e){l=e.c,e.each_value_2,e.c_index_2,(t.gradient_c||t.nearest_c)&&i!==(i="color "+(l==e.nearest_c?"selected":"")+" svelte-15xh906")&&(n.className=i),t.gradient_c&&s!==(s=l)&&(n.dataset.color=s),t.gradient_c&&b(n,"background",l),n._svelte.each_value_2=e.each_value_2,n._svelte.c_index_2=e.c_index_2},u:function(){a(n)},d:function(){_(n,"click",Nt)}}}function bt(t,e){var n,i,s,l=e.c;e.each_value_3,e.c_index_3;return{c:function(){n=h("div"),this.h()},h:function(){v(n,"click",Ct),n.className=i="color "+(l==e.nearest_h?"selected":"")+" svelte-15xh906",n.dataset.color=s=l,b(n,"background",l),n._svelte={component:t,each_value_3:e.each_value_3,c_index_3:e.c_index_3}},m:function(t,e){o(n,t,e)},p:function(t,e){l=e.c,e.each_value_3,e.c_index_3,(t.gradient_h||t.nearest_h)&&i!==(i="color "+(l==e.nearest_h?"selected":"")+" svelte-15xh906")&&(n.className=i),t.gradient_h&&s!==(s=l)&&(n.dataset.color=s),t.gradient_h&&b(n,"background",l),n._svelte.each_value_3=e.each_value_3,n._svelte.c_index_3=e.c_index_3},u:function(){a(n)},d:function(){_(n,"click",Ct)}}}function xt(t,e){for(var s,l,r,c,d,p,g,x,y,k,w,N,C,j,M,L,T=!1,H=e.palette,S=[],$=0;$<H.length;$+=1)S[$]=_t(t,n(n({},e),{each_value:H,c:H[$],c_index:$}));var I=e.gradient_l,z=[];for($=0;$<I.length;$+=1)z[$]=mt(t,n(n({},e),{each_value_1:I,c:I[$],c_index_1:$}));var A=e.gradient_c,O=[];for($=0;$<A.length;$+=1)O[$]=gt(t,n(n({},e),{each_value_2:A,c:A[$],c_index_2:$}));var q=e.gradient_h,E=[];for($=0;$<q.length;$+=1)E[$]=bt(t,n(n({},e),{each_value_3:q,c:q[$],c_index_3:$}));function D(){T=!0,t.set({color:w.value}),T=!1}function F(e){var n=t.get();t.setColor(n.color,!0)}function Y(t){t.stopPropagation()}return{c:function(){s=h("div"),l=h("div");for(var t=0;t<S.length;t+=1)S[t].c();r=f("\n\n                "),c=h("div");for(t=0;t<z.length;t+=1)z[t].c();d=f("\n                "),p=h("div");for(t=0;t<O.length;t+=1)O[t].c();g=f("\n                "),x=h("div");for(t=0;t<E.length;t+=1)E[t].c();y=f("\n\n                "),k=h("div"),w=h("input"),N=f("\n                    "),(C=h("button")).innerHTML='<i class="icon-ok"></i>',j=f("\n                    "),M=h("div"),L=h("div"),this.h()},h:function(){l.className="palette svelte-15xh906",c.className="color-axis lightness",p.className="color-axis saturation",x.className="color-axis hue",v(w,"input",D),m(w,"type","text"),b(w,"background",e.color),b(w,"border-color",dt),b(w,"color",e.textColor),w.className="hex svelte-15xh906",v(C,"click",F),C.className="btn btn-small ok",L.className="transparency svelte-15xh906",b(L,"opacity",1-ht(e.color)),M.className="color selected",b(M,"background",e.color),k.className="footer svelte-15xh906",v(s,"click",Y),s.className="color-selector svelte-15xh906"},m:function(t,n){o(s,t,n),i(l,s);for(var a=0;a<S.length;a+=1)S[a].m(l,null);i(r,s),i(c,s);for(a=0;a<z.length;a+=1)z[a].m(c,null);i(d,s),i(p,s);for(a=0;a<O.length;a+=1)O[a].m(p,null);i(g,s),i(x,s);for(a=0;a<E.length;a+=1)E[a].m(x,null);i(y,s),i(k,s),i(w,k),w.value=e.color,i(N,k),i(C,k),i(j,k),i(M,k),i(L,M)},p:function(e,i){var o=i.palette;if(e.palette){for(var a=0;a<o.length;a+=1){var s=n(n({},i),{each_value:o,c:o[a],c_index:a});S[a]?S[a].p(e,s):(S[a]=_t(t,s),S[a].c(),S[a].m(l,null))}for(;a<S.length;a+=1)S[a].u(),S[a].d();S.length=o.length}var r=i.gradient_l;if(e.gradient_l||e.nearest_l){for(a=0;a<r.length;a+=1){var u=n(n({},i),{each_value_1:r,c:r[a],c_index_1:a});z[a]?z[a].p(e,u):(z[a]=mt(t,u),z[a].c(),z[a].m(c,null))}for(;a<z.length;a+=1)z[a].u(),z[a].d();z.length=r.length}var d=i.gradient_c;if(e.gradient_c||e.nearest_c){for(a=0;a<d.length;a+=1){var h=n(n({},i),{each_value_2:d,c:d[a],c_index_2:a});O[a]?O[a].p(e,h):(O[a]=gt(t,h),O[a].c(),O[a].m(p,null))}for(;a<O.length;a+=1)O[a].u(),O[a].d();O.length=d.length}var f=i.gradient_h;if(e.gradient_h||e.nearest_h){for(a=0;a<f.length;a+=1){var v=n(n({},i),{each_value_3:f,c:f[a],c_index_3:a});E[a]?E[a].p(e,v):(E[a]=bt(t,v),E[a].c(),E[a].m(x,null))}for(;a<E.length;a+=1)E[a].u(),E[a].d();E.length=f.length}T||(w.value=i.color),e.color&&b(w,"background",i.color),e.textColor&&b(w,"color",i.textColor),e.color&&(b(L,"opacity",1-ht(i.color)),b(M,"background",i.color))},u:function(){a(s);for(var t=0;t<S.length;t+=1)S[t].u();for(t=0;t<z.length;t+=1)z[t].u();for(t=0;t<O.length;t+=1)O[t].u();for(t=0;t<E.length;t+=1)E[t].u()},d:function(){u(S),u(z),u(O),u(E),_(w,"input",D),_(C,"click",F),_(s,"click",Y)}}}function yt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.c_index];e.setColor(n,!1)}function kt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.c_index];e.setColor(n,!0)}function wt(t){var e=this._svelte.component,n=this._svelte.each_value_1[this._svelte.c_index_1];e.setColor(n,!1)}function Nt(t){var e=this._svelte.component,n=this._svelte.each_value_2[this._svelte.c_index_2];e.setColor(n,!1)}function Ct(t){var e=this._svelte.component,n=this._svelte.each_value_3[this._svelte.c_index_3];e.setColor(n,!1)}function jt(t){j(this,t),this.refs={},this._state=n(n(this.store._init(["themeData"]),{palette:[],prepend:[],append:[],color:"#63c0de"}),t.data),this.store._add(this,["themeData"]),this._recompute({$themeData:1,prepend:1,append:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1},this._state),this._handlers.state=[ft],this._handlers.destroy=[L],this._slotted=t.slots||{};var e,s,l,r,u,p,v,_,g,x,y,k,w,N,C,T,H=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this.slots={},this._fragment=(e=this,s=this._state,N=e._slotted.default,C=s.color&&xt(e,s),T=new ut({root:e.root,slots:{default:d(),button:d(),content:d()}}),e.refs.dropdown=T,{c:function(){l=h("div"),r=f("\n        "),u=h("span"),N||(p=h("div"),v=h("div"),_=h("div"),g=f("\n                    "),x=h("span")),y=f("\n        "),k=h("span"),C&&C.c(),w=f("\n    "),T._fragment.c(),this.h()},h:function(){N||(_.className="transparency svelte-15xh906",b(_,"opacity",1-ht(s.validColor)),b(v,"background",s.validColor+" none repeat scroll 0% 0%"),v.className="the-color svelte-15xh906",x.className="caret svelte-15xh906",p.className="base-color-picker color-picker svelte-15xh906"),m(u,"slot","button"),m(k,"slot","content"),l.className="color-picker-cont svelte-15xh906"},m:function(t,e){o(l,t,e),i(r,T._slotted.default),i(u,T._slotted.button),N?i(N,u):(i(p,u),i(v,p),i(_,v),i(g,p),i(x,p)),i(y,T._slotted.default),i(k,T._slotted.content),C&&C.m(k,null),i(w,T._slotted.default),T._mount(l,null)},p:function(t,n){N||t.validColor&&(b(_,"opacity",1-ht(n.validColor)),b(v,"background",n.validColor+" none repeat scroll 0% 0%")),n.color?C?C.p(t,n):((C=xt(e,n)).c(),C.m(k,null)):C&&(C.u(),C.d(),C=null)},u:function(){a(l),N&&c(u,N),C&&C.u()},d:function(){C&&C.d(),T.destroy(!1),e.refs.dropdown===T&&(e.refs.dropdown=null)}}),this.root._oncreate.push(function(){var t={$themeData:1,prepend:1,append:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1,validColor:1,nearest_l:1,nearest_c:1,nearest_h:1,textColor:1};ft.call(H,{changed:t,current:H._state}),H.fire("update",{changed:t,current:H._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}n(jt.prototype,T),n(jt.prototype,{setColor:function(t,e){this.set({color:t}),e&&this.refs.dropdown.set({visible:!1})}}),jt.prototype._recompute=function(e,n){var i,o,a,s;(e.$themeData||e.prepend||e.append)&&this._differs(n.palette,n.palette=(o=(i=n).$themeData,a=i.prepend,s=i.append,rt(a.concat(o.colors.palette).concat(s))))&&(e.palette=!0),e.color&&(this._differs(n.validColor,n.validColor=function(e){var n=e.color;try{return t(n).hex()}catch(t){return"#000000"}}(n))&&(e.validColor=!0),this._differs(n.gradient_l,n.gradient_l=function(e){var n=e.color,i=t(n).lch(),o=vt(70,55,7,6).map(function(e){return t.lch(e,i[1],i[2]).hex()});return t.scale(["#000000"].concat(o).concat("#ffffff")).mode("lch").gamma(.8).padding(.1).colors(14)}(n))&&(e.gradient_l=!0)),(e.color||e.palette)&&this._differs(n.gradient_c,n.gradient_c=function(e){var n=e.color,i=e.palette,o=t(n).set("lch.c",120);isNaN(o.get("lch.h"))&&(o=t.lch(o.get("lch.l"),50,t(i[0]||"#d00").get("lch.h")));var a=t(n).set("lch.c",3);return t.scale([a,o]).mode("lch").gamma(1.2).colors(14)}(n))&&(e.gradient_c=!0),e.color&&this._differs(n.gradient_h,n.gradient_h=function(e){var n=e.color,i=t(n).lch(),o=vt(i[2],75,7,6).map(function(e){return t.lch(i[0],i[1],e).hex()});return t.scale(o).mode("lch").colors(14)}(n))&&(e.gradient_h=!0),(e.color||e.gradient_l)&&this._differs(n.nearest_l,n.nearest_l=function(t){var e=t.color;return pt(t.gradient_l,e)}(n))&&(e.nearest_l=!0),(e.color||e.gradient_c)&&this._differs(n.nearest_c,n.nearest_c=function(t){var e=t.color;return pt(t.gradient_c,e)}(n))&&(e.nearest_c=!0),(e.color||e.gradient_h)&&this._differs(n.nearest_h,n.nearest_h=function(t){var e=t.color;return pt(t.gradient_h,e)}(n))&&(e.nearest_h=!0),e.color&&(this._differs(n.textColor,n.textColor=function(e){var n=e.color;return t(n).get("lab.l")>60?"black":"white"}(n))&&(e.textColor=!0),this._differs(n.borderColor,n.borderColor=function(e){var n=e.color;return t(n).darker().hex()}(n))&&(e.borderColor=!0))};var Mt={width:"100px",valign:"baseline"};function Lt(t,n){var i,s;return{c:function(){i=h("label"),this.h()},h:function(){b(i,"width",n.width||Mt.width),i.className=s="control-label "+(n.disabled?"disabled":"")+" svelte-1c2jnzb"},m:function(t,e){o(i,t,e),i.innerHTML=n.label},p:function(t,e){t.label&&(i.innerHTML=e.label),t.width&&b(i,"width",e.width||Mt.width),t.disabled&&s!==(s="control-label "+(e.disabled?"disabled":"")+" svelte-1c2jnzb")&&(i.className=s)},u:function(){i.innerHTML="",a(i)},d:e}}function Tt(t,n){var i;return{c:function(){i=h("p"),this.h()},h:function(){i.className="mini-help svelte-1c2jnzb"},m:function(t,e){o(i,t,e),i.innerHTML=n.help},p:function(t,e){t.help&&(i.innerHTML=e.help)},u:function(){i.innerHTML="",a(i)},d:e}}function Ht(t){var e,s,l,r,c,u,d,v,_,m,g;j(this,t),this._state=n({},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=(e=this,s=this._state,_=e._slotted.default,m=s.label&&Lt(0,s),g=s.help&&Tt(0,s),{c:function(){l=h("div"),m&&m.c(),r=f("\n    "),c=h("div"),d=f("\n        "),g&&g.c(),this.h()},h:function(){c.className="controls",b(c,"width","calc(100% - "+(s.width||Mt.width)+" - 40px)"),l.className=v="control-group vis-option-group vis-option-type-number label-"+(s.valign||Mt.valign)+" svelte-1c2jnzb"},m:function(t,e){o(l,t,e),m&&m.m(l,null),i(r,l),i(c,l),_&&(i(_,c),i(u||(u=p()),c)),i(d,c),g&&g.m(c,null)},p:function(t,e){e.label?m?m.p(t,e):((m=Lt(0,e)).c(),m.m(l,r)):m&&(m.u(),m.d(),m=null),e.help?g?g.p(t,e):((g=Tt(0,e)).c(),g.m(c,null)):g&&(g.u(),g.d(),g=null),t.width&&b(c,"width","calc(100% - "+(e.width||Mt.width)+" - 40px)"),t.valign&&v!==(v="control-group vis-option-group vis-option-type-number label-"+(e.valign||Mt.valign)+" svelte-1c2jnzb")&&(l.className=v)},u:function(){a(l),m&&m.u(),_&&function(t,e){for(var n=t.parentNode;n.firstChild!==t;)e.appendChild(n.firstChild)}(u,_),g&&g.u()},d:function(){m&&m.d(),g&&g.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(Ht.prototype,T);var St=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,$t=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,It="<a><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function zt(t,e){if(null===t)return null;if(void 0!==t){if((t=String(t)).indexOf("<")<0||t.indexOf(">")<0)return t;if(t=function(t,e){e=(((void 0!==e?e||"":It)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=t,i=t;for(;;)if(i=(n=i).replace($t,"").replace(St,function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""}),n===i)return i}(t,e),"undefined"==typeof document)return t;var n=document.createElement("div");n.innerHTML=t;for(var i=n.querySelectorAll("*"),o=0;o<i.length;o++)for(var a=0;a<i[o].attributes.length;a++){var s=i[o].attributes[a];s.specified&&"on"==s.name.substr(0,2)&&i[o].removeAttribute(s.name)}return n.innerHTML}}function At(t){var e=t.$vis,n=t.customizable,i=t.axis,o=t.custom,a=t.palette;return e&&n?(i?rt("date"===e.axes(!0)[i].type()?e.axes(!0)[i].raw():e.axes(!0)[i].values()):e.colorKeys?e.colorKeys():e.keys()).map(function(t){return{key:t=zt(t,""),defined:void 0!==o[t],color:void 0!==o[t]?Et(o[t],a):"#cccccc"}}):[]}var Ot={update:function(t){var e=this.get().palette;this.set({value:qt(t,e)})},updateCustom:function(t){var e=this.get(),n=e.selected,i=e.palette,o=e.custom;n.forEach(function(e){return o[e]=qt(t,i)}),this.set({custom:o})},toggle:function(t){t.preventDefault();var e=this.get().expanded;this.set({expanded:!e})},toggleSelect:function(t,e){e.preventDefault();var n=this.get().selected,i=n.indexOf(t);e.shiftKey?i>-1?n.splice(i,1):n.push(t):(n.length=1,n[0]=t),this.set({selected:n})},getColor:function(t){return Et(t,this.get().palette)},reset:function(){var t=this.get(),e=t.selected,n=t.custom;e.forEach(function(t){return delete n[t]}),this.set({custom:n})},resetAll:function(){var t=this.get().custom;Object.keys(t).forEach(function(e){return delete t[e]}),this.set({custom:t})},selectAll:function(t){t.preventDefault();var e=this.get(),n=e.selected;e.colorKeys.forEach(function(t){n.indexOf(t.key)<0&&n.push(t.key)}),this.set({selected:n})},selectNone:function(t){t.preventDefault();var e=this.get().selected;e.length=0,this.set({selected:e})},selectInvert:function(t){t.preventDefault();var e=this.get(),n=e.selected;e.colorKeys.forEach(function(t){var e=n.indexOf(t.key);e<0?n.push(t.key):n.splice(e,1)}),this.set({selected:n})}};function qt(t,e){var n=e.indexOf(t);return n>-1?n:t}function Et(t,e){return"number"==typeof t?e[t%e.length]:t}function Dt(t,e){var n={},i={color:e.hexColor,palette:e.palette};"open"in e&&(i.visible=e.open,n.visible=!0);var o=new jt({root:t.root,data:i,_bind:function(e,i){t.get();var o={};!n.visible&&e.visible&&(o.open=i.visible),t._set(o),n={}}});return t.root._beforecreate.push(function(){o._bind({visible:1},o.get())}),o.on("change",function(e){t.update(e)}),{c:function(){o._fragment.c()},m:function(t,e){o._mount(t,e)},p:function(t,e){var i={};t.hexColor&&(i.color=e.hexColor),t.palette&&(i.palette=e.palette),!n.visible&&t.open&&(i.visible=e.open,n.visible=!0),o._set(i),n={}},u:function(){o._unmount()},d:function(){o.destroy(!1)}}}function Ft(t,e){var n,s,l;function r(e){t.toggle(e)}return{c:function(){n=h("span"),(s=h("a")).textContent="customize colors...",this.h()},h:function(){v(s,"click",r),s.href="#customize",s.className=l="btn btn-small custom "+(e.expanded?"btn-primary":""),m(s,"role","button"),n.className="custom-color-selector-head"},m:function(t,e){o(n,t,e),i(s,n)},p:function(t,e){t.expanded&&l!==(l="btn btn-small custom "+(e.expanded?"btn-primary":""))&&(s.className=l)},u:function(){a(n)},d:function(){_(s,"click",r)}}}function Yt(t,e){var n,s,l,r,c,u,d,p,m=e.k,g=(e.each_value,e.k_index,m.defined?"":"×"),x=m.key;return{c:function(){n=h("li"),s=h("div"),l=f(g),r=f("\n                    "),c=h("label"),u=f(x),this.h()},h:function(){s.className="color",b(s,"background",m.color),v(n,"click",Bt),n.className=d=e.selected.indexOf(m.key)>-1?"selected":"",n.dataset.series=p=m.key,n._svelte={component:t,each_value:e.each_value,k_index:e.k_index}},m:function(t,e){o(n,t,e),i(s,n),i(l,s),i(r,n),i(c,n),i(u,c)},p:function(t,e){m=e.k,e.each_value,e.k_index,t.colorKeys&&g!==(g=m.defined?"":"×")&&(l.data=g),t.colorKeys&&b(s,"background",m.color),t.colorKeys&&x!==(x=m.key)&&(u.data=x),(t.selected||t.colorKeys)&&d!==(d=e.selected.indexOf(m.key)>-1?"selected":"")&&(n.className=d),t.colorKeys&&p!==(p=m.key)&&(n.dataset.series=p),n._svelte.each_value=e.each_value,n._svelte.k_index=e.k_index},u:function(){a(n)},d:function(){_(n,"click",Bt)}}}function Rt(t,e){var n,s,l,r={},c={color:e.customColor,palette:e.palette};"openCustom"in e&&(c.visible=e.openCustom,r.visible=!0);var u=new jt({root:t.root,data:c,_bind:function(e,n){t.get();var i={};!r.visible&&e.visible&&(i.openCustom=n.visible),t._set(i),r={}}});function d(e){t.reset()}return t.root._beforecreate.push(function(){u._bind({visible:1},u.get())}),u.on("change",function(e){t.updateCustom(e)}),{c:function(){n=h("div"),u._fragment.c(),s=f("\n                "),(l=h("button")).textContent="Reset",this.h()},h:function(){v(l,"click",d),l.className="btn",n.className="select"},m:function(t,e){o(n,t,e),u._mount(n,null),i(s,n),i(l,n)},p:function(t,e){var n={};t.customColor&&(n.color=e.customColor),t.palette&&(n.palette=e.palette),!r.visible&&t.openCustom&&(n.visible=e.openCustom,r.visible=!0),u._set(n),r={}},u:function(){a(n)},d:function(){u.destroy(!1),_(l,"click",d)}}}function Kt(t,n){var i;return{c:function(){(i=h("div")).textContent="Please select an element on the left to change colors for individual elements...",this.h()},h:function(){i.className="info"},m:function(t,e){o(i,t,e)},p:e,u:function(){a(i)},d:e}}function Pt(t,e){for(var s,l,r,c,d,p,m,g,x,y,k,w,N,C,j,M,L,T,H,S,$=e.colorKeys,I=[],z=0;z<$.length;z+=1)I[z]=Yt(t,n(n({},e),{each_value:$,k:$[z],k_index:z}));function A(e){t.selectAll(e)}function O(e){t.selectNone(e)}function q(e){t.selectInvert(e)}function E(t){return t.selected.length?Rt:Kt}var D=E(e),F=D(t,e);function Y(e){t.resetAll()}return{c:function(){s=h("div"),l=h("div"),r=h("div"),(c=h("h4")).textContent="Select element(s):",d=f("\n            "),p=h("ul");for(var t=0;t<I.length;t+=1)I[t].c();m=f("\n            "),g=h("div"),x=f("Select:  \n                "),(y=h("a")).textContent="all",k=f("  \n                "),(w=h("a")).textContent="none",N=f("  \n                "),(C=h("a")).textContent="invert",j=f("\n        "),M=h("div"),(L=h("h4")).textContent="Choose a color:",T=f("\n            "),F.c(),H=f("\n            "),(S=h("button")).textContent="Reset all colors",this.h()},h:function(){p.className="dataseries unstyled",v(y,"click",A),y.href="#/select-all",v(w,"click",O),w.href="#/select-none",v(C,"click",q),C.href="#/select-invert",b(g,"font-size","12px"),b(g,"text-align","center"),b(g,"margin-bottom","10px"),r.className="span2",b(r,"width","43%"),v(S,"click",Y),b(S,"margin-top","20px"),S.className="btn",M.className="span2",b(M,"width","42%"),l.className="row",s.className="custom-color-selector-body",b(s,"display","block")},m:function(t,e){o(s,t,e),i(l,s),i(r,l),i(c,r),i(d,r),i(p,r);for(var n=0;n<I.length;n+=1)I[n].m(p,null);i(m,r),i(g,r),i(x,g),i(y,g),i(k,g),i(w,g),i(N,g),i(C,g),i(j,l),i(M,l),i(L,M),i(T,M),F.m(M,null),i(H,M),i(S,M)},p:function(e,i){var o=i.colorKeys;if(e.colorKeys||e.selected){for(var a=0;a<o.length;a+=1){var s=n(n({},i),{each_value:o,k:o[a],k_index:a});I[a]?I[a].p(e,s):(I[a]=Yt(t,s),I[a].c(),I[a].m(p,null))}for(;a<I.length;a+=1)I[a].u(),I[a].d();I.length=o.length}D===(D=E(i))&&F?F.p(e,i):(F.u(),F.d(),(F=D(t,i)).c(),F.m(M,H))},u:function(){a(s);for(var t=0;t<I.length;t+=1)I[t].u();F.u()},d:function(){u(I),_(y,"click",A),_(w,"click",O),_(C,"click",q),F.d(),_(S,"click",Y)}}}function Bt(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.k_index];e.toggleSelect(n.key,t)}function Gt(t){j(this,t),this._state=n(n(this.store._init(["vis","themeData"]),{open:!1,openCustom:!1,customizable:!1,expanded:!1,selected:[],custom:{}}),t.data),this.store._add(this,["vis","themeData"]),this._recompute({$themeData:1,$vis:1,customizable:1,axis:1,custom:1,palette:1,value:1,selected:1},this._state),this._handlers.destroy=[L];var e,s,l,r,c,u,h,v,_,m,g,b,x,y,k=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(e=this,s=this._state,m=s.hexColor&&Dt(e,s),g=s.customizable&&Ft(e,s),b={label:s.label,width:s.width||"100px"},x=new Ht({root:e.root,slots:{default:d()},data:b}),y=s.customizable&&s.expanded&&Pt(e,s),{c:function(){l=f("\n    "),m&&m.c(),r=p(),c=f("\n\n    "),g&&g.c(),u=p(),h=f("\n"),x._fragment.c(),v=f("\n\n"),y&&y.c(),_=p()},m:function(t,e){i(l,x._slotted.default),m&&m.m(x._slotted.default,null),i(r,x._slotted.default),i(c,x._slotted.default),g&&g.m(x._slotted.default,null),i(u,x._slotted.default),i(h,x._slotted.default),x._mount(t,e),o(v,t,e),y&&y.m(t,e),o(_,t,e)},p:function(t,n){n.hexColor?m?m.p(t,n):((m=Dt(e,n)).c(),m.m(r.parentNode,r)):m&&(m.u(),m.d(),m=null),n.customizable?g?g.p(t,n):((g=Ft(e,n)).c(),g.m(u.parentNode,u)):g&&(g.u(),g.d(),g=null);var i={};t.label&&(i.label=n.label),t.width&&(i.width=n.width||"100px"),x._set(i),n.customizable&&n.expanded?y?y.p(t,n):((y=Pt(e,n)).c(),y.m(_.parentNode,_)):y&&(y.u(),y.d(),y=null)},u:function(){m&&m.u(),g&&g.u(),x._unmount(),a(v),y&&y.u(),a(_)},d:function(){m&&m.d(),g&&g.d(),x.destroy(!1),y&&y.d()}}),this.root._oncreate.push(function(){(function(){var t=this;this.observe("custom",function(e){e&&0===e.length&&(e={}),t.set({custom:e})})}).call(k),k.fire("update",{changed:{$vis:1,customizable:1,axis:1,custom:1,palette:1,$themeData:1,value:1,selected:1,label:1,width:1,hexColor:1,open:1,expanded:1,colorKeys:1,customColor:1,openCustom:1},current:k._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}function Qt(t,n){var l,r,c,u,d;return{c:function(){l=h("div"),r=f("For help on custom formats, check the "),c=h("noscript"),u=h("noscript"),d=f("."),this.h()},h:function(){l.className="small svelte-thnbg1"},m:function(t,e){o(l,t,e),i(r,l),i(c,l),c.insertAdjacentHTML("afterend",n.customFormatHelp),i(u,l),i(d,l)},p:function(t,e){t.customFormatHelp&&(s(c,u),c.insertAdjacentHTML("afterend",e.customFormatHelp))},u:function(){s(c,u),a(l)},d:e}}function Wt(t,n){var s,l,r,c=n.opt,u=(n.each_value,n.opt_index,c.l);return{c:function(){s=h("option"),l=f(u),this.h()},h:function(){s.__value=r=c.f,s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){c=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=c.l)&&(l.data=u),t.options&&r!==(r=c.f)&&(s.__value=r),s.value=s.__value},u:function(){a(s)},d:e}}function Jt(t,e){var n,i=!1;function s(){i=!0,t.set({custom:n.value}),i=!1}return{c:function(){n=h("input"),this.h()},h:function(){v(n,"input",s),m(n,"type","text"),n.disabled=e.disabled,n.className="svelte-thnbg1"},m:function(t,i){o(n,t,i),n.value=e.custom},p:function(t,e){i||(n.value=e.custom),t.disabled&&(n.disabled=e.disabled)},u:function(){a(n)},d:function(){_(n,"input",s)}}}function Ut(t){j(this,t),this._state=n(n(this.store._init(["vis","dataset"]),{axis:!1,value:"",custom:"",selected:null,disabled:!1}),t.data),this.store._add(this,["vis","dataset"]),this._recompute({$vis:1,$dataset:1,axis:1,axisCol:1,disabled:1},this._state),this._handlers.destroy=[L];var e=this;t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){for(var s,l,r,c,d,p,m,g,b,k,w=!1,N="custom"==e.selected&&Qt(0,e),C=e.options,j=[],M=0;M<C.length;M+=1)j[M]=Wt(0,n(n({},e),{each_value:C,opt:C[M],opt_index:M}));function L(){w=!0,t.set({selected:y(p)}),w=!1}var T="custom"==e.selected&&Jt(t,e);return{c:function(){s=h("div"),l=h("label"),r=f("\n\n    "),c=h("div"),N&&N.c(),d=f("\n\n        "),p=h("select");for(var t=0;t<j.length;t+=1)j[t].c();m=h("option"),g=f("(custom)"),b=f("\n        "),T&&T.c(),this.h()},h:function(){l.className="control-label svelte-thnbg1",m.__value="custom",m.value=m.__value,v(p,"change",L),"selected"in e||t.root._beforecreate.push(L),p.disabled=e.disabled,p.className="svelte-thnbg1",c.className="controls form-inline",s.className=k="control-group vis-option-custom-format "+(e.disabled?"disabled":"")+" svelte-thnbg1"},m:function(t,n){o(s,t,n),i(l,s),l.innerHTML=e.label,i(r,s),i(c,s),N&&N.m(c,null),i(d,c),i(p,c);for(var a=0;a<j.length;a+=1)j[a].m(p,null);i(m,p),i(g,m),x(p,e.selected),i(b,c),T&&T.m(c,null)},p:function(e,i){e.label&&(l.innerHTML=i.label),"custom"==i.selected?N?N.p(e,i):((N=Qt(0,i)).c(),N.m(c,d)):N&&(N.u(),N.d(),N=null);var o=i.options;if(e.options){for(var a=0;a<o.length;a+=1){var r=n(n({},i),{each_value:o,opt:o[a],opt_index:a});j[a]?j[a].p(e,r):(j[a]=Wt(0,r),j[a].c(),j[a].m(p,m))}for(;a<j.length;a+=1)j[a].u(),j[a].d();j.length=o.length}w||x(p,i.selected),e.disabled&&(p.disabled=i.disabled),"custom"==i.selected?T?T.p(e,i):((T=Jt(t,i)).c(),T.m(c,null)):T&&(T.u(),T.d(),T=null),e.disabled&&k!==(k="control-group vis-option-custom-format "+(i.disabled?"disabled":"")+" svelte-thnbg1")&&(s.className=k)},u:function(){l.innerHTML="",a(s),N&&N.u();for(var t=0;t<j.length;t+=1)j[t].u();T&&T.u()},d:function(){N&&N.d(),u(j),_(p,"change",L),T&&T.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this;this.observe("selected",function(e,n){if(e!=n){var i=t.get().custom;t.set({value:"custom"!=e?e:i+" "})}}),this.observe("value",function(e,n){if(e!=n){for(var i=0,o=t.get().options;i<o.length;i+=1)if(o[i].f==e)return t.set({selected:e});t.set({selected:"custom",custom:e})}}),this.observe("custom",function(e,n){e!=n&&"custom"==t.get().selected&&t.set({value:e})})}).call(e),e.fire("update",{changed:{axisCol:1,disabled:1,$vis:1,$dataset:1,axis:1,label:1,selected:1,customFormatHelp:1,options:1,custom:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this._beforecreate),M(this._oncreate))}n(Gt.prototype,T),n(Gt.prototype,Ot),Gt.prototype._recompute=function(e,n){e.$themeData&&this._differs(n.palette,n.palette=n.$themeData.colors.palette)&&(e.palette=!0),(e.$vis||e.customizable||e.axis||e.custom||e.palette)&&this._differs(n.colorKeys,n.colorKeys=At(n))&&(e.colorKeys=!0),(e.value||e.palette)&&this._differs(n.hexColor,n.hexColor=function(t){return Et(t.value,t.palette)}(n))&&(e.hexColor=!0),(e.selected||e.palette||e.custom)&&this._differs(n.customColor,n.customColor=function(e){var n=e.selected,i=e.palette,o=e.custom;if(void 0===o[n[0]])return"#ccc";var a=n.filter(function(t){return void 0!==o[t]}).map(function(t){return Et(o[t],i)});return a.length?t.average(a,"lab"):"#ccc"}(n))&&(e.customColor=!0)},n(Ut.prototype,T),Ut.prototype._recompute=function(t,e){(t.$vis||t.$dataset||t.axis)&&this._differs(e.axisCol,e.axisCol=function(t){var e=t.$vis,n=t.$dataset,i=t.axis;if(!e||!i)return null;var o=e.axes()[i];return n.column("object"==typeof o?o[0]:o)}(e))&&(t.axisCol=!0),(t.axisCol||t.disabled)&&this._differs(e.customFormatHelp,e.customFormatHelp=function(t){var e=t.axisCol,n=t.disabled;if(e)return"date"==e.type()?(n?"":'<a href="http://momentjs.com/docs/#/displaying/format/" target="_blank">')+"moment.js documentation"+(n?"":"</a>"):"number"==e.type()?(n?"":'<a href="http://numeraljs.com/#format" target="_blank">')+"numeral.js documentation"+(n?"":"</a>"):""}(e))&&(t.customFormatHelp=!0),t.axisCol&&this._differs(e.options,e.options=function(t){var e=t.axisCol;return e?"number"==e.type()?[{l:"1,000[.00]",f:"0,0.[00]"},{l:"0",f:"0"},{l:"0.0",f:"0.0"},{l:"0.00",f:"0.00"},{l:"0.000",f:"0.000"},{l:"0.[0]",f:"0.[0]"},{l:"0.[00]",f:"0.[00]"},{l:"0%",f:"0%"},{l:"0.0%",f:"0.0%"},{l:"0.00%",f:"0.00%"},{l:"0.[0]%",f:"0.[0]%"},{l:"0.[00]%",f:"0.[00]%"},{l:"10,000",f:"0,0"},{l:"1st",f:"0o"},{l:"123k",f:"0a"},{l:"123.4k",f:"0.[0]a"},{l:"123.45k",f:"0.[00]a"}]:"date"==e.type()?[{l:"2015, 2016",f:"YYYY"},{l:"2015 Q1, 2015 Q2",f:"YYYY [Q]Q"},{l:"2015, Q2, Q3",f:"YYYY|\\QQ"},{l:"2015, Feb, Mar",f:"YYYY|MMM"},{l:"’15, ’16",f:"’YY"},{l:"April, May",f:"MMMM"},{l:"Apr, May",f:"MMM"},{l:"Apr ’15, May ’15",f:"MMM ’YY"},{l:"April, 2, 3",f:"MMM|DD"}]:void 0:[]}(e))&&(t.options=!0)};var Vt={update:function(){var t=this.get(),e=t.value2,n=t.multiply_,i=t.step_,o=+e.toFixed(-Math.round(Math.log(i*n)/Math.LN10))/n;this.set({value:o})}};function Xt(t){var e=t.changed,n=t.current,i=t.previous;if(e.value||!i){var o=+(n.value*n.multiply_).toFixed(-Math.round(Math.log(n.step_*n.multiply_)/Math.LN10));this.set({value2:o})}}function Zt(t,e){var n,i,s,l,r;function c(){t.set({value2:g(n.value)})}function u(){t.set({value2:g(n.value)})}function d(e){t.update()}return{c:function(){n=h("input"),r=f("  "),this.h()},h:function(){v(n,"input",c),v(n,"change",u),v(n,"input",d),m(n,"type","range"),n.min=i=e.min_*e.multiply_,n.max=s=e.max_*e.multiply_,n.step=l=e.step_*e.multiply_,n.className="svelte-1jhdp2e"},m:function(t,i){o(n,t,i),n.value=e.value2,o(r,t,i)},p:function(t,e){n.value=e.value2,n.value=e.value2,(t.min_||t.multiply_)&&i!==(i=e.min_*e.multiply_)&&(n.min=i),(t.max_||t.multiply_)&&s!==(s=e.max_*e.multiply_)&&(n.max=s),(t.step_||t.multiply_)&&l!==(l=e.step_*e.multiply_)&&(n.step=l)},u:function(){a(n),a(r)},d:function(){_(n,"input",c),_(n,"change",u),_(n,"input",d)}}}function te(t,n){var s,l;return{c:function(){s=h("span"),l=f(n.unit_),this.h()},h:function(){s.className="unit svelte-1jhdp2e"},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){t.unit_&&(l.data=e.unit_)},u:function(){a(s)},d:e}}function ee(t){j(this,t),this._state=n({},t.data),this._recompute({step:1,min:1,max:1,unit:1,slider:1,multiply:1},this._state),this._handlers.state=[Xt];var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){var n,i,s,l,r,c,u,d=!1,b=e.slider_&&Zt(t,e);function x(){d=!0,t.set({value2:g(n.value)}),d=!1}function y(e){t.update()}var k=e.unit_&&te(0,e);return{c:function(){b&&b.c(),n=h("input"),c=f(" "),k&&k.c(),u=p(),this.h()},h:function(){v(n,"input",x),v(n,"input",y),m(n,"type","number"),n.min=i=e.min_*e.multiply_,n.max=s=e.max_*e.multiply_,n.step=l=e.step_*e.multiply_,n.style.cssText=r=e.slider_?"margin-left:10px":"",n.className="svelte-1jhdp2e"},m:function(t,i){b&&b.m(t,i),o(n,t,i),n.value=e.value2,o(c,t,i),k&&k.m(t,i),o(u,t,i)},p:function(e,o){o.slider_?b?b.p(e,o):((b=Zt(t,o)).c(),b.m(n.parentNode,n)):b&&(b.u(),b.d(),b=null),d||(n.value=o.value2),(e.min_||e.multiply_)&&i!==(i=o.min_*o.multiply_)&&(n.min=i),(e.max_||e.multiply_)&&s!==(s=o.max_*o.multiply_)&&(n.max=s),(e.step_||e.multiply_)&&l!==(l=o.step_*o.multiply_)&&(n.step=l),e.slider_&&r!==(r=o.slider_?"margin-left:10px":"")&&(n.style.cssText=r),o.unit_?k?k.p(e,o):((k=te(0,o)).c(),k.m(u.parentNode,u)):k&&(k.u(),k.d(),k=null)},u:function(){b&&b.u(),a(n),a(c),k&&k.u(),a(u)},d:function(){b&&b.d(),_(n,"input",x),_(n,"input",y),k&&k.d()}}}(this,this._state),this.root._oncreate.push(function(){var t={step:1,min:1,max:1,unit:1,slider:1,multiply:1,slider_:1,min_:1,multiply_:1,max_:1,step_:1,value2:1,unit_:1};Xt.call(e,{changed:t,current:e._state}),e.fire("update",{changed:t,current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this._oncreate))}function ne(t){j(this,t),this.refs={},this._state=n({},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,o,a={},s={},l={unit:e.unit,multiply:e.multiply,step:e.step,min:e.min,max:e.max,slider:e.slider};"value"in e&&(l.value=e.value,a.value=!0);var r=new ee({root:t.root,data:l,_bind:function(e,n){t.get();var i={};!a.value&&e.value&&(i.value=n.value),t._set(i),a={}}});t.root._beforecreate.push(function(){r._bind({value:1},r.get())}),t.refs.baseNumber=r;var c={label:e.label};"width"in e&&(c.width=e.width,s.width=!0),"valign"in e&&(c.valign=e.valign,s.valign=!0);var u=new Ht({root:t.root,slots:{default:d()},data:c,_bind:function(e,n){t.get();var i={};!s.width&&e.width&&(i.width=n.width),!s.valign&&e.valign&&(i.valign=n.valign),t._set(i),s={}}});return t.root._beforecreate.push(function(){u._bind({width:1,valign:1},u.get())}),{c:function(){n=f("\n    "),r._fragment.c(),o=f("\n"),u._fragment.c()},m:function(t,e){i(n,u._slotted.default),r._mount(u._slotted.default,null),i(o,u._slotted.default),u._mount(t,e)},p:function(t,e){var n={};t.unit&&(n.unit=e.unit),t.multiply&&(n.multiply=e.multiply),t.step&&(n.step=e.step),t.min&&(n.min=e.min),t.max&&(n.max=e.max),t.slider&&(n.slider=e.slider),!a.value&&t.value&&(n.value=e.value,a.value=!0),r._set(n),a={};var i={};t.label&&(i.label=e.label),!s.width&&t.width&&(i.width=e.width,s.width=!0),!s.valign&&t.valign&&(i.valign=e.valign,s.valign=!0),u._set(i),s={}},u:function(){u._unmount()},d:function(){r.destroy(!1),t.refs.baseNumber===r&&(t.refs.baseNumber=null),u.destroy(!1)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}function ie(t,e){var n,s,l,r,c,u,d,p,g,b,x=e.opt,y=(e.each_value,e.opt_index,x.label);function k(){t.set({value:s.__value})}var w=x.help&&oe(t,e);return{c:function(){n=h("label"),s=h("input"),r=h("span"),c=f(" "),u=h("span"),d=f(y),p=f("\n            "),w&&w.c(),this.h()},h:function(){t._bindingGroups[0].push(s),v(s,"change",k),m(s,"type","radio"),s.__value=l=x.value,s.value=s.__value,s.disabled=e.disabled,s.className="svelte-ptg4e0",r.className="css-ui svelte-ptg4e0",u.className="svelte-ptg4e0",n.title=g=x.tooltip||"",n.className=b=(e.disabled?"disabled":"")+" "+(x.help?"has-help":"")+" svelte-ptg4e0"},m:function(t,a){o(n,t,a),i(s,n),s.checked=s.__value===e.value,i(r,n),i(c,n),i(u,n),i(d,u),i(p,n),w&&w.m(n,null)},p:function(e,i){x=i.opt,i.each_value,i.opt_index,s.checked=s.__value===i.value,e.options&&l!==(l=x.value)&&(s.__value=l),s.value=s.__value,e.disabled&&(s.disabled=i.disabled),e.options&&y!==(y=x.label)&&(d.data=y),x.help?w?w.p(e,i):((w=oe(t,i)).c(),w.m(n,null)):w&&(w.u(),w.d(),w=null),e.options&&g!==(g=x.tooltip||"")&&(n.title=g),(e.disabled||e.options)&&b!==(b=(i.disabled?"disabled":"")+" "+(x.help?"has-help":"")+" svelte-ptg4e0")&&(n.className=b)},u:function(){a(n),w&&w.u()},d:function(){t._bindingGroups[0].splice(t._bindingGroups[0].indexOf(s),1),_(s,"change",k),w&&w.d()}}}function oe(t,n){var i,s=n.opt,l=(n.each_value,n.opt_index,s.help);return{c:function(){i=h("div"),this.h()},h:function(){i.className="help svelte-ptg4e0"},m:function(t,e){o(i,t,e),i.innerHTML=l},p:function(t,e){s=e.opt,e.each_value,e.opt_index,t.options&&l!==(l=s.help)&&(i.innerHTML=l)},u:function(){i.innerHTML="",a(i)},d:e}}function ae(t){j(this,t),this._state=n({disabled:!1,width:"auto",valign:"top",inline:!0},t.data),this._bindingGroups=[[]],t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){for(var o,a,s,l,r=e.options,c=[],p=0;p<r.length;p+=1)c[p]=ie(t,n(n({},e),{each_value:r,opt:r[p],opt_index:p}));var v={width:e.width,valign:e.valign,label:e.label},_=new Ht({root:t.root,slots:{default:d()},data:v});return{c:function(){o=f("\n    "),a=h("div");for(var t=0;t<c.length;t+=1)c[t].c();l=f("\n"),_._fragment.c(),this.h()},h:function(){a.className=s=(e.inline?"inline":"")+" svelte-ptg4e0"},m:function(t,e){i(o,_._slotted.default),i(a,_._slotted.default);for(var n=0;n<c.length;n+=1)c[n].m(a,null);i(l,_._slotted.default),_._mount(t,e)},p:function(e,i){var o=i.options;if(e.options||e.disabled||e.value){for(var l=0;l<o.length;l+=1){var r=n(n({},i),{each_value:o,opt:o[l],opt_index:l});c[l]?c[l].p(e,r):(c[l]=ie(t,r),c[l].c(),c[l].m(a,null))}for(;l<c.length;l+=1)c[l].u(),c[l].d();c.length=o.length}e.inline&&s!==(s=(i.inline?"inline":"")+" svelte-ptg4e0")&&(a.className=s);var u={};e.width&&(u.width=i.width),e.valign&&(u.valign=i.valign),e.label&&(u.label=i.label),_._set(u)},u:function(){for(var t=0;t<c.length;t+=1)c[t].u();_._unmount()},d:function(){u(c),_.destroy(!1)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}function se(t,n){var s,l,r,c=n.opt,u=(n.each_value,n.opt_index,c.label);return{c:function(){s=h("option"),l=f(u),this.h()},h:function(){s.__value=r=c.value,s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){c=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=c.label)&&(l.data=u),t.options&&r!==(r=c.value)&&(s.__value=r),s.value=s.__value},u:function(){a(s)},d:e}}function le(t,e){for(var i,s=e.options,l=[],r=0;r<s.length;r+=1)l[r]=se(0,n(n({},e),{each_value:s,opt:s[r],opt_index:r}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();i=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(i,t,e)},p:function(t,e){var o=e.options;if(t.options){for(var a=0;a<o.length;a+=1){var s=n(n({},e),{each_value:o,opt:o[a],opt_index:a});l[a]?l[a].p(t,s):(l[a]=se(0,s),l[a].c(),l[a].m(i.parentNode,i))}for(;a<l.length;a+=1)l[a].u(),l[a].d();l.length=o.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(i)},d:function(){u(l)}}}function re(t,e){for(var i,s,l=e.optgroup,r=(e.each_value_1,e.optgroup_index,l.options),c=[],d=0;d<r.length;d+=1)c[d]=ce(t,n(n({},e),{each_value_2:r,opt:r[d],opt_index_1:d}));return{c:function(){i=h("optgroup");for(var t=0;t<c.length;t+=1)c[t].c();this.h()},h:function(){m(i,"label",s=l.label)},m:function(t,e){o(i,t,e);for(var n=0;n<c.length;n+=1)c[n].m(i,null)},p:function(e,o){l=o.optgroup,o.each_value_1,o.optgroup_index;var a=l.options;if(e.optgroups){for(var r=0;r<a.length;r+=1){var u=n(n({},o),{each_value_2:a,opt:a[r],opt_index_1:r});c[r]?c[r].p(e,u):(c[r]=ce(t,u),c[r].c(),c[r].m(i,null))}for(;r<c.length;r+=1)c[r].u(),c[r].d();c.length=a.length}e.optgroups&&s!==(s=l.label)&&m(i,"label",s)},u:function(){a(i);for(var t=0;t<c.length;t+=1)c[t].u()},d:function(){u(c)}}}function ce(t,n){n.optgroup,n.each_value_1,n.optgroup_index;var s,l,r,c=n.opt,u=(n.each_value_2,n.opt_index_1,c.label);return{c:function(){s=h("option"),l=f(u),this.h()},h:function(){s.__value=r=c.value,s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){e.optgroup,e.each_value_1,e.optgroup_index,c=e.opt,e.each_value_2,e.opt_index_1,t.optgroups&&u!==(u=c.label)&&(l.data=u),t.optgroups&&r!==(r=c.value)&&(s.__value=r),s.value=s.__value},u:function(){a(s)},d:e}}function ue(t,e){for(var i,s=e.optgroups,l=[],r=0;r<s.length;r+=1)l[r]=re(t,n(n({},e),{each_value_1:s,optgroup:s[r],optgroup_index:r}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();i=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(i,t,e)},p:function(e,o){var a=o.optgroups;if(e.optgroups){for(var s=0;s<a.length;s+=1){var r=n(n({},o),{each_value_1:a,optgroup:a[s],optgroup_index:s});l[s]?l[s].p(e,r):(l[s]=re(t,r),l[s].c(),l[s].m(i.parentNode,i))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(i)},d:function(){u(l)}}}function de(t){j(this,t),this._state=n({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]},t.data),t.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(t,e){var n,s,l,r,c,u,d,m,g=!1,k=e.options.length&&le(0,e),w=e.optgroups.length&&ue(t,e);function N(){g=!0,t.set({value:y(u)}),g=!1}return{c:function(){n=h("div"),s=h("label"),r=f("\n\n    "),c=h("div"),u=h("select"),k&&k.c(),d=p(),w&&w.c(),this.h()},h:function(){b(s,"width",e.labelWidth),s.className=l="control-label "+(e.disabled?"disabled":"")+" svelte-jp3jqj",v(u,"change",N),"value"in e||t.root._beforecreate.push(N),u.disabled=e.disabled,b(u,"width",e.width),c.className=m="controls form-inline "+(e.disabled?"disabled":""),n.className="control-group vis-option-type-select"},m:function(t,a){o(n,t,a),i(s,n),s.innerHTML=e.label,i(r,n),i(c,n),i(u,c),k&&k.m(u,null),i(d,u),w&&w.m(u,null),x(u,e.value)},p:function(e,n){e.label&&(s.innerHTML=n.label),e.labelWidth&&b(s,"width",n.labelWidth),e.disabled&&l!==(l="control-label "+(n.disabled?"disabled":"")+" svelte-jp3jqj")&&(s.className=l),n.options.length?k?k.p(e,n):((k=le(0,n)).c(),k.m(u,d)):k&&(k.u(),k.d(),k=null),n.optgroups.length?w?w.p(e,n):((w=ue(t,n)).c(),w.m(u,null)):w&&(w.u(),w.d(),w=null),g||x(u,n.value),e.disabled&&(u.disabled=n.disabled),e.width&&b(u,"width",n.width),e.disabled&&m!==(m="controls form-inline "+(n.disabled?"disabled":""))&&(c.className=m)},u:function(){s.innerHTML="",a(n),k&&k.u(),w&&w.u()},d:function(){k&&k.d(),w&&w.d(),_(u,"change",N)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this._beforecreate))}n(ee.prototype,T),n(ee.prototype,Vt),ee.prototype._recompute=function(t,e){t.step&&this._differs(e.step_,e.step_=e.step||1)&&(t.step_=!0),t.min&&this._differs(e.min_,e.min_=function(t){var e=t.min;return void 0!==e?e:0}(e))&&(t.min_=!0),t.max&&this._differs(e.max_,e.max_=function(t){var e=t.max;return void 0!==e?e:100}(e))&&(t.max_=!0),t.unit&&this._differs(e.unit_,e.unit_=function(t){var e=t.unit;return void 0!==e?e:""}(e))&&(t.unit_=!0),t.slider&&this._differs(e.slider_,e.slider_=function(t){var e=t.slider;return void 0===e||e}(e))&&(t.slider_=!0),t.multiply&&this._differs(e.multiply_,e.multiply_=function(t){return t.multiply||1}(e))&&(t.multiply_=!0)},n(ne.prototype,T),n(ae.prototype,T),n(de.prototype,T);function he(t,e){var n,s,l,r,c=e.opt,u=(e.each_value,e.opt_index,c.label);return{c:function(){n=h("li"),s=h("a"),this.h()},h:function(){v(s,"click",pe),s.href=l="#/"+c.value,s._svelte={component:t,each_value:e.each_value,opt_index:e.opt_index},n.className=r=(e.value==c.value?"selected":"")+" svelte-154oatd"},m:function(t,e){o(n,t,e),i(s,n),s.innerHTML=u},p:function(t,e){c=e.opt,e.each_value,e.opt_index,t.options&&u!==(u=c.label)&&(s.innerHTML=u),t.options&&l!==(l="#/"+c.value)&&(s.href=l),s._svelte.each_value=e.each_value,s._svelte.opt_index=e.opt_index,(t.value||t.options)&&r!==(r=(e.value==c.value?"selected":"")+" svelte-154oatd")&&(n.className=r)},u:function(){s.innerHTML="",a(n)},d:function(){_(s,"click",pe)}}}function fe(t,e){for(var i,s=e.options,l=[],r=0;r<s.length;r+=1)l[r]=he(t,n(n({},e),{each_value:s,opt:s[r],opt_index:r}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();i=p()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(i,t,e)},p:function(e,o){var a=o.options;if(e.value||e.options){for(var s=0;s<a.length;s+=1){var r=n(n({},o),{each_value:a,opt:a[s],opt_index:s});l[s]?l[s].p(e,r):(l[s]=he(t,r),l[s].c(),l[s].m(i.parentNode,i))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(i)},d:function(){u(l)}}}function pe(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.opt_index];e.select(t,n)}function ve(t){var e,s,r,c,u,p,v,_,g,x,y,k,w,N,C,L,T,H,S,$;j(this,t),this._state=n({forcePlaceholder:!1,disabled:!1,width:"auto",options:[],optgroups:[],placeholder:"(select an item)"},t.data),this._recompute({value:1,options:1,placeholder:1,forcePlaceholder:1},this._state),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(e=this,s=this._state,S=s.options.length&&fe(e,s),$=new ut({root:e.root,slots:{default:d(),button:d(),content:d()}}),{c:function(){r=h("div"),c=h("label"),u=f("\n\n    "),p=h("div"),v=f("\n            "),_=h("span"),g=h("div"),x=h("button"),y=h("noscript"),k=f("\n                        "),w=h("span"),N=f("\n            "),C=h("span"),L=h("ul"),S&&S.c(),T=f("\n        "),$._fragment.c(),this.h()},h:function(){c.className="control-label",w.className="caret svelte-154oatd",x.className="btn dropdown-toggle svelte-154oatd",g.className="btn-group",m(_,"slot","button"),L.className="dropdown-menu svelte-154oatd",b(L,"display","block"),m(C,"slot","content"),p.className=H="controls form-inline "+(s.disabled?"disabled":"")+" svelte-154oatd",r.className="control-group vis-option-type-select"},m:function(t,e){o(r,t,e),i(c,r),c.innerHTML=s.label,i(u,r),i(p,r),i(v,$._slotted.default),i(_,$._slotted.button),i(g,_),i(x,g),i(y,x),y.insertAdjacentHTML("beforebegin",s.currentLabel),i(k,x),i(w,x),i(N,$._slotted.default),i(C,$._slotted.content),i(L,C),S&&S.m(L,null),i(T,$._slotted.default),$._mount(p,null)},p:function(t,n){t.label&&(c.innerHTML=n.label),t.currentLabel&&(l(y),y.insertAdjacentHTML("beforebegin",n.currentLabel)),n.options.length?S?S.p(t,n):((S=fe(e,n)).c(),S.m(L,null)):S&&(S.u(),S.d(),S=null),t.disabled&&H!==(H="controls form-inline "+(n.disabled?"disabled":"")+" svelte-154oatd")&&(p.className=H)},u:function(){c.innerHTML="",l(y),a(r),S&&S.u()},d:function(){S&&S.d(),$.destroy(!1)}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}function _e(t){var e=t-1;return e*e*e+1}function me(t,e){var n=e.delay;void 0===n&&(n=0);var i=e.duration;void 0===i&&(i=400);var o=e.easing;void 0===o&&(o=_e);var a=getComputedStyle(t),s=+a.opacity,l=parseFloat(a.height),r=parseFloat(a.paddingTop),c=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),d=parseFloat(a.marginBottom),h=parseFloat(a.borderTopWidth),f=parseFloat(a.borderBottomWidth);return{delay:n,duration:i,easing:o,css:function(t){return"overflow: hidden;opacity: "+Math.min(20*t,1)*s+";height: "+t*l+"px;padding-top: "+t*r+"px;padding-bottom: "+t*c+"px;margin-top: "+t*u+"px;margin-bottom: "+t*d+"px;border-top-width: "+t*h+"px;border-bottom-width: "+t*f+"px;"}}}n(ve.prototype,T),n(ve.prototype,{select:function(t,e){t.preventDefault(),this.set({value:e.value}),this.fire("change",e.value)}}),ve.prototype._recompute=function(t,e){(t.value||t.options||t.placeholder||t.forcePlaceholder)&&this._differs(e.currentLabel,e.currentLabel=function(t){var e=t.value,n=t.options,i=t.placeholder;if(!t.forcePlaceholder)for(var o=0;o<n.length;o++)if(n[o].value==e)return n[o].label;return'<span style="color:#999;font-size:12px;">'+i+"</span>"}(e))&&(t.currentLabel=!0)};var ge={show:function(){var t=this,e=setTimeout(function(){t.set({visible:!0})},400);this.set({t:e})},hide:function(){var t=this.get().t;clearTimeout(t),this.set({visible:!1})}};function be(t,n){var i;return{c:function(){i=h("i"),this.h()},h:function(){i.className="im im-graduation-hat svelte-1mkn8ur"},m:function(t,e){o(i,t,e)},u:function(){a(i)},d:e}}function xe(t,n){var i;return{c:function(){i=f("?")},m:function(t,e){o(i,t,e)},u:function(){a(i)},d:e}}function ye(t,n){var s,l=t._slotted.default;return{c:function(){s=h("div"),this.h()},h:function(){s.className="content svelte-1mkn8ur"},m:function(t,e){o(s,t,e),l&&i(l,s)},u:function(){a(s),l&&c(s,l)},d:e}}function ke(t){j(this,t),this._state=n({visible:!1},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=function(t,e){var n,s,l;function r(t){return t.visible?be:xe}var c=r(e),u=c(t,e),d=e.visible&&ye(t);function p(e){t.show()}function m(e){t.hide()}return{c:function(){n=h("div"),s=h("span"),u.c(),l=f("\n    "),d&&d.c(),this.h()},h:function(){s.className="svelte-1mkn8ur",v(n,"mouseenter",p),v(n,"mouseleave",m),n.className="help svelte-1mkn8ur"},m:function(t,e){o(n,t,e),i(s,n),u.m(s,null),i(l,n),d&&d.m(n,null)},p:function(e,i){c!==(c=r(i))&&(u.u(),u.d(),(u=c(t,i)).c(),u.m(s,null)),i.visible?d||((d=ye(t)).c(),d.m(n,null)):d&&(d.u(),d.d(),d=null)},u:function(){a(n),u.u(),d&&d.u()},d:function(){u.d(),d&&d.d(),_(n,"mouseenter",p),_(n,"mouseleave",m)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function we(t){var e=this,n=t.changed,i=t.current;n.value&&i.value&&(this.set({highlight:!0}),setTimeout(function(){e.set({highlight:!1})},300))}function Ne(t,e){var n,o,a=t._slotted.help,s=new ke({root:t.root,slots:{default:d()}});return{c:function(){n=f("\n        "),o=f("\n    "),s._fragment.c()},m:function(t,e){i(n,s._slotted.default),a&&i(a,s._slotted.default),i(o,s._slotted.default),s._mount(t,e)},u:function(){a&&c(s._slotted.default,a),s._unmount()},d:function(){s.destroy(!1)}}}function Ce(t,n){var s,l,r,c,u;return{c:function(){s=h("div"),l=h("div"),this.h()},h:function(){l.className="disabled-msg svelte-1jt7tjy",s.className="svelte-1jt7tjy"},m:function(t,e){o(s,t,e),i(l,s),l.innerHTML=n.disabled_msg},p:function(t,e){(u||t.disabled_msg)&&(l.innerHTML=e.disabled_msg)},i:function(e,n){c||(c=!0,u=!1,t.root._aftercreate.push(function(){r||(r=w(t,s,me,{},!0)),r.run(!0,function(){t.fire("intro.end",{node:s})})}),this.m(e,n))},o:function(e){if(!u){u=!0,c=!1;var n=1;r.run(!1,function(){t.fire("outro.end",{node:s}),0==--n&&e(),r=null})}},u:function(){l.innerHTML="",a(s)},d:e}}function je(t,n){var s,l,r,u,d,f=t._slotted.default;return{c:function(){s=h("div"),l=h("div"),this.h()},h:function(){l.className="switch-content svelte-1jt7tjy",s.className="svelte-1jt7tjy"},m:function(t,e){o(s,t,e),i(l,s),f&&i(f,l)},p:e,i:function(e,n){u||(u=!0,d=!1,t.root._aftercreate.push(function(){r||(r=w(t,s,me,{},!0)),r.run(!0,function(){t.fire("intro.end",{node:s})})}),this.m(e,n))},o:function(e){if(!d){d=!0,u=!1;var n=1;r.run(!1,function(){t.fire("outro.end",{node:s}),0==--n&&e(),r=null})}},u:function(){a(s),f&&c(l,f)},d:e}}function Me(t){j(this,t),this._state=n({hasHelp:!1,disabled_msg:"",disabled_state:"auto",disabled:!1,highlight:!1},t.data),this._handlers.state=[we],this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,c,u,d,p,g,x,y,k,w,N,C,j=e.hasHelp&&Ne(t);function M(){t.set({value:u.checked})}var L=[Ce,je],T=[];function H(t){return t.disabled&&t.disabled_msg?0:t.disabled&&"on"!=t.disabled_state||!t.value?-1:1}return~(w=H(e))&&(N=T[w]=L[w](t,e)),{c:function(){n=h("div"),j&&j.c(),s=f("\n    "),l=h("label"),c=h("label"),u=h("input"),p=h("span"),g=f("\n        "),x=h("noscript"),k=f("\n    "),N&&N.c(),this.h()},h:function(){v(u,"change",M),u.className=d=(e.disabled&&"on"==e.disabled_state?"disabled-force-checked":e.disabled&&"off"==e.disabled_state?"disabled-force-unchecked":"")+" svelte-1jt7tjy",u.disabled=e.disabled,m(u,"type","checkbox"),p.className="slider round svelte-1jt7tjy",c.className="switch svelte-1jt7tjy",l.className=y="switch-outer "+(e.disabled?"disabled":"")+" svelte-1jt7tjy",b(l,"padding-left","40px"),n.className=C="control-group vis-option-group vis-option-type-switch "+(e.highlight?"highlight":"")+" svelte-1jt7tjy"},m:function(t,a){o(n,t,a),j&&j.m(n,null),i(s,n),i(l,n),i(c,l),i(u,c),u.checked=e.value,i(p,c),i(g,l),i(x,l),x.insertAdjacentHTML("afterend",e.label),i(k,n),~w&&T[w].i(n,null)},p:function(e,i){i.hasHelp?j||((j=Ne(t)).c(),j.m(n,s)):j&&(j.u(),j.d(),j=null),u.checked=i.value,(e.disabled||e.disabled_state)&&d!==(d=(i.disabled&&"on"==i.disabled_state?"disabled-force-checked":i.disabled&&"off"==i.disabled_state?"disabled-force-unchecked":"")+" svelte-1jt7tjy")&&(u.className=d),e.disabled&&(u.disabled=i.disabled),e.label&&(r(x),x.insertAdjacentHTML("afterend",i.label)),e.disabled&&y!==(y="switch-outer "+(i.disabled?"disabled":"")+" svelte-1jt7tjy")&&(l.className=y);var o=w;(w=H(i))===o?~w&&T[w].p(e,i):(N&&N.o(function(){T[o].u(),T[o].d(),T[o]=null}),~w?((N=T[w])||(N=T[w]=L[w](t,i)).c(),N.i(n,null)):N=null),e.highlight&&C!==(C="control-group vis-option-group vis-option-type-switch "+(i.highlight?"highlight":"")+" svelte-1jt7tjy")&&(n.className=C)},u:function(){r(x),a(n),j&&j.u()},d:function(){j&&j.d(),_(u,"change",M),~w&&(T[w].u(),T[w].d())}}}(this,this._state),this.root._oncreate.push(function(){var t={highlight:1,hasHelp:1,disabled:1,disabled_state:1,value:1,label:1,disabled_msg:1};we.call(e,{changed:t,current:e._state}),function(){this.set({hasHelp:!(!this.options||!this.options.slots||!this.options.slots.help)})}.call(e),e.fire("update",{changed:t,current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}function Le(t){j(this,t),this._state=n({placeholder:""},t.data),this._fragment=function(t,e){var n,s,l,r,c,u,d=!1;function p(){d=!0,t.set({value:u.value}),d=!1}return{c:function(){n=h("div"),s=h("label"),l=f(e.label),r=f("\n    "),c=h("div"),u=h("textarea"),this.h()},h:function(){s.className="control-label",v(u,"input",p),u.placeholder=e.placeholder,b(u,"width",e.width||"auto"),c.className="controls",n.className="control-group vis-option-group vis-option-type-textarea"},m:function(t,a){o(n,t,a),i(s,n),i(l,s),i(r,n),i(c,n),i(u,c),u.value=e.value},p:function(t,e){t.label&&(l.data=e.label),d||(u.value=e.value),t.placeholder&&(u.placeholder=e.placeholder),t.width&&b(u,"width",e.width||"auto")},u:function(){a(n)},d:function(){_(u,"input",p)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(ke.prototype,T),n(ke.prototype,ge),n(Me.prototype,T),n(Le.prototype,T);var Te=it(function(t){if(!E(t))return[];var e=[];for(var n in t)e.push(n);return tt&&nt(t,e),e});function He(t){var e,n=t.changed,i=t.current;if(n.selected&&i.selected){var o=this.get().axis,a=E(e=this.store.getMetadata("axes",{}))?Y(e)?e.slice():Te({},e):e;"-"==i.selected?delete a[o]:a[o]=i.selected,this.store.setMetadata("axes",a)}}function Se(t,n){var s,l,r=n.axis["na-label"]||"--";return{c:function(){s=h("option"),l=f(r),this.h()},h:function(){s.__value="-",s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){t.axis&&r!==(r=e.axis["na-label"]||"--")&&(l.data=r)},u:function(){a(s)},d:e}}function $e(t,n){var s,l,r,c=n.column,u=(n.each_value,n.column_index,c.name);return{c:function(){s=h("option"),l=f(u),this.h()},h:function(){s.__value=r=c.name,s.value=s.__value},m:function(t,e){o(s,t,e),i(l,s)},p:function(t,e){c=e.column,e.each_value,e.column_index,t.columns&&u!==(u=c.name)&&(l.data=u),t.columns&&r!==(r=c.name)&&(s.__value=r),s.value=s.__value},u:function(){a(s)},d:e}}function Ie(t){j(this,t),this._state=n(n(this.store._init(["visualization","dataset"]),{selected:!1,width:"200px",valign:"baseline"}),t.data),this.store._add(this,["visualization","dataset"]),this._recompute({axis:1,$visualization:1,$dataset:1},this._state),this._handlers.state=[He],this._handlers.destroy=[L];var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){for(var o,a,s,l,r=!1,c=e.$visualization&&e.$visualization.axes[e.axis].optional&&Se(0,e),m=e.columns,g=[],k=0;k<m.length;k+=1)g[k]=$e(0,n(n({},e),{each_value:m,column:m[k],column_index:k}));function w(){r=!0,t.set({selected:y(a)}),r=!1}var N={width:e.width,valign:e.valign,label:e.label},C=new Ht({root:t.root,slots:{default:d()},data:N});return{c:function(){o=f("\n    "),a=h("select"),c&&c.c(),s=p();for(var t=0;t<g.length;t+=1)g[t].c();l=f("\n"),C._fragment.c(),this.h()},h:function(){v(a,"change",w),"selected"in e||t.root._beforecreate.push(w),b(a,"width","calc(100% - 50px)")},m:function(t,n){i(o,C._slotted.default),i(a,C._slotted.default),c&&c.m(a,null),i(s,a);for(var r=0;r<g.length;r+=1)g[r].m(a,null);x(a,e.selected),i(l,C._slotted.default),C._mount(t,n)},p:function(t,e){e.$visualization&&e.$visualization.axes[e.axis].optional?c?c.p(t,e):((c=Se(0,e)).c(),c.m(a,s)):c&&(c.u(),c.d(),c=null);var i=e.columns;if(t.columns){for(var o=0;o<i.length;o+=1){var l=n(n({},e),{each_value:i,column:i[o],column_index:o});g[o]?g[o].p(t,l):(g[o]=$e(0,l),g[o].c(),g[o].m(a,null))}for(;o<g.length;o+=1)g[o].u(),g[o].d();g.length=i.length}r||x(a,e.selected);var u={};t.width&&(u.width=e.width),t.valign&&(u.valign=e.valign),t.label&&(u.label=e.label),C._set(u)},u:function(){c&&c.u();for(var t=0;t<g.length;t+=1)g[t].u();C._unmount()},d:function(){c&&c.d(),u(g),_(a,"change",w),C.destroy(!1)}}}(this,this._state),this.root._oncreate.push(function(){var t={axis:1,$visualization:1,$dataset:1,width:1,valign:1,label:1,selected:1,columns:1};He.call(e,{changed:t,current:e._state}),function(){var t=this;this.store.observe("visualization",function(e){if(!t.get().selected&&e){var n=t.store.getMetadata("axes",{})[t.get().axis];console.log("initialize",t.get().axis,n),t.set({selected:n})}})}.call(e),e.fire("update",{changed:t,current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}function ze(t,n){var s,l,r,c,u;return{c:function(){s=h("div"),l=h("div"),this.h()},h:function(){l.className="disabled-msg svelte-rcpckl"},m:function(t,e){o(s,t,e),i(l,s),l.innerHTML=n.disabled_msg},p:function(t,e){(u||t.disabled_msg)&&(l.innerHTML=e.disabled_msg)},i:function(e,n){c||(c=!0,u=!1,t.root._aftercreate.push(function(){r||(r=w(t,s,me,{},!0)),r.run(!0,function(){t.fire("intro.end",{node:s})})}),this.m(e,n))},o:function(e){if(!u){u=!0,c=!1;var n=1;r.run(!1,function(){t.fire("outro.end",{node:s}),0==--n&&e(),r=null})}},u:function(){l.innerHTML="",a(s)},d:e}}function Ae(t){j(this,t),this._state=n({disabled:!1,disabled_msg:"",unit:"",width:"100px",help:"",placeholder:""},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,s,l,r,c,u=!1;function g(){u=!0,t.set({value:s.value}),u=!1}var b={disabled:e.disabled,width:e.width,label:e.label,help:e.help},x=new Ht({root:t.root,slots:{default:d()},data:b}),y=e.disabled&&e.disabled_msg&&ze(t,e);return{c:function(){n=f("\n    "),s=h("input"),l=f("\n"),x._fragment.c(),r=f("\n\n"),y&&y.c(),c=p(),this.h()},h:function(){v(s,"input",g),s.disabled=e.disabled,m(s,"type","text"),s.className="input-large",s.placeholder=e.placeholder},m:function(t,a){i(n,x._slotted.default),i(s,x._slotted.default),s.value=e.value,i(l,x._slotted.default),x._mount(t,a),o(r,t,a),y&&y.i(t,a),o(c,t,a)},p:function(e,n){u||(s.value=n.value),e.disabled&&(s.disabled=n.disabled),e.placeholder&&(s.placeholder=n.placeholder);var i={};e.disabled&&(i.disabled=n.disabled),e.width&&(i.width=n.width),e.label&&(i.label=n.label),e.help&&(i.help=n.help),x._set(i),n.disabled&&n.disabled_msg?(y?y.p(e,n):(y=ze(t,n))&&y.c(),y.i(c.parentNode,c)):y&&y.o(function(){y.u(),y.d(),y=null})},u:function(){x._unmount(),a(r),y&&y.u(),a(c)},d:function(){_(s,"input",g),x.destroy(!1),y&&y.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}n(Ie.prototype,T),Ie.prototype._recompute=function(t,e){(t.axis||t.$visualization||t.$dataset)&&this._differs(e.columns,e.columns=function(t){var e=t.axis,n=t.$visualization,i=t.$dataset,o=[];return i&&n&&e?(i.eachColumn(function(t){st(n.axes[e].accepts,t.type())>-1&&o.push({name:t.name()})}),o):[]}(e))&&(t.columns=!0)},n(Ae.prototype,T);var Oe={focus:function(){this.refs.searchInput.focus()},blur:function(){this.refs.searchInput.blur()},onClick:function(t){this.set({open:!0}),this.fire("focus",t)},search:function(t){this.set({open:!0}),this.fire("search",{query:t})},select:function(t,e){this.set({selectedItem:t,query:t.title,open:!1}),e&&e.stopPropagation(),this.fire("select",{item:t})},keyup:function(t){if(t){if(13===t.keyCode){var e=this.get().selectedItem;this.select(e)}if(38==t.keyCode||40==t.keyCode){var n=this.get(),i=n.selectedIndex,o=n.matches;isNaN(i)&&(i=-1);var a=o.length||0;38==t.keyCode&&(i=(i-1+a)%a),40==t.keyCode&&(i=(i+1)%a),this.set({selectedIndex:i,selectedItem:o[i]})}27==t.keyCode&&(this.set({open:!1}),this.blur())}}};function qe(t){var e=t.changed,n=t.current;if(e.selectedIndex&&this.refs.dropdown){var i=this.refs.dropdown,o=n.selectedIndex,a=i.children[o].getBoundingClientRect(),s=i.getBoundingClientRect();a.y+a.height-s.y>s.height?i.scrollBy(0,a.y+a.height-s.y-s.height+5):a.y-s.y<0&&i.scrollBy(0,a.y-s.y-5)}}function Ee(t,n){var i,s;return{c:function(){i=h("i"),this.h()},h:function(){i.className=s="icon "+n.icon+" svelte-kljjr2"},m:function(t,e){o(i,t,e)},p:function(t,e){t.icon&&s!==(s="icon "+e.icon+" svelte-kljjr2")&&(i.className=s)},u:function(){a(i)},d:e}}function De(t,e){var n,i,s,l=e.item,r=(e.each_value,e.i),c=l.display||l.title;return{c:function(){n=h("li"),this.h()},h:function(){v(n,"click",Ye),n.className=i=(r==e.selectedIndex?"selected":"")+" svelte-kljjr2",n.style.cssText=s=l.style||"",n._svelte={component:t,each_value:e.each_value,i:e.i}},m:function(t,e){o(n,t,e),n.innerHTML=c},p:function(t,e){l=e.item,e.each_value,r=e.i,t.matches&&c!==(c=l.display||l.title)&&(n.innerHTML=c),t.selectedIndex&&i!==(i=(r==e.selectedIndex?"selected":"")+" svelte-kljjr2")&&(n.className=i),t.matches&&s!==(s=l.style||"")&&(n.style.cssText=s),n._svelte.each_value=e.each_value,n._svelte.i=e.i},u:function(){n.innerHTML="",a(n)},d:function(){_(n,"click",Ye)}}}function Fe(t,e){for(var i,s=e.matches,l=[],r=0;r<s.length;r+=1)l[r]=De(t,n(n({},e),{each_value:s,item:s[r],i:r}));return{c:function(){i=h("ul");for(var t=0;t<l.length;t+=1)l[t].c();this.h()},h:function(){i.className="dropdown-results svelte-kljjr2"},m:function(e,n){o(i,e,n);for(var a=0;a<l.length;a+=1)l[a].m(i,null);t.refs.dropdown=i},p:function(e,o){var a=o.matches;if(e.selectedIndex||e.matches){for(var s=0;s<a.length;s+=1){var r=n(n({},o),{each_value:a,item:a[s],i:s});l[s]?l[s].p(e,r):(l[s]=De(t,r),l[s].c(),l[s].m(i,null))}for(;s<l.length;s+=1)l[s].u(),l[s].d();l.length=a.length}},u:function(){a(i);for(var t=0;t<l.length;t+=1)l[t].u()},d:function(){u(l),t.refs.dropdown===i&&(t.refs.dropdown=null)}}}function Ye(t){var e=this._svelte.component,n=this._svelte.each_value[this._svelte.i];e.select(n,t)}function Re(t){j(this,t),this.refs={},this._state=n({selection:"",query:"",icon:!1,placeholder:"",filter:"indexOf",selectedItem:void 0,selectedIndex:void 0,searching:!1,open:!1,items:[]},t.data),this._recompute({query:1,items:1,filter:1},this._state),this._handlers.update=[qe],this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,r,u,d,p,g,b,x,y=!1,k=t._slotted.button;function w(e){t.set({open:!1})}function N(){y=!0,t.set({query:l.value}),y=!1}function C(e){t.keyup(e)}function j(e){var n=t.get();t.search(n.query)}window.addEventListener("click",w);var M=e.icon&&Ee(0,e);function L(e){t.set({open:!0})}var T=e.open&&e.matches.length&&Fe(t,e);function H(e){t.onClick(e)}function S(t){t.stopPropagation()}return{c:function(){n=h("div"),s=h("div"),l=h("input"),u=f("\n\n        "),M&&M.c(),d=f("\n\n        "),p=h("div"),k||((g=h("button")).innerHTML='<span class="caret"></span>'),b=f("\n\n        "),T&&T.c(),this.h()},h:function(){v(l,"input",N),v(l,"keypress",C),v(l,"input",j),m(l,"type","search"),l.placeholder=r=e.open?e.placeholder:e.selection||e.placeholder,l.className="svelte-kljjr2",k||(v(g,"click",L),g.className="btn btn-small btn-primary svelte-kljjr2"),p.className="btn-wrap svelte-kljjr2",v(s,"click",H),s.className=x="dropdown "+(e.icon?"icon":"")+" "+(!e.open&&e.selection?"selection":"")+" svelte-kljjr2",v(n,"click",S),n.className="control-group vis-option-group vis-option-type-select"},m:function(a,r){o(n,a,r),i(s,n),i(l,s),t.refs.searchInput=l,l.value=e.query,i(u,s),M&&M.m(s,null),i(d,s),i(p,s),i(k||g,p),i(b,s),T&&T.m(s,null)},p:function(e,n){y||(l.value=n.query),(e.open||e.placeholder||e.selection)&&r!==(r=n.open?n.placeholder:n.selection||n.placeholder)&&(l.placeholder=r),n.icon?M?M.p(e,n):((M=Ee(0,n)).c(),M.m(s,d)):M&&(M.u(),M.d(),M=null),n.open&&n.matches.length?T?T.p(e,n):((T=Fe(t,n)).c(),T.m(s,null)):T&&(T.u(),T.d(),T=null),(e.icon||e.open||e.selection)&&x!==(x="dropdown "+(n.icon?"icon":"")+" "+(!n.open&&n.selection?"selection":"")+" svelte-kljjr2")&&(s.className=x)},u:function(){a(n),M&&M.u(),k&&c(p,k),T&&T.u()},d:function(){window.removeEventListener("click",w),_(l,"input",N),_(l,"keypress",C),_(l,"input",j),t.refs.searchInput===l&&(t.refs.searchInput=null),M&&M.d(),k||_(g,"click",L),T&&T.d(),_(s,"click",H),_(n,"click",S)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:{query:1,items:1,filter:1,icon:1,open:1,selection:1,placeholder:1,matches:1,selectedIndex:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this._oncreate))}function Ke(t,n){var s,l,r,u,d=t._slotted.default;return{c:function(){s=h("div"),l=h("fieldset"),r=h("div"),this.h()},h:function(){r.className="control-group vis-option-group",l.id="visOptions",s.className=u="section "+n.id},m:function(t,e){o(s,t,e),i(l,s),i(r,l),d&&i(d,r)},p:function(t,e){t.id&&u!==(u="section "+e.id)&&(s.className=u)},u:function(){a(s),d&&c(r,d)},d:e}}function Pe(t){var e,i,s,l;j(this,t),this._state=n({},t.data),this._slotted=t.slots||{},this.slots={},this._fragment=(e=this,i=this._state,l=i.id==i.active&&Ke(e,i),{c:function(){l&&l.c(),s=p()},m:function(t,e){l&&l.m(t,e),o(s,t,e)},p:function(t,n){n.id==n.active?l?l.p(t,n):((l=Ke(e,n)).c(),l.m(s.parentNode,s)):l&&(l.u(),l.d(),l=null)},u:function(){l&&l.u(),a(s)},d:function(){l&&l.d()}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}n(Re.prototype,T),n(Re.prototype,Oe),Re.prototype._recompute=function(t,e){var n,i,o;(t.query||t.items||t.filter)&&this._differs(e.matches,e.matches=(i=(n=e).query,o=n.items,n.filter&&i?o&&o.filter?o.filter(function(t){return(t.search||t.title).toLowerCase().indexOf(i.toLowerCase())>-1}):[]:o))&&(t.matches=!0)},n(Pe.prototype,T);var Be={toggle:function(){if(!this.get().notoggle){var t=this.get(),e=t.open,n=t.id;if(n){var i=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};i["locator-map"]||(i["locator-map"]={}),i["locator-map"][n]="open"==i["locator-map"][n]?"closed":"open",window.localStorage.setItem("dw-vis-groups",JSON.stringify(i))}this.set({open:!e})}}};function Ge(t,n){var i,s,l;return{c:function(){i=h("i"),s=f("\n        "),l=h("i"),this.h()},h:function(){i.className="fa fa-chevron-up expand-group pull-right",l.className="fa fa-chevron-down collapse-group pull-right"},m:function(t,e){o(i,t,e),o(s,t,e),o(l,t,e)},u:function(){a(i),a(s),a(l)},d:e}}function Qe(t,n){var s,l=t._slotted.default;return{c:function(){s=h("div"),this.h()},h:function(){s.className="option-group-content vis-option-type-chart-description"},m:function(t,e){o(s,t,e),l&&i(l,s)},u:function(){a(s),l&&c(s,l)},d:e}}function We(t){j(this,t),this._state=n({notoggle:!1,id:!1,open:!0},t.data),this._slotted=t.slots||{};var e=this;t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,s,l,c,u,d,p=!e.notoggle&&Ge();function m(e){t.toggle()}var g=e.open&&Qe(t);return{c:function(){n=h("div"),s=h("label"),p&&p.c(),l=f("\n        "),c=h("noscript"),u=f("\n\n    "),g&&g.c(),this.h()},h:function(){v(s,"click",m),s.className="group-title svelte-cx9ls9",n.className=d="vis-option-type-group "+(e.open?"group-open":"")+" "+(e.notoggle?"notoggle":"")+" svelte-cx9ls9"},m:function(t,a){o(n,t,a),i(s,n),p&&p.m(s,null),i(l,s),i(c,s),c.insertAdjacentHTML("afterend",e.label),i(u,n),g&&g.m(n,null)},p:function(e,i){i.notoggle?p&&(p.u(),p.d(),p=null):p||((p=Ge()).c(),p.m(s,l)),e.label&&(r(c),c.insertAdjacentHTML("afterend",i.label)),i.open?g||((g=Qe(t)).c(),g.m(n,null)):g&&(g.u(),g.d(),g=null),(e.open||e.notoggle)&&d!==(d="vis-option-type-group "+(i.open?"group-open":"")+" "+(i.notoggle?"notoggle":"")+" svelte-cx9ls9")&&(n.className=d)},u:function(){r(c),a(n),p&&p.u(),g&&g.u()},d:function(){p&&p.d(),_(s,"click",m),g&&g.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get()||{},e=t.id;if(!t.notoggle&&e){var n=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};n["locator-map"]&&n["locator-map"][e]&&this.set({open:"closed"!=n["locator-map"][e]})}}).call(e),e.fire("update",{changed:{open:1,notoggle:1,label:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this._oncreate))}function Je(t,e,n){e=J(e,n);for(var i,o=F(t),a=0,s=o.length;a<s;a++)if(e(t[i=o[a]],i,t))return i}function Ue(t,e){return function(t,e,n){var i=(Z(t)?at:Je)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}(t,Q(e))}n(We.prototype,T),n(We.prototype,Be);var Ve,Xe={select:function(t,e){if(!e.redirect&&(t.preventDefault(),!e.readonly&&(this.fire("select",e),"/edit/"==location.pathname.substr(0,6)))){var n=this.store.get().id;window.history.pushState({step:e,id:n},"","/edit/"+n+"/"+e.id)}}};function Ze(t){var e=t.changed,n=t.current;if(e.active_i){var i=n.steps[n.active_i];if(i){var o=this.store.get(),a=o.id,s=o.title;window.document.title=s+" - "+a+" - "+i.title+" | Datawrapper"}}}function tn(t,n){var i;return{c:function(){i=h("i"),this.h()},h:function(){i.className="fa fa-check"},m:function(t,e){o(i,t,e)},u:function(){a(i)},d:e}}function en(t){j(this,t),this._state=n(n(this.store._init(["lastEditStep"]),{step:{title:"",index:1},maxStep:1,active:1}),t.data),this.store._add(this,["lastEditStep"]),this._recompute({active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1},this._state),this._handlers.update=[Ze],this._handlers.destroy=[L];var e=this;t.root||(this._oncreate=[]),this._fragment=function(t,e){var n,s,l,r,c,u,d,p,m,g=e.step.title,x=e.passed&&tn();function y(e){var n=t.get();t.select(e,n.step)}return{c:function(){n=h("a"),s=h("span"),l=f(e.index),r=f("\n    "),c=h("span"),u=f("\n    "),x&&x.c(),d=f("\n    "),p=h("div"),this.h()},h:function(){s.className="step",c.className="title",p.className="corner",v(n,"click",y),b(n,"width",95/e.steps.length+"%"),n.href=m=e.step.redirect?e.step.redirect:"#"+e.step.id,n.className=e.class_},m:function(t,e){o(n,t,e),i(s,n),i(l,s),i(r,n),i(c,n),c.innerHTML=g,i(u,n),x&&x.m(n,null),i(d,n),i(p,n)},p:function(t,e){t.index&&(l.data=e.index),t.step&&g!==(g=e.step.title)&&(c.innerHTML=g),e.passed?x||((x=tn()).c(),x.m(n,d)):x&&(x.u(),x.d(),x=null),t.steps&&b(n,"width",95/e.steps.length+"%"),t.step&&m!==(m=e.step.redirect?e.step.redirect:"#"+e.step.id)&&(n.href=m),t.class_&&(n.className=e.class_)},u:function(){c.innerHTML="",a(n),x&&x.u()},d:function(){x&&x.d(),_(n,"click",y)}}}(this,this._state),this.root._oncreate.push(function(){e.fire("update",{changed:{active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1,class_:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),M(this._oncreate))}function nn(t){void 0===t&&(t=0),window._paq&&(Ve&&window._paq.push(["setReferrerUrl",Ve]),window._paq.push(["setGenerationTimeMs",t]),window._paq.push(["setCustomUrl",window.location.pathname]),window._paq.push(["setDocumentTitle",window.document.title]),window._paq.push(["trackPageView"]),Ve=window.location.pathname)}n(en.prototype,T),n(en.prototype,Xe),en.prototype._recompute=function(t,e){var n,i,o;(t.active||t.steps)&&this._differs(e.active_i,e.active_i=(i=(n=e).active,(o=n.steps).indexOf(Ue(o,{id:i}))))&&(t.active_i=!0),(t.index||t.active_i||t.maxStep)&&this._differs(e.passed,e.passed=function(t){var e=t.index,n=t.active_i;return e<t.maxStep&&e!=n}(e))&&(t.passed=!0),(t.step||t.index||t.active||t.passed||t.$lastEditStep)&&this._differs(e.class_,e.class_=function(t){var e=t.step,n=t.index,i=t.active,o=t.passed,a=t.$lastEditStep,s=[];return e.readonly&&s.push("readonly"),i==e.id?s.push("active"):(n>a+1&&s.push("unseen"),o&&s.push("passed")),s.join(" ")}(e))&&(t.class_=!0)};var on={select:function(t,e){this.set({active:t.id});var n=this.store.get().lastEditStep;this.store.set({lastEditStep:Math.max(n,e+1)}),nn()},popstate:function(t){if(t.state&&t.state.id&&t.state.step){var e=t.state,n=e.id,i=e.step;n==this.store.get().id?(this.set({active:i.id}),nn()):window.location.href="/edit/"+n+"/"+i.id}}};function an(t,e){var n=e.step,i=e.each_value,o=e.i,a={},s={index:o+1};o in e.each_value&&(s.step=n,a.step=!0),"steps"in e&&(s.steps=e.steps,a.steps=!0),"active"in e&&(s.active=e.active,a.active=!0);var l=new en({root:t.root,data:s,_bind:function(e,n){var s=t.get(),l={};!a.step&&e.step&&(i[o]=n.step,l.steps=s.steps),!a.steps&&e.steps&&(l.steps=n.steps),!a.active&&e.active&&(l.active=n.active),t._set(l),a={}}});return t.root._beforecreate.push(function(){l._bind({step:1,steps:1,active:1},l.get())}),l.on("select",function(e){t.select(n,o)}),{c:function(){l._fragment.c()},m:function(t,e){l._mount(t,e)},p:function(t,e){n=e.step,i=e.each_value,o=e.i;var s={};s.index=o+1,!a.step&&t.steps&&(s.step=n,a.step=!0),!a.steps&&t.steps&&(s.steps=e.steps,a.steps=!0),!a.active&&t.active&&(s.active=e.active,a.active=!0),l._set(s),a={}},u:function(){l._unmount()},d:function(){l.destroy(!1)}}}function sn(t,n){var s,l,r,c,u,d,p;return{c:function(){s=h("div"),l=f("This chart belongs to "),r=h("a"),c=f("User "),u=f(n.$authorId),p=f(". Great power comes with great responsibility, so be careful with what you're doing!"),this.h()},h:function(){r.target="_blank",r.href=d="/admin/chart/by/"+n.$authorId,s.className="alert alert-warning",b(s,"text-align","center"),b(s,"margin-top","10px")},m:function(t,e){o(s,t,e),i(l,s),i(r,s),i(c,r),i(u,r),i(p,s)},p:function(t,e){t.$authorId&&(u.data=e.$authorId),t.$authorId&&d!==(d="/admin/chart/by/"+e.$authorId)&&(r.href=d)},u:function(){a(s)},d:e}}function ln(t){j(this,t),this._state=n(n(this.store._init(["user","authorId"]),{steps:[]}),t.data),this.store._add(this,["user","authorId"]),this._handlers.destroy=[L];var e=this;t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var i,s,l;function r(e){t.popstate(e)}window.addEventListener("popstate",r);for(var c=e.steps,d=[],v=0;v<c.length;v+=1)d[v]=an(t,n(n({},e),{each_value:c,step:c[v],i:v}));var _=e.$user.id!=e.$authorId&&e.$user.isAdmin&&sn(0,e);return{c:function(){i=h("div");for(var t=0;t<d.length;t+=1)d[t].c();s=f("\n\n"),_&&_.c(),l=p(),this.h()},h:function(){i.className="create-nav svelte-nols97"},m:function(t,e){o(i,t,e);for(var n=0;n<d.length;n+=1)d[n].m(i,null);o(s,t,e),_&&_.m(t,e),o(l,t,e)},p:function(e,o){var a=o.steps;if(e.steps||e.active){for(var s=0;s<a.length;s+=1){var r=n(n({},o),{each_value:a,step:a[s],i:s});d[s]?d[s].p(e,r):(d[s]=an(t,r),d[s].c(),d[s].m(i,null))}for(;s<d.length;s+=1)d[s].u(),d[s].d();d.length=a.length}o.$user.id!=o.$authorId&&o.$user.isAdmin?_?_.p(e,o):((_=sn(0,o)).c(),_.m(l.parentNode,l)):_&&(_.u(),_.d(),_=null)},u:function(){a(i);for(var t=0;t<d.length;t+=1)d[t].u();a(s),_&&_.u(),a(l)},d:function(){window.removeEventListener("popstate",r),u(d),_&&_.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this.get(),e=t.active,n=t.steps,i=this.store.get(),o=i.lastEditStep,a=i.id,s=Ue(n,{id:e});this.store.set({lastEditStep:Math.max(o,n.indexOf(s)+1)}),window.history.replaceState({step:s,id:a},s.title)}).call(e),e.fire("update",{changed:{steps:1,active:1,$user:1,$authorId:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,M(this._beforecreate),M(this._oncreate),M(this._aftercreate),this._lock=!1)}return n(ln.prototype,T),n(ln.prototype,on),{Checkbox:H,Color:Gt,ColorPicker:jt,Group:We,NumberInput:ne,Switch:Me,Dropdown:ve,Radio:ae,Select:de,SelectAxisColumn:Ie,CustomFormat:Ut,Section:Pe,TextArea:Le,Help:ke,Text:Ae,TypeAhead:Re,EditorNav:ln,BaseNumber:ee,ControlGroup:Ht}});
