!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("chroma")):"function"==typeof define&&define.amd?define(["chroma"],t):e.controls=t(null)}(this,function(e){"use strict";function t(){}function n(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){t.appendChild(e)}function i(e,t,n){t.insertBefore(e,n)}function a(e){e.parentNode.removeChild(e)}function l(e,t){for(;e.nextSibling&&e.nextSibling!==t;)e.parentNode.removeChild(e.nextSibling)}function s(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}function c(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}function r(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}function u(e){for(var t=0;t<e.length;t+=1)e[t]&&e[t].d()}function d(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function f(){return document.createComment("")}function v(e,t,n){e.addEventListener(t,n,!1)}function p(e,t,n){e.removeEventListener(t,n,!1)}function m(e,t,n){e.setAttribute(t,n)}function g(e){return""===e?void 0:+e}function b(e,t,n){e.style.setProperty(t,n)}function x(e,t){for(var n=0;n<e.options.length;n+=1){var o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function y(e){var t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function k(e){return e}function N(e,t,n,o,i,a){var l,s=n(t,o),c=s.duration||300,r=s.easing||k;if(s.css&&!C.stylesheet){var u=d("style");document.head.appendChild(u),C.stylesheet=u.sheet}return i&&(s.css&&s.delay&&(l=t.style.cssText,t.style.cssText+=s.css(0)),s.tick&&s.tick(0)),{t:i?0:1,running:!1,program:null,pending:null,run:function(e,t){var n={start:window.performance.now()+(s.delay||0),intro:e,callback:t};s.delay?this.pending=n:this.start(n),this.running||(this.running=!0,C.add(this))},start:function(n){e.fire(n.intro?"intro.start":"outro.start",{node:t}),n.a=this.t,n.b=n.intro?1:0,n.delta=n.b-n.a,n.duration=c*Math.abs(n.b-n.a),n.end=n.start+n.duration,s.css&&(s.delay&&(t.style.cssText=l),n.rule=function(e,t,n,o,i,a){for(var l="{\n",s=0;s<=1;s+=16.666/o)l+=100*s+"%{"+a(e+n*i(s))+"}\n";return l+"100% {"+a(t)+"}\n}"}(n.a,n.b,n.delta,n.duration,r,s.css),C.addRule(n.rule,n.name="__svelte_"+function(e){for(var t=5381,n=e.length;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(n.rule)),t.style.animation=(t.style.animation||"").split(", ").filter(function(e){return e&&(n.delta<0||!/__svelte/.test(e))}).concat(n.name+" "+n.duration+"ms linear 1 forwards").join(", ")),this.program=n,this.pending=null},update:function(e){var t=this.program;if(t){var n=e-t.start;this.t=t.a+t.delta*r(n/t.duration),s.tick&&s.tick(this.t)}},done:function(){var e=this.program;this.t=e.b,s.tick&&s.tick(this.t),s.css&&C.deleteRule(t,e.name),e.callback(),e=null,this.running=!!this.pending},abort:function(){s.tick&&s.tick(1),s.css&&C.deleteRule(t,this.program.name),this.program=this.pending=null,this.running=!1}}}e=e&&e.hasOwnProperty("default")?e.default:e;var C={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},add:function(e){this.transitions.push(e),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(e,t){this.activeRules[t]||(this.activeRules[t]=!0,this.stylesheet.insertRule("@keyframes "+t+" "+e,this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var e=window.performance.now(),t=this.transitions.length;t--;){var n=this.transitions[t];n.program&&e>=n.program.end&&n.done(),n.pending&&e>=n.pending.start&&n.start(n.pending),n.running?(n.update(e),this.running=!0):n.pending||this.transitions.splice(t,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(t=this.stylesheet.cssRules.length;t--;)this.stylesheet.deleteRule(t);this.activeRules={}}},deleteRule:function(e,t){e.style.animation=e.style.animation.split(", ").filter(function(e){return-1===e.indexOf(t)}).join(", ")}};function w(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function M(e,t){e._handlers=Object.create(null),e._bind=t._bind,e.options=t,e.root=t.root||e,e.store=e.root.store||t.store}function L(e){for(;e&&e.length;)e.shift()()}function T(){this.store._remove(this)}var H,$={destroy:w,get:function(e){return e?this._state[e]:this._state},fire:function(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var o=0;o<n.length;o+=1){var i=n[o];i.__calling||(i.__calling=!0,i.call(this,t),i.__calling=!1)}},observe:function(e,t,n){var o=t.bind(this);return n&&!1===n.init||o(this.get()[e],void 0),this.on(n&&n.defer?"update":"state",function(t){t.changed[e]&&o(t.current[e],t.previous&&t.previous[e])})},on:function(e,t){if("teardown"===e)return this.on("destroy",t);var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},set:function(e){this._set(n({},e)),this.root._lock||(this.root._lock=!0,L(this.root._beforecreate),L(this.root._oncreate),L(this.root._aftercreate),this.root._lock=!1)},teardown:w,_recompute:t,_set:function(e){var t=this._state,o={},i=!1;for(var a in e)this._differs(e[a],t[a])&&(o[a]=i=!0);i&&(this._state=n(n({},t),e),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(this.fire("state",{changed:o,current:this._state,previous:t}),this._fragment.p(o,this._state),this.fire("update",{changed:o,current:this._state,previous:t})))},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}};function z(e){M(this,e),this._state=n({disabled:!1},e.data),this._fragment=function(e,t){var n,l,s,c,r,u;function f(){e.set({value:s.checked})}return{c:function(){n=d("div"),l=d("label"),s=d("input"),c=h(" "),r=h(t.label),this.h()},h:function(){v(s,"change",f),m(s,"type","checkbox"),s.disabled=t.disabled,s.className="svelte-llolt7",l.className=u="checkbox "+(t.disabled?"disabled":"")+" svelte-llolt7",n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(e,a){i(n,e,a),o(l,n),o(s,l),s.checked=t.value,o(c,l),o(r,l)},p:function(e,t){s.checked=t.value,e.disabled&&(s.disabled=t.disabled),e.label&&(r.data=t.label),e.disabled&&u!==(u="checkbox "+(t.disabled?"disabled":"")+" svelte-llolt7")&&(l.className=u)},u:function(){a(n)},d:function(){p(s,"change",f)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}n(z.prototype,$);var S={bodyClick:function(e){if(H.get){var t=H.get().visible,n=e.target;if(t){for(;!n.classList.contains("color-picker-cont")&&"body"!=n.nodeName.toLowerCase();)n=n.parentNode;H.set({visible:n!=window.document.body})}}}};function j(){window.document.body.removeEventListener("click",this.bodyClick)}function A(t,n){var o=-1,i=999999;return t[0]==t[1]?"-":(t.forEach(function(t,a){var l=e.distance(t,n,"lab");l<i&&(i=l,o=a)}),t[o])}function Y(e,t,n,o,i){var a=[e],l=t/n,s=0;for(o=_.isUndefined(o)?n:o,i=i||1;n-- >0;)s+=l,a.unshift(e-s),o-- >0&&a.push(e+s);return a}function F(e,t){var n,o,l=t.c;t.each_value,t.c_index;return{c:function(){n=d("div"),this.h()},h:function(){v(n,"click",D),v(n,"dblclick",Q),n.className="color",n.dataset.color=o=l,b(n,"background",l),n._svelte={component:e,each_value:t.each_value,c_index:t.c_index}},m:function(e,t){i(n,e,t)},p:function(e,t){l=t.c,t.each_value,t.c_index,e.palette&&o!==(o=l)&&(n.dataset.color=o),e.palette&&b(n,"background",l),n._svelte.each_value=t.each_value,n._svelte.c_index=t.c_index},u:function(){a(n)},d:function(){p(n,"click",D),p(n,"dblclick",Q)}}}function K(e,t){var n,o,l,s=t.c;t.each_value_1,t.c_index_1;return{c:function(){n=d("div"),this.h()},h:function(){v(n,"click",I),n.className=o="color "+(s==t.nearest_l?"selected":"")+" svelte-xl803o",n.dataset.color=l=s,b(n,"background",s),n._svelte={component:e,each_value_1:t.each_value_1,c_index_1:t.c_index_1}},m:function(e,t){i(n,e,t)},p:function(e,t){s=t.c,t.each_value_1,t.c_index_1,(e.gradient_l||e.nearest_l)&&o!==(o="color "+(s==t.nearest_l?"selected":"")+" svelte-xl803o")&&(n.className=o),e.gradient_l&&l!==(l=s)&&(n.dataset.color=l),e.gradient_l&&b(n,"background",s),n._svelte.each_value_1=t.each_value_1,n._svelte.c_index_1=t.c_index_1},u:function(){a(n)},d:function(){p(n,"click",I)}}}function O(e,t){var n,o,l,s=t.c;t.each_value_2,t.c_index_2;return{c:function(){n=d("div"),this.h()},h:function(){v(n,"click",q),n.className=o="color "+(s==t.nearest_c?"selected":"")+" svelte-xl803o",n.dataset.color=l=s,b(n,"background",s),n._svelte={component:e,each_value_2:t.each_value_2,c_index_2:t.c_index_2}},m:function(e,t){i(n,e,t)},p:function(e,t){s=t.c,t.each_value_2,t.c_index_2,(e.gradient_c||e.nearest_c)&&o!==(o="color "+(s==t.nearest_c?"selected":"")+" svelte-xl803o")&&(n.className=o),e.gradient_c&&l!==(l=s)&&(n.dataset.color=l),e.gradient_c&&b(n,"background",s),n._svelte.each_value_2=t.each_value_2,n._svelte.c_index_2=t.c_index_2},u:function(){a(n)},d:function(){p(n,"click",q)}}}function R(e,t){var n,o,l,s=t.c;t.each_value_3,t.c_index_3;return{c:function(){n=d("div"),this.h()},h:function(){v(n,"click",G),n.className=o="color "+(s==t.nearest_h?"selected":"")+" svelte-xl803o",n.dataset.color=l=s,b(n,"background",s),n._svelte={component:e,each_value_3:t.each_value_3,c_index_3:t.c_index_3}},m:function(e,t){i(n,e,t)},p:function(e,t){s=t.c,t.each_value_3,t.c_index_3,(e.gradient_h||e.nearest_h)&&o!==(o="color "+(s==t.nearest_h?"selected":"")+" svelte-xl803o")&&(n.className=o),e.gradient_h&&l!==(l=s)&&(n.dataset.color=l),e.gradient_h&&b(n,"background",s),n._svelte.each_value_3=t.each_value_3,n._svelte.c_index_3=t.c_index_3},u:function(){a(n)},d:function(){p(n,"click",G)}}}function E(e,t){for(var l,s,c,r,f,_,g,x,y,k,N,C,w,M,L,T=!1,H=t.palette,$=[],z=0;z<H.length;z+=1)$[z]=F(e,n(n({},t),{each_value:H,c:H[z],c_index:z}));var S=t.gradient_l,j=[];for(z=0;z<S.length;z+=1)j[z]=K(e,n(n({},t),{each_value_1:S,c:S[z],c_index_1:z}));var A=t.gradient_c,Y=[];for(z=0;z<A.length;z+=1)Y[z]=O(e,n(n({},t),{each_value_2:A,c:A[z],c_index_2:z}));var E=t.gradient_h,D=[];for(z=0;z<E.length;z+=1)D[z]=R(e,n(n({},t),{each_value_3:E,c:E[z],c_index_3:z}));function Q(){T=!0,e.set({color:N.value}),T=!1}function I(t){e.set({visible:!1})}return{c:function(){l=d("div"),s=d("div");for(var e=0;e<$.length;e+=1)$[e].c();c=h("\n\n        "),r=d("div");for(e=0;e<j.length;e+=1)j[e].c();f=h("\n        "),_=d("div");for(e=0;e<Y.length;e+=1)Y[e].c();g=h("\n        "),x=d("div");for(e=0;e<D.length;e+=1)D[e].c();y=h("\n\n        "),k=d("div"),N=d("input"),C=h("\n            "),(w=d("button")).innerHTML='<i class="icon-ok"></i>',M=h("\n            "),L=d("div"),this.h()},h:function(){s.className="palette",r.className="color-axis lightness",_.className="color-axis saturation",x.className="color-axis hue",v(N,"input",Q),m(N,"type","text"),b(N,"background",t.color),b(N,"border-color",t.borderColor),b(N,"color",t.textColor),N.className="hex svelte-xl803o",v(w,"click",I),w.className="btn btn-small ok",L.className="color selected",b(L,"background",t.color),k.className="footer",l.className="color-selector"},m:function(e,n){i(l,e,n),o(s,l);for(var a=0;a<$.length;a+=1)$[a].m(s,null);o(c,l),o(r,l);for(a=0;a<j.length;a+=1)j[a].m(r,null);o(f,l),o(_,l);for(a=0;a<Y.length;a+=1)Y[a].m(_,null);o(g,l),o(x,l);for(a=0;a<D.length;a+=1)D[a].m(x,null);o(y,l),o(k,l),o(N,k),N.value=t.color,o(C,k),o(w,k),o(M,k),o(L,k)},p:function(t,o){var i=o.palette;if(t.palette){for(var a=0;a<i.length;a+=1){var l=n(n({},o),{each_value:i,c:i[a],c_index:a});$[a]?$[a].p(t,l):($[a]=F(e,l),$[a].c(),$[a].m(s,null))}for(;a<$.length;a+=1)$[a].u(),$[a].d();$.length=i.length}var c=o.gradient_l;if(t.gradient_l||t.nearest_l){for(a=0;a<c.length;a+=1){var u=n(n({},o),{each_value_1:c,c:c[a],c_index_1:a});j[a]?j[a].p(t,u):(j[a]=K(e,u),j[a].c(),j[a].m(r,null))}for(;a<j.length;a+=1)j[a].u(),j[a].d();j.length=c.length}var d=o.gradient_c;if(t.gradient_c||t.nearest_c){for(a=0;a<d.length;a+=1){var h=n(n({},o),{each_value_2:d,c:d[a],c_index_2:a});Y[a]?Y[a].p(t,h):(Y[a]=O(e,h),Y[a].c(),Y[a].m(_,null))}for(;a<Y.length;a+=1)Y[a].u(),Y[a].d();Y.length=d.length}var f=o.gradient_h;if(t.gradient_h||t.nearest_h){for(a=0;a<f.length;a+=1){var v=n(n({},o),{each_value_3:f,c:f[a],c_index_3:a});D[a]?D[a].p(t,v):(D[a]=R(e,v),D[a].c(),D[a].m(x,null))}for(;a<D.length;a+=1)D[a].u(),D[a].d();D.length=f.length}T||(N.value=o.color),t.color&&b(N,"background",o.color),t.borderColor&&b(N,"border-color",o.borderColor),t.textColor&&b(N,"color",o.textColor),t.color&&b(L,"background",o.color)},u:function(){a(l);for(var e=0;e<$.length;e+=1)$[e].u();for(e=0;e<j.length;e+=1)j[e].u();for(e=0;e<Y.length;e+=1)Y[e].u();for(e=0;e<D.length;e+=1)D[e].u()},d:function(){u($),u(j),u(Y),u(D),p(N,"input",Q),p(w,"click",I)}}}function D(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.c_index];t.set({color:n})}function Q(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.c_index];t.set({color:n,visible:!1})}function I(e){var t=this._svelte.component,n=this._svelte.each_value_1[this._svelte.c_index_1];t.set({color:n})}function q(e){var t=this._svelte.component,n=this._svelte.each_value_2[this._svelte.c_index_2];t.set({color:n})}function G(e){var t=this._svelte.component,n=this._svelte.each_value_3[this._svelte.c_index_3];t.set({color:n})}function P(e){M(this,e),this._state=n(n(this.store._init(["theme"]),{palette:[],color:"#63c0de",visible:!1}),e.data),this.store._add(this,["theme"]),this._recompute({$theme:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1},this._state),this._handlers.destroy=[j,T],this._slotted=e.slots||{};var t=this;e.root||(this._oncreate=[]),this.slots={},this._fragment=function(e,t){var n,l,s,c,u,f,_,m=e._slotted.default;function g(t){e.set({visible:!1})}function x(t){e.set({visible:!0})}window.addEventListener("click",g);var y=t.visible&&t.color&&E(e,t);function k(e){e.stopPropagation()}return{c:function(){n=d("div"),l=d("div"),m||(s=d("div"),c=d("div"),u=h("\n                "),f=d("span")),_=h("\n    "),y&&y.c(),this.h()},h:function(){m||(b(c,"background",t.color+" none repeat scroll 0% 0%"),c.className="the-color svelte-xl803o",f.className="caret svelte-xl803o",s.className="base-color-picker color-picker svelte-xl803o"),v(l,"click",x),v(n,"click",k),n.className="color-picker-cont svelte-xl803o"},m:function(e,t){i(n,e,t),o(l,n),m?o(m,l):(o(s,l),o(c,s),o(u,s),o(f,s)),o(_,n),y&&y.m(n,null)},p:function(t,o){m||t.color&&b(c,"background",o.color+" none repeat scroll 0% 0%"),o.visible&&o.color?y?y.p(t,o):((y=E(e,o)).c(),y.m(n,null)):y&&(y.u(),y.d(),y=null)},u:function(){a(n),m&&r(l,m),y&&y.u()},d:function(){window.removeEventListener("click",g),p(l,"click",x),y&&y.d(),p(n,"click",k)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var e=this;e.observe("color",function(t,n){e.get().visible&&t!=n&&e.fire("change",t)}),H=this,window.document.body.addEventListener("click",this.bodyClick)}).call(t),t.fire("update",{changed:{$theme:1,color:1,palette:1,gradient_l:1,gradient_c:1,gradient_h:1,visible:1,nearest_l:1,nearest_c:1,nearest_h:1,borderColor:1,textColor:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),L(this._oncreate))}function B(e){var t=e.$vis,n=e.customizable,o=e.axis,i=e.custom,a=e.palette;return t&&n?(o?_.unique(t.axes(!0)[o].values()):t.colorKeys?t.colorKeys():t.keys()).map(function(e){var t;return t=e,{key:e=dw.utils.purifyHtml(t,""),defined:void 0!==i[e],color:void 0!==i[e]?U(i[e],a):"#cccccc"}}):[]}n(P.prototype,$),n(P.prototype,S),P.prototype._recompute=function(t,n){t.$theme&&this._differs(n.palette,n.palette=n.$theme.colors.palette)&&(t.palette=!0),t.color&&this._differs(n.gradient_l,n.gradient_l=function(t){var n=t.color,o=e(n).lch(),i=Y(70,55,7,6).map(function(t){return e.lch(t,o[1],o[2]).hex()});return e.scale(["#000000"].concat(i).concat("#ffffff")).mode("lch").gamma(.8).padding(.1).colors(14)}(n))&&(t.gradient_l=!0),(t.color||t.palette)&&this._differs(n.gradient_c,n.gradient_c=function(t){var n=t.color,o=t.palette,i=e(n).set("lch.c",120);isNaN(i.get("lch.h"))&&(i=e.lch(i.get("lch.l"),50,e(o[0]).get("lch.h")));var a=e(n).set("lch.c",3);return e.scale([a,i]).mode("lch").gamma(1.2).colors(14)}(n))&&(t.gradient_c=!0),t.color&&this._differs(n.gradient_h,n.gradient_h=function(t){var n=t.color,o=e(n).lch(),i=Y(o[2],75,7,6).map(function(t){return e.lch(o[0],o[1],t).hex()});return e.scale(i).mode("lch").colors(14)}(n))&&(t.gradient_h=!0),(t.color||t.gradient_l)&&this._differs(n.nearest_l,n.nearest_l=function(e){var t=e.color;return A(e.gradient_l,t)}(n))&&(t.nearest_l=!0),(t.color||t.gradient_c)&&this._differs(n.nearest_c,n.nearest_c=function(e){var t=e.color;return A(e.gradient_c,t)}(n))&&(t.nearest_c=!0),(t.color||t.gradient_h)&&this._differs(n.nearest_h,n.nearest_h=function(e){var t=e.color;return A(e.gradient_h,t)}(n))&&(t.nearest_h=!0),t.color&&(this._differs(n.textColor,n.textColor=function(t){var n=t.color;return e(n).get("lab.l")>60?"black":"white"}(n))&&(t.textColor=!0),this._differs(n.borderColor,n.borderColor=function(t){var n=t.color;return e(n).darker().hex()}(n))&&(t.borderColor=!0))};var J={update:function(e){var t=this.get().palette;this.set({value:W(e,t)})},updateCustom:function(e){var t=this.get(),n=t.selected,o=t.palette,i=t.custom;n.forEach(function(t){return i[t]=W(e,o)}),this.set({custom:i})},toggle:function(e){e.preventDefault();var t=this.get().expanded;this.set({expanded:!t})},toggleSelect:function(e,t){t.preventDefault();var n=this.get().selected,o=n.indexOf(e);t.shiftKey?o>-1?n.splice(o,1):n.push(e):(n.length=1,n[0]=e),this.set({selected:n})},getColor:function(e){return U(e,this.get().palette)},reset:function(){var e=this.get(),t=e.selected,n=e.custom;t.forEach(function(e){return delete n[e]}),this.set({custom:n})},resetAll:function(){var e=this.get().custom;Object.keys(e).forEach(function(t){return delete e[t]}),this.set({custom:e})},selectAll:function(e){e.preventDefault();var t=this.get(),n=t.selected;t.colorKeys.forEach(function(e){n.indexOf(e.key)<0&&n.push(e.key)}),this.set({selected:n})},selectNone:function(e){e.preventDefault();var t=this.get().selected;t.length=0,this.set({selected:t})},selectInvert:function(e){e.preventDefault();var t=this.get(),n=t.selected,o=t.colorKeys;console.log(n),o.forEach(function(e){var t=n.indexOf(e.key);t<0?n.push(e.key):n.splice(t,1)}),console.log(n),this.set({selected:n})}};function W(e,t){var n=t.indexOf(e);return n>-1?n:e}function U(e,t){return"number"==typeof e?t[e%t.length]:e}function V(e,t){var n={},o={color:t.hexColor,palette:t.palette};"open"in t&&(o.visible=t.open,n.visible=!0);var i=new P({root:e.root,data:o,_bind:function(t,o){e.get();var i={};!n.visible&&t.visible&&(i.open=o.visible),e._set(i),n={}}});return e.root._beforecreate.push(function(){i._bind({visible:1},i.get())}),i.on("change",function(t){e.update(t)}),{c:function(){i._fragment.c()},m:function(e,t){i._mount(e,t)},p:function(e,t){var o={};e.hexColor&&(o.color=t.hexColor),e.palette&&(o.palette=t.palette),!n.visible&&e.open&&(o.visible=t.open,n.visible=!0),i._set(o),n={}},u:function(){i._unmount()},d:function(){i.destroy(!1)}}}function X(e,t){var n,l,s;function c(t){e.toggle(t)}return{c:function(){n=d("span"),(l=d("a")).textContent="customize colors...",this.h()},h:function(){v(l,"click",c),l.href="#customize",l.className=s="btn btn-small custom "+(t.expanded?"btn-primary":""),m(l,"role","button"),n.className="custom-color-selector-head"},m:function(e,t){i(n,e,t),o(l,n)},p:function(e,t){e.expanded&&s!==(s="btn btn-small custom "+(t.expanded?"btn-primary":""))&&(l.className=s)},u:function(){a(n)},d:function(){p(l,"click",c)}}}function Z(e,t){var n,l,s,c,r,u,f,_,m=t.k,g=(t.each_value,t.k_index,m.defined?"":"×"),x=m.key;return{c:function(){n=d("li"),l=d("div"),s=h(g),c=h("\n                    "),r=d("label"),u=h(x),this.h()},h:function(){l.className="color",b(l,"background",m.color),v(n,"click",oe),n.className=f=t.selected.indexOf(m.key)>-1?"selected":"",n.dataset.series=_=m.key,n._svelte={component:e,each_value:t.each_value,k_index:t.k_index}},m:function(e,t){i(n,e,t),o(l,n),o(s,l),o(c,n),o(r,n),o(u,r)},p:function(e,t){m=t.k,t.each_value,t.k_index,e.colorKeys&&g!==(g=m.defined?"":"×")&&(s.data=g),e.colorKeys&&b(l,"background",m.color),e.colorKeys&&x!==(x=m.key)&&(u.data=x),(e.selected||e.colorKeys)&&f!==(f=t.selected.indexOf(m.key)>-1?"selected":"")&&(n.className=f),e.colorKeys&&_!==(_=m.key)&&(n.dataset.series=_),n._svelte.each_value=t.each_value,n._svelte.k_index=t.k_index},u:function(){a(n)},d:function(){p(n,"click",oe)}}}function ee(e,t){var n,l,s,c={},r={color:t.customColor,palette:t.palette};"openCustom"in t&&(r.visible=t.openCustom,c.visible=!0);var u=new P({root:e.root,data:r,_bind:function(t,n){e.get();var o={};!c.visible&&t.visible&&(o.openCustom=n.visible),e._set(o),c={}}});function f(t){e.reset()}return e.root._beforecreate.push(function(){u._bind({visible:1},u.get())}),u.on("change",function(t){e.updateCustom(t)}),{c:function(){n=d("div"),u._fragment.c(),l=h("\n                "),(s=d("button")).textContent="Reset",this.h()},h:function(){v(s,"click",f),s.className="btn",n.className="select"},m:function(e,t){i(n,e,t),u._mount(n,null),o(l,n),o(s,n)},p:function(e,t){var n={};e.customColor&&(n.color=t.customColor),e.palette&&(n.palette=t.palette),!c.visible&&e.openCustom&&(n.visible=t.openCustom,c.visible=!0),u._set(n),c={}},u:function(){a(n)},d:function(){u.destroy(!1),p(s,"click",f)}}}function te(e,n){var o;return{c:function(){(o=d("div")).textContent="Please select an element on the left to change colors for individual elements...",this.h()},h:function(){o.className="info"},m:function(e,t){i(o,e,t)},p:t,u:function(){a(o)},d:t}}function ne(e,t){for(var l,s,c,r,f,_,m,g,x,y,k,N,C,w,M,L,T,H,$,z,S=t.colorKeys,j=[],A=0;A<S.length;A+=1)j[A]=Z(e,n(n({},t),{each_value:S,k:S[A],k_index:A}));function Y(t){e.selectAll(t)}function F(t){e.selectNone(t)}function K(t){e.selectInvert(t)}function O(e){return e.selected.length?ee:te}var R=O(t),E=R(e,t);function D(t){e.resetAll()}return{c:function(){l=d("div"),s=d("div"),c=d("div"),(r=d("h4")).textContent="Select element(s):",f=h("\n            "),_=d("ul");for(var e=0;e<j.length;e+=1)j[e].c();m=h("\n            "),g=d("div"),x=h("Select:  \n                "),(y=d("a")).textContent="all",k=h("  \n                "),(N=d("a")).textContent="none",C=h("  \n                "),(w=d("a")).textContent="invert",M=h("\n        "),L=d("div"),(T=d("h4")).textContent="Choose a color:",H=h("\n            "),E.c(),$=h("\n            "),(z=d("button")).textContent="Reset all colors",this.h()},h:function(){_.className="dataseries unstyled",v(y,"click",Y),y.href="#/select-all",v(N,"click",F),N.href="#/select-none",v(w,"click",K),w.href="#/select-invert",b(g,"font-size","12px"),b(g,"text-align","center"),b(g,"margin-bottom","10px"),c.className="span2",b(c,"width","43%"),v(z,"click",D),b(z,"margin-top","20px"),z.className="btn",L.className="span2",b(L,"width","42%"),s.className="row",l.className="custom-color-selector-body",b(l,"display","block")},m:function(e,t){i(l,e,t),o(s,l),o(c,s),o(r,c),o(f,c),o(_,c);for(var n=0;n<j.length;n+=1)j[n].m(_,null);o(m,c),o(g,c),o(x,g),o(y,g),o(k,g),o(N,g),o(C,g),o(w,g),o(M,s),o(L,s),o(T,L),o(H,L),E.m(L,null),o($,L),o(z,L)},p:function(t,o){var i=o.colorKeys;if(t.colorKeys||t.selected){for(var a=0;a<i.length;a+=1){var l=n(n({},o),{each_value:i,k:i[a],k_index:a});j[a]?j[a].p(t,l):(j[a]=Z(e,l),j[a].c(),j[a].m(_,null))}for(;a<j.length;a+=1)j[a].u(),j[a].d();j.length=i.length}R===(R=O(o))&&E?E.p(t,o):(E.u(),E.d(),(E=R(e,o)).c(),E.m(L,$))},u:function(){a(l);for(var e=0;e<j.length;e+=1)j[e].u();E.u()},d:function(){u(j),p(y,"click",Y),p(N,"click",F),p(w,"click",K),E.d(),p(z,"click",D)}}}function oe(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.k_index];t.toggleSelect(n.key,e)}function ie(e){M(this,e),this._state=n(n(this.store._init(["vis","theme"]),{open:!1,openCustom:!1,customizable:!1,expanded:!1,selected:[],custom:{}}),e.data),this.store._add(this,["vis","theme"]),this._recompute({$theme:1,$vis:1,customizable:1,axis:1,custom:1,palette:1,value:1,selected:1},this._state),this._handlers.destroy=[T];var t,l,s,c,r,u,v,p,_,m,g,x,y=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(t=this,l=this._state,m=l.hexColor&&V(t,l),g=l.customizable&&X(t,l),x=l.customizable&&l.expanded&&ne(t,l),{c:function(){s=d("div"),c=d("label"),r=h("\n    "),u=d("div"),m&&m.c(),v=h("\n\n        "),g&&g.c(),p=h("\n\n"),x&&x.c(),_=f(),this.h()},h:function(){c.className="control-label",b(c,"width","100px"),u.className="controls",s.className="control-group vis-option-type-color"},m:function(e,t){i(s,e,t),o(c,s),c.innerHTML=l.label,o(r,s),o(u,s),m&&m.m(u,null),o(v,u),g&&g.m(u,null),i(p,e,t),x&&x.m(e,t),i(_,e,t)},p:function(e,n){e.label&&(c.innerHTML=n.label),n.hexColor?m?m.p(e,n):((m=V(t,n)).c(),m.m(u,v)):m&&(m.u(),m.d(),m=null),n.customizable?g?g.p(e,n):((g=X(t,n)).c(),g.m(u,null)):g&&(g.u(),g.d(),g=null),n.customizable&&n.expanded?x?x.p(e,n):((x=ne(t,n)).c(),x.m(_.parentNode,_)):x&&(x.u(),x.d(),x=null)},u:function(){c.innerHTML="",a(s),m&&m.u(),g&&g.u(),a(p),x&&x.u(),a(_)},d:function(){m&&m.d(),g&&g.d(),x&&x.d()}}),this.root._oncreate.push(function(){(function(){var e=this;this.observe("custom",function(t){t&&0===t.length&&(t={}),e.set({custom:t})})}).call(y),y.fire("update",{changed:{$vis:1,customizable:1,axis:1,custom:1,palette:1,$theme:1,value:1,selected:1,label:1,hexColor:1,open:1,expanded:1,colorKeys:1,customColor:1,openCustom:1},current:y._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,L(this._beforecreate),L(this._oncreate),L(this._aftercreate),this._lock=!1)}function ae(e,n){var s,c,r,u,f;return{c:function(){s=d("div"),c=h("For help on custom formats, check the "),r=d("noscript"),u=d("noscript"),f=h("."),this.h()},h:function(){s.className="small svelte-h47p2z"},m:function(e,t){i(s,e,t),o(c,s),o(r,s),r.insertAdjacentHTML("afterend",n.customFormatHelp),o(u,s),o(f,s)},p:function(e,t){e.customFormatHelp&&(l(r,u),r.insertAdjacentHTML("afterend",t.customFormatHelp))},u:function(){l(r,u),a(s)},d:t}}function le(e,n){var l,s,c,r=n.opt,u=(n.each_value,n.opt_index,r.l);return{c:function(){l=d("option"),s=h(u),this.h()},h:function(){l.__value=c=r.f,l.value=l.__value},m:function(e,t){i(l,e,t),o(s,l)},p:function(e,t){r=t.opt,t.each_value,t.opt_index,e.options&&u!==(u=r.l)&&(s.data=u),e.options&&c!==(c=r.f)&&(l.__value=c),l.value=l.__value},u:function(){a(l)},d:t}}function se(e,t){var n,o=!1;function l(){o=!0,e.set({custom:n.value}),o=!1}return{c:function(){n=d("input"),this.h()},h:function(){v(n,"input",l),m(n,"type","text"),n.className="svelte-h47p2z"},m:function(e,o){i(n,e,o),n.value=t.custom},p:function(e,t){o||(n.value=t.custom)},u:function(){a(n)},d:function(){p(n,"input",l)}}}function ce(e){M(this,e),this._state=n(n(this.store._init(["vis","dataset"]),{axis:!1,value:"",custom:"",selected:null}),e.data),this.store._add(this,["vis","dataset"]),this._recompute({$vis:1,$dataset:1,axis:1,axisCol:1},this._state),this._handlers.destroy=[T];var t=this;e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(e,t){for(var l,s,c,r,f,_,m,g,b,k=!1,N="custom"==t.selected&&ae(0,t),C=t.options,w=[],M=0;M<C.length;M+=1)w[M]=le(0,n(n({},t),{each_value:C,opt:C[M],opt_index:M}));function L(){k=!0,e.set({selected:y(_)}),k=!1}var T="custom"==t.selected&&se(e,t);return{c:function(){l=d("div"),s=d("label"),c=h("\n\n    "),r=d("div"),N&&N.c(),f=h("\n\n        "),_=d("select");for(var e=0;e<w.length;e+=1)w[e].c();m=d("option"),g=h("(custom)"),b=h("\n        "),T&&T.c(),this.h()},h:function(){s.className="control-label svelte-h47p2z",m.__value="custom",m.value=m.__value,v(_,"change",L),"selected"in t||e.root._beforecreate.push(L),_.className="svelte-h47p2z",r.className="controls form-inline",l.className="control-group vis-option-custom-format"},m:function(e,n){i(l,e,n),o(s,l),s.innerHTML=t.label,o(c,l),o(r,l),N&&N.m(r,null),o(f,r),o(_,r);for(var a=0;a<w.length;a+=1)w[a].m(_,null);o(m,_),o(g,m),x(_,t.selected),o(b,r),T&&T.m(r,null)},p:function(t,o){t.label&&(s.innerHTML=o.label),"custom"==o.selected?N?N.p(t,o):((N=ae(0,o)).c(),N.m(r,f)):N&&(N.u(),N.d(),N=null);var i=o.options;if(t.options){for(var a=0;a<i.length;a+=1){var l=n(n({},o),{each_value:i,opt:i[a],opt_index:a});w[a]?w[a].p(t,l):(w[a]=le(0,l),w[a].c(),w[a].m(_,m))}for(;a<w.length;a+=1)w[a].u(),w[a].d();w.length=i.length}k||x(_,o.selected),"custom"==o.selected?T?T.p(t,o):((T=se(e,o)).c(),T.m(r,null)):T&&(T.u(),T.d(),T=null)},u:function(){s.innerHTML="",a(l),N&&N.u();for(var e=0;e<w.length;e+=1)w[e].u();T&&T.u()},d:function(){N&&N.d(),u(w),p(_,"change",L),T&&T.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var e=this;this.observe("selected",function(t,n){if(t!=n){var o=e.get().custom;e.set({value:"custom"!=t?t:o+" "})}}),this.observe("value",function(t,n){if(t!=n){for(var o=0,i=e.get().options;o<i.length;o+=1)if(i[o].f==t)return e.set({selected:t});e.set({selected:"custom",custom:t})}}),this.observe("custom",function(t,n){t!=n&&"custom"==e.get().selected&&e.set({value:t})})}).call(t),t.fire("update",{changed:{axisCol:1,$vis:1,$dataset:1,axis:1,label:1,selected:1,customFormatHelp:1,options:1,custom:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),L(this._beforecreate),L(this._oncreate))}function re(e){M(this,e),this._state=n({unit:"",width:"100px"},e.data),this._fragment=function(e,t){var n,l,s,c,r,u,f,_,x,y,k=!1;function N(){e.set({value:g(r.value)})}function C(){e.set({value:g(r.value)})}function w(){k=!0,e.set({value:g(f.value)}),k=!1}return{c:function(){n=d("div"),l=d("label"),s=h("\n    "),c=d("div"),r=d("input"),u=h("  "),f=d("input"),_=h(" "),x=d("span"),y=h(t.unit),this.h()},h:function(){b(l,"width",t.width),l.className="control-label",v(r,"input",N),v(r,"change",C),m(r,"type","range"),r.min=t.min,r.max=t.max,r.step=t.step,r.className="svelte-l16hlj",v(f,"input",w),m(f,"type","number"),f.min=t.min,f.max=t.max,f.step=t.step,f.className="svelte-l16hlj",x.className="unit svelte-l16hlj",c.className="controls",n.className="control-group vis-option-group vis-option-type-number"},m:function(e,a){i(n,e,a),o(l,n),l.innerHTML=t.label,o(s,n),o(c,n),o(r,c),r.value=t.value,o(u,c),o(f,c),f.value=t.value,o(_,c),o(x,c),o(y,x)},p:function(e,t){e.label&&(l.innerHTML=t.label),e.width&&b(l,"width",t.width),r.value=t.value,r.value=t.value,e.min&&(r.min=t.min),e.max&&(r.max=t.max),e.step&&(r.step=t.step),k||(f.value=t.value),e.min&&(f.min=t.min),e.max&&(f.max=t.max),e.step&&(f.step=t.step),e.unit&&(y.data=t.unit)},u:function(){l.innerHTML="",a(n)},d:function(){p(r,"input",N),p(r,"change",C),p(f,"input",w)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function ue(e,t){var n,l,s,c,r,u,f=t.opt,_=(t.each_value,t.opt_index,f.label);function g(){e.set({value:l.__value})}return{c:function(){n=d("label"),l=d("input"),c=h(" "),r=h(_),this.h()},h:function(){e._bindingGroups[0].push(l),v(l,"change",g),m(l,"type","radio"),l.__value=s=f.value,l.value=l.__value,l.disabled=t.disabled,l.className="svelte-a6km24",n.className=u="radio "+(t.disabled?"disabled":"")+" svelte-a6km24"},m:function(e,a){i(n,e,a),o(l,n),l.checked=l.__value===t.value,o(c,n),o(r,n)},p:function(e,t){f=t.opt,t.each_value,t.opt_index,l.checked=l.__value===t.value,e.options&&s!==(s=f.value)&&(l.__value=s),l.value=l.__value,e.disabled&&(l.disabled=t.disabled),e.options&&_!==(_=f.label)&&(r.data=_),e.disabled&&u!==(u="radio "+(t.disabled?"disabled":"")+" svelte-a6km24")&&(n.className=u)},u:function(){a(n)},d:function(){e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(l),1),p(l,"change",g)}}}function de(e){M(this,e),this._state=n({disabled:!1},e.data),this._bindingGroups=[[]],this._fragment=function(e,t){for(var l,s,c,r,f=t.options,v=[],p=0;p<f.length;p+=1)v[p]=ue(e,n(n({},t),{each_value:f,opt:f[p],opt_index:p}));return{c:function(){l=d("div"),s=d("label"),c=h("\n\n    "),r=d("div");for(var e=0;e<v.length;e+=1)v[e].c();this.h()},h:function(){s.className="control-label",r.className="controls form-inline",l.className="control-group vis-option-group vis-option-type-radio"},m:function(e,n){i(l,e,n),o(s,l),s.innerHTML=t.label,o(c,l),o(r,l);for(var a=0;a<v.length;a+=1)v[a].m(r,null)},p:function(t,o){t.label&&(s.innerHTML=o.label);var i=o.options;if(t.disabled||t.options||t.value){for(var a=0;a<i.length;a+=1){var l=n(n({},o),{each_value:i,opt:i[a],opt_index:a});v[a]?v[a].p(t,l):(v[a]=ue(e,l),v[a].c(),v[a].m(r,null))}for(;a<v.length;a+=1)v[a].u(),v[a].d();v.length=i.length}},u:function(){s.innerHTML="",a(l);for(var e=0;e<v.length;e+=1)v[e].u()},d:function(){u(v)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function he(e,n){var l,s,c,r=n.opt,u=(n.each_value,n.opt_index,r.label);return{c:function(){l=d("option"),s=h(u),this.h()},h:function(){l.__value=c=r.value,l.value=l.__value},m:function(e,t){i(l,e,t),o(s,l)},p:function(e,t){r=t.opt,t.each_value,t.opt_index,e.options&&u!==(u=r.label)&&(s.data=u),e.options&&c!==(c=r.value)&&(l.__value=c),l.value=l.__value},u:function(){a(l)},d:t}}function fe(e,t){for(var o,l=t.options,s=[],c=0;c<l.length;c+=1)s[c]=he(0,n(n({},t),{each_value:l,opt:l[c],opt_index:c}));return{c:function(){for(var e=0;e<s.length;e+=1)s[e].c();o=f()},m:function(e,t){for(var n=0;n<s.length;n+=1)s[n].m(e,t);i(o,e,t)},p:function(e,t){var i=t.options;if(e.options){for(var a=0;a<i.length;a+=1){var l=n(n({},t),{each_value:i,opt:i[a],opt_index:a});s[a]?s[a].p(e,l):(s[a]=he(0,l),s[a].c(),s[a].m(o.parentNode,o))}for(;a<s.length;a+=1)s[a].u(),s[a].d();s.length=i.length}},u:function(){for(var e=0;e<s.length;e+=1)s[e].u();a(o)},d:function(){u(s)}}}function ve(e,t){for(var o,l,s=t.optgroup,c=(t.each_value_1,t.optgroup_index,s.options),r=[],h=0;h<c.length;h+=1)r[h]=pe(e,n(n({},t),{each_value_2:c,opt:c[h],opt_index_1:h}));return{c:function(){o=d("optgroup");for(var e=0;e<r.length;e+=1)r[e].c();this.h()},h:function(){m(o,"label",l=s.label)},m:function(e,t){i(o,e,t);for(var n=0;n<r.length;n+=1)r[n].m(o,null)},p:function(t,i){s=i.optgroup,i.each_value_1,i.optgroup_index;var a=s.options;if(t.optgroups){for(var c=0;c<a.length;c+=1){var u=n(n({},i),{each_value_2:a,opt:a[c],opt_index_1:c});r[c]?r[c].p(t,u):(r[c]=pe(e,u),r[c].c(),r[c].m(o,null))}for(;c<r.length;c+=1)r[c].u(),r[c].d();r.length=a.length}t.optgroups&&l!==(l=s.label)&&m(o,"label",l)},u:function(){a(o);for(var e=0;e<r.length;e+=1)r[e].u()},d:function(){u(r)}}}function pe(e,n){n.optgroup,n.each_value_1,n.optgroup_index;var l,s,c,r=n.opt,u=(n.each_value_2,n.opt_index_1,r.label);return{c:function(){l=d("option"),s=h(u),this.h()},h:function(){l.__value=c=r.value,l.value=l.__value},m:function(e,t){i(l,e,t),o(s,l)},p:function(e,t){t.optgroup,t.each_value_1,t.optgroup_index,r=t.opt,t.each_value_2,t.opt_index_1,e.optgroups&&u!==(u=r.label)&&(s.data=u),e.optgroups&&c!==(c=r.value)&&(l.__value=c),l.value=l.__value},u:function(){a(l)},d:t}}function _e(e,t){for(var o,l=t.optgroups,s=[],c=0;c<l.length;c+=1)s[c]=ve(e,n(n({},t),{each_value_1:l,optgroup:l[c],optgroup_index:c}));return{c:function(){for(var e=0;e<s.length;e+=1)s[e].c();o=f()},m:function(e,t){for(var n=0;n<s.length;n+=1)s[n].m(e,t);i(o,e,t)},p:function(t,i){var a=i.optgroups;if(t.optgroups){for(var l=0;l<a.length;l+=1){var c=n(n({},i),{each_value_1:a,optgroup:a[l],optgroup_index:l});s[l]?s[l].p(t,c):(s[l]=ve(e,c),s[l].c(),s[l].m(o.parentNode,o))}for(;l<s.length;l+=1)s[l].u(),s[l].d();s.length=a.length}},u:function(){for(var e=0;e<s.length;e+=1)s[e].u();a(o)},d:function(){u(s)}}}function me(e){M(this,e),this._state=n({disabled:!1,width:"auto",options:[],optgroups:[]},e.data),e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(e,t){var n,l,s,c,r,u,_,m=!1,g=t.options.length&&fe(0,t),k=t.optgroups.length&&_e(e,t);function N(){m=!0,e.set({value:y(r)}),m=!1}return{c:function(){n=d("div"),l=d("label"),s=h("\n\n    "),c=d("div"),r=d("select"),g&&g.c(),u=f(),k&&k.c(),this.h()},h:function(){l.className="control-label",v(r,"change",N),"value"in t||e.root._beforecreate.push(N),r.disabled=t.disabled,b(r,"width",t.width),c.className=_="controls form-inline "+(t.disabled?"disabled":""),n.className="control-group vis-option-type-select"},m:function(e,a){i(n,e,a),o(l,n),l.innerHTML=t.label,o(s,n),o(c,n),o(r,c),g&&g.m(r,null),o(u,r),k&&k.m(r,null),x(r,t.value)},p:function(t,n){t.label&&(l.innerHTML=n.label),n.options.length?g?g.p(t,n):((g=fe(0,n)).c(),g.m(r,u)):g&&(g.u(),g.d(),g=null),n.optgroups.length?k?k.p(t,n):((k=_e(e,n)).c(),k.m(r,null)):k&&(k.u(),k.d(),k=null),m||x(r,n.value),t.disabled&&(r.disabled=n.disabled),t.width&&b(r,"width",n.width),t.disabled&&_!==(_="controls form-inline "+(n.disabled?"disabled":""))&&(c.className=_)},u:function(){l.innerHTML="",a(n),g&&g.u(),k&&k.u()},d:function(){g&&g.d(),k&&k.d(),p(r,"change",N)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),L(this._beforecreate))}n(ie.prototype,$),n(ie.prototype,J),ie.prototype._recompute=function(t,n){t.$theme&&this._differs(n.palette,n.palette=n.$theme.colors.palette)&&(t.palette=!0),(t.$vis||t.customizable||t.axis||t.custom||t.palette)&&this._differs(n.colorKeys,n.colorKeys=B(n))&&(t.colorKeys=!0),(t.value||t.palette)&&this._differs(n.hexColor,n.hexColor=function(e){return U(e.value,e.palette)}(n))&&(t.hexColor=!0),(t.selected||t.palette||t.custom)&&this._differs(n.customColor,n.customColor=function(t){var n=t.selected,o=t.palette,i=t.custom;if(void 0===i[n[0]])return"#ccc";var a=n.filter(function(e){return void 0!==i[e]}).map(function(e){return U(i[e],o)});return a.length?e.average(a,"lab"):"#ccc"}(n))&&(t.customColor=!0)},n(ce.prototype,$),ce.prototype._recompute=function(e,t){(e.$vis||e.$dataset||e.axis)&&this._differs(t.axisCol,t.axisCol=function(e){var t=e.$vis,n=e.$dataset,o=e.axis;if(!t||!o)return null;var i=t.axes()[o];return n.column("object"==typeof i?i[0]:i)}(t))&&(e.axisCol=!0),e.axisCol&&(this._differs(t.customFormatHelp,t.customFormatHelp=function(e){var t=e.axisCol;if(t)return"date"==t.type()?'<a href="http://momentjs.com/docs/#/displaying/format/" target="_blank">moment.js documentation</a>':"number"==t.type()?'<a href="http://numeraljs.com/#format" target="_blank">numeral.js documentation</a>':""}(t))&&(e.customFormatHelp=!0),this._differs(t.options,t.options=function(e){var t=e.axisCol;return t?"number"==t.type()?[{l:"1,000[.00]",f:"0,0.[00]"},{l:"0",f:"0"},{l:"0.0",f:"0.0"},{l:"0.00",f:"0.00"},{l:"0.000",f:"0.000"},{l:"0.[0]",f:"0.[0]"},{l:"0.[00]",f:"0.[00]"},{l:"0%",f:"0%"},{l:"0.0%",f:"0.0%"},{l:"0.00%",f:"0.00%"},{l:"0.[0]%",f:"0.[0]%"},{l:"0.[00]%",f:"0.[00]%"},{l:"10,000",f:"0,0"},{l:"1st",f:"0o"},{l:"123k",f:"0a"},{l:"123.4k",f:"0.[0]a"},{l:"123.45k",f:"0.[00]a"}]:"date"==t.type()?[{l:"2015, 2016",f:"YYYY"},{l:"2015 Q1, 2015 Q2",f:"YYYY [Q]Q"},{l:"2015, Q2, Q3",f:"YYYY|\\QQ"},{l:"2015, Feb, Mar",f:"YYYY|MMM"},{l:"’15, ’16",f:"’YY"},{l:"April, May",f:"MMMM"},{l:"Apr, May",f:"MMM"},{l:"Apr ’15, May ’15",f:"MMM ’YY"},{l:"April, 2, 3",f:"MMM|DD"}]:void 0:[]}(t))&&(e.options=!0))},n(re.prototype,$),n(de.prototype,$),n(me.prototype,$);var ge={select:function(e,t){console.log("dropdown.select",e,t),e.preventDefault(),this.set({value:t.value}),this.fire("change",t.value)}};function be(e,t){var n,l,s,c,r=t.opt,u=(t.each_value,t.opt_index,r.label);return{c:function(){n=d("li"),l=d("a"),this.h()},h:function(){v(l,"click",ye),l.href=s="#/"+r.value,l._svelte={component:e,each_value:t.each_value,opt_index:t.opt_index},n.className=c=(t.value==r.value?"selected":"")+" svelte-1dyyipo"},m:function(e,t){i(n,e,t),o(l,n),l.innerHTML=u},p:function(e,t){r=t.opt,t.each_value,t.opt_index,e.options&&u!==(u=r.label)&&(l.innerHTML=u),e.options&&s!==(s="#/"+r.value)&&(l.href=s),l._svelte.each_value=t.each_value,l._svelte.opt_index=t.opt_index,(e.value||e.options)&&c!==(c=(t.value==r.value?"selected":"")+" svelte-1dyyipo")&&(n.className=c)},u:function(){l.innerHTML="",a(n)},d:function(){p(l,"click",ye)}}}function xe(e,t){for(var o,l=t.options,s=[],c=0;c<l.length;c+=1)s[c]=be(e,n(n({},t),{each_value:l,opt:l[c],opt_index:c}));return{c:function(){for(var e=0;e<s.length;e+=1)s[e].c();o=f()},m:function(e,t){for(var n=0;n<s.length;n+=1)s[n].m(e,t);i(o,e,t)},p:function(t,i){var a=i.options;if(t.value||t.options){for(var l=0;l<a.length;l+=1){var c=n(n({},i),{each_value:a,opt:a[l],opt_index:l});s[l]?s[l].p(t,c):(s[l]=be(e,c),s[l].c(),s[l].m(o.parentNode,o))}for(;l<s.length;l+=1)s[l].u(),s[l].d();s.length=a.length}},u:function(){for(var e=0;e<s.length;e+=1)s[e].u();a(o)},d:function(){u(s)}}}function ye(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.opt_index];t.select(e,n)}function ke(e){var t,l,c,r,u,f,v,p,_,m,g,b,x,y,k;M(this,e),this._state=n({disabled:!1,width:"auto",options:[],optgroups:[]},e.data),this._recompute({value:1,options:1},this._state),this._fragment=(t=this,l=this._state,k=l.options.length&&xe(t,l),{c:function(){c=d("div"),r=d("label"),u=h("\n\n    "),f=d("div"),v=d("div"),p=d("a"),_=d("noscript"),m=h("\n                "),g=d("span"),b=h("\n            "),x=d("ul"),k&&k.c(),this.h()},h:function(){r.className="control-label",g.className="caret svelte-1dyyipo",p.className="btn dropdown-toggle svelte-1dyyipo",p.dataset.toggle="dropdown",p.href="#",x.className="dropdown-menu",v.className="btn-group",f.className=y="controls form-inline "+(l.disabled?"disabled":"")+" svelte-1dyyipo",c.className="control-group vis-option-type-select"},m:function(e,t){i(c,e,t),o(r,c),r.innerHTML=l.label,o(u,c),o(f,c),o(v,f),o(p,v),o(_,p),_.insertAdjacentHTML("beforebegin",l.currentLabel),o(m,p),o(g,p),o(b,v),o(x,v),k&&k.m(x,null)},p:function(e,n){e.label&&(r.innerHTML=n.label),e.currentLabel&&(s(_),_.insertAdjacentHTML("beforebegin",n.currentLabel)),n.options.length?k?k.p(e,n):((k=xe(t,n)).c(),k.m(x,null)):k&&(k.u(),k.d(),k=null),e.disabled&&y!==(y="controls form-inline "+(n.disabled?"disabled":"")+" svelte-1dyyipo")&&(f.className=y)},u:function(){r.innerHTML="",s(_),a(c),k&&k.u()},d:function(){k&&k.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function Ne(e){var t=e-1;return t*t*t+1}function Ce(e,t){var n=t.delay;void 0===n&&(n=0);var o=t.duration;void 0===o&&(o=400);var i=t.easing;void 0===i&&(i=Ne);var a=getComputedStyle(e),l=+a.opacity,s=parseFloat(a.height),c=parseFloat(a.paddingTop),r=parseFloat(a.paddingBottom),u=parseFloat(a.marginTop),d=parseFloat(a.marginBottom),h=parseFloat(a.borderTopWidth),f=parseFloat(a.borderBottomWidth);return{delay:n,duration:o,easing:i,css:function(e){return"overflow: hidden;opacity: "+Math.min(20*e,1)*l+";height: "+e*s+"px;padding-top: "+e*c+"px;padding-bottom: "+e*r+"px;margin-top: "+e*u+"px;margin-bottom: "+e*d+"px;border-top-width: "+e*h+"px;border-bottom-width: "+e*f+"px;"}}}function we(e){var t=this,n=e.changed,o=e.current;n.value&&o.value&&(this.set({highlight:!0}),setTimeout(function(){t.set({highlight:!1})},300))}function Me(e,n){var l,s,c,r,u;return{c:function(){l=d("div"),s=d("div"),this.h()},h:function(){s.className="disabled-msg svelte-z7260i",l.className="svelte-z7260i"},m:function(e,t){i(l,e,t),o(s,l),s.innerHTML=n.disabled_msg},p:function(e,t){(u||e.disabled_msg)&&(s.innerHTML=t.disabled_msg)},i:function(t,n){r||(r=!0,u=!1,e.root._aftercreate.push(function(){c||(c=N(e,l,Ce,{},!0)),c.run(!0,function(){e.fire("intro.end",{node:l})})}),this.m(t,n))},o:function(t){if(!u){u=!0,r=!1;var n=1;c.run(!1,function(){e.fire("outro.end",{node:l}),0==--n&&t(),c=null})}},u:function(){s.innerHTML="",a(l)},d:t}}function Le(e,n){var l,s,c,u,h,f=e._slotted.default;return{c:function(){l=d("div"),s=d("div"),this.h()},h:function(){s.className="switch-content svelte-z7260i",l.className="svelte-z7260i"},m:function(e,t){i(l,e,t),o(s,l),f&&o(f,s)},p:t,i:function(t,n){u||(u=!0,h=!1,e.root._aftercreate.push(function(){c||(c=N(e,l,Ce,{},!0)),c.run(!0,function(){e.fire("intro.end",{node:l})})}),this.m(t,n))},o:function(t){if(!h){h=!0,u=!1;var n=1;c.run(!1,function(){e.fire("outro.end",{node:l}),0==--n&&t(),c=null})}},u:function(){a(l),f&&r(s,f)},d:t}}function Te(e){M(this,e),this._state=n({disabled_msg:"",disabled_state:"auto",disabled:!1,highlight:!1},e.data),this._handlers.state=[we],this._slotted=e.slots||{};var t=this;e.root||(this._oncreate=[],this._aftercreate=[]),this.slots={},this._fragment=function(e,t){var n,l,s,c,r,u,f,_,g,x,y,k,N;function C(){e.set({value:c.checked})}var w=[Me,Le],M=[];function L(e){return e.disabled&&e.disabled_msg?0:!e.disabled&&e.value?1:-1}return~(y=L(t))&&(k=M[y]=w[y](e,t)),{c:function(){n=d("div"),l=d("label"),s=d("label"),c=d("input"),u=d("span"),f=h("\n        "),_=h(t.label),x=h("\n    "),k&&k.c(),this.h()},h:function(){v(c,"change",C),c.className=r=(t.disabled&&"on"==t.disabled_state?"disabled-force-checked":t.disabled&&"off"==t.disabled_state?"disabled-force-unchecked":"")+" svelte-z7260i",c.disabled=t.disabled,m(c,"type","checkbox"),u.className="slider round svelte-z7260i",s.className="switch svelte-z7260i",l.className=g="switch-outer "+(t.disabled?"disabled":"")+" svelte-z7260i",b(l,"padding-left","40px"),n.className=N="control-group vis-option-group vis-option-type-switch "+(t.highlight?"highlight":"")+" svelte-z7260i"},m:function(e,a){i(n,e,a),o(l,n),o(s,l),o(c,s),c.checked=t.value,o(u,s),o(f,l),o(_,l),o(x,n),~y&&M[y].i(n,null)},p:function(t,o){c.checked=o.value,(t.disabled||t.disabled_state)&&r!==(r=(o.disabled&&"on"==o.disabled_state?"disabled-force-checked":o.disabled&&"off"==o.disabled_state?"disabled-force-unchecked":"")+" svelte-z7260i")&&(c.className=r),t.disabled&&(c.disabled=o.disabled),t.label&&(_.data=o.label),t.disabled&&g!==(g="switch-outer "+(o.disabled?"disabled":"")+" svelte-z7260i")&&(l.className=g);var i=y;(y=L(o))===i?~y&&M[y].p(t,o):(k&&k.o(function(){M[i].u(),M[i].d(),M[i]=null}),~y?((k=M[y])||(k=M[y]=w[y](e,o)).c(),k.i(n,null)):k=null),t.highlight&&N!==(N="control-group vis-option-group vis-option-type-switch "+(o.highlight?"highlight":"")+" svelte-z7260i")&&(n.className=N)},u:function(){a(n)},d:function(){p(c,"change",C),~y&&(M[y].u(),M[y].d())}}}(this,this._state),this.root._oncreate.push(function(){var e={highlight:1,disabled:1,disabled_state:1,value:1,label:1,disabled_msg:1};we.call(t,{changed:e,current:t._state}),t.fire("update",{changed:e,current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),L(this._oncreate),L(this._aftercreate))}function He(e){M(this,e),this._state=n({placeholder:""},e.data),this._fragment=function(e,t){var n,l,s,c,r,u,f=!1;function _(){f=!0,e.set({value:u.value}),f=!1}return{c:function(){n=d("div"),l=d("label"),s=h(t.label),c=h("\n    "),r=d("div"),u=d("textarea"),this.h()},h:function(){l.className="control-label",v(u,"input",_),u.placeholder=t.placeholder,b(u,"width",t.width||"auto"),r.className="controls",n.className="control-group vis-option-group vis-option-type-textarea"},m:function(e,a){i(n,e,a),o(l,n),o(s,l),o(c,n),o(r,n),o(u,r),u.value=t.value},p:function(e,t){e.label&&(s.data=t.label),f||(u.value=t.value),e.placeholder&&(u.placeholder=t.placeholder),e.width&&b(u,"width",t.width||"auto")},u:function(){a(n)},d:function(){p(u,"input",_)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function $e(e,n){var l,s,c=n.axis["na-label"]||"--";return{c:function(){l=d("option"),s=h(c),this.h()},h:function(){l.__value="-",l.value=l.__value},m:function(e,t){i(l,e,t),o(s,l)},p:function(e,t){e.axis&&c!==(c=t.axis["na-label"]||"--")&&(s.data=c)},u:function(){a(l)},d:t}}function ze(e,n){var l,s,c,r=n.column,u=(n.each_value,n.column_index,r.name);return{c:function(){l=d("option"),s=h(u),this.h()},h:function(){l.__value=c=r.name,l.value=l.__value},m:function(e,t){i(l,e,t),o(s,l)},p:function(e,t){r=t.column,t.each_value,t.column_index,e.columns&&u!==(u=r.name)&&(s.data=u),e.columns&&c!==(c=r.name)&&(l.__value=c),l.value=l.__value},u:function(){a(l)},d:t}}function Se(e){M(this,e),this._state=n(n(this.store._init(["visMeta","dataset"]),{selected:!1}),e.data),this.store._add(this,["visMeta","dataset"]),this._recompute({axis:1,$visMeta:1,$dataset:1},this._state),this._handlers.destroy=[T];var t=this;e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=function(e,t){for(var l,s,c,r,_,m,g=!1,b=t.$visMeta&&t.$visMeta.axes[t.axis].optional&&$e(0,t),k=t.columns,N=[],C=0;C<k.length;C+=1)N[C]=ze(0,n(n({},t),{each_value:k,column:k[C],column_index:C}));function w(){g=!0,e.set({selected:y(_)}),g=!1}return{c:function(){l=d("div"),s=d("label"),c=h("\n\n    "),r=d("div"),_=d("select"),b&&b.c(),m=f();for(var e=0;e<N.length;e+=1)N[e].c();this.h()},h:function(){s.className="control-label svelte-7khi8i",v(_,"change",w),"selected"in t||e.root._beforecreate.push(w),_.className="svelte-7khi8i",r.className="controls form-inline",l.className="control-group vis-option-group"},m:function(e,n){i(l,e,n),o(s,l),s.innerHTML=t.label,o(c,l),o(r,l),o(_,r),b&&b.m(_,null),o(m,_);for(var a=0;a<N.length;a+=1)N[a].m(_,null);x(_,t.selected)},p:function(e,t){e.label&&(s.innerHTML=t.label),t.$visMeta&&t.$visMeta.axes[t.axis].optional?b?b.p(e,t):((b=$e(0,t)).c(),b.m(_,m)):b&&(b.u(),b.d(),b=null);var o=t.columns;if(e.columns){for(var i=0;i<o.length;i+=1){var a=n(n({},t),{each_value:o,column:o[i],column_index:i});N[i]?N[i].p(e,a):(N[i]=ze(0,a),N[i].c(),N[i].m(_,null))}for(;i<N.length;i+=1)N[i].u(),N[i].d();N.length=o.length}g||x(_,t.selected)},u:function(){s.innerHTML="",a(l),b&&b.u();for(var e=0;e<N.length;e+=1)N[e].u()},d:function(){b&&b.d(),u(N),p(_,"change",w)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var e=this;e.observe("selected",function(t){if(t){var n=e.get().axis,o=_.clone(window.chart.get("metadata.axes",{}));"-"==t?delete o[n]:o[n]=t,window.chart.set("metadata.axes",o)}}),e.store.observe("visMeta",function(t){var n=e.get(),o=n.selected,i=n.axis;!o&&t&&(o=window.chart.get("metadata.axes")[i],e.set({selected:o}))})}).call(t),t.fire("update",{changed:{axis:1,$visMeta:1,$dataset:1,label:1,selected:1,columns:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),L(this._beforecreate),L(this._oncreate))}function je(e,n){var l,s,c,u,h=e._slotted.default;return{c:function(){l=d("div"),s=d("fieldset"),c=d("div"),this.h()},h:function(){c.className="control-group vis-option-group",s.id="visOptions",l.className=u="section "+n.id},m:function(e,t){i(l,e,t),o(s,l),o(c,s),h&&o(h,c)},p:function(e,t){e.id&&u!==(u="section "+t.id)&&(l.className=u)},u:function(){a(l),h&&r(c,h)},d:t}}function Ae(e){var t,o,l,s;M(this,e),this._state=n({},e.data),this._slotted=e.slots||{},this.slots={},this._fragment=(t=this,o=this._state,s=o.id==o.active&&je(t,o),{c:function(){s&&s.c(),l=f()},m:function(e,t){s&&s.m(e,t),i(l,e,t)},p:function(e,n){n.id==n.active?s?s.p(e,n):((s=je(t,n)).c(),s.m(l.parentNode,l)):s&&(s.u(),s.d(),s=null)},u:function(){s&&s.u(),a(l)},d:function(){s&&s.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}n(ke.prototype,$),n(ke.prototype,ge),ke.prototype._recompute=function(e,t){(e.value||e.options)&&this._differs(t.currentLabel,t.currentLabel=function(e){for(var t=e.value,n=e.options,o=0;o<n.length;o++)if(n[o].value==t)return n[o].label;return"(select an item)"}(t))&&(e.currentLabel=!0)},n(Te.prototype,$),n(He.prototype,$),n(Se.prototype,$),Se.prototype._recompute=function(e,t){(e.axis||e.$visMeta||e.$dataset)&&this._differs(t.columns,t.columns=function(e){var t=e.axis,n=e.$visMeta,o=e.$dataset,i=[];return o&&n&&t?(o.eachColumn(function(e){_.indexOf(n.axes[t].accepts,e.type())>-1&&i.push({name:e.name()})}),i):[]}(t))&&(e.columns=!0)},n(Ae.prototype,$);var Ye={toggle:function(){var e=this.get(),t=e.open,n=e.id;if(n){var o=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};o["locator-map"]||(o["locator-map"]={}),o["locator-map"][n]="open"==o["locator-map"][n]?"closed":"open",window.localStorage.setItem("dw-vis-groups",JSON.stringify(o))}this.set({open:!t})}};function Fe(e,n){var l,s=e._slotted.default;return{c:function(){l=d("div"),this.h()},h:function(){l.className="option-group-content vis-option-type-chart-description"},m:function(e,t){i(l,e,t),s&&o(s,l)},u:function(){a(l),s&&r(l,s)},d:t}}function Ke(e){M(this,e),this._state=n({id:!1,open:!0},e.data),this._slotted=e.slots||{};var t=this;e.root||(this._oncreate=[]),this.slots={},this._fragment=function(e,t){var n,l,s,r,u,f,_,m,g;function b(t){e.toggle()}var x=t.open&&Fe(e);return{c:function(){n=d("div"),l=d("label"),s=d("i"),r=h("\n        "),u=d("i"),f=h("\n        "),_=d("noscript"),m=h("\n\n    "),x&&x.c(),this.h()},h:function(){s.className="fa fa-chevron-up expand-group pull-right",u.className="fa fa-chevron-down collapse-group pull-right",v(l,"click",b),l.className="group-title",n.className=g="vis-option-type-group "+(t.open?"group-open":"")},m:function(e,a){i(n,e,a),o(l,n),o(s,l),o(r,l),o(u,l),o(f,l),o(_,l),_.insertAdjacentHTML("afterend",t.label),o(m,n),x&&x.m(n,null)},p:function(t,o){t.label&&(c(_),_.insertAdjacentHTML("afterend",o.label)),o.open?x||((x=Fe(e)).c(),x.m(n,null)):x&&(x.u(),x.d(),x=null),t.open&&g!==(g="vis-option-type-group "+(o.open?"group-open":""))&&(n.className=g)},u:function(){c(_),a(n),x&&x.u()},d:function(){p(l,"click",b),x&&x.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var e=this.get().id;if(e){var t=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};t["locator-map"]&&t["locator-map"][e]&&this.set({open:"closed"!=t["locator-map"][e]})}}).call(t),t.fire("update",{changed:{open:1,label:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),L(this._oncreate))}return n(Ke.prototype,$),n(Ke.prototype,Ye),{Checkbox:z,Color:ie,ColorPicker:P,Group:Ke,NumberInput:re,Switch:Te,Dropdown:ke,Radio:de,Select:me,SelectAxisColumn:Se,CustomFormat:ce,Section:Ae,TextArea:He}});
