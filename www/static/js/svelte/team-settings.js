!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@datawrapper/shared/escapeHtml")):"function"==typeof define&&define.amd?define("svelte/team-settings",["@datawrapper/shared/escapeHtml"],t):(e=e||self)["team-settings"]=t(e.escapeHtml)}(this,(function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function n(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var i=n((function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}));var a=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i};var s=function(e){if(Array.isArray(e))return a(e)};var r=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var o=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}};var l=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var c=function(e){return s(e)||r(e)||o(e)||l()};function u(){}function d(e,t){for(var n in t)e[n]=t[n];return e}function f(e,t){for(var n in t)e[n]=1;return e}function m(e){e()}function p(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n)}function v(e){e.parentNode.removeChild(e)}function g(e,t){for(;e.nextSibling&&e.nextSibling!==t;)e.parentNode.removeChild(e.nextSibling)}function b(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}function _(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}function y(e,t){for(;e.nextSibling;)t.appendChild(e.nextSibling)}function w(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(){return document.createDocumentFragment()}function N(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function x(){return document.createComment("")}function H(e,t,n,i){e.addEventListener(t,n,i)}function M(e,t,n,i){e.removeEventListener(t,n,i)}function O(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function C(e,t){e.data=""+t}function A(e,t,n){e.style.setProperty(t,n)}function L(e,t){for(var n=0;n<e.options.length;n+=1){var i=e.options[n];if(i.__value===t)return void(i.selected=!0)}}function P(e){var t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function E(e,t,n){e.classList[n?"add":"remove"](t)}function U(e){return e}function j(e,t,n,i,a){var s,r,o,l=n.call(e,t,i),c=!1;return{t:a?0:1,running:!1,program:null,pending:null,run:function(e,t){var n=this;"function"==typeof l?D.wait().then((function(){l=l(),n._run(e,t)})):this._run(e,t)},_run:function(e,n){s=l.duration||300,r=l.easing||U;var i={start:window.performance.now()+(l.delay||0),b:e,callback:n||u};a&&!c&&(l.css&&l.delay&&(o=t.style.cssText,t.style.cssText+=l.css(0,1)),l.tick&&l.tick(0,1),c=!0),e||(i.group=S.current,S.current.remaining+=1),l.delay?this.pending=i:this.start(i),this.running||(this.running=!0,D.add(this))},start:function(n){if(e.fire("".concat(n.b?"intro":"outro",".start"),{node:t}),n.a=this.t,n.delta=n.b-n.a,n.duration=s*Math.abs(n.b-n.a),n.end=n.start+n.duration,l.css){l.delay&&(t.style.cssText=o);var i=function(e,t,n){for(var i=e.a,a=e.b,s=e.delta,r=16.666/e.duration,o="{\n",l=0;l<=1;l+=r){var c=i+s*t(l);o+=100*l+"%{".concat(n(c,1-c),"}\n")}return o+"100% {".concat(n(a,1-a),"}\n}")}(n,r,l.css);D.addRule(i,n.name="__svelte_"+function(e){for(var t=5381,n=e.length;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(i)),t.style.animation=(t.style.animation||"").split(", ").filter((function(e){return e&&(n.delta<0||!/__svelte/.test(e))})).concat("".concat(n.name," ").concat(n.duration,"ms linear 1 forwards")).join(", ")}this.program=n,this.pending=null},update:function(e){var t=this.program;if(t){var n=e-t.start;this.t=t.a+t.delta*r(n/t.duration),l.tick&&l.tick(this.t,1-this.t)}},done:function(){var n=this.program;this.t=n.b,l.tick&&l.tick(this.t,1-this.t),e.fire("".concat(n.b?"intro":"outro",".end"),{node:t}),n.b||n.invalidated?l.css&&D.deleteRule(t,n.name):(n.group.callbacks.push((function(){n.callback(),l.css&&D.deleteRule(t,n.name)})),0==--n.group.remaining&&n.group.callbacks.forEach(m)),this.running=!!this.pending},abort:function(e){this.program&&(e&&l.tick&&l.tick(1,0),l.css&&D.deleteRule(t,this.program.name),this.program=this.pending=null,this.running=!1)},invalidate:function(){this.program&&(this.program.invalidated=!0)}}}var S={};function I(){S.current={remaining:0,callbacks:[]}}var D={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},promise:null,add:function(e){this.transitions.push(e),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function(e,t){if(!this.stylesheet){var n=N("style");document.head.appendChild(n),D.stylesheet=n.sheet}this.activeRules[t]||(this.activeRules[t]=!0,this.stylesheet.insertRule("@keyframes ".concat(t," ").concat(e),this.stylesheet.cssRules.length))},next:function(){this.running=!1;for(var e=window.performance.now(),t=this.transitions.length;t--;){var n=this.transitions[t];n.program&&e>=n.program.end&&n.done(),n.pending&&e>=n.pending.start&&n.start(n.pending),n.running?(n.update(e),this.running=!0):n.pending||this.transitions.splice(t,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(var i=this.stylesheet.cssRules.length;i--;)this.stylesheet.deleteRule(i);this.activeRules={}}},deleteRule:function(e,t){e.style.animation=e.style.animation.split(", ").filter((function(e){return e&&-1===e.indexOf(t)})).join(", ")},wait:function(){return D.promise||(D.promise=Promise.resolve(),D.promise.then((function(){D.promise=null}))),D.promise}};function q(e,n){var i,a=n.token={};function s(e,i,s,r){if(n.token===a){n.resolved=s&&t({},s,r);var o=d(d({},n.ctx),n.resolved),l=e&&(n.current=e)(n.component,o);n.block&&(n.blocks?n.blocks.forEach((function(e,t){t!==i&&e&&(I(),e.o((function(){e.d(1),n.blocks[t]=null})))})):n.block.d(1),l.c(),l[l.i?"i":"m"](n.mount(),n.anchor),n.component.root.set({})),n.block=l,n.blocks&&(n.blocks[i]=l)}}if((i=e)&&"function"==typeof i.then){if(e.then((function(e){s(n.then,1,n.value,e)}),(function(e){s(n.catch,2,n.error,e)})),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,e),!0;n.resolved=t({},n.value,e)}}function R(){return Object.create(null)}function W(e,t){return e!=e?t==t:e!==t||e&&"object"===i(e)||"function"==typeof e}function z(e,t){return e!=e?t==t:e!==t}function B(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var i=0;i<n.length;i+=1){var a=n[i];if(!a.__calling)try{a.__calling=!0,a.call(this,t)}finally{a.__calling=!1}}}function F(e){e._lock=!0,J(e._beforecreate),J(e._oncreate),J(e._aftercreate),e._lock=!1}function $(){return this._state}function V(e,t){e._handlers=R(),e._slots=R(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function G(e,t){var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}}function J(e){for(;e&&e.length;)e.shift()()}var Z={destroy:function(e){this.destroy=u,this.fire("destroy"),this.set=u,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:$,fire:B,on:G,set:function(e){this._set(d({},e)),this.root._lock||F(this.root)},_recompute:u,_set:function(e){var t=this._state,n={},i=!1;for(var a in e=d(this._staged,e),this._staged={},e)this._differs(e[a],t[a])&&(n[a]=i=!0);i&&(this._state=d(d({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:t}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:t})))},_stage:function(e){d(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:W},X={};function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(X[e]=window.__dw.vis.meta.locale||{}):X[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function Q(e){var t=arguments,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(e=e.trim(),X[n]||K(n),!X[n][e])return"MISSING:"+e;var i=X[n][e];return"string"==typeof i&&arguments.length>2&&(i=i.replace(/\$(\d)/g,(function(e,n){return n=2+Number(n),void 0===t[n]?e:t[n]}))),i}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;return"string"!=typeof e||e.length<t+n+3?e:e.substr(0,t).trim()+"…"+e.substr(e.length-n).trim()}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,i){var a=document.createElement("script");a.src=e,a.onload=function(){t&&t(),n()},a.onerror=i,document.body.appendChild(a)}))}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,i){var a=document.createElement("link");a.rel="stylesheet",a.href=e,a.onload=function(){t&&t(),n()},a.onerror=i,document.head.appendChild(a)}))}var ne={activateTab:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.module)return n&&n.preventDefault(),void Promise.all([te(e.css),ee(e.js||e.src)]).then((function(){require([e.module],(function(n){e.ui=n.App,e.module=null;var i=t.get().groups;t.set({groups:i,activeTab:e})}))}));e.ui&&(n&&n.preventDefault(),this.set({activeTab:e}))},onTabChange:function(e,t){e.onchange&&e.onchange(t,this.refs.currentTabUi)}};function ie(e){var t=this._svelte,n=t.component,i=t.ctx;n.activateTab(i.tab,e)}function ae(e,t,n){var i=Object.create(e);return i.tab=t[n],i}function se(e,t,n){var i=Object.create(e);return i.group=t[n],i}function re(e,t){var n,i,a,s,r,o,l,c=t.tab.title;return{c:function(){n=N("li"),i=N("a"),a=N("i"),r=k("   "),o=k(c),a.className=s=t.tab.icon+" svelte-5we305",i._svelte={component:e,ctx:t},H(i,"click",ie),i.href=l=t.tab.url||"/".concat(t.basePath,"/").concat(t.tab.id),i.className="svelte-5we305",n.className="svelte-5we305",E(n,"active",t.activeTab&&t.activeTab.id===t.tab.id)},m:function(e,t){h(e,n,t),p(n,i),p(i,a),p(i,r),p(i,o)},p:function(e,r){t=r,e.groups&&s!==(s=t.tab.icon+" svelte-5we305")&&(a.className=s),e.groups&&c!==(c=t.tab.title)&&C(o,c),i._svelte.ctx=t,(e.groups||e.basePath)&&l!==(l=t.tab.url||"/".concat(t.basePath,"/").concat(t.tab.id))&&(i.href=l),(e.activeTab||e.groups)&&E(n,"active",t.activeTab&&t.activeTab.id===t.tab.id)},d:function(e){e&&v(n),M(i,"click",ie)}}}function oe(e,t){for(var n,i,a,s,r=t.group.title,o=t.group.tabs,l=[],c=0;c<o.length;c+=1)l[c]=re(e,ae(t,o,c));return{c:function(){n=N("div"),i=k(r),a=k("\n\n        "),s=N("ul");for(var e=0;e<l.length;e+=1)l[e].c();n.className="group svelte-5we305",s.className="nav nav-stacked nav-tabs"},m:function(e,t){h(e,n,t),p(n,i),h(e,a,t),h(e,s,t);for(var r=0;r<l.length;r+=1)l[r].m(s,null)},p:function(t,n){if(t.groups&&r!==(r=n.group.title)&&C(i,r),t.activeTab||t.groups||t.basePath){o=n.group.tabs;for(var a=0;a<o.length;a+=1){var c=ae(n,o,a);l[a]?l[a].p(t,c):(l[a]=re(e,c),l[a].c(),l[a].m(s,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=o.length}},d:function(e){e&&(v(n),v(a),v(s)),w(l,e)}}}function le(e,t){var n,i,a,s,r,o,l=e._slotted.aboveContent,c=e._slotted.belowContent,u=[t.activeTab.data],f=t.activeTab.ui;function m(t){for(var n={},i=0;i<u.length;i+=1)n=d(n,u[i]);return{root:e.root,store:e.store,data:n}}if(f)var g=new f(m());function b(n){e.onTabChange(t.activeTab,n)}return g&&g.on("change",b),{c:function(){n=N("div"),a=k("\n        "),g&&g._fragment.c(),s=k("\n        "),n.className=o="span10 account-page-content tab-"+t.activeTab.id+" svelte-5we305"},m:function(t,o){h(t,n,o),l&&(p(n,l),p(n,i||(i=x()))),p(n,a),g&&(g._mount(n,null),e.refs.currentTabUi=g),p(n,s),c&&(p(n,r||(r=x())),p(n,c))},p:function(i,a){t=a;var r=i.activeTab?function(e,t){for(var n={},i={},a={},s=e.length;s--;){var r=e[s],o=t[s];if(o){for(var l in r)l in o||(i[l]=1);for(var l in o)a[l]||(n[l]=o[l],a[l]=1);e[s]=o}else for(var l in r)a[l]=1}for(var l in i)l in n||(n[l]=void 0);return n}(u,[t.activeTab.data]):{};f!==(f=t.activeTab.ui)?(g&&g.destroy(),f?((g=new f(m()))._fragment.c(),g._mount(n,s),g.on("change",b),e.refs.currentTabUi=g):(g=null,e.refs.currentTabUi===g&&(e.refs.currentTabUi=null))):f&&g._set(r),i.activeTab&&o!==(o="span10 account-page-content tab-"+t.activeTab.id+" svelte-5we305")&&(n.className=o)},d:function(e){e&&v(n),l&&function(e,t){for(var n=e.parentNode;n.firstChild!==e;)t.appendChild(n.firstChild)}(i,l),g&&g.destroy(),c&&y(r,c)}}}function ce(e){V(this,e),this.refs={},this._state=d({groups:[],basePath:"",activeTab:null},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){for(var n,i,a,s,r,o=e._slotted.belowMenu,l=t.groups,c=[],u=0;u<l.length;u+=1)c[u]=oe(e,se(t,l,u));var d=t.activeTab&&le(e,t);return{c:function(){n=N("div"),i=N("div");for(var e=0;e<c.length;e+=1)c[e].c();a=k("\n        "),r=k("\n    "),d&&d.c(),i.className="span2 svelte-5we305",n.className="row"},m:function(e,t){h(e,n,t),p(n,i);for(var l=0;l<c.length;l+=1)c[l].m(i,null);p(i,a),o&&(p(i,s||(s=x())),p(i,o)),p(n,r),d&&d.m(n,null)},p:function(t,s){if(t.groups||t.activeTab||t.basePath){l=s.groups;for(var r=0;r<l.length;r+=1){var o=se(s,l,r);c[r]?c[r].p(t,o):(c[r]=oe(e,o),c[r].c(),c[r].m(i,a))}for(;r<c.length;r+=1)c[r].d(1);c.length=l.length}s.activeTab?d?d.p(t,s):((d=le(e,s)).c(),d.m(n,null)):d&&(d.d(1),d=null)},d:function(e){e&&v(n),w(c,e),o&&y(s,o),d&&d.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}d(ce.prototype,Z),d(ce.prototype,ne);var ue={true:"ASC",false:"DESC"},de=ue.true;var fe={sort:function(e,t){e.preventDefault();var n,i=(n=this.get(),t===n.orderBy?ue[n.order!==de]:de);this.set({orderBy:t,order:i}),this.fire("sort",{orderBy:t,order:i})}};function me(e){var t=this._svelte,n=t.component,i=t.ctx;n.sort(e,i.item.orderBy)}function pe(e,t,n){var i=Object.create(e);return i.item=t[n],i}function he(e,t,n){var i=Object.create(e);return i.item=t[n],i}function ve(e,t){var n;return{c:function(){A(n=N("col"),"width",t.item.width)},m:function(e,t){h(e,n,t)},p:function(e,t){e.columnHeaders&&A(n,"width",t.item.width)},d:function(e){e&&v(n)}}}function ge(e,t){var n,i,a=t.item.title;return{c:function(){n=N("span"),i=k(a),n.className="col"},m:function(e,t){h(e,n,t),p(n,i)},p:function(e,t){e.columnHeaders&&a!==(a=t.item.title)&&C(i,a)},d:function(e){e&&v(n)}}}function be(e,t){var n,i,a,s,r=t.item.title;return{c:function(){n=N("a"),i=k(r),n._svelte={component:e,ctx:t},H(n,"click",me),n.className=a="sortable "+(t.isActive(t.item)?t.isAscending?"sortable-asc":"sortable-desc":"")+" svelte-l1s1ms",n.href=s="?orderBy=".concat(t.item.orderBy)},m:function(e,t){h(e,n,t),p(n,i)},p:function(e,o){t=o,e.columnHeaders&&r!==(r=t.item.title)&&C(i,r),n._svelte.ctx=t,(e.isActive||e.columnHeaders||e.isAscending)&&a!==(a="sortable "+(t.isActive(t.item)?t.isAscending?"sortable-asc":"sortable-desc":"")+" svelte-l1s1ms")&&(n.className=a),e.columnHeaders&&s!==(s="?orderBy=".concat(t.item.orderBy))&&(n.href=s)},d:function(e){e&&v(n),M(n,"click",me)}}}function _e(e,t){var n,i;function a(e){return e.item.orderBy?be:ge}var s=a(t),r=s(e,t);return{c:function(){n=N("th"),r.c(),n.className=i=(t.item.className?t.item.className:"")+" svelte-l1s1ms"},m:function(e,t){h(e,n,t),r.m(n,null)},p:function(t,o){s===(s=a(o))&&r?r.p(t,o):(r.d(1),(r=s(e,o)).c(),r.m(n,null)),t.columnHeaders&&i!==(i=(o.item.className?o.item.className:"")+" svelte-l1s1ms")&&(n.className=i)},d:function(e){e&&v(n),r.d()}}}function ye(e){V(this,e),this._state=d({order:de,orderBy:""},e.data),this._recompute({orderBy:1,order:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){for(var n,i,a,s,r,o,l,c,u=e._slotted.default,d=t.columnHeaders,f=[],m=0;m<d.length;m+=1)f[m]=ve(e,he(t,d,m));var g=t.columnHeaders,b=[];for(m=0;m<g.length;m+=1)b[m]=_e(e,pe(t,g,m));return{c:function(){n=N("div"),i=N("table"),a=N("colgroup");for(var e=0;e<f.length;e+=1)f[e].c();s=k("\n\n        "),r=N("thead"),o=N("tr");for(e=0;e<b.length;e+=1)b[e].c();l=k("\n\n        "),c=N("tbody"),i.className="table svelte-l1s1ms",n.className="table-container svelte-l1s1ms"},m:function(e,t){h(e,n,t),p(n,i),p(i,a);for(var d=0;d<f.length;d+=1)f[d].m(a,null);p(i,s),p(i,r),p(r,o);for(d=0;d<b.length;d+=1)b[d].m(o,null);p(i,l),p(i,c),u&&p(c,u)},p:function(t,n){if(t.columnHeaders){d=n.columnHeaders;for(var i=0;i<d.length;i+=1){var s=he(n,d,i);f[i]?f[i].p(t,s):(f[i]=ve(e,s),f[i].c(),f[i].m(a,null))}for(;i<f.length;i+=1)f[i].d(1);f.length=d.length}if(t.columnHeaders||t.isActive||t.isAscending){g=n.columnHeaders;for(i=0;i<g.length;i+=1){var r=pe(n,g,i);b[i]?b[i].p(t,r):(b[i]=_e(e,r),b[i].c(),b[i].m(o,null))}for(;i<b.length;i+=1)b[i].d(1);b.length=g.length}},d:function(e){e&&v(n),w(f,e),w(b,e),u&&_(c,u)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function we(e,t,n){var i=Object.create(e);return i.opt=t[n],i}function Te(e,t,n){var i=Object.create(e);return i.optgroup=t[n],i}function Ne(e,t,n){var i=Object.create(e);return i.opt=t[n],i}function ke(e,t){for(var n,i=t.options,a=[],s=0;s<i.length;s+=1)a[s]=xe(e,Ne(t,i,s));return{c:function(){for(var e=0;e<a.length;e+=1)a[e].c();n=x()},m:function(e,t){for(var i=0;i<a.length;i+=1)a[i].m(e,t);h(e,n,t)},p:function(t,s){if(t.options||t.value){i=s.options;for(var r=0;r<i.length;r+=1){var o=Ne(s,i,r);a[r]?a[r].p(t,o):(a[r]=xe(e,o),a[r].c(),a[r].m(n.parentNode,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},d:function(e){w(a,e),e&&v(n)}}}function xe(e,t){var n,i,a,s,r=t.opt.label;return{c:function(){n=N("option"),i=k(r),n.__value=a=t.opt.value,n.value=n.__value,n.selected=s=t.opt.value===t.value},m:function(e,t){h(e,n,t),p(n,i)},p:function(e,t){e.options&&r!==(r=t.opt.label)&&C(i,r),e.options&&a!==(a=t.opt.value)&&(n.__value=a),n.value=n.__value,(e.options||e.value)&&s!==(s=t.opt.value===t.value)&&(n.selected=s)},d:function(e){e&&v(n)}}}function He(e,t){for(var n,i=t.optgroups,a=[],s=0;s<i.length;s+=1)a[s]=Oe(e,Te(t,i,s));return{c:function(){for(var e=0;e<a.length;e+=1)a[e].c();n=x()},m:function(e,t){for(var i=0;i<a.length;i+=1)a[i].m(e,t);h(e,n,t)},p:function(t,s){if(t.optgroups||t.value){i=s.optgroups;for(var r=0;r<i.length;r+=1){var o=Te(s,i,r);a[r]?a[r].p(t,o):(a[r]=Oe(e,o),a[r].c(),a[r].m(n.parentNode,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},d:function(e){w(a,e),e&&v(n)}}}function Me(e,t){var n,i,a,s,r=t.opt.label;return{c:function(){n=N("option"),i=k(r),n.__value=a=t.opt.value,n.value=n.__value,n.selected=s=t.opt.value===t.value},m:function(e,t){h(e,n,t),p(n,i)},p:function(e,t){e.optgroups&&r!==(r=t.opt.label)&&C(i,r),e.optgroups&&a!==(a=t.opt.value)&&(n.__value=a),n.value=n.__value,(e.optgroups||e.value)&&s!==(s=t.opt.value===t.value)&&(n.selected=s)},d:function(e){e&&v(n)}}}function Oe(e,t){for(var n,i,a=t.optgroup.options,s=[],r=0;r<a.length;r+=1)s[r]=Me(0,we(t,a,r));return{c:function(){n=N("optgroup");for(var e=0;e<s.length;e+=1)s[e].c();O(n,"label",i=t.optgroup.label)},m:function(e,t){h(e,n,t);for(var i=0;i<s.length;i+=1)s[i].m(n,null)},p:function(e,t){if(e.optgroups||e.value){a=t.optgroup.options;for(var r=0;r<a.length;r+=1){var o=we(t,a,r);s[r]?s[r].p(e,o):(s[r]=Me(0,o),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}e.optgroups&&i!==(i=t.optgroup.label)&&O(n,"label",i)},d:function(e){e&&v(n),w(s,e)}}}function Ce(e){V(this,e),this._state=d({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[],value:null,class:""},e.data),this._intro=!0,this._fragment=function(e,t){var n,i,a,s=!1,r=t.options.length&&ke(e,t),o=t.optgroups.length&&He(e,t);function l(){s=!0,e.set({value:P(n)}),s=!1}function c(t){e.fire("change",t)}return{c:function(){n=N("select"),r&&r.c(),i=x(),o&&o.c(),H(n,"change",l),"value"in t||e.root._beforecreate.push(l),H(n,"change",c),n.className=a="select-css "+t.class+" svelte-v0oq4b",n.disabled=t.disabled,A(n,"width",t.width)},m:function(e,a){h(e,n,a),r&&r.m(n,null),p(n,i),o&&o.m(n,null),L(n,t.value)},p:function(t,l){l.options.length?r?r.p(t,l):((r=ke(e,l)).c(),r.m(n,i)):r&&(r.d(1),r=null),l.optgroups.length?o?o.p(t,l):((o=He(e,l)).c(),o.m(n,null)):o&&(o.d(1),o=null),!s&&t.value&&L(n,l.value),t.class&&a!==(a="select-css "+l.class+" svelte-v0oq4b")&&(n.className=a),t.disabled&&(n.disabled=l.disabled),t.width&&A(n,"width",l.width)},d:function(e){e&&v(n),r&&r.d(),o&&o.d(),M(n,"change",l),M(n,"change",c)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}d(ye.prototype,Z),d(ye.prototype,fe),ye.prototype._recompute=function(e,t){var n;e.orderBy&&this._differs(t.isActive,t.isActive=(n=t.orderBy,function(e){return n===e.orderBy}))&&(e.isActive=!0),e.order&&this._differs(t.isAscending,t.isAscending=t.order===de)&&(e.isAscending=!0)},d(Ce.prototype,Z);var Ae=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Le=n((function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,i)}e.exports=t}));var Pe=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)};var Ee=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var Ue=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?Ee(e):t},je=n((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}));var Se=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")};var Ie=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}},De=n((function(e){function t(n,i,a){return Ie()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Le(a,n.prototype),a},t.apply(null,arguments)}e.exports=t})),qe=n((function(e){function t(n){var i="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!Se(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return De(e,arguments,je(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Le(t,e)},t(n)}e.exports=t}));var Re=function(e,t){if(null==e)return{};var n,i,a={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(a[n]=e[n]);return a};var We=function(e,t){if(null==e)return{};var n,i,a=Re(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},ze=n((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function a(){}function s(t,n,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},a.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var r=JSON.stringify(n);/^[\{\[]/.test(r)&&(n=r)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var l in s)s[l]&&(o+="; "+l,!0!==s[l]&&(o+="="+s[l].split(";")[0]));return document.cookie=t+"="+n+o}}function r(e,n){if("undefined"!=typeof document){for(var a={},s=document.cookie?document.cookie.split("; "):[],r=0;r<s.length;r++){var o=s[r].split("="),l=o.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(o[0]);if(l=(i.read||i)(l,c)||t(l),n)try{l=JSON.parse(l)}catch(e){}if(a[c]=l,e===c)break}catch(e){}}return e?a[e]:a}}return a.set=s,a.get=function(e){return r(e,!1)},a.getJSON=function(e){return r(e,!0)},a.remove=function(t,n){s(t,"",e(n,{expires:-1}))},a.defaults={},a.withConverter=n,a}((function(){}))},e.exports=n()}));function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=je(e);if(t){var a=je(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Ue(this,n)}}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Fe(Object(i),!0).forEach((function(n){t(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ve=new Set(["get","head","options","trace"]);function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.fetch)try{t.fetch=window.fetch}catch(e){throw new Error("Neither options.fetch nor window.fetch is defined.")}if(!t.baseUrl)try{t.baseUrl="//".concat(window.dw.backend.__api_domain)}catch(e){throw new Error("Neither options.baseUrl nor window.dw is defined.")}var n,i=$e($e({payload:null,raw:!1,method:"GET",mode:"cors",credentials:"include"},t),{},{headers:$e({"Content-Type":"application/json"},t.headers)}),a=i.payload,s=i.baseUrl,r=i.fetch,o=i.raw,l=We(i,["payload","baseUrl","fetch","raw"]),c="".concat(s.replace(/\/$/,""),"/").concat(e.replace(/^\//,""));if(a&&(l.body=JSON.stringify(a)),Ve.has(l.method.toLowerCase()))n=r(c,l);else{var u=ze.get("crumb");u?(l.headers["X-CSRF-Token"]=u,n=r(c,l)):n=Ge("/v3/me",{fetch:r,baseUrl:s}).then((function(){var e=ze.get("crumb");e&&(l.headers["X-CSRF-Token"]=e)})).catch((function(){})).then((function(){return r(c,l)}))}return n.then((function(e){if(o)return e;if(!e.ok)throw new Qe(e);if(204===e.status||!e.headers.get("content-type"))return e;var t=e.headers.get("content-type").split(";")[0];return"application/json"===t?e.json():"image/png"===t||"application/pdf"===t?e.blob():e.text()}))}var Je=Ge.get=Ke("GET"),Ze=Ge.patch=Ke("PATCH"),Xe=(Ge.put=Ke("PUT"),Ge.post=Ke("POST"));Ge.head=Ke("HEAD");function Ke(e){return function(t,n){if(n&&n.method)throw new Error("Setting option.method is not allowed in httpReq.".concat(e.toLowerCase(),"()"));return Ge(t,$e($e({},n),{},{method:e}))}}Ge.delete=Ke("DELETE");var Qe=function(e){Pe(n,e);var t=Be(n);function n(e){var i;return Ae(this,n),(i=t.call(this)).name="HttpReqError",i.status=e.status,i.statusText=e.statusText,i.message="[".concat(e.status,"] ").concat(e.statusText),i.response=e,i}return n}(qe(Error));function Ye(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var et=[{value:"owner",label:Q("teams / role / owner").replace("&shy;","")},{value:"admin",label:Q("teams / role / admin").replace("&shy;","")},{value:"member",label:Q("teams / role / member").replace("&shy;","")}];function tt(e){return{member:Q("teams / role / member"),admin:Q("teams / role / admin"),owner:Q("teams / role / owner")}[e]}var nt={toggleEdit:function(e){this.get().editId===e?(this.set({editId:!1}),this.updateRole(e)):this.set({editId:e})},removeUser:function(e){try{var t=this;if(!window.confirm(Q("teams / remove / alert")))return;return Ye(Ge.delete("/v3/teams/".concat(t.get().team.id,"/members/").concat(e.id)),(function(){var n=t.get().users;n=n.filter((function(t){return t.id!==e.id})),t.set({users:n})}))}catch(e){return Promise.reject(e)}},updateRole:function(e){try{var t=this,n=t.get(),i=n.updating,a=n.users.filter((function(t){return t.id===e}))[0];return i[a.id]=!0,t.set({updating:i}),Ye(Ge.put("/v3/teams/".concat(t.get().team.id,"/members/").concat(a.id,"/status"),{payload:{status:a.role}}),(function(){(i=t.get().updating)[a.id]=!1,t.set({updating:i})}))}catch(e){return Promise.reject(e)}}};function it(e){var t=this._svelte,n=t.component,i=t.ctx;n.removeUser(i.user)}function at(e){var t=this._svelte,n=t.component,i=t.ctx;n.toggleEdit(i.user.id)}function st(e){var t=this._svelte,n=t.component,i=t.ctx;n.toggleEdit(i.user.id)}function rt(e,t,n){var i=Object.create(e);return i.user=t[n],i.each_value=t,i.i=n,i}function ot(e,t){var n,i=Q("teams / total").replace("%i%",t.numUsers);return{c:function(){n=k(i)},m:function(e,t){h(e,n,t)},p:function(e,t){e.numUsers&&i!==(i=Q("teams / total").replace("%i%",t.numUsers))&&C(n,i)},d:function(e){e&&v(n)}}}function lt(e,t){var n,i=Q("teams / total / 1");return{c:function(){n=k(i)},m:function(e,t){h(e,n,t)},p:u,d:function(e){e&&v(n)}}}function ct(e,t){for(var n,i=t.sortedUsers,a=[],s=0;s<i.length;s+=1)a[s]=bt(e,rt(t,i,s));var r={columnHeaders:t.userHeaders},o=new ye({root:e.root,store:e.store,slots:{default:T()},data:r});return{c:function(){for(var e=0;e<a.length;e+=1)a[e].c();n=x(),o._fragment.c()},m:function(e,t){for(var i=0;i<a.length;i+=1)a[i].m(o._slotted.default,null);p(o._slotted.default,n),o._mount(e,t)},p:function(t,s){if(t.isAdmin||t.isTeamOwner||t.sortedUsers||t.editId||t.updating||t.roles){i=s.sortedUsers;for(var r=0;r<i.length;r+=1){var l=rt(s,i,r);a[r]?a[r].p(t,l):(a[r]=bt(e,l),a[r].c(),a[r].m(n.parentNode,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}var c={};t.userHeaders&&(c.columnHeaders=s.userHeaders),o._set(c)},d:function(e){w(a,e),o.destroy(e)}}}function ut(e,t){var n,i,a,s,r=t.user.id;return{c:function(){n=N("td"),i=N("a"),a=k(r),i.href=s="/admin/users/"+t.user.id},m:function(e,t){h(e,n,t),p(n,i),p(i,a)},p:function(e,t){e.sortedUsers&&r!==(r=t.user.id)&&C(a,r),e.sortedUsers&&s!==(s="/admin/users/"+t.user.id)&&(i.href=s)},d:function(e){e&&v(n)}}}function dt(e,t){var n,i,a,s,r=tt(t.user.role),o=t.user.token&&mt();return{c:function(){n=N("noscript"),i=N("noscript"),a=k(" "),o&&o.c(),s=x()},m:function(e,t){h(e,n,t),n.insertAdjacentHTML("afterend",r),h(e,i,t),h(e,a,t),o&&o.m(e,t),h(e,s,t)},p:function(e,t){e.sortedUsers&&r!==(r=tt(t.user.role))&&(g(n,i),n.insertAdjacentHTML("afterend",r)),t.user.token?o||((o=mt()).c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d:function(e){e&&(g(n,i),v(n),v(i),v(a)),o&&o.d(e),e&&v(s)}}}function ft(e,t){var n,i,a,s={},r=Q("teams / role / p"),o={width:"200px",options:t.roles};void 0!==t.user.role&&(o.value=t.user.role,s.value=!0);var l=new Ce({root:e.root,store:e.store,data:o,_bind:function(n,i){var a={};!s.value&&n.value&&(t.user.role=i.value,a.sortedUsers=t.sortedUsers),e._set(a),s={}}});return e.root._beforecreate.push((function(){l._bind({value:1},l.get())})),{c:function(){l._fragment.c(),n=k("\n            "),i=N("p"),a=k(r),i.className="mini-help"},m:function(e,t){l._mount(e,t),h(e,n,t),h(e,i,t),p(i,a)},p:function(e,n){t=n;var i={};e.roles&&(i.options=t.roles),!s.value&&e.sortedUsers&&(i.value=t.user.role,s.value=void 0!==t.user.role),l._set(i),s={}},d:function(e){l.destroy(e),e&&(v(n),v(i))}}}function mt(e,t){var n,i,a=Q("teams / invite-pending");return{c:function(){n=N("i"),i=k(a)},m:function(e,t){h(e,n,t),p(n,i)},d:function(e){e&&v(n)}}}function pt(e,t){var n;function i(e){return e.editId===e.user.id?gt:e.updating[e.user.id]?vt:ht}var a=i(t),s=a(e,t);return{c:function(){s.c(),n=x()},m:function(e,t){s.m(e,t),h(e,n,t)},p:function(t,r){a===(a=i(r))&&s?s.p(t,r):(s.d(1),(s=a(e,r)).c(),s.m(n.parentNode,n))},d:function(e){s.d(e),e&&v(n)}}}function ht(e,t){var n,i,a,s,r,o,l,c,u,d=Q("teams / edit"),f=Q("teams / remove");return{c:function(){n=N("button"),i=N("i"),a=k("  "),s=k(d),r=k("\n\n            "),o=N("button"),l=N("i"),c=k("  "),u=k(f),i.className="fa fa-edit",n._svelte={component:e,ctx:t},H(n,"click",at),n.className="btn",l.className="fa fa-times",o._svelte={component:e,ctx:t},H(o,"click",it),o.className="btn"},m:function(e,t){h(e,n,t),p(n,i),p(n,a),p(n,s),h(e,r,t),h(e,o,t),p(o,l),p(o,c),p(o,u)},p:function(e,i){t=i,n._svelte.ctx=t,o._svelte.ctx=t},d:function(e){e&&v(n),M(n,"click",at),e&&(v(r),v(o)),M(o,"click",it)}}}function vt(e,t){var n,i,a,s,r=Q("teams / save");return{c:function(){n=N("button"),i=N("i"),a=k("  "),s=k(r),i.className="fa fa-spin fa-circle-o-notch",n.disabled=!0,n.className="btn btn-primary"},m:function(e,t){h(e,n,t),p(n,i),p(n,a),p(n,s)},p:u,d:function(e){e&&v(n)}}}function gt(e,t){var n,i,a,s,r=Q("teams / save");return{c:function(){n=N("button"),i=N("i"),a=k("  "),s=k(r),i.className="fa fa-check",n._svelte={component:e,ctx:t},H(n,"click",st),n.className="btn btn-primary"},m:function(e,t){h(e,n,t),p(n,i),p(n,a),p(n,s)},p:function(e,i){t=i,n._svelte.ctx=t},d:function(e){e&&v(n),M(n,"click",st)}}}function bt(e,t){var n,i,a,s,r,o,l,c,u,d,f,m,g=t.user.email,b=t.user.charts,_=t.isAdmin&&ut(0,t);function y(e){return e.editId===e.user.id?ft:dt}var w=y(t),T=w(e,t),x=(t.isAdmin||t.isTeamOwner||!t.isTeamOwner&&"owner"!=t.user.role)&&pt(e,t);return{c:function(){n=N("tr"),i=N("td"),a=k(g),s=k("\n        "),_&&_.c(),r=k("\n        "),o=N("td"),l=k(b),c=k("\n        "),u=N("td"),T.c(),d=k("\n        "),f=N("td"),x&&x.c(),m=k("\n    ")},m:function(e,t){h(e,n,t),p(n,i),p(i,a),p(n,s),_&&_.m(n,null),p(n,r),p(n,o),p(o,l),p(n,c),p(n,u),T.m(u,null),p(n,d),p(n,f),x&&x.m(f,null),p(n,m)},p:function(t,i){t.sortedUsers&&g!==(g=i.user.email)&&C(a,g),i.isAdmin?_?_.p(t,i):((_=ut(0,i)).c(),_.m(n,r)):_&&(_.d(1),_=null),t.sortedUsers&&b!==(b=i.user.charts)&&C(l,b),w===(w=y(i))&&T?T.p(t,i):(T.d(1),(T=w(e,i)).c(),T.m(u,null)),i.isAdmin||i.isTeamOwner||!i.isTeamOwner&&"owner"!=i.user.role?x?x.p(t,i):((x=pt(e,i)).c(),x.m(f,null)):x&&(x.d(1),x=null)},d:function(e){e&&v(n),_&&_.d(),T.d(),x&&x.d()}}}function _t(e){V(this,e),this._state=d({editId:!1,updating:{},users:[]},e.data),this._recompute({isAdmin:1,isTeamOwner:1,users:1,sortedUsers:1,numCharts:1,team:1},this._state),this._intro=!0,this._fragment=function(e,t){var n,i,a,s,r;function o(e){return 1===e.numUsers?lt:e.numUsers>1?ot:void 0}var l=o(t),c=l&&l(e,t),u=t.sortedUsers.length&&ct(e,t);return{c:function(){n=N("p"),c&&c.c(),i=k(" "),a=N("noscript"),s=k("\n\n"),u&&u.c(),r=x()},m:function(e,o){h(e,n,o),c&&c.m(n,null),p(n,i),p(n,a),a.insertAdjacentHTML("afterend",t.numChartsCaption),h(e,s,o),u&&u.m(e,o),h(e,r,o)},p:function(t,s){l===(l=o(s))&&c?c.p(t,s):(c&&c.d(1),(c=l&&l(e,s))&&c.c(),c&&c.m(n,i)),t.numChartsCaption&&(b(a),a.insertAdjacentHTML("afterend",s.numChartsCaption)),s.sortedUsers.length?u?u.p(t,s):((u=ct(e,s)).c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d:function(e){e&&v(n),c&&c.d(),e&&v(s),u&&u.d(e),e&&v(r)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}d(_t.prototype,Z),d(_t.prototype,nt),_t.prototype._recompute=function(e,t){var n,i,a,s,r;(e.isAdmin||e.isTeamOwner)&&this._differs(t.roles,t.roles=(i=(n=t).isAdmin,a=n.isTeamOwner,i||a?et:et.slice(1)))&&(e.roles=!0),(e.users||e.isAdmin)&&this._differs(t.sortedUsers,t.sortedUsers=function(e){var t=e.users,n=e.isAdmin;return t.sort((function(e,t){var n=["owner","admin","member"];return n.indexOf(e.role)>n.indexOf(t.role)?1:n.indexOf(e.role)<n.indexOf(t.role)?-1:e.email>t.email?1:e.email<t.email?-1:0})).filter((function(e){return n||!e.isAdmin}))}(t))&&(e.sortedUsers=!0),e.isAdmin&&this._differs(t.userHeaders,t.userHeaders=function(e){var t=e.isAdmin,n=[{title:Q("teams / user"),width:"25%"},{title:"ID",width:"10%"},{title:"Charts",width:"15%"},{title:Q("teams / status"),width:"15%"},{title:Q("teams / actions"),width:"30%"}];return t||n.splice(1,1),n}(t))&&(e.userHeaders=!0),e.sortedUsers&&this._differs(t.numUsers,t.numUsers=t.sortedUsers.length)&&(e.numUsers=!0),e.users&&this._differs(t.numCharts,t.numCharts=(s=t.users,r=0,s.forEach((function(e){r+=e.charts})),r))&&(e.numCharts=!0),(e.numCharts||e.isAdmin||e.team)&&this._differs(t.numChartsCaption,t.numChartsCaption=function(e){var t=e.numCharts,n=e.isAdmin,i=e.team;return 1===t?Q("teams / charts-total / 1"):t>1?n?Q("teams / charts-total-admin").replace("%i%",t).replace("%link%","/admin/chart/by/".concat(i.id)):Q("teams / charts-total").replace("%i%",t):""}(t))&&(e.numChartsCaption=!0)};function yt(e,t){var n,i,a=e._slotted.content;return{c:function(){n=N("div"),a||((i=N("div")).textContent="DropdownControl content"),a||(i.className="base-dropdown-inner svelte-1jdtmzv"),A(n,"width",t.width),n.className="dropdown-menu base-dropdown-content svelte-1jdtmzv"},m:function(e,t){h(e,n,t),p(n,a||i)},p:function(e,t){e.width&&A(n,"width",t.width)},d:function(e){e&&v(n),a&&_(n,a)}}}function wt(e){V(this,e),this.refs={},this._state=d({visible:!1,disabled:!1,width:"auto"},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var n,i,a,s,r,o,l=e._slotted.button;function c(t){e.windowClick(t)}function u(t){e.toggle(t)}window.addEventListener("click",c);var d=t.visible&&yt(e,t);return{c:function(){n=N("div"),i=N("a"),l||(a=N("button"),s=N("i")),o=k("\n    "),d&&d.c(),l||(s.className=r="fa fa-chevron-"+(t.visible?"up":"down")+" svelte-1jdtmzv",a.className="btn btn-small"),H(i,"click",u),i.href="#dropdown-btn",i.className="base-drop-btn svelte-1jdtmzv",A(n,"position","relative"),A(n,"display","inline-block")},m:function(t,r){h(t,n,r),p(n,i),l?p(i,l):(p(i,a),p(a,s)),e.refs.button=i,p(n,o),d&&d.m(n,null)},p:function(t,i){l||t.visible&&r!==(r="fa fa-chevron-"+(i.visible?"up":"down")+" svelte-1jdtmzv")&&(s.className=r),i.visible?d?d.p(t,i):((d=yt(e,i)).c(),d.m(n,null)):d&&(d.d(1),d=null)},d:function(t){window.removeEventListener("click",c),t&&v(n),l&&_(i,l),M(i,"click",u),e.refs.button===i&&(e.refs.button=null),d&&d.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}d(wt.prototype,Z),d(wt.prototype,{toggle:function(e){e.preventDefault();var t=this.get(),n=t.visible;t.disabled||this.set({visible:!n})},windowClick:function(e){!e.target||this.refs&&this.refs.button&&(e.target===this.refs.button||this.refs.button.contains(e.target))||e.target.classList.contains("hex")||this.set({visible:!1})}});function Tt(e){e.preventDefault();var t=this._svelte,n=t.component,i=t.ctx;n.action(i.item)}function Nt(e,t,n){var i=Object.create(e);return i.item=t[n],i}function kt(e,t){var n,i,a,s,r=t.icon&&xt(e,t);function o(t){t.preventDefault(),t.stopPropagation(),e.fireClick()}return{c:function(){n=N("button"),r&&r.c(),i=k(" "),a=N("noscript"),H(n,"click",o),n.disabled=t.disabled,n.className=s="split-button-label "+t.btnClass+" svelte-1qu0vk"},m:function(e,s){h(e,n,s),r&&r.m(n,null),p(n,i),p(n,a),a.insertAdjacentHTML("afterend",t.label)},p:function(t,o){o.icon?r?r.p(t,o):((r=xt(e,o)).c(),r.m(n,i)):r&&(r.d(1),r=null),t.label&&(b(a),a.insertAdjacentHTML("afterend",o.label)),t.disabled&&(n.disabled=o.disabled),t.btnClass&&s!==(s="split-button-label "+o.btnClass+" svelte-1qu0vk")&&(n.className=s)},d:function(e){e&&v(n),r&&r.d(),M(n,"click",o)}}}function xt(e,t){var n;return{c:function(){(n=N("i")).className=t.icon+" svelte-1qu0vk"},m:function(e,t){h(e,n,t)},p:function(e,t){e.icon&&(n.className=t.icon+" svelte-1qu0vk")},d:function(e){e&&v(n)}}}function Ht(e,t){var n,i,a=t.icon&&Ot(e,t);function s(e){return e.label?At:Ct}var r=s(t),o=r(e,t);return{c:function(){a&&a.c(),n=k(" "),o.c(),i=x()},m:function(e,t){a&&a.m(e,t),h(e,n,t),o.m(e,t),h(e,i,t)},p:function(t,l){l.icon?a?a.p(t,l):((a=Ot(e,l)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),r===(r=s(l))&&o?o.p(t,l):(o.d(1),(o=r(e,l)).c(),o.m(i.parentNode,i))},d:function(e){a&&a.d(e),e&&v(n),o.d(e),e&&v(i)}}}function Mt(e,t){var n;return{c:function(){(n=N("span")).className="caret"},m:function(e,t){h(e,n,t)},p:u,d:function(e){e&&v(n)}}}function Ot(e,t){var n;return{c:function(){(n=N("i")).className=t.icon+" svelte-1qu0vk"},m:function(e,t){h(e,n,t)},p:function(e,t){e.icon&&(n.className=t.icon+" svelte-1qu0vk")},d:function(e){e&&v(n)}}}function Ct(e,t){var n;return{c:function(){(n=N("i")).className="im im-menu-dot-h svelte-1qu0vk"},m:function(e,t){h(e,n,t)},p:u,d:function(e){e&&v(n)}}}function At(e,t){var n,i,a,s;return{c:function(){n=N("noscript"),i=N("noscript"),a=k(" "),(s=N("span")).className="caret"},m:function(e,r){h(e,n,r),n.insertAdjacentHTML("afterend",t.label),h(e,i,r),h(e,a,r),h(e,s,r)},p:function(e,t){e.label&&(g(n,i),n.insertAdjacentHTML("afterend",t.label))},d:function(e){e&&(g(n,i),v(n),v(i),v(a),v(s))}}}function Lt(e,t){var n,i,a,s=t.item.label;return{c:function(){n=N("li"),i=N("a"),a=k("\n        "),i._svelte={component:e,ctx:t},H(i,"click",Tt),i.href="#/action",i.className="svelte-1qu0vk",E(i,"disabled",t.item.disabled),n.className="svelte-1qu0vk"},m:function(e,t){h(e,n,t),p(n,i),i.innerHTML=s,p(n,a)},p:function(e,n){t=n,e.items&&s!==(s=t.item.label)&&(i.innerHTML=s),i._svelte.ctx=t,e.items&&E(i,"disabled",t.item.disabled)},d:function(e){e&&v(n),M(i,"click",Tt)}}}function Pt(e){V(this,e),this._state=d({label:"",icon:!1,split:!1,items:[],btnClass:"btn"},e.data),this._intro=!0,this._fragment=function(e,t){var n,i,a,s,r,o=t.split&&kt(e,t);function l(e){return e.split?Mt:Ht}for(var c=l(t),u=c(e,t),d=t.items,f=[],m=0;m<d.length;m+=1)f[m]=Lt(e,Nt(t,d,m));var h={disabled:t.disabled},v=new wt({root:e.root,store:e.store,slots:{default:T(),content:T(),button:T()},data:h});return{c:function(){n=N("div"),o&&o.c(),i=k("\n        "),a=N("button"),u.c(),s=k("\n\n    "),r=N("ul");for(var e=0;e<f.length;e+=1)f[e].c();v._fragment.c(),a.disabled=t.disabled,a.className=t.btnClass+" svelte-1qu0vk",O(n,"slot","button"),n.className="btn-group",O(r,"slot","content"),r.className="svelte-1qu0vk"},m:function(e,t){p(v._slotted.button,n),o&&o.m(n,null),p(n,i),p(n,a),u.m(a,null),p(v._slotted.default,s),p(v._slotted.content,r);for(var l=0;l<f.length;l+=1)f[l].m(r,null);v._mount(e,t)},p:function(t,s){if(s.split?o?o.p(t,s):((o=kt(e,s)).c(),o.m(n,i)):o&&(o.d(1),o=null),c===(c=l(s))&&u?u.p(t,s):(u.d(1),(u=c(e,s)).c(),u.m(a,null)),t.disabled&&(a.disabled=s.disabled),t.btnClass&&(a.className=s.btnClass+" svelte-1qu0vk"),t.items){d=s.items;for(var m=0;m<d.length;m+=1){var p=Nt(s,d,m);f[m]?f[m].p(t,p):(f[m]=Lt(e,p),f[m].c(),f[m].m(r,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=d.length}var h={};t.disabled&&(h.disabled=s.disabled),v._set(h)},d:function(e){o&&o.d(),u.d(),w(f,e),v.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}function Et(e,t){var n;return{c:function(){(n=N("label")).className="control-label svelte-1nkiaxn"},m:function(e,i){h(e,n,i),n.innerHTML=t.label},p:function(e,t){e.label&&(n.innerHTML=t.label)},d:function(e){e&&v(n)}}}function Ut(e,t){var n;return{c:function(){(n=N("div")).className="help success svelte-1nkiaxn"},m:function(e,i){h(e,n,i),n.innerHTML=t.success},p:function(e,t){e.success&&(n.innerHTML=t.success)},d:function(e){e&&v(n)}}}function jt(e,t){var n;return{c:function(){(n=N("div")).className="help error svelte-1nkiaxn"},m:function(e,i){h(e,n,i),n.innerHTML=t.error},p:function(e,t){e.error&&(n.innerHTML=t.error)},d:function(e){e&&v(n)}}}function St(e,t){var n;return{c:function(){(n=N("div")).className="help svelte-1nkiaxn"},m:function(e,i){h(e,n,i),n.innerHTML=t.help},p:function(e,t){e.help&&(n.innerHTML=t.help)},d:function(e){e&&v(n)}}}function It(e){var t,n,i,a,s,r,o,l,c,u,f,m,g;V(this,e),this._state=d({label:"",help:"",error:!1,success:!1,width:"auto"},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(t=this,n=this._state,c=t._slotted.default,u=n.label&&Et(0,n),f=n.success&&Ut(0,n),m=n.error&&jt(0,n),g=!n.success&&!n.error&&n.help&&St(0,n),{c:function(){i=N("div"),u&&u.c(),a=k("\n    "),s=N("div"),r=k("\n    "),f&&f.c(),o=k(" "),m&&m.c(),l=k(" "),g&&g.c(),s.className="form-controls svelte-1nkiaxn",i.className="form-block svelte-1nkiaxn",A(i,"width",n.width),E(i,"success",n.success),E(i,"error",n.error)},m:function(e,t){h(e,i,t),u&&u.m(i,null),p(i,a),p(i,s),c&&p(s,c),p(i,r),f&&f.m(i,null),p(i,o),m&&m.m(i,null),p(i,l),g&&g.m(i,null)},p:function(e,t){t.label?u?u.p(e,t):((u=Et(0,t)).c(),u.m(i,a)):u&&(u.d(1),u=null),t.success?f?f.p(e,t):((f=Ut(0,t)).c(),f.m(i,o)):f&&(f.d(1),f=null),t.error?m?m.p(e,t):((m=jt(0,t)).c(),m.m(i,l)):m&&(m.d(1),m=null),t.success||t.error||!t.help?g&&(g.d(1),g=null):g?g.p(e,t):((g=St(0,t)).c(),g.m(i,null)),e.width&&A(i,"width",t.width),e.success&&E(i,"success",t.success),e.error&&E(i,"error",t.error)},d:function(e){e&&v(i),u&&u.d(),c&&_(s,c),f&&f.d(),m&&m.d(),g&&g.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function Dt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}d(Pt.prototype,Z),d(Pt.prototype,{fireClick:function(){this.fire("click")},action:function(e){e.disabled||e.action(this)}}),d(It.prototype,Z);var qt={addUser:function(e){try{var t=this,n=t.get(),i=n.inviteeExists,a=n.inviteeUserId;if(!i)return;return t.set({currentAction:{updatingUsers:!0,isComplete:!1}}),Dt(Xe("/v3/teams/".concat(t.get().team.id,"/members"),{raw:!0,payload:{userId:a,role:e}}),(function(n){var i=!n.ok;return Dt(i?n.json():null,(function(i){var a={updatingUsers:!1,isComplete:!0,isError:!n.ok,errorCode:n.ok?null:n.status,responseData:i&&i.data?i.data:null,type:"add",role:e};t.set({invitedEmail:t.get().inviteeEmail,currentAction:a}),t.fire("updateUsers")}),!i)}))}catch(e){return Promise.reject(e)}},inviteUser:function(e){try{var t=this,n=t.get().inviteeEmail;return t.set({currentAction:{updatingUsers:!0,isComplete:!1}}),Dt(Xe("/v3/teams/".concat(t.get().team.id,"/invites"),{raw:!0,payload:{email:n,role:e}}),(function(n){var i=!n.ok;return Dt(i?n.json():null,(function(i){var a={updatingUsers:!1,isComplete:!0,isError:!n.ok,errorCode:n.ok?null:n.status,responseData:i&&i.data?i.data:null,type:"invite",role:e};t.set({invitedEmail:t.get().inviteeEmail,currentAction:a}),t.fire("updateUsers")}),!i)}))}catch(e){return Promise.reject(e)}},debounceCheckUser:function(){try{var e=this;if(!e.get().isAdmin)return;return window.clearTimeout(window.checkUser),e.set({inviteeExistsLoading:!0}),window.checkUser=setTimeout((function(){e.checkUser()}),200),Dt()}catch(e){return Promise.reject(e)}},checkUser:function(){try{var e=this,t=e.get(),n=t.inviteeEmail;return t.isValidEmail?Dt(Je("/v3/users?search=".concat(encodeURIComponent(n))),(function(t){e.set({inviteeExistsLoading:!1,inviteeExists:!1}),t.list.length>0&&(n=e.get().inviteeEmail,t.list.forEach((function(t){t.email.toLowerCase()===n.toLowerCase()&&e.set({inviteeExists:!0,inviteeUserId:t.id})})))})):void e.set({inviteeExistsLoading:!1})}catch(e){return Promise.reject(e)}}};function Rt(){window.teamSettingsInvite=this}function Wt(e){var t=e.changed;e.current,e.previous;t.inviteeEmail&&(this.set({inviteeExists:!1}),this.debounceCheckUser())}function zt(e){var t=this;V(this,e),this._state=d({inviteeEmail:"",invitedEmail:"",currentAction:{updatingUsers:!1,isComplete:!1,isError:!1,errorCode:null,responseData:null,type:"",role:""}},e.data),this._recompute({invitedEmail:1,currentAction:1,inviteeEmail:1,isAdmin:1,isTeamOwner:1,isValidEmail:1,inviteeExistsLoading:1,inviteeExists:1},this._state),this._intro=!0,this._handlers.state=[Wt],Wt.call(this,{changed:f({},this._state),current:this._state}),this._fragment=function(e,t){var n,i,a,s=!1;function r(){s=!0,e.set({inviteeEmail:i.value}),s=!1}var o={disabled:!t.isValidEmail,label:"<i class='fa "+(t.currentAction.updatingUsers?"fa-spin fa-circle-o-notch":"fa-envelope")+"'></i>  "+Q("teams / invite"),items:t.inviteOptions},l=new Pt({root:e.root,store:e.store,data:o}),c={label:Q("teams / invite-user"),help:Q("teams / invite-user / help"),success:t.successMessage,error:t.errorMessage},u=new It({root:e.root,store:e.store,slots:{default:T()},data:c});return{c:function(){n=N("div"),i=N("input"),a=k(" \n        "),l._fragment.c(),u._fragment.c(),H(i,"input",r),O(i,"type","text"),i.width="1px",i.placeholder=Q("teams / invite-user / eg"),i.className="svelte-m6ws61",n.className="flex svelte-m6ws61"},m:function(e,s){p(u._slotted.default,n),p(n,i),i.value=t.inviteeEmail,p(n,a),l._mount(n,null),u._mount(e,s)},p:function(e,t){!s&&e.inviteeEmail&&(i.value=t.inviteeEmail);var n={};e.isValidEmail&&(n.disabled=!t.isValidEmail),e.currentAction&&(n.label="<i class='fa "+(t.currentAction.updatingUsers?"fa-spin fa-circle-o-notch":"fa-envelope")+"'></i>  "+Q("teams / invite")),e.inviteOptions&&(n.items=t.inviteOptions),l._set(n);var a={};e.successMessage&&(a.success=t.successMessage),e.errorMessage&&(a.error=t.errorMessage),u._set(a)},d:function(e){M(i,"input",r),l.destroy(),u.destroy(e)}}}(this,this._state),this.root._oncreate.push((function(){Rt.call(t),t.fire("update",{changed:f({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}d(zt.prototype,Z),d(zt.prototype,qt),zt.prototype._recompute=function(t,n){var i;(t.invitedEmail||t.currentAction)&&(this._differs(n.successMessage,n.successMessage=function(t){var n=t.invitedEmail,i=t.currentAction,a=i.isComplete,s=i.isError,r=i.type,o=i.role;if(a&&!s)return Q("teams / invite-user / ".concat(r," / success")).replace("$1",e(n)).replace("$2",Q("teams / role / ".concat(o)))}(n))&&(t.successMessage=!0),this._differs(n.errorMessage,n.errorMessage=function(e){var t=e.invitedEmail,n=e.currentAction,i=n.isComplete,a=n.isError,s=n.errorCode,r=n.responseData,o=n.type;if(i&&a){var l=[400,401,406].includes(s)?s:"other",c=406===s&&r&&r.maxTeamInvites?r.maxTeamInvites:null;return Q("teams / invite-user / ".concat(o," / error / ").concat(l)).replace("$1",t).replace("$2",c)}}(n))&&(t.errorMessage=!0)),t.inviteeEmail&&this._differs(n.isValidEmail,n.isValidEmail=(i=n.inviteeEmail,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)))&&(t.isValidEmail=!0),(t.isAdmin||t.isTeamOwner||t.inviteeEmail||t.isValidEmail||t.inviteeExistsLoading||t.inviteeExists)&&this._differs(n.inviteOptions,n.inviteOptions=function(e){var t=e.isAdmin,n=e.isTeamOwner,i=(e.inviteeEmail,e.isValidEmail),a=e.inviteeExistsLoading,s=e.inviteeExists,r=[{label:'<i class="fa fa-envelope"></i> &nbsp;...'.concat(Q("teams / role / member")),disabled:!i,action:function(){teamSettingsInvite.inviteUser("member")}},{label:'<i class="fa fa-envelope"></i> &nbsp;...'.concat(Q("teams / role / admin")),disabled:!i,action:function(){teamSettingsInvite.inviteUser("admin")}}];return(t||n)&&r.push({label:'<i class="fa fa-envelope"></i> &nbsp;...'.concat(Q("teams / role / owner")),disabled:!i,action:function(){teamSettingsInvite.inviteUser("owner")}}),t&&r.push({label:'<span class="red"><i class="fa '.concat(a?"fa-spin fa-circle-o-notch":"fa-plus",'"></i> &nbsp;').concat(Q("teams / add-as").replace("%s",Q("teams / role / member")),"</span>"),disabled:!s,action:function(){teamSettingsInvite.addUser("member")}},{label:'<span class="red"><i class="fa '.concat(a?"fa-spin fa-circle-o-notch":"fa-plus",'"></i> &nbsp;').concat(Q("teams / add-as").replace("%s",Q("teams / role / admin")),"</span>"),disabled:!s,action:function(){teamSettingsInvite.addUser("admin")}},{label:'<span class="red"><i class="fa '.concat(a?"fa-spin fa-circle-o-notch":"fa-plus",'"></i> &nbsp;').concat(Q("teams / add-as").replace("%s",Q("teams / role / owner")),"</span>"),disabled:!s,action:function(){teamSettingsInvite.addUser("owner")}}),r}(n))&&(t.inviteOptions=!0)};var Bt={updateUsers:function(){var e=this,t=this.get().team;this.set({awaitLoadingUsers:Ge.get("/v3/teams/".concat(t.id,"/members?limit=1000")).then((function(t){e.set({users:t.list})}))})}};function Ft(){this.updateUsers()}function $t(e,t){var n,i,a={component:e,ctx:t,current:null,pending:Jt,then:Gt,catch:Vt,value:"null",error:"null"};return q(i=t.awaitLoadingUsers,a),{c:function(){n=x(),a.block.c()},m:function(e,t){h(e,n,t),a.block.m(e,a.anchor=t),a.mount=function(){return n.parentNode},a.anchor=n},p:function(e,n){t=n,a.ctx=t,"awaitLoadingUsers"in e&&i!==(i=t.awaitLoadingUsers)&&q(i,a)||a.block.p(e,d(d({},t),a.resolved))},d:function(e){e&&v(n),a.block.d(e),a=null}}}function Vt(e,t){var n;return{c:function(){n=k("error!")},m:function(e,t){h(e,n,t)},p:u,d:function(e){e&&v(n)}}}function Gt(e,t){var n={},i={isAdmin:t.isAdmin,isTeamOwner:t.isTeamOwner,team:t.team};void 0!==t.users&&(i.users=t.users,n.users=!0),void 0!==t.editIndex&&(i.editIndex=t.editIndex,n.editIndex=!0),void 0!==t.updating&&(i.updating=t.updating,n.updating=!0);var a=new _t({root:e.root,store:e.store,data:i,_bind:function(t,i){var a={};!n.users&&t.users&&(a.users=i.users),!n.editIndex&&t.editIndex&&(a.editIndex=i.editIndex),!n.updating&&t.updating&&(a.updating=i.updating),e._set(a),n={}}});return e.root._beforecreate.push((function(){a._bind({users:1,editIndex:1,updating:1},a.get())})),{c:function(){a._fragment.c()},m:function(e,t){a._mount(e,t)},p:function(e,i){t=i;var s={};e.isAdmin&&(s.isAdmin=t.isAdmin),e.isTeamOwner&&(s.isTeamOwner=t.isTeamOwner),e.team&&(s.team=t.team),!n.users&&e.users&&(s.users=t.users,n.users=void 0!==t.users),!n.editIndex&&e.editIndex&&(s.editIndex=t.editIndex,n.editIndex=void 0!==t.editIndex),!n.updating&&e.updating&&(s.updating=t.updating,n.updating=void 0!==t.updating),a._set(s),n={}},d:function(e){a.destroy(e)}}}function Jt(e,t){var n,i,a,s,r=Q("teams / loading");return{c:function(){n=N("p"),i=N("i"),a=k("   "),s=N("noscript"),i.className="fa fa-circle-o-notch fa-spin"},m:function(e,t){h(e,n,t),p(n,i),p(n,a),p(n,s),s.insertAdjacentHTML("afterend",r)},p:u,d:function(e){e&&v(n)}}}function Zt(e){var t=this;V(this,e),this._state=d({editIndex:0,updating:{},updatingUsers:!1,awaitLoadingUsers:!1},e.data),this._recompute({users:1,userId:1},this._state),this._intro=!0,this._fragment=function(e,t){var n,i,a,s,r,o,l,c,u,d,f,m,g,b,_,y,w,T,H,M,O,C,L,P,E,U,j,S,I,D,q,R,W,z,B,F,$,V,G,J,Z,X,K,Y,ee,te,ne,ie,ae,se,re,oe,le,ce,ue,de,fe,me,pe,he,ve,ge,be,_e,ye,we,Te,Ne,ke,xe,He,Me,Oe,Ce=Q("teams / p"),Ae={},Le=Q("teams / role / member"),Pe=Q("teams / role / admin"),Ee=Q("teams / role / owner"),Ue=Q("teams / roles / edit-charts"),je=Q("teams / roles / edit-folders"),Se=Q("teams / roles / access-settings"),Ie=Q("teams / roles / invite-users"),De=Q("teams / roles / subscription-options"),qe=Q("teams / roles / remove-team"),Re={isTeamOwner:t.isTeamOwner,isAdmin:t.isAdmin};void 0!==t.team&&(Re.team=t.team,Ae.team=!0),void 0!==t.updatingUsers&&(Re.updatingUsers=t.updatingUsers,Ae.updatingUsers=!0);var We=new zt({root:e.root,store:e.store,data:Re,_bind:function(t,n){var i={};!Ae.team&&t.team&&(i.team=n.team),!Ae.updatingUsers&&t.updatingUsers&&(i.updatingUsers=n.updatingUsers),e._set(i),Ae={}}});e.root._beforecreate.push((function(){We._bind({team:1,updatingUsers:1},We.get())})),We.on("updateUsers",(function(t){e.updateUsers()}));var ze=t.awaitLoadingUsers&&$t(e,t);return{c:function(){n=N("p"),i=k("\n\n"),a=N("div"),s=N("div"),We._fragment.c(),r=k("\n    "),o=N("div"),l=N("table"),c=N("thead"),u=N("tr"),d=N("td"),f=k("\n                    "),m=N("th"),g=k("\n                    "),b=N("th"),_=k("\n                    "),y=N("th"),w=k("\n            "),T=N("tbody"),H=N("tr"),M=N("td"),O=k("\n                    "),(C=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',L=k("\n                    "),(P=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',E=k("\n                    "),(U=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',j=k("\n\n                "),S=N("tr"),I=N("td"),D=k("\n                    "),(q=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',R=k("\n                    "),(W=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',z=k("\n                    "),(B=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',F=k("\n\n                "),$=N("tr"),V=N("td"),G=k("\n                    "),(J=N("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',Z=k("\n                    "),(X=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',K=k("\n                    "),(Y=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',ee=k("\n\n                "),te=N("tr"),ne=N("td"),ie=k("\n                    "),(ae=N("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',se=k("\n                    "),(re=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',oe=k("\n                    "),(le=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',ce=k("\n\n                "),ue=N("tr"),de=N("td"),fe=k("\n                    "),(me=N("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',pe=k("\n                    "),(he=N("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',ve=k("\n                    "),(ge=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',be=k("\n\n                "),_e=N("tr"),ye=N("td"),we=k("\n                    "),(Te=N("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',Ne=k("\n                    "),(ke=N("td")).innerHTML='<i class="im im-x-mark svelte-hgmegl"></i>',xe=k("\n                    "),(He=N("td")).innerHTML='<i class="im im-check-mark svelte-hgmegl"></i>',Me=k("\n\n"),ze&&ze.c(),Oe=x(),A(n,"margin-bottom","10px"),s.className="span4",d.className="svelte-hgmegl",m.className="svelte-hgmegl",b.className="svelte-hgmegl",y.className="svelte-hgmegl",M.className="svelte-hgmegl",C.className="svelte-hgmegl",P.className="svelte-hgmegl",U.className="svelte-hgmegl",I.className="svelte-hgmegl",q.className="svelte-hgmegl",W.className="svelte-hgmegl",B.className="svelte-hgmegl",V.className="svelte-hgmegl",J.className="svelte-hgmegl",X.className="svelte-hgmegl",Y.className="svelte-hgmegl",ne.className="svelte-hgmegl",ae.className="svelte-hgmegl",re.className="svelte-hgmegl",le.className="svelte-hgmegl",de.className="svelte-hgmegl",me.className="svelte-hgmegl",he.className="svelte-hgmegl",ge.className="svelte-hgmegl",ye.className="svelte-hgmegl",Te.className="svelte-hgmegl",ke.className="svelte-hgmegl",He.className="svelte-hgmegl",T.className="svelte-hgmegl",l.className="role-descriptions svelte-hgmegl",A(l,"margin-left","3em"),o.className="span6",a.className="row",A(a,"margin-bottom","2em")},m:function(e,t){h(e,n,t),n.innerHTML=Ce,h(e,i,t),h(e,a,t),p(a,s),We._mount(s,null),p(a,r),p(a,o),p(o,l),p(l,c),p(c,u),p(u,d),p(u,f),p(u,m),m.innerHTML=Le,p(u,g),p(u,b),b.innerHTML=Pe,p(u,_),p(u,y),y.innerHTML=Ee,p(l,w),p(l,T),p(T,H),p(H,M),M.innerHTML=Ue,p(H,O),p(H,C),p(H,L),p(H,P),p(H,E),p(H,U),p(T,j),p(T,S),p(S,I),I.innerHTML=je,p(S,D),p(S,q),p(S,R),p(S,W),p(S,z),p(S,B),p(T,F),p(T,$),p($,V),V.innerHTML=Se,p($,G),p($,J),p($,Z),p($,X),p($,K),p($,Y),p(T,ee),p(T,te),p(te,ne),ne.innerHTML=Ie,p(te,ie),p(te,ae),p(te,se),p(te,re),p(te,oe),p(te,le),p(T,ce),p(T,ue),p(ue,de),de.innerHTML=De,p(ue,fe),p(ue,me),p(ue,pe),p(ue,he),p(ue,ve),p(ue,ge),p(T,be),p(T,_e),p(_e,ye),ye.innerHTML=qe,p(_e,we),p(_e,Te),p(_e,Ne),p(_e,ke),p(_e,xe),p(_e,He),h(e,Me,t),ze&&ze.m(e,t),h(e,Oe,t)},p:function(n,i){t=i;var a={};n.isTeamOwner&&(a.isTeamOwner=t.isTeamOwner),n.isAdmin&&(a.isAdmin=t.isAdmin),!Ae.team&&n.team&&(a.team=t.team,Ae.team=void 0!==t.team),!Ae.updatingUsers&&n.updatingUsers&&(a.updatingUsers=t.updatingUsers,Ae.updatingUsers=void 0!==t.updatingUsers),We._set(a),Ae={},t.awaitLoadingUsers?ze?ze.p(n,t):((ze=$t(e,t)).c(),ze.m(Oe.parentNode,Oe)):ze&&(ze.d(1),ze=null)},d:function(e){e&&(v(n),v(i),v(a)),We.destroy(),e&&v(Me),ze&&ze.d(e),e&&v(Oe)}}}(this,this._state),this.root._oncreate.push((function(){Ft.call(t),t.fire("update",{changed:f({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}d(Zt.prototype,Z),d(Zt.prototype,Bt),Zt.prototype._recompute=function(e,t){(e.users||e.userId)&&this._differs(t.role,t.role=function(e){var t=e.users,n=e.userId;if(!t||!t.length||!n)return!1;var i=t.find((function(e){return e.id===n}));return i?i.role:"admin"}(t))&&(e.role=!0)};var Xt={};function Kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(Xt[e]=window.__dw.vis.meta.locale||{}):Xt[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}var Qt={show:function(){var e=this,t=setTimeout((function(){e.set({visible:!0})}),400);this.set({t:t})},hide:function(){var e=this.get().t;clearTimeout(e),this.set({visible:!1})}};function Yt(e,t){var n,i,a,s,r,o=e._slotted.default,l="help"===t.type&&en(),c="upgrade-info"===t.type&&tn();return{c:function(){n=N("div"),l&&l.c(),i=k(" "),c&&c.c(),a=k("\n        "),n.className=r="content "+t.type+" svelte-1qzgns1"},m:function(e,t){h(e,n,t),l&&l.m(n,null),p(n,i),c&&c.m(n,null),p(n,a),o&&(p(n,s||(s=x())),p(n,o))},p:function(e,t){"help"===t.type?l||((l=en()).c(),l.m(n,i)):l&&(l.d(1),l=null),"upgrade-info"===t.type?c||((c=tn()).c(),c.m(n,a)):c&&(c.d(1),c=null),e.type&&r!==(r="content "+t.type+" svelte-1qzgns1")&&(n.className=r)},d:function(e){e&&v(n),l&&l.d(),c&&c.d(),o&&y(s,o)}}}function en(e,t){var n;return{c:function(){(n=N("i")).className="hat-icon im im-graduation-hat svelte-1qzgns1"},m:function(e,t){h(e,n,t)},d:function(e){e&&v(n)}}}function tn(e,t){var n,i,a=function(e){var t=arguments,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(e=e.trim(),Xt[n]||Kt(n),!Xt[n][e])return"MISSING:"+e;var i=Xt[n][e];return"string"==typeof i&&arguments.length>2&&(i=i.replace(/\$(\d)/g,(function(e,n){return n=2+Number(n),void 0===t[n]?e:t[n]}))),i}("upgrade-available");return{c:function(){n=N("div"),i=k(a),n.className="content-header svelte-1qzgns1"},m:function(e,t){h(e,n,t),p(n,i)},d:function(e){e&&v(n)}}}function nn(e){V(this,e),this.refs={},this._state=d({visible:!1,class:"",type:"help"},e.data),this._recompute({type:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var n,i,a,s,r,o=t.visible&&Yt(e,t);function l(t){e.show()}function c(t){e.hide()}return{c:function(){n=N("div"),i=N("span"),s=k("\n    "),o&&o.c(),i.className=a="help-icon "+t.type+" svelte-1qzgns1",E(i,"visible",t.visible),H(n,"mouseenter",l),H(n,"mouseleave",c),n.className=r="help "+t.class+" "+t.type+" svelte-1qzgns1"},m:function(a,r){h(a,n,r),p(n,i),i.innerHTML=t.helpIcon,p(n,s),o&&o.m(n,null),e.refs.helpDisplay=n},p:function(t,s){t.helpIcon&&(i.innerHTML=s.helpIcon),t.type&&a!==(a="help-icon "+s.type+" svelte-1qzgns1")&&(i.className=a),(t.type||t.visible)&&E(i,"visible",s.visible),s.visible?o?o.p(t,s):((o=Yt(e,s)).c(),o.m(n,null)):o&&(o.d(1),o=null),(t.class||t.type)&&r!==(r="help "+s.class+" "+s.type+" svelte-1qzgns1")&&(n.className=r)},d:function(t){t&&v(n),o&&o.d(),M(n,"mouseenter",l),M(n,"mouseleave",c),e.refs.helpDisplay===n&&(e.refs.helpDisplay=null)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}d(nn.prototype,Z),d(nn.prototype,Qt),nn.prototype._recompute=function(e,t){e.type&&this._differs(t.helpIcon,t.helpIcon="upgrade-info"===t.type?'<svg width="18" height="18" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15.035 1.963c-.256 0-.511.1-.707.295l-7.07 7.07a1 1 0 00.707 1.707h4.07v15a2 2 0 002 2h2a2 2 0 002-2v-15h4.07a.999.999 0 00.707-1.707l-7.07-7.07a.999.999 0 00-.707-.295z"/></svg>':"?")&&(e.helpIcon=!0)};var an="100px";function sn(e,t){var n,i={class:t.helpClass},a=new nn({root:e.root,store:e.store,slots:{default:T()},data:i});return{c:function(){n=N("div"),a._fragment.c()},m:function(e,i){p(a._slotted.default,n),n.innerHTML=t.help,a._mount(e,i)},p:function(e,t){e.help&&(n.innerHTML=t.help);var i={};e.helpClass&&(i.class=t.helpClass),a._set(i)},d:function(e){a.destroy(e)}}}function rn(e,t){var n,i,a,s=t.labelHelp&&on(e,t);return{c:function(){n=N("label"),i=N("noscript"),a=k(" "),s&&s.c(),A(n,"width",t.labelWidth||an),n.className="control-label svelte-1ykzs2h",E(n,"disabled",t.disabled)},m:function(e,r){h(e,n,r),p(n,i),i.insertAdjacentHTML("beforebegin",t.label),p(n,a),s&&s.m(n,null)},p:function(t,a){t.label&&(!function(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}(i),i.insertAdjacentHTML("beforebegin",a.label)),a.labelHelp?s?s.p(t,a):((s=on(e,a)).c(),s.m(n,null)):s&&(s.d(1),s=null),t.labelWidth&&A(n,"width",a.labelWidth||an),t.disabled&&E(n,"disabled",a.disabled)},d:function(e){e&&v(n),s&&s.d()}}}function on(e,t){var n;return{c:function(){(n=N("p")).className="mini-help mt-1"},m:function(e,i){h(e,n,i),n.innerHTML=t.labelHelp},p:function(e,t){e.labelHelp&&(n.innerHTML=t.labelHelp)},d:function(e){e&&v(n)}}}function ln(e,t){var n,i;return{c:function(){A(n=N("p"),"padding-left",t.inline?0:t.labelWidth||an),n.className=i="mt-1 mini-help "+t.type+" svelte-1ykzs2h",E(n,"mini-help-block",!t.inline)},m:function(e,i){h(e,n,i),n.innerHTML=t.miniHelp},p:function(e,t){e.miniHelp&&(n.innerHTML=t.miniHelp),(e.inline||e.labelWidth)&&A(n,"padding-left",t.inline?0:t.labelWidth||an),e.type&&i!==(i="mt-1 mini-help "+t.type+" svelte-1ykzs2h")&&(n.className=i),(e.type||e.inline)&&E(n,"mini-help-block",!t.inline)},d:function(e){e&&v(n)}}}function cn(e){var t,n,i,a,s,r,o,l,c,u,f,m;V(this,e),this._state=d({disabled:!1,help:!1,helpClass:!1,miniHelp:!1,label:!1,labelHelp:!1,inline:!1,labelWidth:!1,type:"default",valign:"baseline"},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(t=this,n=this._state,c=t._slotted.default,u=n.help&&sn(t,n),f=n.label&&rn(t,n),m=n.miniHelp&&ln(0,n),{c:function(){u&&u.c(),i=k("\n\n"),a=N("div"),f&&f.c(),s=k("\n    "),r=N("div"),o=k("\n    "),m&&m.c(),r.className="controls svelte-1ykzs2h",A(r,"width","calc(100% - "+(n.labelWidth||an)+" - 32px)"),E(r,"form-inline",n.inline),a.className=l="control-group vis-option-group vis-option-group-"+n.type+" label-"+n.valign+" svelte-1ykzs2h"},m:function(e,t){u&&u.m(e,t),h(e,i,t),h(e,a,t),f&&f.m(a,null),p(a,s),p(a,r),c&&p(r,c),p(a,o),m&&m.m(a,null)},p:function(e,n){n.help?u?u.p(e,n):((u=sn(t,n)).c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null),n.label?f?f.p(e,n):((f=rn(t,n)).c(),f.m(a,s)):f&&(f.d(1),f=null),e.labelWidth&&A(r,"width","calc(100% - "+(n.labelWidth||an)+" - 32px)"),e.inline&&E(r,"form-inline",n.inline),n.miniHelp?m?m.p(e,n):((m=ln(0,n)).c(),m.m(a,null)):m&&(m.d(1),m=null),(e.type||e.valign)&&l!==(l="control-group vis-option-group vis-option-group-"+n.type+" label-"+n.valign+" svelte-1ykzs2h")&&(a.className=l)},d:function(e){u&&u.d(e),e&&(v(i),v(a)),f&&f.d(),c&&_(r,c),m&&m.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}function un(e){var t=e.changed;e.previous&&t.value&&this.set({indeterminate:!1})}function dn(e,t,n){var i=Object.create(e);return i.opt=t[n],i}function fn(e,t){var n,i=t.opt.help;return{c:function(){(n=N("div")).className="help svelte-b3e9e4"},m:function(e,t){h(e,n,t),n.innerHTML=i},p:function(e,t){e.options&&i!==(i=t.opt.help)&&(n.innerHTML=i)},d:function(e){e&&v(n)}}}function mn(e,t){var n,i,a,s,r,o,l,c,u,d=t.opt.label;function f(){e.set({value:i.__value})}var m=t.opt.help&&fn(0,t);return{c:function(){n=N("label"),i=N("input"),s=k("\n            "),r=N("span"),o=k(" "),l=N("span"),c=k("\n            "),m&&m.c(),e._bindingGroups[0].push(i),H(i,"change",f),O(i,"type","radio"),i.__value=a=t.opt.value,i.value=i.__value,i.disabled=t.disabled,i.className="svelte-b3e9e4",r.className="css-ui svelte-b3e9e4",l.className="inner-label svelte-b3e9e4",n.title=u=t.opt.tooltip||"",n.className="svelte-b3e9e4",E(n,"disabled",t.disabled),E(n,"has-help",t.opt.help)},m:function(e,a){h(e,n,a),p(n,i),i.checked=i.__value===t.value,p(n,s),p(n,r),p(n,o),p(n,l),l.innerHTML=d,p(n,c),m&&m.m(n,null)},p:function(e,t){e.value&&(i.checked=i.__value===t.value),e.options&&a!==(a=t.opt.value)&&(i.__value=a),i.value=i.__value,e.disabled&&(i.disabled=t.disabled),e.options&&d!==(d=t.opt.label)&&(l.innerHTML=d),t.opt.help?m?m.p(e,t):((m=fn(0,t)).c(),m.m(n,null)):m&&(m.d(1),m=null),e.options&&u!==(u=t.opt.tooltip||"")&&(n.title=u),e.disabled&&E(n,"disabled",t.disabled),e.options&&E(n,"has-help",t.opt.help)},d:function(t){t&&v(n),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(i),1),M(i,"change",f),m&&m.d()}}}function pn(e,t){var n;return{c:function(){(n=N("div")).className="disabled-message svelte-b3e9e4"},m:function(e,i){h(e,n,i),n.innerHTML=t.disabledMessage},p:function(e,t){e.disabledMessage&&(n.innerHTML=t.disabledMessage)},d:function(e){e&&v(n)}}}function hn(e){var t=this;V(this,e),this._state=d({value:null,disabled:!1,disabledMessage:"",indeterminate:!1,label:"",labelWidth:"auto",help:null,miniHelp:null,valign:"top",inline:!0},e.data),this._bindingGroups=[[]],this._intro=!0,this._handlers.state=[un],this._slotted=e.slots||{},un.call(this,{changed:f({},this._state),current:this._state}),this._fragment=function(e,t){for(var n,i,a,s,r,o=e._slotted.default,l=t.options,c=[],u=0;u<l.length;u+=1)c[u]=mn(e,dn(t,l,u));var d={type:"radio",labelWidth:t.labelWidth,valign:t.valign,label:t.label,disabled:t.disabled,help:t.help,miniHelp:t.miniHelp},f=new cn({root:e.root,store:e.store,slots:{default:T()},data:d}),m=t.disabled&&t.disabledMessage&&pn(e,t);return{c:function(){n=N("div");for(var e=0;e<c.length;e+=1)c[e].c();i=k("\n    "),f._fragment.c(),s=k("\n\n"),m&&m.c(),r=x(),n.className="svelte-b3e9e4",E(n,"inline",t.inline),E(n,"indeterminate",t.indeterminate)},m:function(e,t){p(f._slotted.default,n);for(var l=0;l<c.length;l+=1)c[l].m(n,null);p(f._slotted.default,i),o&&(p(f._slotted.default,a||(a=x())),p(f._slotted.default,o)),f._mount(e,t),h(e,s,t),m&&m.m(e,t),h(e,r,t)},p:function(t,i){if(t.options||t.disabled||t.value){l=i.options;for(var a=0;a<l.length;a+=1){var s=dn(i,l,a);c[a]?c[a].p(t,s):(c[a]=mn(e,s),c[a].c(),c[a].m(n,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=l.length}t.inline&&E(n,"inline",i.inline),t.indeterminate&&E(n,"indeterminate",i.indeterminate);var o={};t.labelWidth&&(o.labelWidth=i.labelWidth),t.valign&&(o.valign=i.valign),t.label&&(o.label=i.label),t.disabled&&(o.disabled=i.disabled),t.help&&(o.help=i.help),t.miniHelp&&(o.miniHelp=i.miniHelp),f._set(o),i.disabled&&i.disabledMessage?m?m.p(t,i):((m=pn(e,i)).c(),m.m(r.parentNode,r)):m&&(m.d(1),m=null)},d:function(e){w(c,e),o&&y(a,o),f.destroy(e),e&&v(s),m&&m.d(e),e&&v(r)}}}(this,this._state),this.root._oncreate.push((function(){t.fire("update",{changed:f({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}function vn(e){var t=e.changed,n=e.current;e.previous;n.settings&&(t.settings||t.team||t.defaultTheme)&&this.fire("change",{team:n.team,settings:n.settings,defaultTheme:n.defaultTheme})}function gn(e,t){var n,i,a,s,r,o,l,c,u,d=!1,f=!1,m=!1;function g(){d=!0,t.settings.embed.custom_embed.title=a.value,e.set({settings:t.settings}),d=!1}var b={label:Q("teams / custom / title"),help:""},_=new It({root:e.root,store:e.store,slots:{default:T()},data:b});function y(){f=!0,t.settings.embed.custom_embed.text=r.value,e.set({settings:t.settings}),f=!1}var w={label:Q("teams / custom / help"),help:""},x=new It({root:e.root,store:e.store,slots:{default:T()},data:w});function C(){m=!0,t.settings.embed.custom_embed.template=l.value,e.set({settings:t.settings}),m=!1}var A={label:Q("teams / custom / embedcode"),help:Q("teams / custom / embedcode / help")},L=new It({root:e.root,store:e.store,slots:{default:T()},data:A});return{c:function(){(n=N("h3")).textContent="Custom Embed Code",i=k("\n\n        "),a=N("input"),_._fragment.c(),s=k("\n\n        "),r=N("textarea"),x._fragment.c(),o=k("\n\n        "),l=N("textarea"),L._fragment.c(),c=k("\n        "),u=N("hr"),H(a,"input",g),O(a,"type","text"),a.placeholder="e.g. Custom CMS Embed",H(r,"input",y),r.placeholder="e.g. This is a custom embed code for our CMS",H(l,"input",C),l.className="embedcode svelte-rgtu7e",l.placeholder='<iframe src="%chart_url%" width="%chart_width%" widthheight="%chart_height%"></iframe>'},m:function(e,d){h(e,n,d),h(e,i,d),p(_._slotted.default,a),a.value=t.settings.embed.custom_embed.title,_._mount(e,d),h(e,s,d),p(x._slotted.default,r),r.value=t.settings.embed.custom_embed.text,x._mount(e,d),h(e,o,d),p(L._slotted.default,l),l.value=t.settings.embed.custom_embed.template,L._mount(e,d),h(e,c,d),h(e,u,d)},p:function(e,n){t=n,!d&&e.settings&&(a.value=t.settings.embed.custom_embed.title),!f&&e.settings&&(r.value=t.settings.embed.custom_embed.text),!m&&e.settings&&(l.value=t.settings.embed.custom_embed.template)},d:function(e){e&&(v(n),v(i)),M(a,"input",g),_.destroy(e),e&&v(s),M(r,"input",y),x.destroy(e),e&&v(o),M(l,"input",C),L.destroy(e),e&&(v(c),v(u))}}}function bn(e){var t=this;V(this,e),this._state=d({embedCodes:[{value:"responsive",label:Q("teams / defaults / responsive-iframe")},{value:"iframe",label:Q("teams / defaults / iframe")},{value:"custom",label:Q("teams / defaults / custom")}],themes:[],folders:[],locales:[],defaultTheme:"",settings:{},team:{}},e.data),this._recompute({locales:1},this._state),this._intro=!0,this._handlers.state=[vn],vn.call(this,{changed:f({},this._state),current:this._state}),this._fragment=function(e,t){var n,i,a,s,r,o,l,c,u,d,f,m,g,b,_=Q("teams / defaults / p"),y=!1,w={},x=Q("teams / defaults / h3"),C={},L={},P={},E={};function U(){y=!0,t.team.name=r.value,e.set({team:t.team}),y=!1}var j={label:Q("teams / name"),help:Q("teams / name / help")},S=new It({root:e.root,store:e.store,slots:{default:T()},data:j}),I={label:"",options:[{label:Q("teams / defaults / expanded"),value:"expanded"},{label:Q("teams / defaults / collapsed"),value:"collapsed"}]};void 0!==t.settings.folders&&(I.value=t.settings.folders,w.value=!0);var D=new hn({root:e.root,store:e.store,data:I,_bind:function(n,i){var a={};!w.value&&n.value&&(t.settings.folders=i.value,a.settings=t.settings),e._set(a),w={}}});e.root._beforecreate.push((function(){D._bind({value:1},D.get())}));var q={label:Q("teams / defaults / folder-status"),help:Q("teams / defaults / folder-status / p")},R=new It({root:e.root,store:e.store,slots:{default:T()},data:q}),W={options:t.themes};void 0!==t.defaultTheme&&(W.value=t.defaultTheme,C.value=!0);var z=new Ce({root:e.root,store:e.store,data:W,_bind:function(t,n){var i={};!C.value&&t.value&&(i.defaultTheme=n.value),e._set(i),C={}}});e.root._beforecreate.push((function(){z._bind({value:1},z.get())}));var B={label:Q("teams / defaults / theme"),help:Q("teams / defaults / theme / p")},F=new It({root:e.root,store:e.store,slots:{default:T()},data:B}),$={options:t.folders};void 0!==t.settings.default.folder&&($.value=t.settings.default.folder,L.value=!0);var V=new Ce({root:e.root,store:e.store,data:$,_bind:function(n,i){var a={};!L.value&&n.value&&(t.settings.default.folder=i.value,a.settings=t.settings),e._set(a),L={}}});e.root._beforecreate.push((function(){V._bind({value:1},V.get())}));var G={label:Q("teams / defaults / folder"),help:Q("teams / defaults / folder / p")},J=new It({root:e.root,store:e.store,slots:{default:T()},data:G}),Z={options:t.localeOptions};void 0!==t.settings.default.locale&&(Z.value=t.settings.default.locale,P.value=!0);var X=new Ce({root:e.root,store:e.store,data:Z,_bind:function(n,i){var a={};!P.value&&n.value&&(t.settings.default.locale=i.value,a.settings=t.settings),e._set(a),P={}}});e.root._beforecreate.push((function(){X._bind({value:1},X.get())}));var K={label:Q("teams / defaults / locale"),help:Q("teams / defaults / locale / p")},Y=new It({root:e.root,store:e.store,slots:{default:T()},data:K}),ee={label:"",options:t.embedCodes};void 0!==t.settings.embed.preferred_embed&&(ee.value=t.settings.embed.preferred_embed,E.value=!0);var te=new hn({root:e.root,store:e.store,data:ee,_bind:function(n,i){var a={};!E.value&&n.value&&(t.settings.embed.preferred_embed=i.value,a.settings=t.settings),e._set(a),E={}}});e.root._beforecreate.push((function(){te._bind({value:1},te.get())}));var ne={label:Q("teams / defaults / embedcode"),help:Q("teams / defaults / embedcode / p")},ie=new It({root:e.root,store:e.store,slots:{default:T()},data:ne}),ae="custom"==t.settings.embed.preferred_embed&&gn(e,t);return{c:function(){n=N("div"),i=N("div"),a=N("p"),s=k("\n\n        "),r=N("input"),S._fragment.c(),o=k("\n\n        "),D._fragment.c(),R._fragment.c(),l=k("\n\n        "),c=N("h3"),u=k(x),d=k("\n\n        "),z._fragment.c(),F._fragment.c(),f=k("\n\n        "),V._fragment.c(),J._fragment.c(),m=k("\n\n        "),X._fragment.c(),Y._fragment.c(),g=k("\n\n        "),te._fragment.c(),ie._fragment.c(),b=k("\n\n        "),ae&&ae.c(),A(a,"margin-bottom","10px"),H(r,"input",U),O(r,"type","text"),r.placeholder="",i.className="span6",n.className="row"},m:function(e,v){h(e,n,v),p(n,i),p(i,a),a.innerHTML=_,p(i,s),p(S._slotted.default,r),r.value=t.team.name,S._mount(i,null),p(i,o),D._mount(R._slotted.default,null),R._mount(i,null),p(i,l),p(i,c),p(c,u),p(i,d),z._mount(F._slotted.default,null),F._mount(i,null),p(i,f),V._mount(J._slotted.default,null),J._mount(i,null),p(i,m),X._mount(Y._slotted.default,null),Y._mount(i,null),p(i,g),te._mount(ie._slotted.default,null),ie._mount(i,null),p(i,b),ae&&ae.m(i,null)},p:function(n,a){t=a,!y&&n.team&&(r.value=t.team.name);var s={};!w.value&&n.settings&&(s.value=t.settings.folders,w.value=void 0!==t.settings.folders),D._set(s),w={};var o={};n.themes&&(o.options=t.themes),!C.value&&n.defaultTheme&&(o.value=t.defaultTheme,C.value=void 0!==t.defaultTheme),z._set(o),C={};var l={};n.folders&&(l.options=t.folders),!L.value&&n.settings&&(l.value=t.settings.default.folder,L.value=void 0!==t.settings.default.folder),V._set(l),L={};var c={};n.localeOptions&&(c.options=t.localeOptions),!P.value&&n.settings&&(c.value=t.settings.default.locale,P.value=void 0!==t.settings.default.locale),X._set(c),P={};var u={};n.embedCodes&&(u.options=t.embedCodes),!E.value&&n.settings&&(u.value=t.settings.embed.preferred_embed,E.value=void 0!==t.settings.embed.preferred_embed),te._set(u),E={},"custom"==t.settings.embed.preferred_embed?ae?ae.p(n,t):((ae=gn(e,t)).c(),ae.m(i,null)):ae&&(ae.d(1),ae=null)},d:function(e){e&&v(n),M(r,"input",U),S.destroy(),D.destroy(),R.destroy(),z.destroy(),F.destroy(),V.destroy(),J.destroy(),X.destroy(),Y.destroy(),te.destroy(),ie.destroy(),ae&&ae.d()}}}(this,this._state),this.root._oncreate.push((function(){t.fire("update",{changed:f({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}function _n(e){var t=e-1;return t*t*t+1}function yn(e,t){var n=t.delay;void 0===n&&(n=0);var i=t.duration;void 0===i&&(i=400);var a=t.easing;void 0===a&&(a=_n);var s=getComputedStyle(e),r=+s.opacity,o=parseFloat(s.height),l=parseFloat(s.paddingTop),c=parseFloat(s.paddingBottom),u=parseFloat(s.marginTop),d=parseFloat(s.marginBottom),f=parseFloat(s.borderTopWidth),m=parseFloat(s.borderBottomWidth);return{delay:n,duration:i,easing:a,css:function(e){return"overflow: hidden;opacity: "+Math.min(20*e,1)*r+";height: "+e*o+"px;padding-top: "+e*l+"px;padding-bottom: "+e*c+"px;margin-top: "+e*u+"px;margin-bottom: "+e*d+"px;border-top-width: "+e*f+"px;border-bottom-width: "+e*m+"px;"}}}d(cn.prototype,Z),d(hn.prototype,Z),d(bn.prototype,Z),bn.prototype._recompute=function(e,t){var n;e.locales&&this._differs(t.localeOptions,t.localeOptions=(n=t.locales,[{value:null,label:Q("teams / defaults / none","organizations")}].concat(c(n))))&&(e.localeOptions=!0)};function wn(){this.set({hasSlotContent:this.options.slots&&this.options.slots.default})}function Tn(e,t){var n,i={type:t.helpType},a=new nn({root:e.root,store:e.store,slots:{default:T()},data:i});return{c:function(){n=N("div"),a._fragment.c()},m:function(e,i){p(a._slotted.default,n),n.innerHTML=t.help,a._mount(e,i)},p:function(e,t){e.help&&(n.innerHTML=t.help);var i={};e.helpType&&(i.type=t.helpType),a._set(i)},d:function(e){a.destroy(e)}}}function Nn(e,t){var n,i,a=t.hasSlotContent&&(!t.disabled||"on"==t.disabledState)&&t.value&&!t.indeterminate&&xn(e);return{c:function(){a&&a.c(),n=x()},m:function(e,t){a&&a.i(e,t),h(e,n,t),i=!0},p:function(t,i){!i.hasSlotContent||i.disabled&&"on"!=i.disabledState||!i.value||i.indeterminate?a&&(I(),a.o((function(){a.d(1),a=null}))):(a||(a=xn(e)).c(),a.i(n.parentNode,n))},i:function(e,t){i||this.m(e,t)},o:m,d:function(e){a&&a.d(e),e&&v(n)}}}function kn(e,t){var n,i,a,s;return{c:function(){n=N("div"),(i=N("div")).className="disabled-msg svelte-1cqdlwk"},m:function(e,a){h(e,n,a),p(n,i),i.innerHTML=t.disabledMessage,s=!0},p:function(e,t){s&&!e.disabledMessage||(i.innerHTML=t.disabledMessage)},i:function(t,i){s||(e.root._intro&&(a&&a.invalidate(),e.root._aftercreate.push((function(){a||(a=j(e,n,yn,{},!0)),a.run(1)}))),this.m(t,i))},o:function(t){s&&(a||(a=j(e,n,yn,{},!1)),a.run(0,(function(){t(),a=null})),s=!1)},d:function(e){e&&(v(n),a&&a.abort())}}}function xn(e,t){var n,i,a,s=e._slotted.default;return{c:function(){(n=N("div")).className="switch-content svelte-1cqdlwk"},m:function(e,t){h(e,n,t),s&&p(n,s),a=!0},i:function(t,s){a||(e.root._intro&&(i&&i.invalidate(),e.root._aftercreate.push((function(){i||(i=j(e,n,yn,{},!0)),i.run(1)}))),this.m(t,s))},o:function(t){a&&(i||(i=j(e,n,yn,{},!1)),i.run(0,(function(){t(),i=null})),a=!1)},d:function(e){e&&v(n),s&&_(n,s),e&&i&&i.abort()}}}function Hn(e){var t=this;V(this,e),this._state=d({value:!1,help:"",helpType:!1,disabledMessage:"",disabledState:"auto",disabled:!1,highlight:!1,indeterminate:!1,hasSlotContent:!1},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var n,i,a,s,r,o,l,c,u,d,f,m,g,_=t.help&&Tn(e,t);function y(){e.set({value:r.checked,indeterminate:r.indeterminate})}function w(t){e.toggle()}var T=[kn,Nn],x=[];function C(e){return e.disabled&&e.disabledMessage?0:1}return m=C(t),g=x[m]=T[m](e,t),{c:function(){n=N("div"),_&&_.c(),i=k("\n\n    "),a=N("label"),s=N("button"),r=N("input"),l=k("\n            "),c=N("span"),u=k("\n        "),d=N("noscript"),f=k("\n\n    "),g.c(),H(r,"change",y),"value"in t&&"indeterminate"in t||e.root._beforecreate.push(y),r.className=o=(t.disabled&&"on"==t.disabledState?"disabled-force-checked":t.disabled&&"off"==t.disabledState?"disabled-force-unchecked":"")+" svelte-1cqdlwk",r.disabled=t.disabled,O(r,"type","checkbox"),c.className="slider svelte-1cqdlwk",H(s,"click",w),s.className="switch svelte-1cqdlwk",a.className="switch-outer svelte-1cqdlwk",E(a,"disabled",t.disabled),n.className="vis-option-type-switch svelte-1cqdlwk"},m:function(e,o){h(e,n,o),_&&_.m(n,null),p(n,i),p(n,a),p(a,s),p(s,r),r.checked=t.value,r.indeterminate=t.indeterminate,p(s,l),p(s,c),p(a,u),p(a,d),d.insertAdjacentHTML("afterend",t.label),p(n,f),x[m].i(n,null)},p:function(t,s){s.help?_?_.p(t,s):((_=Tn(e,s)).c(),_.m(n,i)):_&&(_.d(1),_=null),t.value&&(r.checked=s.value),t.indeterminate&&(r.indeterminate=s.indeterminate),(t.disabled||t.disabledState)&&o!==(o=(s.disabled&&"on"==s.disabledState?"disabled-force-checked":s.disabled&&"off"==s.disabledState?"disabled-force-unchecked":"")+" svelte-1cqdlwk")&&(r.className=o),t.disabled&&(r.disabled=s.disabled),t.label&&(b(d),d.insertAdjacentHTML("afterend",s.label)),t.disabled&&E(a,"disabled",s.disabled);var l=m;(m=C(s))===l?x[m].p(t,s):(I(),g.o((function(){x[l].d(1),x[l]=null})),(g=x[m])||(g=x[m]=T[m](e,s)).c(),g.i(n,null))},d:function(e){e&&v(n),_&&_.d(),M(r,"change",y),M(s,"click",w),x[m].d()}}}(this,this._state),this.root._oncreate.push((function(){wn.call(t),t.fire("update",{changed:f({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}function Mn(e,t){var n,i=new nn({root:e.root,store:e.store,slots:{default:T()}});return{c:function(){n=N("div"),i._fragment.c()},m:function(e,a){p(i._slotted.default,n),n.innerHTML=t.help,i._mount(e,a)},p:function(e,t){e.help&&(n.innerHTML=t.help)},d:function(e){i.destroy(e)}}}function On(e,t){var n,i,a,s;return{c:function(){n=N("div"),(i=N("div")).className="disabled-msg svelte-1rmafvf"},m:function(e,a){h(e,n,a),p(n,i),i.innerHTML=t.disabledMessage,s=!0},p:function(e,t){s&&!e.disabledMessage||(i.innerHTML=t.disabledMessage)},i:function(t,i){s||(e.root._intro&&(a&&a.invalidate(),e.root._aftercreate.push((function(){a||(a=j(e,n,yn,{},!0)),a.run(1)}))),this.m(t,i))},o:function(t){s&&(a||(a=j(e,n,yn,{},!1)),a.run(0,(function(){t(),a=null})),s=!1)},d:function(e){e&&(v(n),a&&a.abort())}}}function Cn(e){V(this,e),this._state=d({value:!1,disabled:!1,faded:!1,compact:!1,indeterminate:!1,disabledMessage:"",help:!1},e.data),this._intro=!0,this._fragment=function(e,t){var n,i,a,s,r,o,l,c,u,d=t.help&&Mn(e,t);function f(){e.set({value:s.checked,indeterminate:s.indeterminate})}var m=t.disabled&&t.disabledMessage&&On(e,t);return{c:function(){d&&d.c(),n=k("\n"),i=N("div"),a=N("label"),s=N("input"),r=N("span"),o=k("\n        "),l=k(t.label),u=k("\n    "),m&&m.c(),H(s,"change",f),"value"in t&&"indeterminate"in t||e.root._beforecreate.push(f),O(s,"type","checkbox"),s.disabled=t.disabled,s.className="svelte-1rmafvf",r.className="css-ui svelte-1rmafvf",a.className=c="checkbox "+(t.disabled?"disabled":"")+" "+(t.faded?"faded":"")+" svelte-1rmafvf",i.className="control-group vis-option-group vis-option-type-checkbox svelte-1rmafvf",E(i,"is-compact",t.compact)},m:function(e,c){d&&d.m(e,c),h(e,n,c),h(e,i,c),p(i,a),p(a,s),s.checked=t.value,s.indeterminate=t.indeterminate,p(a,r),p(a,o),p(a,l),p(i,u),m&&m.i(i,null)},p:function(t,r){r.help?d?d.p(t,r):((d=Mn(e,r)).c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null),t.value&&(s.checked=r.value),t.indeterminate&&(s.indeterminate=r.indeterminate),t.disabled&&(s.disabled=r.disabled),t.label&&C(l,r.label),(t.disabled||t.faded)&&c!==(c="checkbox "+(r.disabled?"disabled":"")+" "+(r.faded?"faded":"")+" svelte-1rmafvf")&&(a.className=c),r.disabled&&r.disabledMessage?(m?m.p(t,r):(m=On(e,r))&&m.c(),m.i(i,null)):m&&(I(),m.o((function(){m.d(1),m=null}))),t.compact&&E(i,"is-compact",r.compact)},d:function(e){d&&d.d(e),e&&(v(n),v(i)),M(s,"change",f),m&&m.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}d(Hn.prototype,Z),d(Hn.prototype,{toggle:function(){var e=this.get(),t=e.disabled,n=e.indeterminate,i=e.value,a={value:!!n||!i,indeterminate:!1};t||(this.set(a),this.fire("change",a))}}),d(Cn.prototype,Z);var An={deleteTeam:function(){try{return this.set({deleting:!0}),e=Ge.delete("/v3/teams/".concat(this.get().team.id)),t=function(){window.location="/"},n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}catch(e){return Promise.reject(e)}var e,t,n}};function Ln(e,t){var n,i,a,s,r=Q("teams / delete / really"),o={},l={label:Q("teams / delete / really-yes")};void 0!==t.deleteTeam2&&(l.value=t.deleteTeam2,o.value=!0);var c=new Cn({root:e.root,store:e.store,data:l,_bind:function(t,n){var i={};!o.value&&t.value&&(i.deleteTeam2=n.value),e._set(i),o={}}});e.root._beforecreate.push((function(){c._bind({value:1},c.get())}));var u=t.deleteTeam2&&Pn(e,t);return{c:function(){n=N("p"),i=k("\n\n    "),c._fragment.c(),a=k("\n\n    "),u&&u.c(),s=x()},m:function(e,t){h(e,n,t),n.innerHTML=r,h(e,i,t),c._mount(e,t),h(e,a,t),u&&u.m(e,t),h(e,s,t)},p:function(n,i){t=i;var a={};!o.value&&n.deleteTeam2&&(a.value=t.deleteTeam2,o.value=void 0!==t.deleteTeam2),c._set(a),o={},t.deleteTeam2?u?u.p(n,t):((u=Pn(e,t)).c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},d:function(e){e&&(v(n),v(i)),c.destroy(e),e&&v(a),u&&u.d(e),e&&v(s)}}}function Pn(e,t){var n,i,a,s,r,o=Q("teams / delete / action");function l(t){e.deleteTeam()}return{c:function(){n=N("button"),i=N("i"),s=k("  "),r=N("noscript"),i.className=a="fa "+(t.deleting?"fa-spin fa-circle-o-notch":"fa-times"),H(n,"click",l),n.className="btn btn-danger"},m:function(e,t){h(e,n,t),p(n,i),p(n,s),p(n,r),r.insertAdjacentHTML("afterend",o)},p:function(e,t){e.deleting&&a!==(a="fa "+(t.deleting?"fa-spin fa-circle-o-notch":"fa-times"))&&(i.className=a)},d:function(e){e&&v(n),M(n,"click",l)}}}function En(e){V(this,e),this._state=d({deleteTeam:!1,deleteTeam2:!1,deleting:!1},e.data),this._intro=!0,this._fragment=function(e,t){var n,i,a,s=Q("teams / delete / p"),r={},o=t.deleteTeam&&Ln(e,t),l={label:Q("teams / delete / yes")};void 0!==t.deleteTeam&&(l.value=t.deleteTeam,r.value=!0);var c=new Hn({root:e.root,store:e.store,slots:{default:T()},data:l,_bind:function(t,n){var i={};!r.value&&t.value&&(i.deleteTeam=n.value),e._set(i),r={}}});return e.root._beforecreate.push((function(){c._bind({value:1},c.get())})),{c:function(){n=N("p"),i=k("\n\n"),o&&o.c(),a=x(),c._fragment.c()},m:function(e,t){h(e,n,t),n.innerHTML=s,h(e,i,t),o&&o.m(c._slotted.default,null),p(c._slotted.default,a),c._mount(e,t)},p:function(n,i){(t=i).deleteTeam?o?o.p(n,t):((o=Ln(e,t)).c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null);var s={};!r.value&&n.deleteTeam&&(s.value=t.deleteTeam,r.value=void 0!==t.deleteTeam),c._set(s),r={}},d:function(e){e&&(v(n),v(i)),o&&o.d(),c.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}function Un(e){V(this,e),this._state=d({disabled:!1,width:null,labelWidth:null,options:[],optgroups:[],valign:"middle",inline:!1,help:null,miniHelp:null},e.data),this._recompute({inline:1,width:1,labelWidth:1},this._state),this._intro=!0,this._fragment=function(e,t){var n={},i={width:t.controlWidth,class:"mt-1"};void 0!==t.value&&(i.value=t.value,n.value=!0),void 0!==t.disabled&&(i.disabled=t.disabled,n.disabled=!0),void 0!==t.options&&(i.options=t.options,n.options=!0),void 0!==t.optgroups&&(i.optgroups=t.optgroups,n.optgroups=!0);var a=new Ce({root:e.root,store:e.store,data:i,_bind:function(t,i){var a={};!n.value&&t.value&&(a.value=i.value),!n.disabled&&t.disabled&&(a.disabled=i.disabled),!n.options&&t.options&&(a.options=i.options),!n.optgroups&&t.optgroups&&(a.optgroups=i.optgroups),e._set(a),n={}}});e.root._beforecreate.push((function(){a._bind({value:1,disabled:1,options:1,optgroups:1},a.get())})),a.on("change",(function(t){e.fire("change",t)}));var s={type:"select",label:t.label,labelWidth:t.labelWidth,valign:t.valign,disabled:t.disabled,inline:t.inline,miniHelp:t.miniHelp,help:t.help,helpClass:"mt-1"},r=new cn({root:e.root,store:e.store,slots:{default:T()},data:s});return{c:function(){a._fragment.c(),r._fragment.c()},m:function(e,t){a._mount(r._slotted.default,null),r._mount(e,t)},p:function(e,i){t=i;var s={};e.controlWidth&&(s.width=t.controlWidth),!n.value&&e.value&&(s.value=t.value,n.value=void 0!==t.value),!n.disabled&&e.disabled&&(s.disabled=t.disabled,n.disabled=void 0!==t.disabled),!n.options&&e.options&&(s.options=t.options,n.options=void 0!==t.options),!n.optgroups&&e.optgroups&&(s.optgroups=t.optgroups,n.optgroups=void 0!==t.optgroups),a._set(s),n={};var o={};e.label&&(o.label=t.label),e.labelWidth&&(o.labelWidth=t.labelWidth),e.valign&&(o.valign=t.valign),e.disabled&&(o.disabled=t.disabled),e.inline&&(o.inline=t.inline),e.miniHelp&&(o.miniHelp=t.miniHelp),e.help&&(o.help=t.help),r._set(o)},d:function(e){a.destroy(),r.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}function jn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}d(En.prototype,Z),d(En.prototype,An),d(Un.prototype,Z),Un.prototype._recompute=function(e,t){var n,i,a;(e.inline||e.width)&&this._differs(t.controlWidth,t.controlWidth=(i=(n=t).inline,a=n.width,i?a||"auto":a))&&(e.controlWidth=!0),(e.inline||e.labelWidth)&&this._differs(t.labelWidth,t.labelWidth=function(e){var t=e.inline,n=e.labelWidth;return t?n||"auto":n}(t))&&(e.labelWidth=!0)};var Sn={edit:function(e){this.get().editId===e?(this.set({editId:!1}),this.update(e)):this.set({editId:e})},addProduct:function(){try{var e=this,t=e.get(),n=t.team,i=t.addProduct;return e.set({addingProduct:!0}),jn(Ge("/v3/teams/".concat(n.id,"/products"),{method:"post",payload:{productId:i}}),(function(){return jn(Ge("/v3/teams/".concat(n.id,"/products")),(function(t){e.set({products:t.list,addingProduct:!1})}))}))}catch(e){return Promise.reject(e)}},remove:function(e){try{var t=this;if(!window.confirm("Are you sure you want to remove this product?"))return;return jn(Ge("/v3/teams/".concat(t.get().team.id,"/products/").concat(e.id),{method:"delete"}),(function(){var n=t.get().products;n=n.filter((function(t){return t.id!==e.id})),t.set({products:n})}))}catch(e){return Promise.reject(e)}},update:function(e){try{var t=this,n=t.get(),i=n.updating,a=n.products.filter((function(t){return t.id===e}))[0];return i[a.id]=!0,t.set({updating:i}),jn(Ge("/v3/teams/".concat(t.get().team.id,"/products/").concat(a.id),{method:"put",payload:{expires:a.expires}}),(function(){(i=t.get().updating)[a.id]=!1,t.set({updating:i})}))}catch(e){return Promise.reject(e)}}};function In(){var e=this,t=this.get();Ge("/v3/teams/".concat(t.team.id,"/products")).then((function(t){return e.set({loadingTeamProducts:!1,products:t.list})})),Ge("/v3/products").then((function(t){return e.set({loadingAllProducts:!1,allProducts:t.list})}))}function Dn(e){var t=this._svelte,n=t.component,i=t.ctx;n.remove(i.product)}function qn(e){var t=this._svelte,n=t.component,i=t.ctx;n.edit(i.product.id)}function Rn(e){var t=this._svelte,n=t.component,i=t.ctx;n.edit(i.product.id)}function Wn(e,t,n){var i=Object.create(e);return i.product=t[n],i.each_value=t,i.i=n,i}function zn(e,t){var n;function i(e){return e.loadingTeamProducts||e.loadingAllProducts?Fn:Bn}var a=i(t),s=a(e,t);return{c:function(){s.c(),n=x()},m:function(e,t){s.m(e,t),h(e,n,t)},p:function(t,r){a===(a=i(r))&&s?s.p(t,r):(s.d(1),(s=a(e,r)).c(),s.m(n.parentNode,n))},d:function(e){s.d(e),e&&v(n)}}}function Bn(e,t){var n,i,a=t.products.length>0&&$n(e,t),s=t.addableProducts.length&&Qn(e,t);return{c:function(){a&&a.c(),n=k("\n\n\n"),s&&s.c(),i=x()},m:function(e,t){a&&a.m(e,t),h(e,n,t),s&&s.m(e,t),h(e,i,t)},p:function(t,r){r.products.length>0?a?a.p(t,r):((a=$n(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),r.addableProducts.length?s?s.p(t,r):((s=Qn(e,r)).c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d:function(e){a&&a.d(e),e&&v(n),s&&s.d(e),e&&v(i)}}}function Fn(e,t){var n,i,a,s,r=Q("teams / products / loading");return{c:function(){n=N("p"),i=N("i"),a=k("   "),s=N("noscript"),i.className="fa fa-spin fa-circle-o-notch"},m:function(e,t){h(e,n,t),p(n,i),p(n,a),p(n,s),s.insertAdjacentHTML("afterend",r)},p:u,d:function(e){e&&v(n)}}}function $n(e,t){for(var n,i=t.products,a=[],s=0;s<i.length;s+=1)a[s]=Kn(e,Wn(t,i,s));var r={columnHeaders:t.productHeaders},o=new ye({root:e.root,store:e.store,slots:{default:T()},data:r});return{c:function(){for(var e=0;e<a.length;e+=1)a[e].c();n=x(),o._fragment.c()},m:function(e,t){for(var i=0;i<a.length;i+=1)a[i].m(o._slotted.default,null);p(o._slotted.default,n),o._mount(e,t)},p:function(t,s){if(t.editId||t.products||t.updating){i=s.products;for(var r=0;r<i.length;r+=1){var l=Wn(s,i,r);a[r]?a[r].p(t,l):(a[r]=Kn(e,l),a[r].c(),a[r].m(n.parentNode,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}var c={};t.productHeaders&&(c.columnHeaders=s.productHeaders),o._set(c)},d:function(e){w(a,e),o.destroy(e)}}}function Vn(e,t){var n,i=t.product.expires||Q("teams / products / never");return{c:function(){n=k(i)},m:function(e,t){h(e,n,t)},p:function(e,t){e.products&&i!==(i=t.product.expires||Q("teams / products / never"))&&C(n,i)},d:function(e){e&&v(n)}}}function Gn(e,t){var n,i=!1;function a(){i=!0,t.each_value[t.i].expires=n.value,e.set({products:t.products}),i=!1}return{c:function(){H(n=N("input"),"input",a),O(n,"type","text")},m:function(e,i){h(e,n,i),n.value=t.product.expires},p:function(e,a){t=a,!i&&e.products&&(n.value=t.product.expires)},d:function(e){e&&v(n),M(n,"input",a)}}}function Jn(e,t){var n,i,a,s,r,o,l,c,u,d=Q("teams / edit"),f=Q("teams / remove");return{c:function(){n=N("button"),i=N("i"),a=k("  "),s=k(d),r=k("\n\n            "),o=N("button"),l=N("i"),c=k("  "),u=k(f),i.className="fa fa-edit",n._svelte={component:e,ctx:t},H(n,"click",qn),n.className="btn",l.className="fa fa-times",o._svelte={component:e,ctx:t},H(o,"click",Dn),o.className="btn"},m:function(e,t){h(e,n,t),p(n,i),p(n,a),p(n,s),h(e,r,t),h(e,o,t),p(o,l),p(o,c),p(o,u)},p:function(e,i){t=i,n._svelte.ctx=t,o._svelte.ctx=t},d:function(e){e&&v(n),M(n,"click",qn),e&&(v(r),v(o)),M(o,"click",Dn)}}}function Zn(e,t){var n,i,a,s,r=Q("teams / save");return{c:function(){n=N("button"),i=N("i"),a=k("  "),s=k(r),i.className="fa fa-spin fa-circle-o-notch",n.disabled=!0,n.className="btn btn-primary"},m:function(e,t){h(e,n,t),p(n,i),p(n,a),p(n,s)},p:u,d:function(e){e&&v(n)}}}function Xn(e,t){var n,i,a,s,r=Q("teams / save");return{c:function(){n=N("button"),i=N("i"),a=k("  "),s=k(r),i.className="fa fa-check",n._svelte={component:e,ctx:t},H(n,"click",Rn),n.className="btn btn-primary"},m:function(e,t){h(e,n,t),p(n,i),p(n,a),p(n,s)},p:function(e,i){t=i,n._svelte.ctx=t},d:function(e){e&&v(n),M(n,"click",Rn)}}}function Kn(e,t){var n,i,a,s,r,o,l,c,u,d,f=t.product.id,m=t.product.name;function g(e){return e.editId===e.product.id?Gn:Vn}var b=g(t),_=b(e,t);function y(e){return e.editId===e.product.id?Xn:e.updating[e.product.id]?Zn:Jn}var w=y(t),T=w(e,t);return{c:function(){n=N("tr"),i=N("td"),a=k(f),s=k("\n        "),r=N("td"),o=k(m),l=k("\n        "),c=N("td"),_.c(),u=k("\n        "),d=N("td"),T.c()},m:function(e,t){h(e,n,t),p(n,i),p(i,a),p(n,s),p(n,r),p(r,o),p(n,l),p(n,c),_.m(c,null),p(n,u),p(n,d),T.m(d,null)},p:function(t,n){t.products&&f!==(f=n.product.id)&&C(a,f),t.products&&m!==(m=n.product.name)&&C(o,m),b===(b=g(n))&&_?_.p(t,n):(_.d(1),(_=b(e,n)).c(),_.m(c,null)),w===(w=y(n))&&T?T.p(t,n):(T.d(1),(T=w(e,n)).c(),T.m(d,null))},d:function(e){e&&v(n),_.d(),T.d()}}}function Qn(e,t){var n,i,a,s={},r={label:Q("teams / products / add-product"),options:t.addableProducts};void 0!==t.addProduct&&(r.value=t.addProduct,s.value=!0);var o=new Un({root:e.root,store:e.store,data:r,_bind:function(t,n){var i={};!s.value&&t.value&&(i.addProduct=n.value),e._set(i),s={}}});e.root._beforecreate.push((function(){o._bind({value:1},o.get())}));var l=t.addProduct&&Yn(e,t);return{c:function(){n=N("div"),i=N("div"),o._fragment.c(),a=k("\n\n    "),l&&l.c(),A(i,"display","block"),A(n,"display","flex")},m:function(e,t){h(e,n,t),p(n,i),o._mount(i,null),p(n,a),l&&l.m(n,null)},p:function(i,a){t=a;var r={};i.addableProducts&&(r.options=t.addableProducts),!s.value&&i.addProduct&&(r.value=t.addProduct,s.value=void 0!==t.addProduct),o._set(r),s={},t.addProduct?l?l.p(i,t):((l=Yn(e,t)).c(),l.m(n,null)):l&&(l.d(1),l=null)},d:function(e){e&&v(n),o.destroy(),l&&l.d()}}}function Yn(e,t){var n,i,a,s,r,o,l=Q("teams / products / add");function c(t){e.addProduct()}return{c:function(){n=N("div"),i=N("button"),a=N("i"),r=k("\n            "),o=N("noscript"),a.className=s="fa "+(t.addingProduct?"fa fa-spin fa-circle-o-notch":"fa-plus"),H(i,"click",c),i.className="btn btn-primary",A(i,"margin-left","10px"),A(n,"display","block")},m:function(e,t){h(e,n,t),p(n,i),p(i,a),p(i,r),p(i,o),o.insertAdjacentHTML("afterend",l)},p:function(e,t){e.addingProduct&&s!==(s="fa "+(t.addingProduct?"fa fa-spin fa-circle-o-notch":"fa-plus"))&&(a.className=s)},d:function(e){e&&v(n),M(i,"click",c)}}}function ei(e){var t,n,i,a,s,r,o,l=this;V(this,e),this._state=d({productHeaders:[{title:Q("teams / products / id"),width:"10%"},{title:Q("teams / products / name"),width:"30%"},{title:Q("teams / products / expires"),width:"30%"},{title:Q("teams / products / actions"),width:"30%"}],editId:!1,updating:{},loadingTeamProducts:!0,loadingAllProducts:!0},e.data),this._recompute({products:1,allProducts:1},this._state),this._intro=!0,this._fragment=(t=this,n=this._state,r=Q("teams / products / p"),o=n.isAdmin&&zn(t,n),{c:function(){i=N("p"),a=k("\n\n"),o&&o.c(),s=x(),A(i,"margin-bottom","10px")},m:function(e,t){h(e,i,t),i.innerHTML=r,h(e,a,t),o&&o.m(e,t),h(e,s,t)},p:function(e,n){n.isAdmin?o?o.p(e,n):((o=zn(t,n)).c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d:function(e){e&&(v(i),v(a)),o&&o.d(e),e&&v(s)}}),this.root._oncreate.push((function(){In.call(l),l.fire("update",{changed:f({},l._state),current:l._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}d(ei.prototype,Z),d(ei.prototype,Sn),ei.prototype._recompute=function(e,t){var n,i,a;(e.products||e.allProducts)&&this._differs(t.addableProducts,t.addableProducts=(i=(n=t).products,(a=n.allProducts)&&i?a.filter((function(e){return!i.filter((function(t){return t.id===e.id})).length})).map((function(e){return{value:e.id,label:e.name}})):[]))&&(e.addableProducts=!0)};function ti(e){return"function"==typeof e?e():e}function ni(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var ii={},ai=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0,a=void 0,s=void 0,r=[];return function(){var l=ti(t),c=(new Date).getTime(),u=!i||c-i>l;i=c;for(var d=arguments.length,f=Array(d),m=0;m<d;m++)f[m]=arguments[m];if(u&&n.leading)return n.accumulate?Promise.resolve(e.call(this,[f])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(f)));if(a?clearTimeout(s):a=ni(),r.push(f),s=setTimeout(o.bind(this),l),n.accumulate){var p=r.length-1;return a.promise.then((function(e){return e[p]}))}return a.promise};function o(){var t=a;clearTimeout(s),Promise.resolve(n.accumulate?e.call(this,r):e.apply(this,r[r.length-1])).then(t.resolve,t.reject),r=[],a=null}}((function(e,t,n){var i=JSON.stringify({team:e,settings:t,defaultTheme:n});return ii[e.id]===i?(ii[e.id]=i,new Promise((function(e,t){e()}))):(ii[e.id]=i,Ze("/v3/teams/".concat(e.id),{payload:{name:e.name,defaultTheme:n,settings:t}}))}),500);function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ri(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?si(Object(i),!0).forEach((function(n){t(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):si(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var oi,li={id:"settings",title:Q("teams / tab / settings"),icon:"fa fa-gears",group:Q("teams / group / users"),order:10,h1:Q("teams / defaults / h1"),ui:bn,data:{}},ci={id:"members",title:Q("teams / tab / members"),icon:"im im-users",group:Q("teams / group / users"),order:20,h1:Q("teams / h1"),ui:Zt},ui=!1;var di={onTabChange:function(e,t){var n=this,i=e.team,a=e.settings,s=e.defaultTheme;ai(i,a,s).then((function(){n.set({team:i,settings:a,defaultTheme:s}),t&&t.saved&&t.saved()}))},setTab:function(e){var t=this,n=this.get().groups,i=!1;n.forEach((function(n){n.tabs.forEach((function(n){n.id===e&&(t.refs.navTabs.activateTab(n),i=!0)}))})),i||this.set({activeTab:li})}};function fi(){var e=this;oi=this;var t=window.location.pathname.split("/").slice(-1)[0]||"settings";this.setTab(t),window.addEventListener("popstate",(function(t){var n=t.state;ui=!0,setTimeout((function(){return ui=!1}),100),e.setTab(n.id)}))}function mi(e){var t=e.changed,n=e.current;e.previous;t.activeTab&&n.activeTab&&!ui&&window.history.pushState({id:n.activeTab.id},"","/team/".concat(n.team.id,"/").concat(n.activeTab.id))}function pi(e,t){var n,i=t.activeTab.h1;return{c:function(){(n=N("h2")).className="svelte-kailtr"},m:function(e,t){h(e,n,t),n.innerHTML=i},p:function(e,t){e.activeTab&&i!==(i=t.activeTab.h1)&&(n.innerHTML=i)},d:function(e){e&&v(n)}}}function hi(e){var t=this;V(this,e),this.refs={},this._state=d({allTabs:[li,ci,{id:"delete",title:Q("teams / tab / deleteTeam"),icon:"fa fa-times",group:Q("teams / group / advanced"),order:80,h1:Q("teams / delete / h1"),ui:En,ownerOnly:!0},{id:"products",title:Q("teams / tab / adminProducts"),icon:"fa fa-list-alt",group:Q("teams / group / internal"),order:90,h1:Q("teams / products / h1"),ui:ei,adminOnly:!0}],pluginTabs:[],activeTab:null,ui:bn,team:{name:""},settings:{},users:[],userId:null,visualizations:[],visualizationsArchive:[]},e.data),this._recompute({team:1,activeTab:1,allTabs:1,pluginTabs:1,isAdmin:1,role:1,tabs:1,users:1,userId:1,settings:1,defaultTheme:1,themes:1,folders:1,locales:1,visualizations:1,visualizationsArchive:1},this._state),this._intro=!0,this._handlers.state=[mi],mi.call(this,{changed:f({},this._state),current:this._state}),this._fragment=function(e,t){var n,i,a,s,r,o,l,c,u,d,f,m,g,b,_,y,w,x,H,M,L,P,E,U,j,S,I,D=Q("account / my-teams"),q=Q("nav / team / charts"),R={};document.title=n=t.pageTitle+" | Datawrapper";var W=t.activeTab&&t.activeTab.h1&&pi(e,t),z={basePath:"team/"+t.team.id,groups:t.groups};void 0!==t.activeTab&&(z.activeTab=t.activeTab,R.activeTab=!0);var B=new ce({root:e.root,store:e.store,slots:{default:T(),belowMenu:T(),aboveContent:T()},data:z,_bind:function(t,n){var i={};!R.activeTab&&t.activeTab&&(i.activeTab=n.activeTab),e._set(i),R={}}});return e.root._beforecreate.push((function(){B._bind({activeTab:1},B.get())})),e.refs.navTabs=B,{c:function(){i=k("\n\n"),a=N("div"),s=N("div"),r=N("h1"),o=k(t.title),l=k("\n\n"),c=N("div"),u=N("div"),d=N("div"),W&&W.c(),f=k("\n            "),m=N("div"),g=N("hr"),b=k("\n                "),_=N("ul"),y=N("li"),w=N("a"),x=N("i"),H=k(" "),M=k(D),L=k("\n                    "),P=N("li"),E=N("a"),U=N("i"),j=k(" "),S=k(q),B._fragment.c(),r.className="title",A(r,"margin-bottom","18px"),s.className="span12 admin svelte-kailtr",a.className="row",O(d,"slot","aboveContent"),x.className="fa fa-fw fa-arrow-left",w.href="/account/teams",y.className="svelte-kailtr",U.className="fa fa-fw fa-arrow-left",E.href=I="/team/"+t.team.id,P.className="svelte-kailtr",_.className="unstyled svelte-kailtr",O(m,"slot","belowMenu"),u.className="visconfig",c.className="settings-section dw-create-visualize chart-editor chart-editor-web admin svelte-kailtr"},m:function(e,t){h(e,i,t),h(e,a,t),p(a,s),p(s,r),p(r,o),h(e,l,t),h(e,c,t),p(c,u),p(B._slotted.aboveContent,d),W&&W.m(d,null),p(B._slotted.default,f),p(B._slotted.belowMenu,m),p(m,g),p(m,b),p(m,_),p(_,y),p(y,w),p(w,x),p(w,H),p(w,M),p(_,L),p(_,P),p(P,E),p(E,U),p(E,j),p(E,S),B._mount(u,null)},p:function(i,a){t=a,i.pageTitle&&n!==(n=t.pageTitle+" | Datawrapper")&&(document.title=n),i.title&&C(o,t.title),t.activeTab&&t.activeTab.h1?W?W.p(i,t):((W=pi(e,t)).c(),W.m(d,null)):W&&(W.d(1),W=null),i.team&&I!==(I="/team/"+t.team.id)&&(E.href=I);var s={};i.team&&(s.basePath="team/"+t.team.id),i.groups&&(s.groups=t.groups),!R.activeTab&&i.activeTab&&(s.activeTab=t.activeTab,R.activeTab=void 0!==t.activeTab),B._set(s),R={}},d:function(t){t&&(v(i),v(a),v(l),v(c)),W&&W.d(),B.destroy(),e.refs.navTabs===B&&(e.refs.navTabs=null)}}}(this,this._state),this.root._oncreate.push((function(){fi.call(t),t.fire("update",{changed:f({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),F(this))}function vi(e,t){this._handlers={},this._dependents=[],this._computed=R(),this._sortedComputedProperties=[],this._state=d({},e),this._differs=t&&t.immutable?z:W}return d(hi.prototype,Z),d(hi.prototype,di),hi.prototype._recompute=function(e,t){var n,i,a;(e.team||e.activeTab)&&this._differs(t.pageTitle,t.pageTitle=(i=(n=t).team,a=n.activeTab,"".concat(a?a.h1:""," | ").concat(Y(i.name,17,8))))&&(e.pageTitle=!0),e.team&&this._differs(t.title,t.title=function(e){var t=e.team;return"".concat(Y(t.name,17,8)," » ").concat(Q("nav / team / settings"))}(t))&&(e.title=!0),(e.allTabs||e.team||e.pluginTabs||e.isAdmin||e.role)&&this._differs(t.tabs,t.tabs=function(e){var t=e.allTabs,n=e.team,i=e.pluginTabs,a=e.isAdmin,s=e.role;return[].concat(t,i).filter((function(e){return!(e.adminOnly&&!a)&&!(e.ownerOnly&&!a&&"owner"!==s)})).map((function(e){return ri(ri({},e),{},{h1:e.h1.replace("%team%",n.name)})}))}(t))&&(e.tabs=!0),(e.tabs||e.isAdmin||e.role||e.team||e.users||e.userId||e.settings||e.defaultTheme||e.themes||e.folders||e.locales||e.visualizations||e.visualizationsArchive)&&this._differs(t.groups,t.groups=function(e){var t=e.tabs,n=e.isAdmin,i=e.role,a=e.team,s=e.users,r=e.userId,o=e.settings,l=e.defaultTheme,c=e.themes,u=e.folders,d=e.locales,f=e.visualizations,m=e.visualizationsArchive,p=[];return t.forEach((function(e){e.data=ri({isAdmin:n,isTeamOwner:"owner"===i,team:a,users:s,userId:r,settings:o,defaultTheme:l,themes:c,folders:u,locales:d,visualizations:f,visualizationsArchive:m},e.data),e.onchange=function(e,t){oi.onTabChange(e,t)},function(e,t){var n=e.filter((function(e){return e.title===t}));return n.length?n[0]:(e.push({title:t,tabs:[]}),e[e.length-1])}(p,e.group).tabs.push(e)})),p.forEach((function(e){e.tabs.sort((function(e,t){return e.order-t.order}))})),p}(t))&&(e.groups=!0)},d(vi.prototype,{_add:function(e,t){this._dependents.push({component:e,props:t})},_init:function(e){for(var t={},n=0;n<e.length;n+=1){var i=e[n];t["$"+i]=this._state[i]}return t},_remove:function(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set:function(e,t){var n=this,i=this._state;this._state=d(d({},i),e);for(var a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,t);this.fire("state",{changed:t,previous:i,current:this._state}),this._dependents.filter((function(e){for(var i={},a=!1,s=0;s<e.props.length;s+=1){var r=e.props[s];r in t&&(i["$"+r]=n._state[r],a=!0)}if(a)return e.component._stage(i),!0})).forEach((function(e){e.component.set({})})),this.fire("update",{changed:t,previous:i,current:this._state})},_sortComputedProperties:function(){var e,t=this._computed,n=this._sortedComputedProperties=[],i=R();function a(s){var r=t[s];r&&(r.deps.forEach((function(t){if(t===e)throw new Error("Cyclical dependency detected between ".concat(t," <-> ").concat(s));a(t)})),i[s]||(i[s]=!0,n.push(r)))}for(var s in this._computed)a(e=s)},compute:function(e,t,n){var i,a=this,s={deps:t,update:function(s,r,o){var l=t.map((function(e){return e in r&&(o=!0),s[e]}));if(o){var c=n.apply(null,l);a._differs(c,i)&&(i=c,r[e]=!0,s[e]=i)}}};this._computed[e]=s,this._sortComputedProperties();var r=d({},this._state),o={};s.update(r,o,!0),this._set(r,o)},fire:B,get:$,on:G,set:function(e){var t=this._state,n=this._changed={},i=!1;for(var a in e){if(this._computed[a])throw new Error("'".concat(a,"' is a read-only computed property"));this._differs(e[a],t[a])&&(n[a]=i=!0)}i&&this._set(e,n)}}),{App:hi,store:new vi({})}}));
