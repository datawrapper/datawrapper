<div class="section select-visualization">
    <div class="vis-selector-unfolded">
        <div class="vis-thumbs">
            {#each visualizations as vis}
            <div class="vis-thumb" class:active="vis.id === $type" on:click="loadVis(vis.id)">
                {@html vis.icon}
                <div class="title">{@html vis.title}</div>
            </div>
            {/each}
        </div>

        <div class="vis-archive-select">
            <SelectInput
                options="{archiveOpts}"
                label="{__('visualize / vis archive')}"
                on:change="loadVis(event.target.value)"
            />
        </div>

        <p><b>{ __("Hint") }:</b> { __('visualize / transpose-hint') }</p>
    </div>
</div>

<script>
    import { __ } from '@datawrapper/shared/l10n';
    import SelectInput from '@datawrapper/controls/Select.html';

    export default {
        components: {
            SelectInput
        },
        computed: {
            archiveOpts({ visArchive }) {
                return [
                    {
                        value: null,
                        label: '---'
                    }
                ].concat(visArchive.map(vis => ({ value: vis.id, label: vis.title })));
            }
        },
        helpers: { __ },
        methods: {
            loadVis(id) {
                const { type } = this.store.get();
                if (id !== type) {
                    this.fire('change', id);
                }
            }
        }
    };
</script>
