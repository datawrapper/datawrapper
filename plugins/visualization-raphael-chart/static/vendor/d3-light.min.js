[].map||(Array.prototype.map=function(t,n){for(var e=this,r=e.length,u=[],i=0;r>i;)i in e&&(u[i]=t.call(n,e[i],i++,e));return u.lengh=r,u}),[].filter||(Array.prototype.filter=function(t,n,e,r,u){e=this,r=[];for(u in e)~~u+""==u&&u>=0&&t.call(n,e[u],+u,e)&&r.push(e[u]);return r}),[].forEach||(Array.prototype.forEach=function(t,n){for(var e=0,r=this.length;r>e;++e)t.call(n,this[e],e,this)}),d3=function(){function t(t){for(var n=1;t*n%1;)n*=10;return n}function n(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function e(t){var n=[t.a,t.b],e=[t.c,t.d],o=u(n),a=r(n,e),c=u(i(e,n,-a))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,o*=-1,a*=-1),this.rotate=(o?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*d3_degrees,this.translate=[t.e,t.f],this.scale=[o,c],this.skew=c?Math.atan2(a,c)*d3_degrees:0}function r(t,n){return t[0]*n[0]+t[1]*n[1]}function u(t){var n=Math.sqrt(r(t,t));return n&&(t[0]/=n,t[1]/=n),n}function i(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function o(t,n){return n-=t=+t,function(e){return t+n*e}}function a(t,n){var e,r=[],u=[],i=Mn.transform(t),a=Mn.transform(n),c=i.translate,f=a.translate,s=i.rotate,l=a.rotate,h=i.skew,g=a.skew,m=i.scale,p=a.scale;return c[0]!=f[0]||c[1]!=f[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:o(c[0],f[0])},{i:3,x:o(c[1],f[1])})):f[0]||f[1]?r.push("translate("+f+")"):r.push(""),s!=l?(s-l>180?l+=360:l-s>180&&(s+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:o(s,l)})):l&&r.push(r.pop()+"rotate("+l+")"),h!=g?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:o(h,g)}):g&&r.push(r.pop()+"skewX("+g+")"),m[0]!=p[0]||m[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:o(m[0],p[0])},{i:e-2,x:o(m[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(t){for(var n,i=-1;++i<e;)r[(n=u[i]).i]=n.x(t);return r.join("")}}function c(t,n){var e,r={},u={};for(e in t)e in n?r[e]=h(e)(t[e],n[e]):u[e]=t[e];for(e in n)e in t||(u[e]=n[e]);return function(t){for(e in r)u[e]=r[e](t);return u}}function f(t,n){var e,r=[],u=[],i=t.length,o=n.length,a=Math.min(t.length,n.length);for(e=0;a>e;++e)r.push(l(t[e],n[e]));for(;i>e;++e)u[e]=t[e];for(;o>e;++e)u[e]=n[e];return function(t){for(e=0;a>e;++e)u[e]=r[e](t);return u}}function s(t,n){var e,r,u,i,a,c=0,f=0,s=[],l=[];for(t+="",n+="",bn.lastIndex=0,r=0;e=bn.exec(n);++r)e.index&&s.push(n.substring(c,f=e.index)),l.push({i:s.length,x:e[0]}),s.push(null),c=bn.lastIndex;for(c<n.length&&s.push(n.substring(c)),r=0,i=l.length;(e=bn.exec(t))&&i>r;++r)if(a=l[r],a.x==e[0]){if(a.i)if(null==s[a.i+1])for(s[a.i-1]+=a.x,s.splice(a.i,1),u=r+1;i>u;++u)l[u].i--;else for(s[a.i-1]+=a.x+s[a.i+1],s.splice(a.i,2),u=r+1;i>u;++u)l[u].i-=2;else if(null==s[a.i+1])s[a.i]=a.x;else for(s[a.i]=a.x+s[a.i+1],s.splice(a.i+1,1),u=r+1;i>u;++u)l[u].i--;l.splice(r,1),i--,r--}else a.x=o(parseFloat(e[0]),parseFloat(a.x));for(;i>r;)a=l.pop(),null==s[a.i+1]?s[a.i]=a.x:(s[a.i]=a.x+s[a.i+1],s.splice(a.i+1,1)),i--;return 1===s.length?null==s[0]?(a=l[0].x,function(t){return a(t)+""}):function(){return n}:function(t){for(r=0;i>r;++r)s[(a=l[r]).i]=a.x(t);return s.join("")}}function l(t,n){for(var e,r=Mn.interpolators.length;--r>=0&&!(e=Mn.interpolators[r](t,n)););return e}function h(t){return"transform"==t?a:l}function g(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function m(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return(e-t)*n}}function p(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return Math.max(0,Math.min(1,(e-t)*n))}}function d(t,n){try{for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}catch(r){t.prototype=n}}function v(){}function M(t){return t}function y(t,n){var e=Math.pow(10,3*Math.abs(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function x(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function w(t){return t+""}function b(t,n,e,r){var u=e(t[0],t[1]),i=r(n[0],n[1]);return function(t){return i(u(t))}}function D(t,n){var e,r=0,u=t.length-1,i=t[r],o=t[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),(n=n(o-i))&&(t[r]=n.floor(i),t[u]=n.ceil(o)),t}function T(t,n,e,r){var u=[],i=[],o=0,a=Math.min(t.length,n.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<=a;)u.push(e(t[o-1],t[o])),i.push(r(n[o-1],n[o]));return function(n){var e=Mn.bisect(t,n,1,a)-1;return i[e](u[e](n))}}function C(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function _(t,n,e,r){function u(){var u=Math.min(t.length,n.length)>2?T:b,c=r?p:m;return o=u(t,n,c,e),a=u(n,t,c,l),i}function i(t){return o(t)}var o,a;return i.invert=function(t){return a(t)},i.domain=function(n){return arguments.length?(t=n.map(Number),u()):t},i.range=function(t){return arguments.length?(n=t,u()):n},i.rangeRound=function(t){return i.range(t).interpolate(g)},i.clamp=function(t){return arguments.length?(r=t,u()):r},i.interpolate=function(t){return arguments.length?(e=t,u()):e},i.ticks=function(n){return F(t,n)},i.tickFormat=function(n,e){return L(t,n,e)},i.nice=function(){return D(t,Y),u()},i.copy=function(){return _(t,n,e,r)},u()}function k(t,n){return Mn.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Y(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}}function S(t,n){var e=C(t),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),i=n/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function F(t,n){return Mn.range.apply(Mn,S(t,n))}function L(t,n,e){var r=-Math.floor(Math.log(S(t,n)[2])/Math.LN10+.01);return Mn.format(e?e.replace(Sn,function(t,n,e,u,i,o,a,c,f,s){return[n,e,u,i,o,a,c,f||"."+(r-2*("%"===s)),s].join("")}):",."+r+"f")}function A(t,n,e){function r(n){return t(u(n))}var u=O(n),i=O(1/n);return r.invert=function(n){return i(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(u)),r):e},r.ticks=function(t){return F(e,t)},r.tickFormat=function(t,n){return L(e,t,n)},r.nice=function(){return r.domain(D(e,Y))},r.exponent=function(o){return arguments.length?(u=O(n=o),i=O(1/n),t.domain(e.map(u)),r):n},r.copy=function(){return A(t.copy(),n,e)},k(r,t)}function O(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function I(t,n,e,r,u){function i(n){return t(e(n))}function o(){return e===U?{floor:a,ceil:c}:{floor:function(t){return-c(-t)},ceil:function(t){return-a(-t)}}}function a(t){return Math.pow(n,Math.floor(Math.log(t)/Math.log(n)))}function c(t){return Math.pow(n,Math.ceil(Math.log(t)/Math.log(n)))}return i.invert=function(n){return r(t.invert(n))},i.domain=function(n){return arguments.length?(n[0]<0?(e=N,r=E):(e=U,r=H),t.domain((u=n.map(Number)).map(e)),i):u},i.base=function(t){return arguments.length?(n=+t,i):n},i.nice=function(){return t.domain(D(u,o).map(e)),i},i.ticks=function(){var u=C(t.domain()),i=[];if(u.every(isFinite)){var o=Math.log(n),a=Math.floor(u[0]/o),c=Math.ceil(u[1]/o),f=r(u[0]),s=r(u[1]),l=n%1?2:n;if(e===N)for(i.push(-Math.pow(n,-a));a++<c;)for(var h=l-1;h>0;h--)i.push(-Math.pow(n,-a)*h);else{for(;c>a;a++)for(var h=1;l>h;h++)i.push(Math.pow(n,a)*h);i.push(Math.pow(n,a))}for(a=0;i[a]<f;a++);for(c=i.length;i[c-1]>s;c--);i=i.slice(a,c)}return i},i.tickFormat=function(t,u){if(arguments.length<2&&(u=In),!arguments.length)return u;var o,a=Math.log(n),c=Math.max(.1,t/i.ticks().length),f=e===N?(o=-1e-12,Math.floor):(o=1e-12,Math.ceil);return function(t){return t/r(a*f(e(t)/a+o))<=c?u(t):""}},i.copy=function(){return I(t.copy(),n,e,r,u)},k(i,t)}function U(t){return Math.log(0>t?0:t)}function H(t){return Math.exp(t)}function N(t){return-Math.log(t>0?0:-t)}function E(t){return-Math.exp(-t)}function j(){return!0}function z(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function X(t,n,e){function r(n){var e=t(n),r=i(e,1);return r-n>n-e?e:r}function u(e){return n(e=t(new Un(e-1)),1),e}function i(t,e){return n(t=new Un(+t),e),t}function o(t,r,i){var o=u(t),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),n(o,1);else for(;r>o;)a.push(new Date(+o)),n(o,1);return a}function a(t,n,e){try{Un=z;var r=new z;return r._=t,o(r,n,e)}finally{Un=Date}}t.floor=t,t.round=r,t.ceil=u,t.offset=i,t.range=o;var c=t.utc=q(t);return c.floor=c,c.round=q(r),c.ceil=q(u),c.offset=q(i),c.range=a,t}function q(t){return function(n,e){try{Un=z;var r=new z;return r._=n,t(r,e)._}finally{Un=Date}}}function P(t,n,e,r){for(var u,i,o=0,a=n.length,c=e.length;a>o;){if(r>=c)return-1;if(u=n.charCodeAt(o++),37===u){if(i=ne[n.charAt(o++)],!i||(r=i(t,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function G(t){return new RegExp("^(?:"+t.map(Mn.requote).join("|")+")","i")}function R(t){for(var n=new v,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function B(t,n,e){t+="";var r=t.length;return e>r?new Array(e-r+1).join(n)+t:t}function W(t,n,e){Zn.lastIndex=0;var r=Zn.exec(n.substring(e));return r?e+=r[0].length:-1}function Z(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e));return r?e+=r[0].length:-1}function $(t,n,e){Jn.lastIndex=0;var r=Jn.exec(n.substring(e));return r?(t.m=Kn.get(r[0].toLowerCase()),e+=r[0].length):-1}function V(t,n,e){$n.lastIndex=0;var r=$n.exec(n.substring(e));return r?(t.m=Vn.get(r[0].toLowerCase()),e+=r[0].length):-1}function J(t,n,e){return P(t,te.c.toString(),n,e)}function K(t,n,e){return P(t,te.x.toString(),n,e)}function Q(t,n,e){return P(t,te.X.toString(),n,e)}function tn(t,n,e){ee.lastIndex=0;var r=ee.exec(n.substring(e,e+4));return r?(t.y=+r[0],e+=r[0].length):-1}function nn(t,n,e){ee.lastIndex=0;var r=ee.exec(n.substring(e,e+2));return r?(t.y=en(+r[0]),e+=r[0].length):-1}function en(t){return t+(t>68?1900:2e3)}function rn(t,n,e){ee.lastIndex=0;var r=ee.exec(n.substring(e,e+2));return r?(t.m=r[0]-1,e+=r[0].length):-1}function un(t,n,e){ee.lastIndex=0;var r=ee.exec(n.substring(e,e+2));return r?(t.d=+r[0],e+=r[0].length):-1}function on(t,n,e){ee.lastIndex=0;var r=ee.exec(n.substring(e,e+2));return r?(t.H=+r[0],e+=r[0].length):-1}function an(t,n,e){ee.lastIndex=0;var r=ee.exec(n.substring(e,e+2));return r?(t.M=+r[0],e+=r[0].length):-1}function cn(t,n,e){ee.lastIndex=0;var r=ee.exec(n.substring(e,e+2));return r?(t.S=+r[0],e+=r[0].length):-1}function fn(t,n,e){ee.lastIndex=0;var r=ee.exec(n.substring(e,e+3));return r?(t.L=+r[0],e+=r[0].length):-1}function sn(t,n,e){var r=re.get(n.substring(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}function ln(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=~~(Math.abs(n)/60),u=Math.abs(n)%60;return e+B(r,"0",2)+B(u,"0",2)}function hn(t,n,e){function r(n){return t(n)}return r.invert=function(n){return gn(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(gn)},r.nice=function(t){return r.domain(D(r.domain(),function(){return t}))},r.ticks=function(e,u){var i=C(r.domain());if("function"!=typeof e){var o=i[1]-i[0],a=o/e,c=Mn.bisect(ue,a);if(c==ue.length)return n.year(i,e);if(!c)return t.ticks(e).map(gn);Math.log(a/ue[c-1])<Math.log(ue[c]/a)&&--c,e=n[c],u=e[1],e=e[0].range}return e(i[0],new Date(+i[1]+1),u)},r.tickFormat=function(){return e},r.copy=function(){return hn(t.copy(),n,e)},k(r,t)}function gn(t){return new Date(t)}function mn(t){return function(n){for(var e=t.length-1,r=t[e];!r[1](n);)r=t[--e];return r[0](n)}}function pn(t){var n=new Date(t,0,1);return n.setFullYear(t),n}function dn(t){var n=t.getFullYear(),e=pn(n),r=pn(n+1);return n+(t-e)/(r-e)}function vn(t){return null!=t&&!isNaN(t)}var Mn={version:"3.1.7"};Mn.range=function(n,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=n,n=0)),1/0===(e-n)/r)throw new Error("infinite range");var u,i=[],o=t(Math.abs(r)),a=-1;if(n*=o,e*=o,r*=o,0>r)for(;(u=n+r*++a)>e;)i.push(u/o);else for(;(u=n+r*++a)<e;)i.push(u/o);return i},Mn.rebind=function(t,e){for(var r,u=1,i=arguments.length;++u<i;)t[r=arguments[u]]=n(t,e,e[r]);return t};var yn=document,xn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Mn.ns={prefix:xn,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&(e=t.substring(0,n),t=t.substring(n+1)),xn.hasOwnProperty(e)?{space:xn[e],local:t}:t}},Mn.transform=function(t){var n=yn.createElementNS(Mn.ns.prefix.svg,"g");return(Mn.transform=function(t){if(null!=t){n.setAttribute("transform",t);var r=n.transform.baseVal.consolidate()}return new e(r?r.matrix:wn)})(t)},e.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var wn={a:1,b:0,c:0,d:1,e:0,f:0};Mn.interpolateNumber=o,Mn.interpolateTransform=a,Mn.interpolateObject=c,Mn.interpolateArray=f,Mn.interpolateString=s;var bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Mn.interpolate=l,Mn.interpolators=[function(t,n){var e=typeof n;return("string"===e?s:"object"===e?Array.isArray(n)?f:c:o)(t,n)}],Mn.interpolateRound=g,Mn.map=function(t){var n=new v;for(var e in t)n.set(e,t[e]);return n},d(v,{has:function(t){return Dn+t in this},get:function(t){return this[Dn+t]},set:function(t,n){return this[Dn+t]=n},remove:function(t){return t=Dn+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(n){t.push(n)}),t},values:function(){var t=[];return this.forEach(function(n,e){t.push(e)}),t},entries:function(){var t=[];return this.forEach(function(n,e){t.push({key:n,value:e})}),t},forEach:function(t){for(var n in this)n.charCodeAt(0)===Tn&&t.call(this,n.substring(1),this[n])}});var Dn="\0",Tn=Dn.charCodeAt(0),Cn=".",_n=",",kn=[3,3],Yn=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(y);Mn.formatPrefix=function(t,n){var e=0;return t&&(0>t&&(t*=-1),n&&(t=Mn.round(t,x(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((0>=e?e+1:e-1)/3)))),Yn[8+e/3]},Mn.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)},Mn.format=function(t){var n=Sn.exec(t),e=n[1]||" ",r=n[2]||">",u=n[3]||"",i=n[4]||"",o=n[5],a=+n[6],c=n[7],f=n[8],s=n[9],l=1,h="",g=!1;switch(f&&(f=+f.substring(1)),(o||"0"===e&&"="===r)&&(o=e="0",r="=",c&&(a-=Math.floor((a-1)/4))),s){case"n":c=!0,s="g";break;case"%":l=100,h="%",s="f";break;case"p":l=100,h="%",s="r";break;case"b":case"o":case"x":case"X":i&&(i="0"+s.toLowerCase());case"c":case"d":g=!0,f=0;break;case"s":l=-1,s="r"}"#"===i&&(i=""),"r"!=s||f||(s="g"),null!=f&&("g"==s?f=Math.max(1,Math.min(21,f)):("e"==s||"f"==s)&&(f=Math.max(0,Math.min(20,f)))),s=Fn.get(s)||w;var m=o&&c;return function(t){if(g&&t%1)return"";var n=0>t||0===t&&0>1/t?(t=-t,"-"):u;if(0>l){var p=Mn.formatPrefix(t,f);t=p.scale(t),h=p.symbol}else t*=l;t=s(t,f),!o&&c&&(t=Ln(t));var d=i.length+t.length+(m?0:n.length),v=a>d?new Array(d=a-d+1).join(e):"";return m&&(t=Ln(v+t)),Cn&&t.replace(".",Cn),n+=i,("<"===r?n+t+v:">"===r?v+n+t:"^"===r?v.substring(0,d>>=1)+n+t+v.substring(d):n+(m?t:v+t))+h}};var Sn=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Fn=Mn.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=Mn.round(t,x(t,n))).toFixed(Math.max(0,Math.min(20,x(t*(1+1e-15),n))))}}),Ln=M;if(kn){var An=kn.length;Ln=function(t){for(var n=t.lastIndexOf("."),e=n>=0?"."+t.substring(n+1):(n=t.length,""),r=[],u=0,i=kn[0];n>0&&i>0;)r.push(t.substring(n-=i,n+i)),i=kn[u=(u+1)%An];return r.reverse().join(_n||"")+e}}Mn.bisector=function(t){return{left:function(n,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=n.length);u>r;){var i=r+u>>>1;t.call(n,n[i],i)<e?r=i+1:u=i}return r},right:function(n,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=n.length);u>r;){var i=r+u>>>1;e<t.call(n,n[i],i)?u=i:r=i+1}return r}}};var On=Mn.bisector(function(t){return t});Mn.bisectLeft=On.left,Mn.bisect=Mn.bisectRight=On.right,Mn.scale={},Mn.scale.linear=function(){return _([0,1],[0,1],l,!1)},Mn.scale.pow=function(){return A(Mn.scale.linear(),1,[0,1])},Mn.scale.sqrt=function(){return Mn.scale.pow().exponent(.5)},Mn.scale.log=function(){return I(Mn.scale.linear().domain([0,Math.LN10]),10,U,H,[1,10])};var In=Mn.format(".0e");Mn.time={};var Un=Date,Hn=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];z.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Nn.setUTCDate.apply(this._,arguments)},setDay:function(){Nn.setUTCDay.apply(this._,arguments)},setFullYear:function(){Nn.setUTCFullYear.apply(this._,arguments)},setHours:function(){Nn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Nn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Nn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Nn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Nn.setUTCSeconds.apply(this._,arguments)},setTime:function(){Nn.setTime.apply(this._,arguments)}};var Nn=Date.prototype;Mn.time.year=X(function(t){return t=Mn.time.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),Mn.time.years=Mn.time.year.range,Mn.time.years.utc=Mn.time.year.utc.range,Mn.time.day=X(function(t){var n=new Un(1970,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),Mn.time.days=Mn.time.day.range,Mn.time.days.utc=Mn.time.day.utc.range,Mn.time.dayOfYear=function(t){var n=Mn.time.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},Mn.requote=function(t){return t.replace(En,"\\$&")};var En=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,jn="%a %e %b %X %Y",zn="%d.%m.%Y",Xn="%H:%M:%S",qn=Globalize.culture(__locale).calendar.days.names,Pn=Globalize.culture(__locale).calendar.days.namesAbbr,Gn=Globalize.culture(__locale).calendar.months.names,Rn=Globalize.culture(__locale).calendar.months.namesAbbr,Bn=Globalize.culture().calendar.firstDay;Hn.forEach(function(t,n){t=t.toLowerCase(),n=7-n;var e=Mn.time[t]=X(function(t){return(t=Mn.time.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=Mn.time.year(t).getDay();return Math.floor((Mn.time.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});Mn.time[t+"s"]=e.range,Mn.time[t+"s"].utc=e.utc.range,Mn.time[t+"OfYear"]=function(t){var e=Mn.time.year(t).getDay();return Math.floor((Mn.time.dayOfYear(t)+(e+n)%7)/7)}}),Mn.time.week=Mn.time[Hn[Bn].toLowerCase()],Mn.time.weeks=Mn.time[Hn[Bn].toLowerCase()].range,Mn.time.weeks.utc=Mn.time[Hn[Bn].toLowerCase()].utc.range,Mn.time.weekOfYear=Mn.time.sundayOfYear,Mn.time.format=function(t){function n(n){for(var r,u,i,o=[],a=-1,c=0;++a<e;)37===t.charCodeAt(a)&&(o.push(t.substring(c,a)),null!=(u=Qn[r=t.charAt(++a)])&&(r=t.charAt(++a)),(i=te[r])&&(r=i(n,null==u?"e"===r?" ":"0":u)),o.push(r),c=a+1);return o.push(t.substring(c,a)),o.join("")}var e=t.length;return n.parse=function(n){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=P(e,t,n,0);if(r!=n.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var u=new Un;return u.setFullYear(e.y,e.m,e.d),u.setHours(e.H,e.M,e.S,e.L),u},n.toString=function(){return t},n};var Wn=G(qn),Zn=G(Pn),$n=G(Gn),Vn=R(Gn),Jn=G(Rn),Kn=R(Rn),Qn={"-":"",_:" ",0:"0"},te={a:function(t){return Pn[t.getDay()]},A:function(t){return qn[t.getDay()]},b:function(t){return Rn[t.getMonth()]},B:function(t){return Gn[t.getMonth()]},c:Mn.time.format(jn),d:function(t,n){return B(t.getDate(),n,2)},e:function(t,n){return B(t.getDate(),n,2)},H:function(t,n){return B(t.getHours(),n,2)},I:function(t,n){return B(t.getHours()%12||12,n,2)},j:function(t,n){return B(1+Mn.time.dayOfYear(t),n,3)},L:function(t,n){return B(t.getMilliseconds(),n,3)},m:function(t,n){return B(t.getMonth()+1,n,2)},M:function(t,n){return B(t.getMinutes(),n,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,n){return B(t.getSeconds(),n,2)},U:function(t,n){return B(Mn.time.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return B(Mn.time.mondayOfYear(t),n,2)},x:Mn.time.format(zn),X:Mn.time.format(Xn),y:function(t,n){return B(t.getFullYear()%100,n,2)},Y:function(t,n){return B(t.getFullYear()%1e4,n,4)},Z:ln,"%":function(){return"%"}},ne={a:W,A:Z,b:$,B:V,c:J,d:un,e:un,H:on,I:on,L:fn,m:rn,M:an,p:sn,S:cn,x:K,X:Q,y:nn,Y:tn},ee=/^\s*\d+/,re=Mn.map({am:0,pm:1});Mn.time.hour=X(function(t){var n=t.getTimezoneOffset()/60;return new Un(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),Mn.time.hours=Mn.time.hour.range,Mn.time.hours.utc=Mn.time.hour.utc.range,Mn.time.minute=X(function(t){return new Un(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),Mn.time.minutes=Mn.time.minute.range,Mn.time.minutes.utc=Mn.time.minute.utc.range,Mn.time.month=X(function(t){return t=Mn.time.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),Mn.time.months=Mn.time.month.range,Mn.time.months.utc=Mn.time.month.utc.range,Mn.time.second=X(function(t){return new Un(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),Mn.time.seconds=Mn.time.second.range,Mn.time.seconds.utc=Mn.time.second.utc.range;var ue=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ie=[[Mn.time.second,1],[Mn.time.second,5],[Mn.time.second,15],[Mn.time.second,30],[Mn.time.minute,1],[Mn.time.minute,5],[Mn.time.minute,15],[Mn.time.minute,30],[Mn.time.hour,1],[Mn.time.hour,3],[Mn.time.hour,6],[Mn.time.hour,12],[Mn.time.day,1],[Mn.time.day,2],[Mn.time.week,1],[Mn.time.month,1],[Mn.time.month,3],[Mn.time.year,1]],oe=[[Mn.time.format("%Y"),j],[Mn.time.format("%B"),function(t){return t.getMonth()}],[Mn.time.format("%b %d"),function(t){return 1!=t.getDate()}],[Mn.time.format("%a %d"),function(t){return t.getDay()!=Bn&&1!=t.getDate()}],[Mn.time.format("%I %p"),function(t){return t.getHours()}],[Mn.time.format("%I:%M"),function(t){return t.getMinutes()}],[Mn.time.format(":%S"),function(t){return t.getSeconds()}],[Mn.time.format(".%L"),function(t){return t.getMilliseconds()}]],ae=Mn.scale.linear(),ce=mn(oe);return ie.year=function(t,n){return ae.domain(t.map(dn)).ticks(n).map(pn)},Mn.time.scale=function(){return hn(Mn.scale.linear(),ie,ce)},Mn.ascending=function(t,n){return n>t?-1:t>n?1:t>=n?0:0/0},Mn.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),u=+t[r-1],i=e-r;return i?u+i*(t[r]-u):u},Mn.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(vn),t.length?Mn.quantile(t.sort(Mn.ascending),.5):void 0},Mn.extent=function(t,n){var e,r,u,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&(null==(e=u=t[i])||e!=e);)e=u=void 0;for(;++i<o;)null!=(r=t[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o&&(null==(e=u=n.call(t,t[i],i))||e!=e);)e=void 0;for(;++i<o;)null!=(r=n.call(t,t[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},Mn.min=function(t,n){var e,r,u=-1,i=t.length;if(1===arguments.length){for(;++u<i&&(null==(e=t[u])||e!=e);)e=void 0;for(;++u<i;)null!=(r=t[u])&&e>r&&(e=r)}else{for(;++u<i&&(null==(e=n.call(t,t[u],u))||e!=e);)e=void 0;for(;++u<i;)null!=(r=n.call(t,t[u],u))&&e>r&&(e=r)}return e},Mn.max=function(t,n){var e,r,u=-1,i=t.length;if(1===arguments.length){for(;++u<i&&(null==(e=t[u])||e!=e);)e=void 0;for(;++u<i;)null!=(r=t[u])&&r>e&&(e=r)}else{for(;++u<i&&(null==(e=n.call(t,t[u],u))||e!=e);)e=void 0;for(;++u<i;)null!=(r=n.call(t,t[u],u))&&r>e&&(e=r)}return e},Mn.sum=function(t,n){var e,r=0,u=t.length,i=-1;if(1===arguments.length)for(;++i<u;)isNaN(e=+t[i])||(r+=e);else for(;++i<u;)isNaN(e=+n.call(t,t[i],i))||(r+=e);return r},Mn}();