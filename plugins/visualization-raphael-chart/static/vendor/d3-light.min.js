d3=function(){function t(t){for(var n=1;t*n%1;)n*=10;return n}function n(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function e(t){var n=[t.a,t.b],e=[t.c,t.d],o=u(n),a=r(n,e),c=u(i(e,n,-a))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,o*=-1,a*=-1),this.rotate=(o?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*d3_degrees,this.translate=[t.e,t.f],this.scale=[o,c],this.skew=c?Math.atan2(a,c)*d3_degrees:0}function r(t,n){return t[0]*n[0]+t[1]*n[1]}function u(t){var n=Math.sqrt(r(t,t));return n&&(t[0]/=n,t[1]/=n),n}function i(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function o(t,n){return n-=t=+t,function(e){return t+n*e}}function a(t,n){var e,r=[],u=[],i=dn.transform(t),a=dn.transform(n),c=i.translate,s=a.translate,f=i.rotate,l=a.rotate,h=i.skew,g=a.skew,m=i.scale,p=a.scale;return c[0]!=s[0]||c[1]!=s[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:o(c[0],s[0])},{i:3,x:o(c[1],s[1])})):s[0]||s[1]?r.push("translate("+s+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:o(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),h!=g?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:o(h,g)}):g&&r.push(r.pop()+"skewX("+g+")"),m[0]!=p[0]||m[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:o(m[0],p[0])},{i:e-2,x:o(m[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(t){for(var n,i=-1;++i<e;)r[(n=u[i]).i]=n.x(t);return r.join("")}}function c(t,n){var e,r={},u={};for(e in t)e in n?r[e]=h(e)(t[e],n[e]):u[e]=t[e];for(e in n)e in t||(u[e]=n[e]);return function(t){for(e in r)u[e]=r[e](t);return u}}function s(t,n){var e,r=[],u=[],i=t.length,o=n.length,a=Math.min(t.length,n.length);for(e=0;a>e;++e)r.push(l(t[e],n[e]));for(;i>e;++e)u[e]=t[e];for(;o>e;++e)u[e]=n[e];return function(t){for(e=0;a>e;++e)u[e]=r[e](t);return u}}function f(t,n){var e,r,u,i,a,c=0,s=0,f=[],l=[];for(t+="",n+="",xn.lastIndex=0,r=0;e=xn.exec(n);++r)e.index&&f.push(n.substring(c,s=e.index)),l.push({i:f.length,x:e[0]}),f.push(null),c=xn.lastIndex;for(c<n.length&&f.push(n.substring(c)),r=0,i=l.length;(e=xn.exec(t))&&i>r;++r)if(a=l[r],a.x==e[0]){if(a.i)if(null==f[a.i+1])for(f[a.i-1]+=a.x,f.splice(a.i,1),u=r+1;i>u;++u)l[u].i--;else for(f[a.i-1]+=a.x+f[a.i+1],f.splice(a.i,2),u=r+1;i>u;++u)l[u].i-=2;else if(null==f[a.i+1])f[a.i]=a.x;else for(f[a.i]=a.x+f[a.i+1],f.splice(a.i+1,1),u=r+1;i>u;++u)l[u].i--;l.splice(r,1),i--,r--}else a.x=o(parseFloat(e[0]),parseFloat(a.x));for(;i>r;)a=l.pop(),null==f[a.i+1]?f[a.i]=a.x:(f[a.i]=a.x+f[a.i+1],f.splice(a.i+1,1)),i--;return 1===f.length?null==f[0]?(a=l[0].x,function(t){return a(t)+""}):function(){return n}:function(t){for(r=0;i>r;++r)f[(a=l[r]).i]=a.x(t);return f.join("")}}function l(t,n){for(var e,r=dn.interpolators.length;--r>=0&&!(e=dn.interpolators[r](t,n)););return e}function h(t){return"transform"==t?a:l}function g(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function m(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return(e-t)*n}}function p(t,n){return n=n-(t=+t)?1/(n-t):0,function(e){return Math.max(0,Math.min(1,(e-t)*n))}}function d(t,n){try{for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}catch(r){t.prototype=n}}function M(){}function v(t){return t}function y(t,n){var e=Math.pow(10,3*Math.abs(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function x(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function w(t){return t+""}function b(t,n,e,r){var u=e(t[0],t[1]),i=r(n[0],n[1]);return function(t){return i(u(t))}}function D(t,n){var e,r=0,u=t.length-1,i=t[r],o=t[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),(n=n(o-i))&&(t[r]=n.floor(i),t[u]=n.ceil(o)),t}function T(t,n,e,r){var u=[],i=[],o=0,a=Math.min(t.length,n.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<=a;)u.push(e(t[o-1],t[o])),i.push(r(n[o-1],n[o]));return function(n){var e=dn.bisect(t,n,1,a)-1;return i[e](u[e](n))}}function C(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function _(t,n,e,r){function u(){var u=Math.min(t.length,n.length)>2?T:b,c=r?p:m;return o=u(t,n,c,e),a=u(n,t,c,l),i}function i(t){return o(t)}var o,a;return i.invert=function(t){return a(t)},i.domain=function(n){return arguments.length?(t=n.map(Number),u()):t},i.range=function(t){return arguments.length?(n=t,u()):n},i.rangeRound=function(t){return i.range(t).interpolate(g)},i.clamp=function(t){return arguments.length?(r=t,u()):r},i.interpolate=function(t){return arguments.length?(e=t,u()):e},i.ticks=function(n){return F(t,n)},i.tickFormat=function(n,e){return L(t,n,e)},i.nice=function(){return D(t,Y),u()},i.copy=function(){return _(t,n,e,r)},u()}function k(t,n){return dn.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Y(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}}function S(t,n){var e=C(t),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),i=n/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function F(t,n){return dn.range.apply(dn,S(t,n))}function L(t,n,e){var r=-Math.floor(Math.log(S(t,n)[2])/Math.LN10+.01);return dn.format(e?e.replace(kn,function(t,n,e,u,i,o,a,c,s,f){return[n,e,u,i,o,a,c,s||"."+(r-2*("%"===f)),f].join("")}):",."+r+"f")}function A(t,n,e,r,u){function i(n){return t(e(n))}function o(){return e===O?{floor:a,ceil:c}:{floor:function(t){return-c(-t)},ceil:function(t){return-a(-t)}}}function a(t){return Math.pow(n,Math.floor(Math.log(t)/Math.log(n)))}function c(t){return Math.pow(n,Math.ceil(Math.log(t)/Math.log(n)))}return i.invert=function(n){return r(t.invert(n))},i.domain=function(n){return arguments.length?(n[0]<0?(e=U,r=H):(e=O,r=I),t.domain((u=n.map(Number)).map(e)),i):u},i.base=function(t){return arguments.length?(n=+t,i):n},i.nice=function(){return t.domain(D(u,o).map(e)),i},i.ticks=function(){var u=C(t.domain()),i=[];if(u.every(isFinite)){var o=Math.log(n),a=Math.floor(u[0]/o),c=Math.ceil(u[1]/o),s=r(u[0]),f=r(u[1]),l=n%1?2:n;if(e===U)for(i.push(-Math.pow(n,-a));a++<c;)for(var h=l-1;h>0;h--)i.push(-Math.pow(n,-a)*h);else{for(;c>a;a++)for(var h=1;l>h;h++)i.push(Math.pow(n,a)*h);i.push(Math.pow(n,a))}for(a=0;i[a]<s;a++);for(c=i.length;i[c-1]>f;c--);i=i.slice(a,c)}return i},i.tickFormat=function(t,u){if(arguments.length<2&&(u=An),!arguments.length)return u;var o,a=Math.log(n),c=Math.max(.1,t/i.ticks().length),s=e===U?(o=-1e-12,Math.floor):(o=1e-12,Math.ceil);return function(t){return t/r(a*s(e(t)/a+o))<=c?u(t):""}},i.copy=function(){return A(t.copy(),n,e,r,u)},k(i,t)}function O(t){return Math.log(0>t?0:t)}function I(t){return Math.exp(t)}function U(t){return-Math.log(t>0?0:-t)}function H(t){return-Math.exp(-t)}function E(){return!0}function j(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function z(t,n,e){function r(n){var e=t(n),r=i(e,1);return r-n>n-e?e:r}function u(e){return n(e=t(new On(e-1)),1),e}function i(t,e){return n(t=new On(+t),e),t}function o(t,r,i){var o=u(t),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),n(o,1);else for(;r>o;)a.push(new Date(+o)),n(o,1);return a}function a(t,n,e){try{On=j;var r=new j;return r._=t,o(r,n,e)}finally{On=Date}}t.floor=t,t.round=r,t.ceil=u,t.offset=i,t.range=o;var c=t.utc=N(t);return c.floor=c,c.round=N(r),c.ceil=N(u),c.offset=N(i),c.range=a,t}function N(t){return function(n,e){try{On=j;var r=new j;return r._=n,t(r,e)._}finally{On=Date}}}function X(t,n,e,r){for(var u,i,o=0,a=n.length,c=e.length;a>o;){if(r>=c)return-1;if(u=n.charCodeAt(o++),37===u){if(i=Qn[n.charAt(o++)],!i||(r=i(t,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function P(t){return new RegExp("^(?:"+t.map(dn.requote).join("|")+")","i")}function q(t){for(var n=new M,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function G(t,n,e){t+="";var r=t.length;return e>r?new Array(e-r+1).join(n)+t:t}function R(t,n,e){Bn.lastIndex=0;var r=Bn.exec(n.substring(e));return r?e+=r[0].length:-1}function B(t,n,e){Rn.lastIndex=0;var r=Rn.exec(n.substring(e));return r?e+=r[0].length:-1}function W(t,n,e){$n.lastIndex=0;var r=$n.exec(n.substring(e));return r?(t.m=Vn.get(r[0].toLowerCase()),e+=r[0].length):-1}function Z(t,n,e){Wn.lastIndex=0;var r=Wn.exec(n.substring(e));return r?(t.m=Zn.get(r[0].toLowerCase()),e+=r[0].length):-1}function $(t,n,e){return X(t,Kn.c.toString(),n,e)}function V(t,n,e){return X(t,Kn.x.toString(),n,e)}function J(t,n,e){return X(t,Kn.X.toString(),n,e)}function K(t,n,e){te.lastIndex=0;var r=te.exec(n.substring(e,e+4));return r?(t.y=+r[0],e+=r[0].length):-1}function Q(t,n,e){te.lastIndex=0;var r=te.exec(n.substring(e,e+2));return r?(t.y=tn(+r[0]),e+=r[0].length):-1}function tn(t){return t+(t>68?1900:2e3)}function nn(t,n,e){te.lastIndex=0;var r=te.exec(n.substring(e,e+2));return r?(t.m=r[0]-1,e+=r[0].length):-1}function en(t,n,e){te.lastIndex=0;var r=te.exec(n.substring(e,e+2));return r?(t.d=+r[0],e+=r[0].length):-1}function rn(t,n,e){te.lastIndex=0;var r=te.exec(n.substring(e,e+2));return r?(t.H=+r[0],e+=r[0].length):-1}function un(t,n,e){te.lastIndex=0;var r=te.exec(n.substring(e,e+2));return r?(t.M=+r[0],e+=r[0].length):-1}function on(t,n,e){te.lastIndex=0;var r=te.exec(n.substring(e,e+2));return r?(t.S=+r[0],e+=r[0].length):-1}function an(t,n,e){te.lastIndex=0;var r=te.exec(n.substring(e,e+3));return r?(t.L=+r[0],e+=r[0].length):-1}function cn(t,n,e){var r=ne.get(n.substring(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}function sn(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=~~(Math.abs(n)/60),u=Math.abs(n)%60;return e+G(r,"0",2)+G(u,"0",2)}function fn(t,n,e){function r(n){return t(n)}return r.invert=function(n){return ln(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(ln)},r.nice=function(t){return r.domain(D(r.domain(),function(){return t}))},r.ticks=function(e,u){var i=C(r.domain());if("function"!=typeof e){var o=i[1]-i[0],a=o/e,c=dn.bisect(ee,a);if(c==ee.length)return n.year(i,e);if(!c)return t.ticks(e).map(ln);Math.log(a/ee[c-1])<Math.log(ee[c]/a)&&--c,e=n[c],u=e[1],e=e[0].range}return e(i[0],new Date(+i[1]+1),u)},r.tickFormat=function(){return e},r.copy=function(){return fn(t.copy(),n,e)},k(r,t)}function ln(t){return new Date(t)}function hn(t){return function(n){for(var e=t.length-1,r=t[e];!r[1](n);)r=t[--e];return r[0](n)}}function gn(t){var n=new Date(t,0,1);return n.setFullYear(t),n}function mn(t){var n=t.getFullYear(),e=gn(n),r=gn(n+1);return n+(t-e)/(r-e)}function pn(t){return null!=t&&!isNaN(t)}var dn={version:"3.1.7"};dn.range=function(n,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=n,n=0)),1/0===(e-n)/r)throw new Error("infinite range");var u,i=[],o=t(Math.abs(r)),a=-1;if(n*=o,e*=o,r*=o,0>r)for(;(u=n+r*++a)>e;)i.push(u/o);else for(;(u=n+r*++a)<e;)i.push(u/o);return i},dn.rebind=function(t,e){for(var r,u=1,i=arguments.length;++u<i;)t[r=arguments[u]]=n(t,e,e[r]);return t};var Mn=document,vn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};dn.ns={prefix:vn,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&(e=t.substring(0,n),t=t.substring(n+1)),vn.hasOwnProperty(e)?{space:vn[e],local:t}:t}},dn.transform=function(t){var n=Mn.createElementNS(dn.ns.prefix.svg,"g");return(dn.transform=function(t){if(null!=t){n.setAttribute("transform",t);var r=n.transform.baseVal.consolidate()}return new e(r?r.matrix:yn)})(t)},e.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var yn={a:1,b:0,c:0,d:1,e:0,f:0};dn.interpolateNumber=o,dn.interpolateTransform=a,dn.interpolateObject=c,dn.interpolateArray=s,dn.interpolateString=f;var xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;dn.interpolate=l,dn.interpolators=[function(t,n){var e=typeof n;return("string"===e?f:"object"===e?Array.isArray(n)?s:c:o)(t,n)}],dn.interpolateRound=g,dn.map=function(t){var n=new M;for(var e in t)n.set(e,t[e]);return n},d(M,{has:function(t){return wn+t in this},get:function(t){return this[wn+t]},set:function(t,n){return this[wn+t]=n},remove:function(t){return t=wn+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(n){t.push(n)}),t},values:function(){var t=[];return this.forEach(function(n,e){t.push(e)}),t},entries:function(){var t=[];return this.forEach(function(n,e){t.push({key:n,value:e})}),t},forEach:function(t){for(var n in this)n.charCodeAt(0)===bn&&t.call(this,n.substring(1),this[n])}});var wn="\0",bn=wn.charCodeAt(0),Dn=".",Tn=",",Cn=[3,3],_n=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(y);dn.formatPrefix=function(t,n){var e=0;return t&&(0>t&&(t*=-1),n&&(t=dn.round(t,x(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((0>=e?e+1:e-1)/3)))),_n[8+e/3]},dn.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)},dn.format=function(t){var n=kn.exec(t),e=n[1]||" ",r=n[2]||">",u=n[3]||"",i=n[4]||"",o=n[5],a=+n[6],c=n[7],s=n[8],f=n[9],l=1,h="",g=!1;switch(s&&(s=+s.substring(1)),(o||"0"===e&&"="===r)&&(o=e="0",r="=",c&&(a-=Math.floor((a-1)/4))),f){case"n":c=!0,f="g";break;case"%":l=100,h="%",f="f";break;case"p":l=100,h="%",f="r";break;case"b":case"o":case"x":case"X":i&&(i="0"+f.toLowerCase());case"c":case"d":g=!0,s=0;break;case"s":l=-1,f="r"}"#"===i&&(i=""),"r"!=f||s||(f="g"),null!=s&&("g"==f?s=Math.max(1,Math.min(21,s)):("e"==f||"f"==f)&&(s=Math.max(0,Math.min(20,s)))),f=Yn.get(f)||w;var m=o&&c;return function(t){if(g&&t%1)return"";var n=0>t||0===t&&0>1/t?(t=-t,"-"):u;if(0>l){var p=dn.formatPrefix(t,s);t=p.scale(t),h=p.symbol}else t*=l;t=f(t,s),!o&&c&&(t=Sn(t));var d=i.length+t.length+(m?0:n.length),M=a>d?new Array(d=a-d+1).join(e):"";return m&&(t=Sn(M+t)),Dn&&t.replace(".",Dn),n+=i,("<"===r?n+t+M:">"===r?M+n+t:"^"===r?M.substring(0,d>>=1)+n+t+M.substring(d):n+(m?t:M+t))+h}};var kn=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Yn=dn.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=dn.round(t,x(t,n))).toFixed(Math.max(0,Math.min(20,x(t*(1+1e-15),n))))}}),Sn=v;if(Cn){var Fn=Cn.length;Sn=function(t){for(var n=t.lastIndexOf("."),e=n>=0?"."+t.substring(n+1):(n=t.length,""),r=[],u=0,i=Cn[0];n>0&&i>0;)r.push(t.substring(n-=i,n+i)),i=Cn[u=(u+1)%Fn];return r.reverse().join(Tn||"")+e}}dn.bisector=function(t){return{left:function(n,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=n.length);u>r;){var i=r+u>>>1;t.call(n,n[i],i)<e?r=i+1:u=i}return r},right:function(n,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=n.length);u>r;){var i=r+u>>>1;e<t.call(n,n[i],i)?u=i:r=i+1}return r}}};var Ln=dn.bisector(function(t){return t});dn.bisectLeft=Ln.left,dn.bisect=dn.bisectRight=Ln.right,dn.scale={},dn.scale.linear=function(){return _([0,1],[0,1],l,!1)},dn.scale.log=function(){return A(dn.scale.linear().domain([0,Math.LN10]),10,O,I,[1,10])};var An=dn.format(".0e");dn.time={};var On=Date,In=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];j.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Un.setUTCDate.apply(this._,arguments)},setDay:function(){Un.setUTCDay.apply(this._,arguments)},setFullYear:function(){Un.setUTCFullYear.apply(this._,arguments)},setHours:function(){Un.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Un.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Un.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Un.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Un.setUTCSeconds.apply(this._,arguments)},setTime:function(){Un.setTime.apply(this._,arguments)}};var Un=Date.prototype;dn.time.year=z(function(t){return t=dn.time.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),dn.time.years=dn.time.year.range,dn.time.years.utc=dn.time.year.utc.range,dn.time.day=z(function(t){var n=new On(1970,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),dn.time.days=dn.time.day.range,dn.time.days.utc=dn.time.day.utc.range,dn.time.dayOfYear=function(t){var n=dn.time.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},dn.requote=function(t){return t.replace(Hn,"\\$&")};var Hn=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,En="%a %e %b %X %Y",jn="%d.%m.%Y",zn="%H:%M:%S",Nn=Globalize.culture(__locale).calendar.days.names,Xn=Globalize.culture(__locale).calendar.days.namesAbbr,Pn=Globalize.culture(__locale).calendar.months.names,qn=Globalize.culture(__locale).calendar.months.namesAbbr,Gn=Globalize.culture().calendar.firstDay;In.forEach(function(t,n){t=t.toLowerCase(),n=7-n;var e=dn.time[t]=z(function(t){return(t=dn.time.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=dn.time.year(t).getDay();return Math.floor((dn.time.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});dn.time[t+"s"]=e.range,dn.time[t+"s"].utc=e.utc.range,dn.time[t+"OfYear"]=function(t){var e=dn.time.year(t).getDay();return Math.floor((dn.time.dayOfYear(t)+(e+n)%7)/7)}}),dn.time.week=dn.time[In[Gn].toLowerCase()],dn.time.weeks=dn.time[In[Gn].toLowerCase()].range,dn.time.weeks.utc=dn.time[In[Gn].toLowerCase()].utc.range,dn.time.weekOfYear=dn.time.sundayOfYear,dn.time.format=function(t){function n(n){for(var r,u,i,o=[],a=-1,c=0;++a<e;)37===t.charCodeAt(a)&&(o.push(t.substring(c,a)),null!=(u=Jn[r=t.charAt(++a)])&&(r=t.charAt(++a)),(i=Kn[r])&&(r=i(n,null==u?"e"===r?" ":"0":u)),o.push(r),c=a+1);return o.push(t.substring(c,a)),o.join("")}var e=t.length;return n.parse=function(n){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=X(e,t,n,0);if(r!=n.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var u=new On;return u.setFullYear(e.y,e.m,e.d),u.setHours(e.H,e.M,e.S,e.L),u},n.toString=function(){return t},n};var Rn=P(Nn),Bn=P(Xn),Wn=P(Pn),Zn=q(Pn),$n=P(qn),Vn=q(qn),Jn={"-":"",_:" ",0:"0"},Kn={a:function(t){return Xn[t.getDay()]},A:function(t){return Nn[t.getDay()]},b:function(t){return qn[t.getMonth()]},B:function(t){return Pn[t.getMonth()]},c:dn.time.format(En),d:function(t,n){return G(t.getDate(),n,2)},e:function(t,n){return G(t.getDate(),n,2)},H:function(t,n){return G(t.getHours(),n,2)},I:function(t,n){return G(t.getHours()%12||12,n,2)},j:function(t,n){return G(1+dn.time.dayOfYear(t),n,3)},L:function(t,n){return G(t.getMilliseconds(),n,3)},m:function(t,n){return G(t.getMonth()+1,n,2)},M:function(t,n){return G(t.getMinutes(),n,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,n){return G(t.getSeconds(),n,2)},U:function(t,n){return G(dn.time.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return G(dn.time.mondayOfYear(t),n,2)},x:dn.time.format(jn),X:dn.time.format(zn),y:function(t,n){return G(t.getFullYear()%100,n,2)},Y:function(t,n){return G(t.getFullYear()%1e4,n,4)},Z:sn,"%":function(){return"%"}},Qn={a:R,A:B,b:W,B:Z,c:$,d:en,e:en,H:rn,I:rn,L:an,m:nn,M:un,p:cn,S:on,x:V,X:J,y:Q,Y:K},te=/^\s*\d+/,ne=dn.map({am:0,pm:1});dn.time.hour=z(function(t){var n=t.getTimezoneOffset()/60;return new On(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),dn.time.hours=dn.time.hour.range,dn.time.hours.utc=dn.time.hour.utc.range,dn.time.minute=z(function(t){return new On(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),dn.time.minutes=dn.time.minute.range,dn.time.minutes.utc=dn.time.minute.utc.range,dn.time.month=z(function(t){return t=dn.time.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),dn.time.months=dn.time.month.range,dn.time.months.utc=dn.time.month.utc.range,dn.time.second=z(function(t){return new On(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),dn.time.seconds=dn.time.second.range,dn.time.seconds.utc=dn.time.second.utc.range;var ee=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],re=[[dn.time.second,1],[dn.time.second,5],[dn.time.second,15],[dn.time.second,30],[dn.time.minute,1],[dn.time.minute,5],[dn.time.minute,15],[dn.time.minute,30],[dn.time.hour,1],[dn.time.hour,3],[dn.time.hour,6],[dn.time.hour,12],[dn.time.day,1],[dn.time.day,2],[dn.time.week,1],[dn.time.month,1],[dn.time.month,3],[dn.time.year,1]],ue=[[dn.time.format("%Y"),E],[dn.time.format("%B"),function(t){return t.getMonth()}],[dn.time.format("%b %d"),function(t){return 1!=t.getDate()}],[dn.time.format("%a %d"),function(t){return t.getDay()!=Gn&&1!=t.getDate()}],[dn.time.format("%I %p"),function(t){return t.getHours()}],[dn.time.format("%I:%M"),function(t){return t.getMinutes()}],[dn.time.format(":%S"),function(t){return t.getSeconds()}],[dn.time.format(".%L"),function(t){return t.getMilliseconds()}]],ie=dn.scale.linear(),oe=hn(ue);return re.year=function(t,n){return ie.domain(t.map(mn)).ticks(n).map(gn)},dn.time.scale=function(){return fn(dn.scale.linear(),re,oe)},dn.ascending=function(t,n){return n>t?-1:t>n?1:t>=n?0:0/0},dn.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),u=+t[r-1],i=e-r;return i?u+i*(t[r]-u):u},dn.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(pn),t.length?dn.quantile(t.sort(dn.ascending),.5):void 0},dn}(),[].map||(Array.prototype.map=function(t,n){for(var e=this,r=e.length,u=[],i=0;r>i;)i in e&&(u[i]=t.call(n,e[i],i++,e));return u.lengh=r,u}),[].filter||(Array.prototype.filter=function(t,n,e,r,u){e=this,r=[];for(u in e)~~u+""==u&&u>=0&&t.call(n,e[u],+u,e)&&r.push(e[u]);return r}),[].forEach||(Array.prototype.forEach=function(t,n){for(var e=0,r=this.length;r>e;++e)t.call(n,this[e],e,this)});